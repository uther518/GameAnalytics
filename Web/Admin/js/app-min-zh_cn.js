/**
 * @license
 * Lo-Dash 1.2.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash -o ./dist/lodash.compat.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * Available under MIT license <http://lodash.com/license>
 */

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.

//     Backbone may be freely distributed under the MIT license.

/*
 RequireJS text 0.27.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

/**
 * @license RequireJS i18n 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/i18n for details
 */

/*! jQuery UI - v1.9.0 - 2012-10-15
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.datepicker.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */

/**
 * @license Highcharts JS v2.3.5 (2012-12-19)
 *
 * (c) 2009-2012 Torstein Hønsi
 *
 * License: www.highcharts.com/license
 */

/*! Copyright 2012, Ben Lin (http://dreamerslab.com/)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 1.0.14
 *
 * Requires: jQuery 1.2.3 ~ 1.9.0
 */

/* Copyright (c) 2010-2012 Marcus Westin */

/*
 * File:        jquery.dataTables.js
 * Version:     1.8.1
 * Description: Paginate, search and sort HTML tables
 * Author:      Allan Jardine (www.sprymedia.co.uk)
 * Created:     28/3/2008
 * Language:    Javascript
 * License:     GPL v2 or BSD 3 point style
 * Project:     Mtaala
 * Contact:     allan.jardine@sprymedia.co.uk
 * 
 * Copyright 2008-2011 Allan Jardine, all rights reserved.
 *
 * This source file is free software, under either the GPL v2 license or a
 * BSD style license, as supplied with this software.
 * 
 * This source file is distributed in the hope that it will be useful, but 
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 * 
 * For details please refer to: http://www.datatables.net
 */

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*!
 * jQuery blockUI plugin
 * Version 2.36 (16-NOV-2010)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2008 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */

/*

© 2011 by Jerry Sievert

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

(function(e){function B(n){function wt(e){return e&&typeof e=="object"&&!qt(e)&&nt.call(e,"__wrapped__")?e:new Pt(e)}function Ct(e){var t=e.length,n=t>=a;if(n){var r={},i=-1;while(++i<t){var s=u+e[i];(r[s]||(r[s]=[])).push(e[i])}}return function(t){if(n){var i=u+t;return r[i]&&Qn(r[i],t)>-1}return Qn(e,t)>-1}}function kt(e){return e.charCodeAt(0)}function Lt(e,t){var n=e.index,r=t.index;e=e.criteria,t=t.criteria;if(e!==t){if(e>t||typeof e=="undefined")return 1;if(e<t||typeof t=="undefined")return-1}return n<r?-1:1}function At(e,t,n,r){function a(){var r=arguments,f=s?this:t;i||(e=t[o]),n.length&&(r=r.length?(r=mt.call(r),u?r.concat(n):n.concat(r)):n);if(this instanceof a){Ht.prototype=e.prototype,f=new Ht,Ht.prototype=null;var l=e.apply(f,r);return ln(l)?l:f}return e.apply(f,r)}var i=fn(e),s=!n,o=t;if(s){var u=r;n=t}else if(!i){if(!r)throw new V;t=e}return a}function Ot(){var e={shadowedProps:S,arrays:"isArray(iterable)",bottom:"",init:"iterable",loop:"",top:"",useHas:!0,useKeys:!!Ut};for(var t,n=0;t=arguments[n];n++)for(var r in t)e[r]=t[r];var i=e.args;e.firstArg=/^[^,]+/.exec(i)[0];var s=q("hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectTypes","return function("+i+") {\n"+St(e)+"\n}");return s(nt,It,qt,mn,Ut,wt,P)}function Mt(e){return"\\"+H[e]}function _t(e){return Wt[e]}function Dt(e){return typeof e.toString!="function"&&typeof (e+"")=="string"}function Pt(e){this.__wrapped__=e}function Ht(){}function Bt(e){var t=!1;if(!e||ot.call(e)!=O||!Et.argsClass&&It(e))return t;var n=e.constructor;return(fn(n)?n instanceof n:Et.nodeClass||!Dt(e))?Et.ownLast?(Gt(e,function(e,n,r){return t=nt.call(r,n),!1}),t===!0):(Gt(e,function(e,n){t=n}),t===!1||nt.call(e,t)):t}function jt(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,s=n-t||0,o=i(s<0?0:s);while(++r<s)o[r]=e[t+r];return o}function Ft(e){return Xt[e]}function It(e){return ot.call(e)==T}function $t(e,n,r,i,s,o){var u=e;typeof n=="function"&&(i=r,r=n,n=!1);if(typeof r=="function"){r=typeof i=="undefined"?r:wt.createCallback(r,i,1),u=r(u);if(typeof u!="undefined")return u;u=e}var a=ln(u);if(a){var f=ot.call(u);if(!D[f]||!Et.nodeClass&&Dt(u))return u;var l=qt(u)}if(!a||!n)return a?l?jt(u):Vt({},u):u;var c=bt[f];switch(f){case C:case k:return new c(+u);case A:case _:return new c(u);case M:return c(u.source,d.exec(u))}s||(s=[]),o||(o=[]);var h=s.length;while(h--)if(s[h]==e)return o[h];return u=l?c(u.length):{},l&&(nt.call(e,"index")&&(u.index=e.index),nt.call(e,"input")&&(u.input=e.input)),s.push(e),o.push(u),(l?An:Yt)(e,function(e,i){u[i]=$t(e,n,r,t,s,o)}),u}function Jt(e,t,n){return $t(e,!0,t,n)}function Qt(e,t,n){var r;return t=wt.createCallback(t,n),Yt(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Zt(e){var t=[];return Gt(e,function(e,n){fn(e)&&t.push(n)}),t.sort()}function en(e,t){return e?nt.call(e,t):!1}function tn(e){var t=-1,n=Ut(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function nn(e){return e===!0||e===!1||ot.call(e)==C}function rn(e){return e?typeof e=="object"&&ot.call(e)==k:!1}function sn(e){return e?e.nodeType===1:!1}function on(e){var t=!0;if(!e)return t;var n=ot.call(e),r=e.length;return n==N||n==_||(Et.argsClass?n==T:It(e))||n==O&&typeof r=="number"&&fn(e.splice)?!r:(Yt(e,function(){return t=!1}),t)}function un(e,t,n,r,i,s){var u=n===o;if(typeof n=="function"&&!u){n=wt.createCallback(n,r,2);var a=n(e,t);if(typeof a!="undefined")return!!a}if(e===t)return e!==0||1/e==1/t;var f=typeof e,l=typeof t;if(e===e&&(!e||f!="function"&&f!="object")&&(!t||l!="function"&&l!="object"))return!1;if(e==null||t==null)return e===t;var c=ot.call(e),h=ot.call(t);c==T&&(c=O),h==T&&(h=O);if(c!=h)return!1;switch(c){case C:case k:return+e==+t;case A:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case M:case _:return e==X(t)}var p=c==N;if(!p){if(nt.call(e,"__wrapped__ ")||nt.call(t,"__wrapped__"))return un(e.__wrapped__||e,t.__wrapped__||t,n,r,i,s);if(c!=O||!Et.nodeClass&&(Dt(e)||Dt(t)))return!1;var d=!Et.argsObject&&It(e)?z:e.constructor,v=!Et.argsObject&&It(t)?z:t.constructor;if(d!=v&&!(fn(d)&&d instanceof d&&fn(v)&&v instanceof v))return!1}i||(i=[]),s||(s=[]);var m=i.length;while(m--)if(i[m]==e)return s[m]==t;var g=0;a=!0,i.push(e),s.push(t);if(p){m=e.length,g=t.length,a=g==e.length;if(!a&&!u)return a;while(g--){var y=m,b=t[g];if(u){while(y--)if(a=un(e[y],b,n,r,i,s))break}else if(!(a=un(e[g],b,n,r,i,s)))break}return a}return Gt(t,function(t,o,u){if(nt.call(u,o))return g++,a=nt.call(e,o)&&un(e[o],t,n,r,i,s)}),a&&!u&&Gt(e,function(e,t,n){if(nt.call(n,t))return a=--g>-1}),a}function an(e){return ft(e)&&!lt(parseFloat(e))}function fn(e){return typeof e=="function"}function ln(e){return e?P[typeof e]:!1}function cn(e){return pn(e)&&e!=+e}function hn(e){return e===null}function pn(e){return typeof e=="number"||ot.call(e)==A}function vn(e){return e?P[typeof e]&&ot.call(e)==M:!1}function mn(e){return typeof e=="string"||ot.call(e)==_}function gn(e){return typeof e=="undefined"}function yn(e,t,n){var r=arguments,i=0,s=2;if(!ln(e))return e;if(n===o)var u=r[3],a=r[4],f=r[5];else a=[],f=[],typeof n!="number"&&(s=r.length),s>3&&typeof r[s-2]=="function"?u=wt.createCallback(r[--s-1],r[s--],2):s>2&&typeof r[s-1]=="function"&&(u=r[--s]);while(++i<s)(qt(r[i])?An:Yt)(r[i],function(t,n){var r,i,s=t,l=e[n];if(t&&((i=qt(t))||dn(t))){var c=a.length;while(c--)if(r=a[c]==t){l=f[c];break}if(!r){var h;if(u){s=u(l,t);if(h=typeof s!="undefined")l=s}h||(l=i?qt(l)?l:[]:dn(l)?l:{}),a.push(t),f.push(l),h||(l=yn(l,t,o,u,a,f))}}else u&&(s=u(l,t),typeof s=="undefined"&&(s=t)),typeof s!="undefined"&&(l=s);e[n]=l});return e}function bn(e,t,n){var r=typeof t=="function",i={};if(r)t=wt.createCallback(t,n);else var s=Z.apply($,mt.call(arguments,1));return Gt(e,function(e,n,o){if(r?!t(e,n,o):Qn(s,n)<0)i[n]=e}),i}function wn(e){var t=-1,n=Ut(e),r=n.length,s=i(r);while(++t<r){var o=n[t];s[t]=[o,e[o]]}return s}function En(e,t,n){var r={};if(typeof t!="function"){var i=-1,s=Z.apply($,mt.call(arguments,1)),o=ln(e)?s.length:0;while(++i<o){var u=s[i];u in e&&(r[u]=e[u])}}else t=wt.createCallback(t,n),Gt(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function Sn(e){var t=-1,n=Ut(e),r=n.length,s=i(r);while(++t<r)s[t]=e[n[t]];return s}function xn(e){var t=-1,n=Z.apply($,mt.call(arguments,1)),r=n.length,s=i(r);Et.unindexedChars&&mn(e)&&(e=e.split(""));while(++t<r)s[t]=e[n[t]];return s}function Tn(e,t,n){var r=-1,i=e?e.length:0,s=!1;return n=(n<0?ht(0,i+n):n)||0,typeof i=="number"?s=(mn(e)?e.indexOf(t,n):Qn(e,t,n))>-1:zt(e,function(e){if(++r>=n)return!(s=e===t)}),s}function Nn(e,t,n){var r={};return t=wt.createCallback(t,n),An(e,function(e,n,i){n=X(t(e,n,i)),nt.call(r,n)?r[n]++:r[n]=1}),r}function Cn(e,t,n){var r=!0;t=wt.createCallback(t,n);if(qt(e)){var i=-1,s=e.length;while(++i<s)if(!(r=!!t(e[i],i,e)))break}else zt(e,function(e,n,i){return r=!!t(e,n,i)});return r}function kn(e,t,n){var r=[];t=wt.createCallback(t,n);if(qt(e)){var i=-1,s=e.length;while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}}else zt(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function Ln(e,t,n){t=wt.createCallback(t,n);if(!qt(e)){var o;return zt(e,function(e,n,r){if(t(e,n,r))return o=e,!1}),o}var r=-1,i=e.length;while(++r<i){var s=e[r];if(t(s,r,e))return s}}function An(e,t,n){if(t&&typeof n=="undefined"&&qt(e)){var r=-1,i=e.length;while(++r<i)if(t(e[r],r,e)===!1)break}else zt(e,t,n);return e}function On(e,t,n){var r={};return t=wt.createCallback(t,n),An(e,function(e,n,i){n=X(t(e,n,i)),(nt.call(r,n)?r[n]:r[n]=[]).push(e)}),r}function Mn(e,t){var n=mt.call(arguments,2),r=-1,s=typeof t=="function",o=e?e.length:0,u=i(typeof o=="number"?o:0);return An(e,function(e){u[++r]=(s?t:e[t]).apply(e,n)}),u}function _n(e,t,n){var r=-1,s=e?e.length:0,o=i(typeof s=="number"?s:0);t=wt.createCallback(t,n);if(qt(e))while(++r<s)o[r]=t(e[r],r,e);else zt(e,function(e,n,i){o[++r]=t(e,n,i)});return o}function Dn(e,t,n){var r=-Infinity,i=r;if(!t&&qt(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u>i&&(i=u)}}else t=!t&&mn(e)?kt:wt.createCallback(t,n),zt(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function Pn(e,t,n){var r=Infinity,i=r;if(!t&&qt(e)){var s=-1,o=e.length;while(++s<o){var u=e[s];u<i&&(i=u)}}else t=!t&&mn(e)?kt:wt.createCallback(t,n),zt(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function Bn(e,t,n,r){var i=arguments.length<3;t=wt.createCallback(t,r,4);if(qt(e)){var s=-1,o=e.length;i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else zt(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function jn(e,t,n,r){var i=e,s=e?e.length:0,o=arguments.length<3;if(typeof s!="number"){var u=Ut(e);s=u.length}else Et.unindexedChars&&mn(e)&&(i=e.split(""));return t=wt.createCallback(t,r,4),An(e,function(e,r,a){r=u?u[--s]:--s,n=o?(o=!1,i[r]):t(n,i[r],r,a)}),n}function Fn(e,t,n){return t=wt.createCallback(t,n),kn(e,function(e,n,r){return!t(e,n,r)})}function In(e){var t=-1,n=e?e.length:0,r=i(typeof n=="number"?n:0);return An(e,function(e){var n=et(vt()*(++t+1));r[t]=r[n],r[n]=e}),r}function qn(e){var t=e?e.length:0;return typeof t=="number"?t:Ut(e).length}function Rn(e,t,n){var r;t=wt.createCallback(t,n);if(qt(e)){var i=-1,s=e.length;while(++i<s)if(r=t(e[i],i,e))break}else zt(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function Un(e,t,n){var r=-1,s=e?e.length:0,o=i(typeof s=="number"?s:0);t=wt.createCallback(t,n),An(e,function(e,n,i){o[++r]={criteria:t(e,n,i),index:r,value:e}}),s=o.length,o.sort(Lt);while(s--)o[s]=o[s].value;return o}function zn(e){return e&&typeof e.length=="number"?Et.unindexedChars&&mn(e)?e.split(""):jt(e):Sn(e)}function Xn(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function Vn(e){var t=-1,n=e?e.length:0,r=Z.apply($,mt.call(arguments,1)),i=Ct(r),s=[];while(++t<n){var o=e[t];i(o)||s.push(o)}return s}function $n(e,t,n){var r=-1,i=e?e.length:0;t=wt.createCallback(t,n);while(++r<i)if(t(e[r],r,e))return r;return-1}function Jn(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=-1;t=wt.createCallback(t,n);while(++s<i&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[0]}return jt(e,0,pt(ht(0,r),i))}}function Kn(e,t,n,r){var i=-1,s=e?e.length:0,o=[];typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1),n!=null&&(n=wt.createCallback(n,r));while(++i<s){var u=e[i];n&&(u=n(u,i,e)),qt(u)?rt.apply(o,t?u:Kn(u)):o.push(u)}return o}function Qn(e,t,n){var r=-1,i=e?e.length:0;if(typeof n=="number")r=(n<0?ht(0,i+n):n||0)-1;else if(n)return r=rr(e,t),e[r]===t?r:-1;while(++r<i)if(e[r]===t)return r;return-1}function Gn(e,t,n){if(!e)return[];var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=wt.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return jt(e,0,pt(ht(0,i-r),i))}function Yn(e){var t=arguments,n=t.length,r={0:{}},i=-1,s=e?e.length:0,o=s>=a,f=[],l=f;e:while(++i<s){var c=e[i];if(o)var h=u+c,p=r[0][h]?!(l=r[0][h]):l=r[0][h]=[];if(p||Qn(l,c)<0){o&&l.push(c);var d=n;while(--d)if(!(r[d]||(r[d]=Ct(t[d])))(c))continue e;f.push(c)}}return f}function Zn(e,t,n){if(e){var r=0,i=e.length;if(typeof t!="number"&&t!=null){var s=i;t=wt.createCallback(t,n);while(s--&&t(e[s],s,e))r++}else{r=t;if(r==null||n)return e[i-1]}return jt(e,ht(0,i-r))}}function er(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?ht(0,r+n):pt(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function tr(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,s=ht(0,G((t-e)/n)),o=i(s);while(++r<s)o[r]=e,e+=n;return o}function nr(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=wt.createCallback(t,n);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:ht(0,t);return jt(e,r)}function rr(e,t,n,r){var i=0,s=e?e.length:i;n=n?wt.createCallback(n,r,1):Cr,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function ir(e){return qt(e)||(arguments[0]=e?mt.call(e):$),sr(Z.apply($,arguments))}function sr(e,t,n,r){var i=-1,s=e?e.length:0,o=[],f=o;typeof t!="boolean"&&t!=null&&(r=n,n=t,t=!1);var l=!t&&s>=a;if(l)var c={};n!=null&&(f=[],n=wt.createCallback(n,r));while(++i<s){var h=e[i],p=n?n(h,i,e):h;if(l)var d=u+p,v=c[d]?!(f=c[d]):f=c[d]=[];if(t?!i||f[f.length-1]!==p:v||Qn(f,p)<0)(n||l)&&f.push(p),o.push(h)}return o}function or(e){var t=-1,n=e?e.length:0,r=n?Dn(Hn(e,"length")):0,s=i(r);while(++t<n){var o=-1,u=e[t];while(++o<r)(s[o]||(s[o]=i(n)))[t]=u[o]}return s}function ur(e){return Vn(e,mt.call(arguments,1))}function ar(e){var t=-1,n=e?Dn(Hn(arguments,"length")):0,r=i(n);while(++t<n)r[t]=Hn(arguments,t);return r}function fr(e,t){var n=-1,r=e?e.length:0,i={};while(++n<r){var s=e[n];t?i[s]=t[n]:i[s[0]]=s[1]}return i}function lr(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}}function cr(e,t){return Et.fastBind||ut&&arguments.length>2?ut.call.apply(ut,arguments):At(e,t,mt.call(arguments,2))}function hr(e){var t=arguments.length>1?Z.apply($,mt.call(arguments,1)):Zt(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=cr(e[i],e)}return e}function pr(e,t){return At(e,t,mt.call(arguments,2),o)}function dr(){var e=arguments;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function vr(e,t,n){if(e==null)return Cr;var r=typeof e;if(r!="function"){if(r!="object")return function(t){return t[e]};var i=Ut(e);return function(t){var n=i.length,r=!1;while(n--)if(!(r=un(t[i[n]],e[i[n]],o)))break;return r}}return typeof t!="undefined"?n===1?function(n){return e.call(t,n)}:n===2?function(n,r){return e.call(t,n,r)}:n===4?function(n,r,i,s){return e.call(t,n,r,i,s)}:function(n,r,i){return e.call(t,n,r,i)}:e}function mr(e,t,n){function f(){i=u=null,a&&(s=e.apply(o,r))}var r,i,s,o,u,a=!0;if(n===!0){var l=!0;a=!1}else n&&P[typeof n]&&(l=n.leading,a="trailing"in n?n.trailing:a);return function(){return r=arguments,o=this,Y(u),!i&&l?(i=!0,s=e.apply(o,r)):u=st(f,t),s}}function gr(e){var n=mt.call(arguments,1);return st(function(){e.apply(t,n)},1)}function yr(e,n){var r=mt.call(arguments,2);return st(function(){e.apply(t,r)},n)}function br(e,t){var n={};return function(){var r=u+(t?t.apply(this,arguments):arguments[0]);return nt.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}}function wr(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Er(e){return At(e,mt.call(arguments,1))}function Sr(e){return At(e,mt.call(arguments,1),null,o)}function xr(e,t,n){function l(){o=null,f&&(u=new I,i=e.apply(s,r))}var r,i,s,o,u=0,a=!0,f=!0;return n===!1?a=!1:n&&P[typeof n]&&(a="leading"in n?n.leading:a,f="trailing"in n?n.trailing:f),function(){var n=new I;!o&&!a&&(u=n);var f=t-(n-u);return r=arguments,s=this,f<=0?(Y(o),o=null,u=n,i=e.apply(s,r)):o||(o=st(l,f)),i}}function Tr(e,t){return function(){var n=[e];return rt.apply(n,arguments),t.apply(this,n)}}function Nr(e){return e==null?"":X(e).replace(b,_t)}function Cr(e){return e}function kr(e){An(Zt(e),function(t){var n=wt[t]=e[t];wt.prototype[t]=function(){var e=this.__wrapped__,t=[e];rt.apply(t,arguments);var r=n.apply(wt,t);return e&&typeof e=="object"&&e==r?this:new Pt(r)}})}function Lr(){return n._=K,this}function Or(e,t){return e==null&&t==null&&(t=1),e=+e||0,t==null&&(t=e,e=0),e+et(vt()*((+t||0)-e+1))}function Mr(e,n){var r=e?e[n]:t;return fn(r)?e[n]():r}function _r(e,n,r){var i=wt.templateSettings;e||(e=""),r=Kt({},r,i);var s=Kt({},r.imports,i.imports),o=Ut(s),u=Sn(s),a,h=0,d=r.interpolate||y,m="__p += '",g=W((r.escape||y).source+"|"+d.source+"|"+(d===v?p:y).source+"|"+(r.evaluate||y).source+"|$","g");e.replace(g,function(t,n,r,i,s,o){return r||(r=i),m+=e.slice(h,o).replace(w,Mt),n&&(m+="' +\n__e("+n+") +\n'"),s&&(a=!0,m+="';\n"+s+";\n__p += '"),r&&(m+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=o+t.length,t}),m+="';\n";var b=r.variable,E=b;E||(b="obj",m="with ("+b+") {\n"+m+"\n}\n"),m=(a?m.replace(f,""):m).replace(l,"$1").replace(c,"$1;"),m="function("+b+") {\n"+(E?"":b+" || ("+b+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var S="\n/*\n//@ sourceURL="+(r.sourceURL||"/lodash/template/source["+x++ +"]")+"\n*/";try{var T=q(o,"return "+m+S).apply(t,u)}catch(N){throw N.source=m,N}return n?T(n):(T.source=m,T)}function Dr(e,t,n){e=(e=+e)>-1?e:0;var r=-1,s=i(e);t=wt.createCallback(t,n,1);while(++r<e)s[r]=t(r);return s}function Pr(e){return e==null?"":X(e).replace(h,Ft)}function Hr(e){var t=++s;return X(e==null?"":e)+t}function Br(e,t){return t(e),e}function jr(){return X(this.__wrapped__)}function Fr(){return this.__wrapped__}n=n?j.defaults(e.Object(),n,j.pick(e,E)):e;var i=n.Array,F=n.Boolean,I=n.Date,q=n.Function,R=n.Math,U=n.Number,z=n.Object,W=n.RegExp,X=n.String,V=n.TypeError,$=i(),J=z(),K=n._,Q=W("^"+X(J.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),G=R.ceil,Y=n.clearTimeout,Z=$.concat,et=R.floor,tt=Q.test(tt=z.getPrototypeOf)&&tt,nt=J.hasOwnProperty,rt=$.push,it=n.setImmediate,st=n.setTimeout,ot=J.toString,ut=Q.test(ut=ot.bind)&&ut,at=Q.test(at=i.isArray)&&at,ft=n.isFinite,lt=n.isNaN,ct=Q.test(ct=z.keys)&&ct,ht=R.max,pt=R.min,dt=n.parseInt,vt=R.random,mt=$.slice,gt=Q.test(n.attachEvent),yt=ut&&!/\n|true/.test(ut+gt),bt={};bt[N]=i,bt[C]=F,bt[k]=I,bt[O]=z,bt[A]=U,bt[M]=W,bt[_]=X;var Et=wt.support={};(function(){var e=function(){this.x=1},t={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var r in new e)n.push(r);for(r in arguments);Et.argsObject=arguments.constructor==z&&!(arguments instanceof i),Et.argsClass=It(arguments),Et.enumPrototypes=e.propertyIsEnumerable("prototype"),Et.fastBind=ut&&!yt,Et.ownLast=n[0]!="x",Et.nonEnumArgs=r!=0,Et.nonEnumShadows=!/valueOf/.test(n),Et.spliceObjects=($.splice.call(t,0,1),!t[0]),Et.unindexedChars="x"[0]+z("x")[0]!="xx";try{Et.nodeClass=ot.call(document)!=O||!!({toString:0}+"")}catch(s){Et.nodeClass=!0}})(1),wt.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:v,variable:"",imports:{_:wt}};var St=function(e){var t="var index, iterable = "+e.firstArg+", result = "+e.init+";\nif (!iterable) return result;\n"+e.top+";\n";e.arrays?(t+="var length = iterable.length; index = -1;\nif ("+e.arrays+") {  ",Et.unindexedChars&&(t+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),t+="\n  while (++index < length) {\n    "+e.loop+"\n  }\n}\nelse {  "):Et.nonEnumArgs&&(t+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+e.loop+"\n    }\n  } else {  "),Et.enumPrototypes&&(t+="\n  var skipProto = typeof iterable == 'function';\n  ");if(e.useHas&&e.useKeys)t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? keys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",Et.enumPrototypes&&(t+="if (!(skipProto && index == 'prototype')) {\n  "),t+=e.loop,Et.enumPrototypes&&(t+="}\n"),t+="  }  ";else{t+="\n  for (index in iterable) {";if(Et.enumPrototypes||e.useHas)t+="\n    if (",Et.enumPrototypes&&(t+="!(skipProto && index == 'prototype')"),Et.enumPrototypes&&e.useHas&&(t+=" && "),e.useHas&&(t+="hasOwnProperty.call(iterable, index)"),t+=") {    ";t+=e.loop+";    ";if(Et.enumPrototypes||e.useHas)t+="\n    }";t+="\n  }    ";if(Et.nonEnumShadows){t+="\n\n  var ctor = iterable.constructor;\n      ";for(var n=0;n<7;n++)t+="\n  index = '"+e.shadowedProps[n]+"';\n  if (",e.shadowedProps[n]=="constructor"&&(t+="!(ctor && ctor.prototype === iterable) && "),t+="hasOwnProperty.call(iterable, index)) {\n    "+e.loop+"\n  }      "}}if(e.arrays||Et.nonEnumArgs)t+="\n}";return t+=e.bottom+";\nreturn result",t},xt={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},Tt={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},Nt={top:"if (!objectTypes[typeof iterable]) return result;\n"+Tt.top,arrays:!1};Pt.prototype=wt.prototype,Et.argsClass||(It=function(e){return e?nt.call(e,"callee"):!1});var qt=at||function(e){return e?typeof e=="object"&&ot.call(e)==N:!1},Rt=Ot({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)",arrays:!1}),Ut=ct?function(e){return ln(e)?Et.enumPrototypes&&typeof e=="function"||Et.nonEnumArgs&&e.length&&It(e)?Rt(e):ct(e):[]}:Rt,zt=Ot(Tt),Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xt=tn(Wt),Vt=Ot(xt,{top:xt.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = lodash.createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Kt=Ot(xt),Gt=Ot(Tt,Nt,{useHas:!1}),Yt=Ot(Tt,Nt);fn(/x/)&&(fn=function(e){return typeof e=="function"&&ot.call(e)==L});var dn=tt?function(e){if(!e||ot.call(e)!=O||!Et.argsClass&&It(e))return!1;var t=e.valueOf,n=typeof t=="function"&&(n=tt(t))&&tt(n);return n?e==n||tt(e)==n:Bt(e)}:Bt,Hn=_n,Wn=kn;yt&&r&&typeof it=="function"&&(gr=cr(it,n));var Ar=dt(m+"08")==8?dt:function(e,t){return dt(mn(e)?e.replace(g,""):e,t||0)};return wt.after=lr,wt.assign=Vt,wt.at=xn,wt.bind=cr,wt.bindAll=hr,wt.bindKey=pr,wt.compact=Xn,wt.compose=dr,wt.countBy=Nn,wt.createCallback=vr,wt.debounce=mr,wt.defaults=Kt,wt.defer=gr,wt.delay=yr,wt.difference=Vn,wt.filter=kn,wt.flatten=Kn,wt.forEach=An,wt.forIn=Gt,wt.forOwn=Yt,wt.functions=Zt,wt.groupBy=On,wt.initial=Gn,wt.intersection=Yn,wt.invert=tn,wt.invoke=Mn,wt.keys=Ut,wt.map=_n,wt.max=Dn,wt.memoize=br,wt.merge=yn,wt.min=Pn,wt.omit=bn,wt.once=wr,wt.pairs=wn,wt.partial=Er,wt.partialRight=Sr,wt.pick=En,wt.pluck=Hn,wt.range=tr,wt.reject=Fn,wt.rest=nr,wt.shuffle=In,wt.sortBy=Un,wt.tap=Br,wt.throttle=xr,wt.times=Dr,wt.toArray=zn,wt.union=ir,wt.uniq=sr,wt.unzip=or,wt.values=Sn,wt.where=Wn,wt.without=ur,wt.wrap=Tr,wt.zip=ar,wt.zipObject=fr,wt.collect=_n,wt.drop=nr,wt.each=An,wt.extend=Vt,wt.methods=Zt,wt.object=fr,wt.select=kn,wt.tail=nr,wt.unique=sr,kr(wt),wt.clone=$t,wt.cloneDeep=Jt,wt.contains=Tn,wt.escape=Nr,wt.every=Cn,wt.find=Ln,wt.findIndex=$n,wt.findKey=Qt,wt.has=en,wt.identity=Cr,wt.indexOf=Qn,wt.isArguments=It,wt.isArray=qt,wt.isBoolean=nn,wt.isDate=rn,wt.isElement=sn,wt.isEmpty=on,wt.isEqual=un,wt.isFinite=an,wt.isFunction=fn,wt.isNaN=cn,wt.isNull=hn,wt.isNumber=pn,wt.isObject=ln,wt.isPlainObject=dn,wt.isRegExp=vn,wt.isString=mn,wt.isUndefined=gn,wt.lastIndexOf=er,wt.mixin=kr,wt.noConflict=Lr,wt.parseInt=Ar,wt.random=Or,wt.reduce=Bn,wt.reduceRight=jn,wt.result=Mr,wt.runInContext=B,wt.size=qn,wt.some=Rn,wt.sortedIndex=rr,wt.template=_r,wt.unescape=Pr,wt.uniqueId=Hr,wt.all=Cn,wt.any=Rn,wt.detect=Ln,wt.foldl=Bn,wt.foldr=jn,wt.include=Tn,wt.inject=Bn,Yt(wt,function(e,t){wt.prototype[t]||(wt.prototype[t]=function(){var t=[this.__wrapped__];return rt.apply(t,arguments),e.apply(wt,t)})}),wt.first=Jn,wt.last=Zn,wt.take=Jn,wt.head=Jn,Yt(wt,function(e,t){wt.prototype[t]||(wt.prototype[t]=function(t,n){var r=e(this.__wrapped__,t,n);return t==null||n&&typeof t!="function"?r:new Pt(r)})}),wt.VERSION="1.2.1",wt.prototype.toString=jr,wt.prototype.value=Fr,wt.prototype.valueOf=Fr,zt(["join","pop","shift"],function(e){var t=$[e];wt.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),zt(["push","reverse","sort","unshift"],function(e){var t=$[e];wt.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),zt(["concat","slice","splice"],function(e){var t=$[e];wt.prototype[e]=function(){return new Pt(t.apply(this.__wrapped__,arguments))}}),Et.spliceObjects||zt(["pop","shift","splice"],function(e){var t=$[e],n=e=="splice";wt.prototype[e]=function(){var e=this.__wrapped__,r=t.apply(e,arguments);return e.length===0&&delete e[0],n?new Pt(r):r}}),wt}var t,n=typeof exports=="object"&&exports,r=typeof module=="object"&&module&&module.exports==n&&module,i=typeof global=="object"&&global;if(i.global===i||i.window===i)e=i;var s=0,o={},u=+(new Date)+"",a=200,f=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,c=/(__e\(.*?\)|\b__t\)) \+\n'';/g,h=/&(?:amp|lt|gt|quot|#39);/g,p=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,d=/\w*$/,v=/<%=([\s\S]+?)%>/g,m=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",g=RegExp("^["+m+"]*0+(?=.$)"),y=/($^)/,b=/[&<>"']/g,w=/['\n\r\t\u2028\u2029\\]/g,E=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],S=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],x=0,T="[object Arguments]",N="[object Array]",C="[object Boolean]",k="[object Date]",L="[object Function]",A="[object Number]",O="[object Object]",M="[object RegExp]",_="[object String]",D={};D[L]=!1,D[T]=D[N]=D[C]=D[k]=D[A]=D[O]=D[M]=D[_]=!0;var P={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},H={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},j=B();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(e._=j,define("underscore",[],function(){return j})):n&&!n.nodeType?r?(r.exports=j)._=j:n._=j:e._=j})(this);var math=this.math={};math.avg=math.average=function(e,t){if(e&&e.length>0){t=t||0;var n=math.sum(e)/e.length;return parseFloat(n.toFixed(t))}return 0},math.median=function(e){if(!e||e.length==0)return 0;var e=e.slice(0),t=(e.length+1)/2,n=math.sort(e),r=n.length%2?n[t-1]:(n[t-1.5]+n[t-.5])/2;return Math.round(r)},math.pow=function(e,t){if(_.isNumber(e))return Math.pow(e,t);if(_.isArray(e))return _.map(e,function(e){return _.pow(e,t)})},math.scale=function(e,t){var t=t||1,n=_.max(e);return _.map(e,function(e){return e*(t/n)})},math.percent=function(e,t,n){var r=math.sum(e),t=t||2;return _.map(e,function(e){var i;return r!=0?i=parseFloat((e/r).toFixed(t)):i=0,n&&(i=math.toPercent(i,n)),i})},math.toPercent=function(e,t){return t=t||0,(Math.round(e*Math.pow(10,t+2))/Math.pow(10,t)).toFixed(t)+"%"},math.twoArraysDivide=function(e,t,n){var r=[],n=n||0;for(var i=0;i<e.length;i++)e[i]===0||t[i]===0?r[i]=0:r[i]=parseFloat((e[i]/t[i]).toFixed(n));return r},math.slope=function(e,t){return(t[1]-e[1])/(t[0]-e[0])},math.sort=function(e){return _.sortBy(e)},math.stdDeviation=math.sigma=function(e){return Math.sqrt(_(e).variance())},math.sum=function(e,t){if(_.isArray(e)&&typeof e[0]=="number")var n=e;else var t=t||"value",n=_(e).pluck(t);var r=0;for(var i=0,s=n.length;i<s;i++)r+=n[i]-0;return r},math.transpose=function(e){var t=[];return _(e).each(function(e,n){_(e).each(function(e,r){t[r]||(t[r]=[]),t[r][n]=e})}),t},math.variance=function(e){var t=_(e).mean(),n=function(e){return _(e-t).pow(2)};return _(e).chain().map(n).mean().value()},math.zscore=function(e,t){if(_.isArray(e)&&typeof e[0]=="number")var n=e;else var t=t||"value",n=_(e).pluck(t);var r=n.length,i=_(n).mean(),s=_(n).stdDeviation(),o=function(e){return(e-i)/s};return _(n).map(o)},math.movingAvg=function(e,t){var n,r,i=[];for(r=t-1;r<=e.length;r++)n=e.slice(r-t,r),n.length===t&&i.push(_.mean(n));return i},_.mixin(math),function(){var e=this,t=e.Backbone,n=Array.prototype,r=n.slice,i=n.splice,s;typeof exports!="undefined"?s=exports:s=e.Backbone={},s.VERSION="0.9.2";var o=e._;!o&&typeof require!="undefined"&&(o=require("underscore")),s.$=e.jQuery||e.Zepto||e.ender,s.noConflict=function(){return e.Backbone=t,this},s.emulateHTTP=!1,s.emulateJSON=!1;var u=/\s+/,a=s.Events={on:function(e,t,n){var r,i,s;if(!t)return this;e=e.split(u),r=this._callbacks||(this._callbacks={});while(i=e.shift())s=r[i]||(r[i]=[]),s.push(t,n);return this},off:function(e,t,n){var r,i,s,a;if(!(i=this._callbacks))return this;if(!(e||t||n))return delete this._callbacks,this;e=e?e.split(u):o.keys(i);while(r=e.shift()){if(!(s=i[r])||!t&&!n){delete i[r];continue}for(a=s.length-2;a>=0;a-=2)t&&s[a]!==t||n&&s[a+1]!==n||s.splice(a,2)}return this},trigger:function(e){var t,n,r,i,s,o,a,f;if(!(n=this._callbacks))return this;f=[],e=e.split(u);for(i=1,s=arguments.length;i<s;i++)f[i-1]=arguments[i];while(t=e.shift()){if(a=n.all)a=a.slice();if(r=n[t])r=r.slice();if(r)for(i=0,s=r.length;i<s;i+=2)r[i].apply(r[i+1]||this,f);if(a){o=[t].concat(f);for(i=0,s=a.length;i<s;i+=2)a[i].apply(a[i+1]||this,o)}}return this}};a.bind=a.on,a.unbind=a.off;var f=s.Model=function(e,t){var n;e||(e={}),t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(e=this.parse(e));if(n=o.result(this,"defaults"))e=o.extend({},n,e);this.attributes={},this._escapedAttributes={},this.cid=o.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=o.clone(this.attributes),this.initialize.apply(this,arguments)};o.extend(f.prototype,a,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return o.clone(this.attributes)},sync:function(){return s.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.get(e);return this._escapedAttributes[e]=o.escape(n==null?"":""+n)},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s;o.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n||(n={});if(!r)return this;r instanceof f&&(r=r.attributes);if(n.unset)for(i in r)r[i]=void 0;if(!this._validate(r,n))return!1;this.idAttribute in r&&(this.id=r[this.idAttribute]);var u=n.changes={},a=this.attributes,l=this._escapedAttributes,c=this._previousAttributes||{};for(i in r){s=r[i];if(!o.isEqual(a[i],s)||n.unset&&o.has(a,i))delete l[i],(n.silent?this._silent:u)[i]=!0;n.unset?delete a[i]:a[i]=s,!o.isEqual(c[i],s)||o.has(a,i)!==o.has(c,i)?(this.changed[i]=s,n.silent||(this._pending[i]=!0)):(delete this.changed[i],delete this._pending[i])}return n.silent||this.change(n),this},unset:function(e,t){return t=o.extend({},t,{unset:!0}),this.set(e,null,t)},clear:function(e){return e=o.extend({},e,{unset:!0}),this.set(o.clone(this.attributes),e)},fetch:function(e){e=e?o.clone(e):{};var t=this,n=e.success;return e.success=function(r,i,s){if(!t.set(t.parse(r,s),e))return!1;n&&n(t,r,e)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s;o.isObject(e)||e==null?(r=e,n=t):(r={},r[e]=t),n=n?o.clone(n):{};if(n.wait){if(!this._validate(r,n))return!1;i=o.clone(this.attributes)}var u=o.extend({},n,{silent:!0});if(r&&!this.set(r,n.wait?u:n))return!1;if(!r&&!this.isValid())return!1;var a=this,f=n.success;n.success=function(e,t,i){s=!0;var u=a.parse(e,i);n.wait&&(u=o.extend(r||{},u));if(!a.set(u,n))return!1;f&&f(a,e,n)};var l=this.sync(this.isNew()?"create":"update",this,n);return!s&&n.wait&&(this.clear(u),this.set(i,u)),l},destroy:function(e){e=e?o.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e)};if(this.isNew())return e.success(),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=o.result(this,"urlRoot")||o.result(this.collection,"url")||k();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(e){e||(e={});var t=this._changing;this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var r=o.extend({},e.changes,this._silent);this._silent={};for(var n in r)this.trigger("change:"+n,this,this.get(n),e);if(t)return this;while(!o.isEmpty(this._pending)){this._pending={},this.trigger("change",this,e);for(var n in this.changed){if(this._pending[n]||this._silent[n])continue;delete this.changed[n]}this._previousAttributes=o.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return e==null?!o.isEmpty(this.changed):o.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?o.clone(this.changed):!1;var t,n=!1,r=this._previousAttributes;for(var i in e){if(o.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return o.clone(this._previousAttributes)},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=o.extend({},this.attributes,e);var n=this.validate(e,t);return n?(t&&t.error&&t.error(this,n,t),this.trigger("error",this,n,t),!1):!0}});var l=s.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&(t.parse&&(e=this.parse(e)),this.reset(e,{silent:!0,parse:t.parse}))};o.extend(l.prototype,a,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return s.sync.apply(this,arguments)},add:function(e,t){var n,r,s,u,a,f,l={},c={},h=[];t||(t={}),e=o.isArray(e)?e.slice():[e];for(n=0,s=e.length;n<s;n++){if(!(u=e[n]=this._prepareModel(e[n],t)))throw new Error("Can't add an invalid model to a collection");a=u.cid,f=u.id;if(l[a]||this._byCid[a]||f!=null&&(c[f]||this._byId[f])){h.push(n);continue}l[a]=c[f]=u}n=h.length;while(n--)h[n]=e.splice(h[n],1)[0];for(n=0,s=e.length;n<s;n++)(u=e[n]).on("all",this._onModelEvent,this),this._byCid[u.cid]=u,u.id!=null&&(this._byId[u.id]=u);this.length+=s,r=t.at!=null?t.at:this.models.length,i.apply(this.models,[r,0].concat(e));if(t.merge)for(n=0,s=h.length;n<s;n++)(u=this._byId[h[n].id])&&u.set(h[n],t);this.comparator&&t.at==null&&this.sort({silent:!0});if(t.silent)return this;for(n=0,s=this.models.length;n<s;n++){if(!l[(u=this.models[n]).cid])continue;t.index=n,u.trigger("add",u,this,t)}return this},remove:function(e,t){var n,r,i,s;t||(t={}),e=o.isArray(e)?e.slice():[e];for(n=0,r=e.length;n<r;n++){s=this.getByCid(e[n])||this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byCid[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,o.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return o.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return o.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),(!e||!e.silent)&&this.trigger("reset",this,e),this},pluck:function(e){return o.invoke(this.models,"get",e)},reset:function(e,t){for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return this._reset(),e&&this.add(e,o.extend({silent:!0},t)),(!t||!t.silent)&&this.trigger("reset",this,t),this},fetch:function(e){e=e?o.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r,i,s){t[e.add?"add":"reset"](t.parse(r,s),e),n&&n(t,r,e)},this.sync("read",this,e)},create:function(e,t){var n=this;t=t?o.clone(t):{},e=this._prepareModel(e,t);if(!e)return!1;t.wait||n.add(e,t);var r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},chain:function(){return o(this.models).chain()},_reset:function(e){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(n.attributes,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var c=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortedIndex","toArray","size","first","head","take","initial","rest","tail","last","without","indexOf","shuffle","lastIndexOf","isEmpty"];o.each(c,function(e){l.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),o[e].apply(o,t)}});var h=["groupBy","countBy","sortBy"];o.each(h,function(e){l.prototype[e]=function(t,n){var r=o.isFunction(t)?t:function(e){return e.get(t)};return o[e](this.models,r,n)}});var p=s.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},d=/:\w+/g,v=/\*\w+/g,m=/[-[\]{}()+?.,\\^$|#\s]/g;o.extend(p.prototype,a,{initialize:function(){},route:function(e,t,n){return o.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),s.history.route(e,o.bind(function(r){var i=this._extractParameters(e,r);n&&n.apply(this,i),this.trigger.apply(this,["route:"+t].concat(i)),s.history.trigger("route",this,t,i)},this)),this},navigate:function(e,t){s.history.navigate(e,t)},_bindRoutes:function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},_routeToRegExp:function(e){return e=e.replace(m,"\\$&").replace(d,"([^/]+)").replace(v,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var g=s.History=function(){this.handlers=[],o.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},y=/^[#\/]/,b=/^\/+|\/+$/g,w=/msie [\w.]+/,E=/\/$/;g.started=!1,o.extend(g.prototype,a,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(E,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return decodeURIComponent(e.replace(y,""))},start:function(e){if(g.started)throw new Error("Backbone.history has already been started");g.started=!0,this.options=o.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=w.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(b,"/"),r&&this._wantsHashChange&&(this.iframe=s.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?s.$(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?s.$(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,u=i.pathname.replace(/[^/]$/,"$&/")===this.root&&!i.search;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!u)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&u&&i.hash&&(this.fragment=this.getHash().replace(y,""),this.history.replaceState({},document.title,this.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){s.$(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),g.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=o.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!g.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=(e.indexOf(this.root)!==0?this.root:"")+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),s.history=new g;var S=s.View=function(e){this.cid=o.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName"];o.extend(S.prototype,a,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},dispose:function(){return this.undelegateEvents(),this.model&&this.model.off(null,null,this),this.collection&&this.collection.off(null,null,this),this},remove:function(){return this.dispose(),this.$el.remove(),this},make:function(e,t,n){var r=document.createElement(e);return t&&s.$(r).attr(t),n!=null&&s.$(r).html(n),r},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof s.$?e:s.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=o.result(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];o.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(x),i=r[1],s=r[2];n=o.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.bind(i,n):this.$el.delegate(s,i,n)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=o.extend({},this.options,e));for(var t=0,n=T.length;t<n;t++){var r=T[t];e[r]&&(this[r]=e[r])}this.options=e},_ensureElement:function(){if(!this.el){var e=o.extend({},o.result(this,"attributes"));this.id&&(e.id=o.result(this,"id")),this.className&&(e["class"]=o.result(this,"className")),this.setElement(this.make(o.result(this,"tagName"),e),!1)}else this.setElement(this.el,!1)}});var N={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};s.sync=function(e,t,n){var r=N[e];n||(n={});var i={type:r,dataType:"json"};n.url||(i.url=o.result(t,"url")||k()),!n.data&&t&&(e==="create"||e==="update")&&(i.contentType="application/json",i.data=JSON.stringify(t)),s.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),s.emulateHTTP&&(r==="PUT"||r==="DELETE")&&(s.emulateJSON&&(i.data._method=r),i.type="POST",i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r)}),i.type!=="GET"&&!s.emulateJSON&&(i.processData=!1);var u=n.success;n.success=function(e,r,i){u&&u(e,r,i),t.trigger("sync",t,e,n)};var a=n.error;return n.error=function(e,r,i){a&&a(t,e,n),t.trigger("error",t,e,n)},s.ajax(o.extend(i,n))},s.ajax=function(){return s.$.ajax.apply(s.$,arguments)};var C=function(e,t){function i(){this.constructor=r}var n=this,r;return e&&o.has(e,"constructor")?r=e.constructor:r=function(){n.apply(this,arguments)},i.prototype=n.prototype,r.prototype=new i,e&&o.extend(r.prototype,e),o.extend(r,n,t),r.__super__=n.prototype,r};f.extend=l.extend=p.extend=S.extend=C;var k=function(){throw new Error('A "url" property or function must be specified')}}.call(this),define("backbone",["underscore"],function(e){return function(){var t,n;return t||e.Backbone}}(this)),define("libs/base64",{keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i="",s,o,u,a="",f=0;do n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this.keyStr.charAt(s)+this.keyStr.charAt(o)+this.keyStr.charAt(u)+this.keyStr.charAt(a),n=r=i="",s=o=u=a="";while(f<e.length);return t},decode:function(e){var t="",n,r,i="",s,o,u,a="",f=0,l=/[^A-Za-z0-9\+\/\=]/g;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do s=this.keyStr.indexOf(e.charAt(f++)),o=this.keyStr.indexOf(e.charAt(f++)),u=this.keyStr.indexOf(e.charAt(f++)),a=this.keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i)),n=r=i="",s=o=u=a="";while(f<e.length);return t}}),define("utils/urlUtil",["libs/base64"],function(e){return{parse2Obj:function(e){e=this.decode(e);var t={};if(e){var n=e.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");t[i[0]]=decodeURI(i[1])}}return t},parse2Str:function(e){var t=[];for(attr in e)t.push(attr+"="+e[attr]);var n=t.join("&");return n=encodeURI(n),this.encode(n)},changeHash:function(e,t){location.hash=e+t},changeHashByParams:function(e,t){e=e||location.hash.match(/#page\/[^\/]*\//),t=t||Params,location.hash=e+this.parse2Str(t)},encode:function(t){return e.encode(t)},decode:function(t){return e.decode(t)}}}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,n=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r=typeof location!="undefined"&&location.href,i=r&&location.protocol&&location.protocol.replace(/\:/,""),s=r&&location.hostname,o=r&&(location.port||void 0),u=[];define("text",[],function(){var a,f,l;return typeof window!="undefined"&&window.navigator&&window.document?f=function(e,t){var n=a.createXhr();n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(l=require.nodeRequire("fs"),f=function(e,t){t(l.readFileSync(e,"utf8"))}):typeof Packages!="undefined"&&(f=function(e,t){var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),n=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),i,s,o="";try{i=new java.lang.StringBuffer,(s=n.readLine())&&s.length()&&s.charAt(0)===65279&&(s=s.substring(1));for(i.append(s);(s=n.readLine())!==null;)i.append(r),i.append(s);o=String(i.toString())}finally{n.close()}t(o)}),a={version:"0.27.0",strip:function(e){if(e){var e=e.replace(t,""),r=e.match(n);r&&(e=r[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,n,r;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(n=0;n<3;n++){r=e[n];try{t=new ActiveXObject(r)}catch(i){}if(t){e=[r];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:f,parseName:function(e){var t=!1,n=e.indexOf("."),r=e.substring(0,n),e=e.substring(n+1,e.length),n=e.indexOf("!");return n!==-1&&(t=e.substring(n+1,e.length),t=t==="strip",e=e.substring(0,n)),{moduleName:r,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i=a.xdRegExp.exec(e),s;return i?(e=i[2],i=i[3],i=i.split(":"),s=i[1],i=i[0],(!e||e===t)&&(!i||i===n)&&(!s&&!i||s===r)):!0},finishLoad:function(e,t,n,r,i){n=t?a.strip(n):n,i.isBuild&&i.inlineText&&(u[e]=n),r(n)},load:function(e,t,n,u){var f=a.parseName(e),l=f.moduleName+"."+f.ext,c=t.toUrl(l),h=u&&u.text&&u.text.useXhr||a.useXhr;!r||h(c,i,s,o)?a.get(c,function(t){a.finishLoad(e,f.strip,t,n,u)}):t([l],function(e){a.finishLoad(f.moduleName+"."+f.ext,f.strip,e,n,u)})},write:function(e,t,n){if(t in u){var r=a.jsEscape(u[t]);n.asModule(e+"!"+t,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,t,n,r,i){var t=a.parseName(t),s=t.moduleName+"."+t.ext,o=n.toUrl(t.moduleName+"."+t.ext)+".js";a.load(s,n,function(){var t=function(e){return r(o,e)};t.asModule=function(e,t){return r.asModule(e,o,t)},a.write(e,s,t,i)},i)}}})}(),define("text!templates/public/datePicker.html",[],function(){return'<a class="time" id="choseDate">\r	<span>\r	<%\r		if(!!style && style == \'summary\'){\r	%>\r			<p><%=Public.DatePicker.dateChooser%><b id="displayDateTip"></b><br>\r				<font class="calendar" id="dateValue"><%=Public.DatePicker.pleaseSelectDate%></font>\r			</p>\r	<%	}else{ %>\r			<font class="calendar" id="dateValue" style="width:182px"><%=Public.DatePicker.pleaseSelectDate%></font>\r	<%	}%>\r	</span>\r	\r</a>\r<div class="timetxt hide panone" id="datePanel" style="width: 278px; left: 0; ">\r	<div id="dateBanner" class="timetop"> \r		<a data="0" style="margin-left: 0px"><%=GameCommon.today%></a>|\r		<a data="-1"><%=Public.DatePicker.yesterday%></a>|\r		<a data="-7" class="on_choose"><%=Public.DatePicker.nearly7Days%></a>|\r		<a data="-30"><%=Public.DatePicker.nearly30Days%></a> | \r<!-- 			<select	id="selectMonth"> -->\r<!-- 				<option value="-1" disabled="true">月份</option> -->\r<!-- 			</select> |  -->\r		<a data="99"><%=GameCommon.all%></a> \r	</div>\r	<p class="TimeDef">\r		<%=Public.DatePicker.custom%><input type="text" id="startTime" name="startTime" class="Timeinput" /><%=GameCommon.to%> <input type="text" id="endTime"	name="endTime" class="Timeinput mrnone" />\r	</p>\r	<div class="opeDiv after">\r		<small id="datamessage"	style="display: none; margin-left: 30px;" class="l"></small>\r		<a class="timecolse r Confirm" id="confirmBtn"><%=GameCommon.confirm%></a>\r		<a class="r Cancel" id="cancelBtn"><%=GameCommon.cancel%></a>\r	</div>\r</div>\r'}),function(){function t(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function n(e,t,n,r,i){var s=r+t+"/"+i;require._fileExists(e.toUrl(s))&&n.push(s)}function r(e,t,n){var i;for(i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||n)?e[i]=t[i]:typeof t[i]=="object"&&r(e[i],t[i],n)}var e=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config();return{version:"2.0.1",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f,l=e.exec(i),c=l[1],h=l[4],p=l[5],d=h.split("-"),v=[],m={},g,y,b="";l[5]?(c=l[1],f=c+p):(f=i,p=l[4],h=s.locale,h||(h=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),d=h.split("-"));if(a.isBuild){v.push(f),n(o,"root",v,c,p);for(g=0;g<d.length;g++)y=d[g],b+=(b?"-":"")+y,n(o,b,v,c,p);o(v,function(){u()})}else o([f],function(e){var n=[],i;t("root",e,n,v,c,p);for(g=0;g<d.length;g++)i=d[g],b+=(b?"-":"")+i,t(b,e,n,v,c,p);o(v,function(){var t,i,s;for(t=n.length-1;t>-1&&n[t];t--){s=n[t],i=e[s];if(i===!0||i===1)i=o(c+s+"/"+p);r(m,i)}u(m)})})}}})}(),define("nls/gameI18N",[],function(){var e={};return e[currentLocale]=!0,e}),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return!e(t).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.9.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(n[u]=e.isPlainObject(a)?e.widget.extend({},n[u],a):a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():new i(o,this)}),f}},e.Widget=function(e,t){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n){n?(t=e(t),this.bindings=this.bindings.add(t)):(n=t,t=this.element);var r=this;e.each(n,function(n,i){function s(){if(r.options.disabled===!0||e(this).hasClass("ui-state-disabled"))return;return(typeof i=="string"?r[i]:i).apply(r,arguments)}typeof i!="string"&&(s.guid=i.guid=i.guid||s.guid||e.guid++);var o=n.match(/^(\w+)\s*(.*)$/),u=o[1]+r.eventNamespace,a=o[2];a?r.widget().delegate(a,u,s):t.bind(u,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{version:"1.9.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return w.nodeType===9?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=l:t.at[0]==="center"&&(m.left+=l/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),d<c&&i(o+u)<d&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return i.length===1&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),s.length===1&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}$.extend($.ui,{datepicker:{version:"1.9.0"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(r[0]!=1||r[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var E=this._getDaysInMonth(a,f-1);if(l<=E)break;f++,l-=E}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar" width="100%" border="0" cellspacing="0" cellpadding="0"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.0",window["DP_jQuery_"+dpuuid]=$}(jQuery),$.datepicker.regional.zh_cn={closeText:"关闭",prevText:"上月",nextText:"下月",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy-mm-dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},$.datepicker.setDefaults($.datepicker.regional[currentLocale]),define("jquery.datepicker",function(){}),define("views/public/DatePicker",["backbone","utils/urlUtil","text!templates/public/datePicker.html","i18n!nls/gameI18N","jquery.datepicker"],function(e,t,n,r){var i=e.View.extend({events:{"click #choseDate":"toggleDatePanel","click #startTime,#endTime":"showDatePicker","click #cancelBtn":"hideDatePanel","click #confirmBtn":"saveChoosedDate","click #dateBanner>a":"chooseBannerDate"},initialize:function(){this.style=this.options.style,this.timeFormat="YYYY-MM-DD",this.starttime=this.yymmdd2yyyy(Params.startTime),Date.compare(Params.productRegistTime,this.starttime)==1&&(this.starttime=Params.productRegistTime),this.endtime=this.yymmdd2yyyy(Params.endTime),this.render(),this.$datePanel=$("#datePanel"),this.$startTimeInput=$("#startTime"),this.$endTimeInput=$("#endTime"),this.datepickerOptions={minDate:new Date(Params.productRegistTime),maxDate:new Date,dateFormat:"yy-mm-dd"}},render:function(){this.$el.html(_.template(n,{style:this.style,Public:r.Public,GameCommon:r.GameCommon})),$("#startTime,#endTime").datepicker({minDate:new Date(Params.productRegistTime),maxDate:new Date,dateFormat:"yy-mm-dd"}),this.showDateToHtml()},toggleDatePanel:function(){this.$datePanel.slideToggle()},hideDatePanel:function(){this.$datePanel.slideUp()},showDatePicker:function(e){$(e.currentTarget).datepicker()},saveChoosedDate:function(){var e=this.$startTimeInput.val(),n=this.$endTimeInput.val();if(!e||!n){this.hideDatePanel();return}if(Date.compare(e,n)==1){$("#datamessage").html(r.Player.CustomRetention.dateIsWrong).show();return}this.starttime=e,this.endtime=n,this.showDateToHtml(),this.saveTimeToParams(),t.changeHashByParams(),this.hideDatePanel()},chooseBannerDate:function(e){var t=$(e.currentTarget).attr("data");t==99?this.starttime=Params.productRegistTime:t==-7||t==-30?Date.compare((new Date).add({days:parseInt(t)}).toFormat(this.timeFormat),Params.productRegistTime)<=0?this.starttime=Params.productRegistTime:this.starttime=(new Date).add({days:parseInt(t)}).toFormat(this.timeFormat):this.starttime=(new Date).add({days:parseInt(t)}).toFormat(this.timeFormat),t==-1||t==0?this.endtime=this.starttime:this.endtime=(new Date).toFormat(this.timeFormat),this.$startTimeInput.val(this.starttime),this.$endTimeInput.val(this.endtime),this.saveChoosedDate()},showDateToHtml:function(){this.starttime&&this.endtime&&(this.starttime!=this.endtime?$("#dateValue").html(this.starttime+" ~ "+this.endtime):$("#dateValue").html(this.starttime))},saveTimeToParams:function(){Params.startTime=parseInt(this.formatDate(this.starttime)),Params.endTime=parseInt(this.formatDate(this.endtime))},saveTimeToServer:function(){var e="/servlet/TenddataSaveServlet",t={starttime:this.starttime,endtime:this.endtime,timecc:Math.random()};$.getJSON(e,t)},formatDate:function(e){return(""+e).replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3")},yymmdd2yyyy:function(e){return(""+e).replace(/(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")}});return i}),define("text!templates/public/select.html",[],function(){return'<a class="time" id="selectBtn" >\r	<span>\r		<font class="Filterbut"><%=Public.Select.filter%></font>\r	</span>\r</a>\r<div class="timetxt hide" id="selectPanel" style="width:490px; right:0">\r    <!-- 渠道 -->\r    <div id="partnerDIV">\r    <div class="brdediv">\r        <font class="l">\r            <%=GameCommon.channel%>：\r        </font>\r        <a id="removeHaveChoosed" type="partner" class="r partner"><%=Public.Select.noFilter%></a>\r        <div class="clear">\r        </div>\r    </div>\r    <div id="partnerList" class="Sievexx">\r    </div>\r    </div>\r    \r    <!-- 区服 -->\r    <div id="gameserverDIV">\r    <div class="brdediv">\r        <font class="l">\r            <%=Player.NewPlayer.regionService%>：\r        </font>\r        <a id="removeHaveChoosed" type="gameserver" class="r gameserver"><%=Public.Select.noFilter%></a>\r        <div class="clear">\r        </div>\r    </div>\r    <div id="gameserverList" class="Sievexx">\r    </div>\r    </div>\r	<div class="opeDiv after">\r		<a class="Sievecolse r Confirm" id="confirmBtn"><%=GameCommon.confirm%></a>\r		<a class="Sievecolse r Cancel" id="cancelBtn"><%=GameCommon.cancel%></a>\r	</div>\r</div>'}),define("utils/ajax-utils",["jquery"],function(e){return{ajax:function(t){var n=t.type||"post",r;n=="post"?r={url:t.url,data:JSON.stringify(t.$entity||t.data),type:"post",contentType:"application/json",dataType:"json",cache:!1,success:function(e,n,r){t.$callback?t.$callback(n,r,e):t.success(e,n,r)}}:n=="get"&&(r={url:t.url,data:t.data,type:"get",dataType:"json",cache:!1,success:function(e,n,r){t.$callback?t.$callback(n,r,e):t.success(e,n,r)}}),e.ajax(r)}}}),define("models/BaseModel",["underscore","utils/ajax-utils"],function(e,t){return{init:function(n){var r={};return e.each(n,function(e){e&&(r[e.name]=function(n){var r=e.type||"post";n.url=e.url,n.type=r,t.ajax(n)})}),r}}}),define("models/select/Select",["models/BaseModel"],function(e){var t=[{name:"fetchSelect",url:"/v1/select/fetchSelect"}];return e.init(t)}),define("views/public/SelectView",["backbone","text!templates/public/select.html","utils/urlUtil","models/select/Select","i18n!nls/gameI18N"],function(e,t,n,r,i){var s=e.View.extend({events:{"click #selectBtn":"toggleSelectPanel","click #partnerList>a":"toggleChoose","click #gameserverList>a":"toggleChoose","click #removeHaveChoosed":"removeHaveChoosed","click #selectPanel #confirmBtn":"confirm","click #selectPanel #cancelBtn":"cancel"},initialize:function(){this.render(),this.requestData(),this.$selectPanel=$("#selectPanel"),this.isShowPartner=this.options.partner===undefined?!0:this.options.partner,this.isShowGameServer=this.options.gameserver===undefined?!0:this.options.gameserver},render:function(){$(this.el).html(_.template(t,i))},toggleSelectPanel:function(){this.$selectPanel.slideToggle()},toggleChoose:function(e){$(e.currentTarget).toggleClass("border"),$(e.currentTarget).parent().attr("id")=="gameserverList"?$("#gameserverDIV a.gameserver").removeClass("hover"):$("#partnerDIV a.partner").removeClass("hover")},removeHaveChoosed:function(e){var t=$(e.currentTarget).attr("type");$(e.currentTarget).addClass("hover"),t=="gameserver"?$("#gameserverList>a").removeClass("border"):t=="partner"&&$("#partnerList>a").removeClass("border")},requestData:function(){_this=this,r.fetchSelect({data:Params,success:function(e){var t=e.partnerList,n=e.gameserverList,r="",i=[];_.each(n,function(e,t){var n="",s=Params.gameserverID.indexOf(e.item);s!=-1&&(n="border",i.push(e.value)),r+="<a title='"+e.value+"' data='"+e.item+"' class='"+n+"'>"+e.value+"</a>"}),$("#gameserverList").html(r);var s="",o=[];_.each(t,function(e,t){var n="",r=Params.partnerID.indexOf(e.item);r!=-1&&(n="border",o.push(e.value)),s+="<a title='"+e.value+"' data='"+e.item+"' class='"+n+"'>"+e.value+"</a>"}),$("#partnerList").html(s),_this.isShowGameServer||$("#gameserverDIV").hide(),_this.isShowPartner||$("#partnerDIV").hide(),PartnerModel.partnerNames=o.join(","),GameServerModel.gameserverNames=i.join(","),_this.showChoosedInPage(o,i)}})},confirm:function(){this.$selectPanel.slideUp();var e=$('#partnerList>a[class="border"]'),t=[],r=[];gameserverIds=[],gameserverNames=[],_.each(e,function(e){t.push($(e).attr("data")),r.push($(e).html())}),this.partnerID=t.join(","),this.partnerNames=r.join(","),e=$('#gameserverList>a[class="border"]'),_.each(e,function(e){gameserverIds.push($(e).attr("data")),gameserverNames.push($(e).html())}),this.gameserverID=gameserverIds.join(","),this.gameserverNames=gameserverNames.join(","),this.showChoosedInPage(r,gameserverNames),this.save(),n.changeHashByParams()},cancel:function(){$("#gameserverList>a").each(function(){var e=$(this).attr("data");Params.gameserverID.indexOf(e)==-1&&$(this).removeClass("border")}),$("#partnerList>a").each(function(){var e=$(this).attr("data");Params.partnerID.indexOf(e)==-1&&$(this).removeClass("border")}),this.$selectPanel.slideUp()},showChoosedInPage:function(e,t){var n="";this.isShowPartner&&e.length>0&&(n+=i.GameCommon.channel+"：",_.each(e,function(e){n+="<font>"+e+"</font>"}),n+="<br/>"),this.isShowGameServer&&t.length>0&&(n+=i.Player.NewPlayer.regionService+"：",_.each(t,function(e){n+="<font>"+e+"</font>"})),$("#selectVersion").html(n),(this.isShowPartner&&e.length||this.isShowGameServer&&t.length)&&$("#showSelectedPartners").show()},save:function(){PartnerModel={partnerID:this.partnerID,partnerNames:this.partnerNames},Params.partnerID=this.partnerID,GameServerModel={gameserverID:this.gameserverID,gameserverNames:this.gameserverNames},Params.gameserverID=this.gameserverID}});return s}),define("models/player/NewPlayer",["models/BaseModel"],function(e){var t=[{name:"fetchInstallList",url:"/v1/newPlayer/installList"},{name:"fetchNewPlayerList",url:"/v1/newPlayer/newPlayerList"},{name:"fetchConversionList",url:"/v1/newPlayer/conversionList"},{name:"fetchLocationList",url:"/v1/newPlayer/locationList"},{name:"fetchChannelList",url:"/v1/newPlayer/channelList"},{name:"fetchGenderList",url:"/v1/newPlayer/genderList"},{name:"fetchAgeList",url:"/v1/newPlayer/ageList"},{name:"fetchAccountTypeList",url:"/v1/newPlayer/accountTypeList"},{name:"fetchInstallNewPlayerList",url:"/v1/newPlayer/fetchInstallNewPlayerList"}];return e.init(t)}),define("models/player/Retention",["models/BaseModel"],function(e){var t=[{name:"fetchDay1Day7Day30Retention",url:"/v1/retention/retentionList"},{name:"fetchRetentionUserAnalys",url:"/v1/retention/retentionUserAnalys"},{name:"fetchYesterdayPerHourUserNumList",url:"/v1/retention/yesterdayPerHourUserNumList"},{name:"fetchTodayPerHourUserNumList",url:"/v1/retention/todayPerHourUserNumList"},{name:"fetchRecentPlayerList",url:"/v1/retention/recentPlayerList"},{name:"fetchACUList",url:"/v1/retention/acuList"},{name:"fetchPCUList",url:"/v1/retention/pcuList"}];return e.init(t)}),define("models/player/ActivePlayer",["models/BaseModel"],function(e){var t=[{name:"fetchDauList",url:"/v1/activity/dauList"},{name:"fetchWauList",url:"/v1/activity/wauList"},{name:"fetchMauList",url:"/v1/activity/mauList"},{name:"fetchDauDivideMauList",url:"/v1/activity/dauDivideMauList"},{name:"fetchGroupedPlayerList",url:"/v1/activity/groupedPlayer"}];return e.init(t)}),define("models/revenue/IncomeData",["models/BaseModel"],function(e){var t=[{name:"incomeNumList",url:"/v1/incomeData/incomeNumList"},{name:"chargeTimesList",url:"/v1/incomeData/chargeTimesList"},{name:"chargePlayerNumList",url:"/v1/incomeData/chargePlayerNumList"},{name:"levelIncomeNumDistribution",url:"/v1/incomeData/levelIncomeNumDistribution"},{name:"levelChargePlayerNumDistribution",url:"/v1/incomeData/levelChargePlayerNumDistribution"},{name:"locationIncomeDistribution",url:"/v1/incomeData/locationIncomeDistribution"},{name:"partnerIncomeDistribution",url:"/v1/incomeData/partnerIncomeDistribution"},{name:"ageGroupIncomeDistribution",url:"/v1/incomeData/ageGroupIncomeDistribution"},{name:"sexIncomeDistribution",url:"/v1/incomeData/sexIncomeDistribution"},{name:"fetchChargePlayerNumsBetweenDays",url:"/v1/incomeData/chargePlayerNum"},{name:"fetchIncomeNumsBetweenDays",url:"/v1/incomeData/incomeNum"},{name:"fetchNewAndOldChargePlayers",url:"/v1/incomeData/newAndOldChargePlayers"}];return e.init(t)}),define("models/revenue/PayPermeate",["models/BaseModel"],function(e){var t=[{name:"dayPayRateList",url:"/v1/payPermeate/dayPayRateList"},{name:"weekPayRateList",url:"/v1/payPermeate/weekPayRateList"},{name:"monthPayRateList",url:"/v1/payPermeate/monthPayRateList"},{name:"dayARPUList",url:"/v1/payPermeate/dayARPUList"},{name:"monthARPUList",url:"/v1/payPermeate/monthARPUList"},{name:"dayARPPUList",url:"/v1/payPermeate/dayARPPUList"},{name:"monthARPPUList",url:"/v1/payPermeate/monthARPPUList"},{name:"fetchDailyRateOfPay",url:"/v1/payPermeate/fetchDailyRateOfPay"},{name:"fetchDailyARPU",url:"/v1/payPermeate/fetchDailyARPU"},{name:"fetchDailyARPPU",url:"/v1/payPermeate/fetchDailyARPPU"}];return e.init(t)}),define("models/concurrent/ConcurrentUser",["models/BaseModel"],function(e){var t=[{name:"fetchLastMinsUserNum",url:"/v1/concurrent/lastMinsUserNum"},{name:"fetchMaxUserNum",url:"/v1/concurrent/maxUserNum"},{name:"fetchYesterdayPerHourUserNumList",url:"/v1/concurrent/yesterdayPerHourUserNumList"},{name:"fetchTodayPerHourUserNumList",url:"/v1/concurrent/todayPerHourUserNumList"},{name:"fetchRecentPlayerList",url:"/v1/concurrent/recentPlayerList"},{name:"fetchACUList",url:"/v1/concurrent/acuList"},{name:"fetchPCUList",url:"/v1/concurrent/pcuList"},,{name:"fetchACUPCU",url:"/v1/concurrent/acupcu"}];return e.init(t)}),define("models/player/Behavior",["models/BaseModel"],function(e){var t=[{name:"fetchAvgGameTimesList",url:"/v1/behavior/avgGameTimesList"},{name:"fetchGameFrequencyList",url:"/v1/behavior/gameFrequencyList"},{name:"fetchGameDurationTimeList",url:"/v1/behavior/avgGameDurationList"},{name:"fetchGameTimesList",url:"/v1/behavior/gameTimesList"},{name:"fetchIntervalList",url:"/v1/behavior/intervalList"}];return e.init(t)}),define("models/Constant",{NEW_PLAYER:"newPlayer",ACTIVE_PLAYER:"activePlayer",CHARGE_PLAYER:"chargePlayer",ALL_PLAYER:"allPlayer",FIRST_DAY_LEVEL:"firstDayLevel",FIRST_DAY_LOGIN_TIMES:"firstDayLoginTimes",FIRST_DAY_TIME_CONSUME:"firstDayTimeConsume",IS_FIRST_DAY_CHARGE:"isFirstDayCharge",SEX:"sex",AGE:"age",LOCATION:"location",LEVEL:"level",PARTNER:"partner",TIME:"time",ACCOUNT_TYPE:"accout",CARRIER:"carrier",MOBILE:"mobile",PIXEL:"pixel",NETWORK:"network",MOBILE_OS:"mobileos",LIFETIME:"lifetime",TABLE_DATA_KEY:"tableDataKey",TABLE_HEAD:"thead",TABLE_BODY:"tbody",EXCEL_NAME:"excelName",DAYS_07:"7",DAYS_14:"14",DAYS_30:"30"}),function(){function xt(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e}function Tt(){var e=0,t=arguments,n=t.length,r={};for(;e<n;e++)r[t[e++]]=t[e];return r}function Nt(e,t){return parseInt(e,t||10)}function Ct(e){return typeof e=="string"}function kt(e){return typeof e=="object"}function Lt(e){return Object.prototype.toString.call(e)==="[object Array]"}function At(e){return typeof e=="number"}function Ot(e){return r.log(e)/r.LN10}function Mt(e){return r.pow(10,e)}function _t(e,t){var n=e.length;while(n--)if(e[n]===t){e.splice(n,1);break}}function Dt(t){return t!==e&&t!==null}function Pt(e,t,n){var r,i="setAttribute",s;if(Ct(t))Dt(n)?e[i](t,n):e&&e.getAttribute&&(s=e.getAttribute(t));else if(Dt(t)&&kt(t))for(r in t)e[i](r,t[r]);return s}function Ht(e){return Lt(e)?e:[e]}function Bt(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++){n=e[t];if(typeof n!="undefined"&&n!==null)return n}}function jt(t,n){m&&n&&n.opacity!==e&&(n.filter="alpha(opacity="+n.opacity*100+")"),xt(t.style,n)}function Ft(e,n,r,i,s){var o=t.createElement(e);return n&&xt(o,n),s&&jt(o,{padding:0,border:W,margin:0}),r&&jt(o,r),i&&i.appendChild(o),o}function It(e,t){var n=function(){};return n.prototype=new e,xt(n.prototype,t),n}function qt(e){return e=(e||0).toString(),e.indexOf(".")>-1?e.split(".")[1].length:0}function Rt(e,t,n,r){var i=O.lang,s=e,o=t===-1?qt(e):isNaN(t=f(t))?2:t,u=n===undefined?i.decimalPoint:n,a=r===undefined?i.thousandsSep:r,l=s<0?"-":"",c=String(Nt(s=f(+s||0).toFixed(o))),h=c.length>3?c.length%3:0;return l+(h?c.substr(0,h)+a:"")+c.substr(h).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?u+f(s-c).toFixed(o).slice(2):"")}function Ut(e,t){return(new Array((t||2)+1-String(e).length)).join(0)+e}function zt(e,t,n){var r=e[t];e[t]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),n.apply(this,e)}}function Wt(e,t,n,r){var i,s;n=Bt(n,1),i=e/n,t||(t=[1,2,2.5,5,10],r&&r.allowDecimals===!1&&(n===1?t=[1,2,5,10]:n<=.1&&(t=[1/n])));for(s=0;s<t.length;s++){e=t[s];if(i<=(t[s]+(t[s+1]||t[s]))/2)break}return e*=n,e}function Xt(e,t){var n=t||[[G,[1,2,5,10,20,25,50,100,200,500]],[Y,[1,2,5,10,15,30]],[Z,[1,2,5,10,15,30]],[et,[1,2,3,4,6,8,12]],[tt,[1,2]],[nt,[1,2]],[rt,[1,2,3,4,6]],[it,null]],r=n[n.length-1],i=P[r[0]],s=r[1],o,u;for(u=0;u<n.length;u++){r=n[u],i=P[r[0]],s=r[1];if(n[u+1]){var a=(i*s[s.length-1]+P[n[u+1][0]])/2;if(e<=a)break}}return i===P[it]&&e<5*i&&(s=[1,2,5]),i===P[it]&&e<5*i&&(s=[1,2,5]),o=Wt(e/i,s),{unitRange:i,count:o,unitName:r[0]}}function Vt(e,t,n,r){var i=[],o,u={},a=O.global.useUTC,f,l=new Date(t),c=e.unitRange,h=e.count;if(Dt(t)){c>=P[Y]&&(l.setMilliseconds(0),l.setSeconds(c>=P[Z]?0:h*s(l.getSeconds()/h))),c>=P[Z]&&l[gt](c>=P[et]?0:h*s(l[ct]()/h)),c>=P[et]&&l[yt](c>=P[tt]?0:h*s(l[ht]()/h)),c>=P[tt]&&l[bt](c>=P[rt]?1:h*s(l[dt]()/h)),c>=P[rt]&&(l[wt](c>=P[it]?0:h*s(l[vt]()/h)),f=l[mt]()),c>=P[it]&&(f-=f%h,l[Et](f)),c===P[nt]&&l[bt](l[dt]()-l[pt]()+Bt(r,1)),o=1,f=l[mt]();var p=l.getTime(),d=l[vt](),v=l[dt](),m=a?0:(864e5+l.getTimezoneOffset()*60*1e3)%864e5;while(p<n)i.push(p),c===P[it]?p=lt(f+o*h,0):c===P[rt]?p=lt(f,d+o*h):!!a||c!==P[tt]&&c!==P[nt]?(p+=c*h,c<=P[et]&&p%P[tt]===m&&(u[p]=tt)):p=lt(f,d,v+o*h*(c===P[tt]?1:7)),o++;i.push(p)}return i.info=xt(e,{higherRanks:u,totalRange:c*h}),i}function $t(){this.color=0,this.symbol=0}function Jt(e,t){var n=e.length,r,i;for(i=0;i<n;i++)e[i].ss_i=i;e.sort(function(e,n){return r=t(e,n),r===0?e.ss_i-n.ss_i:r});for(i=0;i<n;i++)delete e[i].ss_i}function Kt(e){var t=e.length,n=e[0];while(t--)e[t]<n&&(n=e[t]);return n}function Qt(e){var t=e.length,n=e[0];while(t--)e[t]>n&&(n=e[t]);return n}function Gt(e,t){var n;for(n in e)e[n]&&e[n]!==t&&e[n].destroy&&e[n].destroy(),delete e[n]}function Yt(e){A||(A=Ft(j)),e&&A.appendChild(e),A.innerHTML=""}function Zt(e,t){var r="Highcharts error #"+e+": www.highcharts.com/errors/"+e;if(t)throw r;n.console&&console.log(r)}function en(e){return parseFloat(e.toPrecision(14))}function tn(e,t){_=Bt(e,t.animation)}function Sn(){var e=O.global.useUTC,t=e?"getUTC":"get",n=e?"setUTC":"set";lt=e?Date.UTC:function(e,t,n,r,i,s){return(new Date(e,t,Bt(n,1),Bt(r,0),Bt(i,0),Bt(s,0))).getTime()},ct=t+"Minutes",ht=t+"Hours",pt=t+"Day",dt=t+"Date",vt=t+"Month",mt=t+"FullYear",gt=n+"Minutes",yt=n+"Hours",bt=n+"Date",wt=n+"Month",Et=n+"FullYear"}function xn(e){return O=hn(O,e),Sn(),O}function Tn(){return O}function Cn(){}function Dn(e,t,n){this.axis=e,this.pos=t,this.type=n||"",this.isNew=!0,n||this.addLabel()}function Pn(e,t){return this.axis=e,t&&(this.options=t,this.id=t.id),this}function Hn(e,t,n,r,i,s){var o=e.chart.inverted;this.axis=e,this.isNegative=n,this.options=t,this.x=r,this.stack=i,this.percent=s==="percent",this.alignOptions={align:t.align||(o?n?"left":"right":"center"),verticalAlign:t.verticalAlign||(o?"middle":n?"bottom":"top"),y:Bt(t.y,o?4:n?14:-6),x:Bt(t.x,o?n?-6:6:0)},this.textAlign=t.textAlign||(o?n?"right":"left":"center")}function Bn(){this.init.apply(this,arguments)}function jn(e,t){var n=t.borderWidth,r=t.style,i=Nt(r.padding);this.chart=e,this.options=t,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=e.renderer.label("",0,0,t.shape,null,null,t.useHTML,null,"tooltip").attr({padding:i,fill:t.backgroundColor,"stroke-width":n,r:t.borderRadius,zIndex:8}).css(r).css({padding:0}).hide().add(),T||this.label.shadow(t.shadow),this.shared=t.shared}function Fn(e,t){var n=T?"":t.chart.zoomType;this.zoomX=/x/.test(n),this.zoomY=/y/.test(n),this.options=t,this.chart=e,this.init(e,t.tooltip)}function In(e){this.init(e)}function qn(){this.init.apply(this,arguments)}var e,t=document,n=window,r=Math,i=r.round,s=r.floor,o=r.ceil,u=r.max,a=r.min,f=r.abs,l=r.cos,c=r.sin,h=r.PI,p=h*2/360,d=navigator.userAgent,v=n.opera,m=/msie/i.test(d)&&!v,g=t.documentMode===8,y=/AppleWebKit/.test(d),b=/Firefox/.test(d),w=/(Mobile|Android|Windows Phone)/.test(d),E="http://www.w3.org/2000/svg",S=!!t.createElementNS&&!!t.createElementNS(E,"svg").createSVGRect,x=b&&parseInt(d.split("Firefox/")[1],10)<4,T=!S&&!m&&!!t.createElement("canvas").getContext,N,C=t.documentElement.ontouchstart!==e,k={},L=0,A,O,M,_,D,P,H=function(){},B=[],j="div",F="absolute",I="relative",q="hidden",R="highcharts-",U="visible",z="px",W="none",X="M",V="L",$="rgba(192,192,192,"+(S?1e-4:.002)+")",J="",K="hover",Q="select",G="millisecond",Y="second",Z="minute",et="hour",tt="day",nt="week",rt="month",it="year",st="fill",ot="linearGradient",ut="stops",at="stroke",ft="stroke-width",lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St={};n.Highcharts={},M=function(e,t,n){if(!Dt(t)||isNaN(t))return"Invalid date";e=Bt(e,"%Y-%m-%d %H:%M:%S");var r=new Date(t),s,o=r[ht](),u=r[pt](),a=r[dt](),f=r[vt](),l=r[mt](),c=O.lang,h=c.weekdays,p={a:h[u].substr(0,3),A:h[u],d:Ut(a),e:a,b:c.shortMonths[f],B:c.months[f],m:Ut(f+1),y:l.toString().substr(2,2),Y:l,H:Ut(o),I:Ut(o%12||12),l:o%12||12,M:Ut(r[ct]()),p:o<12?"AM":"PM",P:o<12?"am":"pm",S:Ut(r.getSeconds()),L:Ut(i(t%1e3),3)};for(s in p)while(e.indexOf("%"+s)!==-1)e=e.replace("%"+s,p[s]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},$t.prototype={wrapColor:function(e){this.color>=e&&(this.color=0)},wrapSymbol:function(e){this.symbol>=e&&(this.symbol=0)}},P=Tt(G,1,Y,1e3,Z,6e4,et,36e5,tt,864e5,nt,6048e5,rt,26784e5,it,31556952e3),D={init:function(e,t,n){t=t||"";var r=e.shift,i=t.indexOf("C")>-1,s=i?7:3,o,u,a,f=t.split(" "),l=[].concat(n),c,h,p=function(e){a=e.length;while(a--)e[a]===X&&e.splice(a+1,0,e[a+1],e[a+2],e[a+1],e[a+2])};i&&(p(f),p(l)),e.isArea&&(c=f.splice(f.length-6,6),h=l.splice(l.length-6,6));if(r<=l.length/s)while(r--)l=[].concat(l).splice(0,s).concat(l);e.shift=0;if(f.length){o=l.length;while(f.length<o)u=[].concat(f).splice(f.length-s,s),i&&(u[s-6]=u[s-2],u[s-5]=u[s-1]),f=f.concat(u)}return c&&(f=f.concat(c),l=l.concat(h)),[f,l]},step:function(e,t,n,r){var i=[],s=e.length,o;if(n===1)i=r;else if(s===t.length&&n<1)while(s--)o=parseFloat(e[s]),i[s]=isNaN(o)?e[s]:n*parseFloat(t[s]-o)+o;else i=t;return i}},function(r){n.HighchartsAdapter=n.HighchartsAdapter||r&&{init:function(t){var n=r.fx,i=n.step,s,o=r.Tween,u=o&&o.propHooks;r.extend(r.easing,{easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n}}),r.each(["cur","_default","width","height"],function(t,r){var s=i,a,f;r==="cur"?s=n.prototype:r==="_default"&&o&&(s=u[r],r="set"),a=s[r],a&&(s[r]=function(n){return n=t?n:this,f=n.elem,f.attr?f.attr(n.prop,r==="cur"?e:n.now):a.apply(this,arguments)})}),s=function(e){var n=e.elem,r;e.started||(r=t.init(n,n.d,n.toD),e.start=r[0],e.end=r[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},o?u.d={set:s}:i.d=s,this.each=Array.prototype.forEach?function(e,t){return Array.prototype.forEach.call(e,t)}:function(e,t){var n=0,r=e.length;for(;n<r;n++)if(t.call(e[n],e[n],n,e)===!1)return n}},getScript:r.getScript,inArray:r.inArray,adapterRun:function(e,t){if(t==="width"||t==="height"){var n=r(e).attr("id"),i=r("#"+n).actual(t);return i}return r(e)[t]()},grep:r.grep,map:function(e,t){var n=[],r=0,i=e.length;for(;r<i;r++)n[r]=t.call(e[r],e[r],r,e);return n},merge:function(){var e=arguments;return r.extend(!0,null,e[0],e[1],e[2],e[3])},offset:function(e){return r(e).offset()},addEvent:function(e,t,n){r(e).bind(t,n)},removeEvent:function(e,n,i){var s=t.removeEventListener?"removeEventListener":"detachEvent";t[s]&&!e[s]&&(e[s]=function(){}),r(e).unbind(n,i)},fireEvent:function(e,t,n,i){var s=r.Event(t),o="detached"+t,u;!m&&n&&(delete n.layerX,delete n.layerY),xt(s,n),e[t]&&(e[o]=e[t],e[t]=null),r.each(["preventDefault","stopPropagation"],function(e,t){var n=s[t];s[t]=function(){try{n.call(s)}catch(e){t==="preventDefault"&&(u=!0)}}}),r(e).trigger(s),e[o]&&(e[t]=e[o],e[o]=null),i&&!s.isDefaultPrevented()&&!u&&i(s)},washMouseEvent:function(t){var n=t.originalEvent||t;return n.pageX===e&&(n.pageX=t.pageX,n.pageY=t.pageY),n},animate:function(e,t,n){var i=r(e);t.d&&(e.toD=t.d,t.d=1),i.stop(),i.animate(t,n)},stop:function(e){r(e).stop()}}}(n.jQuery);var nn=n.HighchartsAdapter,rn=nn||{};nn&&nn.init.call(nn,D);var sn=rn.adapterRun,on=rn.getScript,un=rn.inArray,an=rn.each,fn=rn.grep,ln=rn.offset,cn=rn.map,hn=rn.merge,pn=rn.addEvent,dn=rn.removeEvent,vn=rn.fireEvent,mn=rn.washMouseEvent,gn=rn.animate,yn=rn.stop,bn={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};O={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/2.3.5/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/2.3.5/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:hn(bn,{enabled:!1,formatter:function(){return this.y},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:F,color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#3E576F",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#3E576F",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:F,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:I,top:"1em"},style:{position:F,backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,shared:T,snap:w?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var wn=O.plotOptions,En=wn.line;Sn();var Nn=function(e){function r(e){n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(e),n?t=[Nt(n[1]),Nt(n[2]),Nt(n[3]),parseFloat(n[4],10)]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e),n&&(t=[Nt(n[1],16),Nt(n[2],16),Nt(n[3],16),1]))}function i(n){var r;return t&&!isNaN(t[0])?n==="rgb"?r="rgb("+t[0]+","+t[1]+","+t[2]+")":n==="a"?r=t[3]:r="rgba("+t.join(",")+")":r=e,r}function s(e){if(At(e)&&e!==0){var n;for(n=0;n<3;n++)t[n]+=Nt(e*255),t[n]<0&&(t[n]=0),t[n]>255&&(t[n]=255)}return this}function o(e){return t[3]=e,this}var t=[],n;return r(e),{get:i,brighten:s,setOpacity:o}};Cn.prototype={init:function(e,n){var r=this;r.element=n==="span"?Ft(n):t.createElementNS(E,n),r.renderer=e,r.attrSetters={}},animate:function(e,t,n){var r=Bt(t,_,!0);yn(this),r?(r=hn(r),n&&(r.complete=n),gn(this,e,r)):(this.attr(e),n&&n())},attr:function(n,r){var i=this,s,o,a,f,l,c=i.element,h=c.nodeName.toLowerCase(),p=i.renderer,d,v,m=i.attrSetters,g=i.shadows,b,w,S=i;Ct(n)&&Dt(r)&&(s=n,n={},n[s]=r);if(Ct(n))s=n,h==="circle"?s={x:"cx",y:"cy"}[s]||s:s==="strokeWidth"&&(s="stroke-width"),S=Pt(c,s)||i[s]||0,s!=="d"&&s!=="visibility"&&(S=parseFloat(S));else for(s in n){d=!1,o=n[s],a=m[s]&&m[s].call(i,o,s);if(a!==!1){a!==e&&(o=a);if(s==="d")o&&o.join&&(o=o.join(" ")),/(NaN| {2}|^$)/.test(o)&&(o="M 0 0");else if(s==="x"&&h==="text"){for(f=0;f<c.childNodes.length;f++)l=c.childNodes[f],Pt(l,"x")===Pt(c,"x")&&Pt(l,"x",o);i.rotation&&Pt(c,"transform","rotate("+i.rotation+" "+o+" "+Nt(n.y||Pt(c,"y"))+")")}else if(s==="fill")o=p.color(o,c,s);else if(h!=="circle"||s!=="x"&&s!=="y")if(h==="rect"&&s==="r")Pt(c,{rx:o,ry:o}),d=!0;else if(s==="translateX"||s==="translateY"||s==="rotation"||s==="verticalAlign")w=!0,d=!0;else if(s==="stroke")o=p.color(o,c,s);else if(s==="dashstyle"){s="stroke-dasharray",o=o&&o.toLowerCase();if(o==="solid")o=W;else if(o){o=o.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),f=o.length;while(f--)o[f]=Nt(o[f])*n["stroke-width"];o=o.join(",")}}else s==="isTracker"?i[s]=o:s==="width"?o=Nt(o):s==="align"?(s="text-anchor",o={left:"start",center:"middle",right:"end"}[o]):s==="title"&&(v=c.getElementsByTagName("title")[0],v||(v=t.createElementNS(E,"title"),c.appendChild(v)),v.textContent=o);else s={x:"cx",y:"cy"}[s]||s;s==="strokeWidth"&&(s="stroke-width"),s==="stroke-width"&&o===0&&(y||p.forExport)&&(o=1e-6),i.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(s)&&(b||(i.symbolAttr(n),b=!0),d=!0);if(g&&/^(width|height|visibility|x|y|d|transform)$/.test(s)){f=g.length;while(f--)Pt(g[f],s,s==="height"?u(o-(g[f].cutHeight||0),0):o)}(s==="width"||s==="height")&&h==="rect"&&o<0&&(o=0),i[s]=o,w&&i.updateTransform(),s==="text"?(o!==i.textStr&&delete i.bBox,i.textStr=o,i.added&&p.buildText(i)):d||Pt(c,s,o)}}return S},symbolAttr:function(e){var t=this;an(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],function(n){t[n]=Bt(e[n],t[n])}),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})},clip:function(e){return this.attr("clip-path",e?"url("+this.renderer.url+"#"+e.id+")":W)},crisp:function(e,t,n,r,o){var u=this,a,f={},l={},c;e=e||u.strokeWidth||u.attr&&u.attr("stroke-width")||0,c=i(e)%2/2,l.x=s(t||u.x||0)+c,l.y=s(n||u.y||0)+c,l.width=s((r||u.width||0)-2*c),l.height=s((o||u.height||0)-2*c),l.strokeWidth=e;for(a in l)u[a]!==l[a]&&(u[a]=f[a]=l[a]);return f},css:function(e){var t=this,n=t.element,r=e&&e.width&&n.nodeName.toLowerCase()==="text",i,s="",o=function(e,t){return"-"+t.toLowerCase()};e&&e.color&&(e.fill=e.color),e=xt(t.styles,e),t.styles=e,T&&r&&delete e.width;if(m&&!S)r&&delete e.width,jt(t.element,e);else{for(i in e)s+=i.replace(/([A-Z])/g,o)+":"+e[i]+";";t.attr({style:s})}return r&&t.added&&t.renderer.buildText(t),t},on:function(e,t){return C&&e==="click"&&(this.element.ontouchstart=function(e){e.preventDefault(),t()}),this.element["on"+e]=t,this},setRadialReference:function(e){return this.element.radialReference=e,this},translate:function(e,t){return this.attr({translateX:e,translateY:t})},invert:function(){var e=this;return e.inverted=!0,e.updateTransform(),e},htmlCss:function(e){var t=this,n=t.element,r=e&&n.tagName==="SPAN"&&e.width;return r&&(delete e.width,t.textWidth=r,t.updateTransform()),t.styles=xt(t.styles,e),jt(t.element,e),t},htmlGetBBox:function(){var e=this,t=e.element,n=e.bBox;return n||(t.nodeName==="text"&&(t.style.position=F),n=e.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),n},htmlUpdateTransform:function(){if(!this.added){this.alignOnAdd=!0;return}var e=this,t=e.renderer,n=e.element,r=e.translateX||0,i=e.translateY||0,s=e.x||0,o=e.y||0,u=e.textAlign||"left",a={left:0,center:.5,right:1}[u],f=u&&u!=="left",h=e.shadows;if(r||i)jt(n,{marginLeft:r,marginTop:i}),h&&an(h,function(e){jt(e,{marginLeft:r+1,marginTop:i+1})});e.inverted&&an(n.childNodes,function(e){t.invertChild(e,n)});if(n.tagName==="SPAN"){var d,g,w=e.rotation,E,S=0,x=1,T=0,N,C=Nt(e.textWidth),k=e.xCorr||0,L=e.yCorr||0,A=[w,u,n.innerHTML,e.textWidth].join(","),O={},M;A!==e.cTT&&(Dt(w)&&(t.isSVG?(M=m?"-ms-transform":y?"-webkit-transform":b?"MozTransform":v?"-o-transform":"",O[M]=O.transform="rotate("+w+"deg)"):(S=w*p,x=l(S),T=c(S),O.filter=w?["progid:DXImageTransform.Microsoft.Matrix(M11=",x,", M12=",-T,", M21=",T,", M22=",x,", sizingMethod='auto expand')"].join(""):W),jt(n,O)),d=Bt(e.elemWidth,n.offsetWidth),g=Bt(e.elemHeight,n.offsetHeight),d>C&&/[ \-]/.test(n.textContent||n.innerText)&&(jt(n,{width:C+z,display:"block",whiteSpace:"normal"}),d=C),E=t.fontMetrics(n.style.fontSize).b,k=x<0&&-d,L=T<0&&-g,N=x*T<0,k+=T*E*(N?1-a:a),L-=x*E*(w?N?a:1-a:1),f&&(k-=d*a*(x<0?-1:1),w&&(L-=g*a*(T<0?-1:1)),jt(n,{textAlign:u})),e.xCorr=k,e.yCorr=L),jt(n,{left:s+k+z,top:o+L+z}),y&&(g=n.offsetHeight),e.cTT=A}},updateTransform:function(){var e=this,t=e.translateX||0,n=e.translateY||0,r=e.inverted,i=e.rotation,s=[];r&&(t+=e.attr("width"),n+=e.attr("height")),(t||n)&&s.push("translate("+t+","+n+")"),r?s.push("rotate(90) scale(-1,1)"):i&&s.push("rotate("+i+" "+(e.x||0)+" "+(e.y||0)+")"),s.length&&Pt(e.element,"transform",s.join(" "))},toFront:function(){var e=this.element;return e.parentNode.appendChild(e),this},align:function(e,t,n){var r=this;e?(r.alignOptions=e,r.alignByTranslate=t,n||r.renderer.alignedObjects.push(r)):(e=r.alignOptions,t=r.alignByTranslate),n=Bt(n,r.renderer);var s=e.align,o=e.verticalAlign,u=(n.x||0)+(e.x||0),a=(n.y||0)+(e.y||0),f={};if(s==="right"||s==="center")u+=(n.width-(e.width||0))/{right:1,center:2}[s];f[t?"translateX":"x"]=i(u);if(o==="bottom"||o==="middle")a+=(n.height-(e.height||0))/({bottom:1,middle:2}[o]||1);return f[t?"translateY":"y"]=i(a),r[r.placed?"animate":"attr"](f),r.placed=!0,r.alignAttr=f,r},getBBox:function(){var e=this,t=e.bBox,n=e.renderer,r,i,s=e.rotation,o=e.element,u=e.styles,a=s*p;if(!t){if(o.namespaceURI===E||n.forExport){try{t=o.getBBox?xt({},o.getBBox()):{width:o.offsetWidth,height:o.offsetHeight}}catch(h){}if(!t||t.width<0)t={width:0,height:0}}else t=e.htmlGetBBox();n.isSVG&&(r=t.width,i=t.height,m&&u&&u.fontSize==="11px"&&i===22.700000762939453&&(t.height=i=14),s&&(t.width=f(i*c(a))+f(r*l(a)),t.height=f(i*l(a))+f(r*c(a)))),e.bBox=t}return t},show:function(){return this.attr({visibility:U})},hide:function(){return this.attr({visibility:q})},add:function(e){var t=this.renderer,n=e||t,r=n.element||t.box,i=r.childNodes,s=this.element,o=Pt(s,"zIndex"),u,a,f,l;e&&(this.parentGroup=e),this.parentInverted=e&&e.inverted,this.textStr!==undefined&&t.buildText(this),o&&(n.handleZ=!0,o=Nt(o));if(n.handleZ)for(f=0;f<i.length;f++){u=i[f],a=Pt(u,"zIndex");if(u!==s&&(Nt(a)>o||!Dt(o)&&Dt(a))){r.insertBefore(s,u),l=!0;break}}return l||r.appendChild(s),this.added=!0,vn(this,"add"),this},safeRemoveChild:function(e){var t=e.parentNode;t&&t.removeChild(e)},destroy:function(){var e=this,t=e.element||{},n=e.shadows,r,i;t.onclick=t.onmouseout=t.onmouseover=t.onmousemove=null,yn(e),e.clipPath&&(e.clipPath=e.clipPath.destroy());if(e.stops){for(i=0;i<e.stops.length;i++)e.stops[i]=e.stops[i].destroy();e.stops=null}e.safeRemoveChild(t),n&&an(n,function(t){e.safeRemoveChild(t)}),_t(e.renderer.alignedObjects,e);for(r in e)delete e[r];return null},empty:function(){var e=this.element,t=e.childNodes,n=t.length;while(n--)e.removeChild(t[n])},shadow:function(e,t,n){var r=[],i,s,o=this.element,a,f,l,c;if(e){f=Bt(e.width,3),l=(e.opacity||.15)/f,c=this.parentInverted?"(-1,-1)":"("+Bt(e.offsetX,1)+", "+Bt(e.offsetY,1)+")";for(i=1;i<=f;i++)s=o.cloneNode(0),a=f*2+1-2*i,Pt(s,{isShadow:"true",stroke:e.color||"black","stroke-opacity":l*i,"stroke-width":a,transform:"translate"+c,fill:W}),n&&(Pt(s,"height",u(Pt(s,"height")-a,0)),s.cutHeight=a),t?t.element.appendChild(s):o.parentNode.insertBefore(s,o),r.push(s);this.shadows=r}return this}};var kn=function(){this.init.apply(this,arguments)};kn.prototype={Element:Cn,init:function(e,r,i,s){var u=this,a=location,f;f=u.createElement("svg").attr({xmlns:E,version:"1.1"}),e.appendChild(f.element),u.isSVG=!0,u.box=f.element,u.boxWrapper=f,u.alignedObjects=[],u.url=(b||y)&&t.getElementsByTagName("base").length?a.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",u.defs=this.createElement("defs").add(),u.forExport=s,u.gradients={},u.setSize(r,i,!1);var l,c;b&&e.getBoundingClientRect&&(u.subPixelFix=l=function(){jt(e,{left:0,top:0}),c=e.getBoundingClientRect(),jt(e,{left:o(c.left)-c.left+z,top:o(c.top)-c.top+z})},l(),pn(n,"resize",l))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var e=this,t=e.defs;return e.box=null,e.boxWrapper=e.boxWrapper.destroy(),Gt(e.gradients||{}),e.gradients=null,t&&(e.defs=t.destroy()),e.subPixelFix&&dn(n,"resize",e.subPixelFix),e.alignedObjects=null,null},createElement:function(e){var t=new this.Element;return t.init(this,e),t},draw:function(){},buildText:function(e){function g(t){return m[t]=r.getBBox?r.getBBox().height:e.renderer.fontMetrics(r.style.fontSize).h,i(m[t]-(m[t-1]||0))}var r=e.element,s=Bt(e.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),o=r.childNodes,u=/style="([^"]+)"/,a=/href="([^"]+)"/,f=Pt(r,"x"),l=e.styles,c=l&&l.width&&Nt(l.width),h=l&&l.lineHeight,p,d="getComputedStyle",v=o.length,m=[];while(v--)r.removeChild(o[v]);c&&!e.added&&this.box.appendChild(r),s[s.length-1]===""&&s.pop(),an(s,function(i,s){var o,l=0,v;i=i.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),o=i.split("|||"),an(o,function(i){if(i!==""||o.length===1){var m={},y=t.createElementNS(E,"tspan"),b;u.test(i)&&(b=i.match(u)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),Pt(y,"style",b)),a.test(i)&&(Pt(y,"onclick",'location.href="'+i.match(a)[1]+'"'),jt(y,{cursor:"pointer"})),i=(i.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),y.appendChild(t.createTextNode(i)),l?m.dx=3:m.x=f;if(!l){if(s){!S&&e.renderer.forExport&&jt(y,{display:"block"}),v=n[d]&&Nt(n[d](p,null).getPropertyValue("line-height"));if(!v||isNaN(v))v=h||p.offsetHeight||g(s)||18;Pt(y,"dy",v)}p=y}Pt(y,m),r.appendChild(y),l++;if(c){var w=i.replace(/([^\^])-/g,"$1- ").split(" "),x,T,N=[];while(w.length||N.length)delete e.bBox,T=e.getBBox().width,x=T>c,!x||w.length===1?(w=N,N=[],w.length&&(y=t.createElementNS(E,"tspan"),Pt(y,{dy:h||16,x:f}),b&&Pt(y,"style",b),r.appendChild(y),T>c&&(c=T))):(y.removeChild(y.firstChild),N.unshift(w.pop())),w.length&&y.appendChild(t.createTextNode(w.join(" ").replace(/- /g,"-")))}}})})},button:function(e,t,n,r,i,s,o){var u=this.label(e,t,n),a=0,f,l,c,h,p,d="style",v={x1:0,y1:0,x2:0,y2:1};return i=hn(Tt(ft,1,at,"#999",st,Tt(ot,v,ut,[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,d,Tt("color","black")),i),c=i[d],delete i[d],s=hn(i,Tt(at,"#68A",st,Tt(ot,v,ut,[[0,"#FFF"],[1,"#ACF"]])),s),h=s[d],delete s[d],o=hn(i,Tt(at,"#68A",st,Tt(ot,v,ut,[[0,"#9BD"],[1,"#CDF"]])),o),p=o[d],delete o[d],pn(u.element,"mouseenter",function(){u.attr(s).css(h)}),pn(u.element,"mouseleave",function(){f=[i,s,o][a],l=[c,h,p][a],u.attr(f).css(l)}),u.setState=function(e){a=e,e?e===2&&u.attr(o).css(p):u.attr(i).css(c)},u.on("click",function(){r.call(u)}).attr(i).css(xt({cursor:"default"},c))},crispLine:function(e,t){return e[1]===e[4]&&(e[1]=e[4]=i(e[1])-t%2/2),e[2]===e[5]&&(e[2]=e[5]=i(e[2])+t%2/2),e},path:function(e){var t={fill:W};return Lt(e)?t.d=e:kt(e)&&xt(t,e),this.createElement("path").attr(t)},circle:function(e,t,n){var r=kt(e)?e:{x:e,y:t,r:n};return this.createElement("circle").attr(r)},arc:function(e,t,n,r,i,s){return kt(e)&&(t=e.y,n=e.r,r=e.innerR,i=e.start,s=e.end,e=e.x),this.symbol("arc",e||0,t||0,n||0,n||0,{innerR:r||0,start:i||0,end:s||0})},rect:function(e,t,n,r,i,s){i=kt(e)?e.r:i;var o=this.createElement("rect").attr({rx:i,ry:i,fill:W});return o.attr(kt(e)?e:o.crisp(s,e,t,u(n,0),u(r,0)))},setSize:function(e,t,n){var r=this,i=r.alignedObjects,s=i.length;r.width=e,r.height=t,r.boxWrapper[Bt(n,!0)?"animate":"attr"]({width:e,height:t});while(s--)i[s].align()},g:function(e){var t=this.createElement("g");return Dt(e)?t.attr({"class":R+e}):t},image:function(e,t,n,r,i){var s={preserveAspectRatio:W},o;return arguments.length>1&&xt(s,{x:t,y:n,width:r,height:i}),o=this.createElement("image").attr(s),o.element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):o.element.setAttribute("hc-svg-href",e),o},symbol:function(e,t,n,r,s,o){var u,a=this.symbols[e],f=a&&a(i(t),i(n),r,s,o),l,c=/^url\((.*?)\)$/,h,p,d;return f?(u=this.path(f),xt(u,{symbolName:e,x:t,y:n,width:r,height:s}),o&&xt(u,o)):c.test(e)&&(d=function(e,t){e.element&&(e.attr({width:t[0],height:t[1]}),e.alignByTranslate||e.translate(i((r-t[0])/2),i((s-t[1])/2)))},h=e.match(c)[1],p=k[h],u=this.image(h).attr({x:t,y:n}),p?d(u,p):(u.attr({width:0,height:0}),l=Ft("img",{onload:function(){d(u,k[h]=[this.width,this.height])},src:h}))),u},symbols:{circle:function(e,t,n,r){var i=.166*n;return[X,e+n/2,t,"C",e+n+i,t,e+n+i,t+r,e+n/2,t+r,"C",e-i,t+r,e-i,t,e+n/2,t,"Z"]},square:function(e,t,n,r){return[X,e,t,V,e+n,t,e+n,t+r,e,t+r,"Z"]},triangle:function(e,t,n,r){return[X,e+n/2,t,V,e+n,t+r,e,t+r,"Z"]},"triangle-down":function(e,t,n,r){return[X,e,t,V,e+n,t,e+n/2,t+r,"Z"]},diamond:function(e,t,n,r){return[X,e+n/2,t,V,e+n,t+r/2,e+n/2,t+r,e,t+r/2,"Z"]},arc:function(e,t,n,r,i){var s=i.start,o=i.r||n||r,u=i.end-1e-6,a=i.innerR,f=i.open,p=l(s),d=c(s),v=l(u),m=c(u),g=i.end-s<h?0:1;return[X,e+o*p,t+o*d,"A",o,o,0,g,1,e+o*v,t+o*m,f?X:V,e+a*v,t+a*m,"A",a,a,0,g,0,e+a*p,t+a*d,f?"":"Z"]}},clipRect:function(e,t,n,r){var i,s=R+L++,o=this.createElement("clipPath").attr({id:s}).add(this.defs);return i=this.rect(e,t,n,r,0).add(o),i.id=s,i.clipPath=o,i},color:function(e,t,n){var r=this,i,s=/^rgba/,o,u,a,f,l,c,h,p,d,v,m=[];e&&e.linearGradient?o="linearGradient":e&&e.radialGradient&&(o="radialGradient");if(o){u=e[o],a=r.gradients,l=e.stops,p=t.radialReference,Lt(u)&&(e[o]=u={x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientUnits:"userSpaceOnUse"}),o==="radialGradient"&&p&&!Dt(u.gradientUnits)&&xt(u,{cx:p[0]-p[2]/2+u.cx*p[2],cy:p[1]-p[2]/2+u.cy*p[2],r:u.r*p[2],gradientUnits:"userSpaceOnUse"});for(d in u)d!=="id"&&m.push(d,u[d]);for(d in l)m.push(l[d]);return m=m.join(","),a[m]?v=a[m].id:(u.id=v=R+L++,a[m]=f=r.createElement(o).attr(u).add(r.defs),f.stops=[],an(l,function(e){var t;s.test(e[1])?(i=Nn(e[1]),c=i.get("rgb"),h=i.get("a")):(c=e[1],h=1),t=r.createElement("stop").attr({offset:e[0],"stop-color":c,"stop-opacity":h}).add(f),f.stops.push(t)})),"url("+r.url+"#"+v+")"}return s.test(e)?(i=Nn(e),Pt(t,n+"-opacity",i.get("a")),i.get("rgb")):(t.removeAttribute(n+"-opacity"),e)},text:function(e,t,n,r){var s=this,o=O.chart.style,u=T||!S&&s.forExport,a;return r&&!s.forExport?s.html(e,t,n):(t=i(Bt(t,0)),n=i(Bt(n,0)),a=s.createElement("text").attr({x:t,y:n,text:e}).css({fontFamily:o.fontFamily,fontSize:o.fontSize}),u&&a.css({position:F}),a.x=t,a.y=n,a)},html:function(e,t,n){var r=O.chart.style,s=this.createElement("span"),o=s.attrSetters,u=s.element,a=s.renderer;return o.text=function(e){return e!==u.innerHTML&&delete this.bBox,u.innerHTML=e,!1},o.x=o.y=o.align=function(e,t){return t==="align"&&(t="textAlign"),s[t]=e,s.htmlUpdateTransform(),!1},s.attr({text:e,x:i(t),y:i(n)}).css({position:F,whiteSpace:"nowrap",fontFamily:r.fontFamily,fontSize:r.fontSize}),s.css=s.htmlCss,a.isSVG&&(s.add=function(e){var t,n=a.box.parentNode,r,i=[];if(e){t=e.div;if(!t){r=e;while(r)i.push(r),r=r.parentGroup;an(i.reverse(),function(e){var r;t=e.div=e.div||Ft(j,{className:Pt(e.element,"class")},{position:F,left:(e.translateX||0)+z,top:(e.translateY||0)+z},t||n),r=t.style,xt(e.attrSetters,{translateX:function(e){r.left=e+z},translateY:function(e){r.top=e+z},visibility:function(e,t){r[t]=e}})})}}else t=n;return t.appendChild(u),s.added=!0,s.alignOnAdd&&s.htmlUpdateTransform(),s}),s},fontMetrics:function(e){e=Nt(e||11);var t=e<24?e+4:i(e*1.2),n=i(t*.8);return{h:t,b:n}},label:function(t,n,r,s,o,u,a,f,l){function k(){var e,t=p.element.style;v=(y===undefined||b===undefined||h.styles.textAlign)&&p.getBBox(),h.width=(y||v.width||0)+2*g,h.height=(b||v.height||0)+2*g,T=g+c.fontMetrics(t&&t.fontSize).b,C&&(d||(e=f?-T:0,h.box=d=s?c.symbol(s,-m*g,e,h.width,h.height):c.rect(-m*g,e,h.width,h.height,0,x[ft]),d.add(h)),d.attr(hn({width:h.width,height:h.height},x)),x=null)}function L(){var e=h.styles,t=e&&e.textAlign,n=g*(1-m),r;r=f?0:T,Dt(y)&&(t==="center"||t==="right")&&(n+={center:.5,right:1}[t]*(y-v.width)),(n!==p.x||r!==p.y)&&p.attr({x:n,y:r}),p.x=n,p.y=r}function A(e,t){d?d.attr(e,t):x[e]=t}function O(){p.add(h),h.attr({text:t,x:n,y:r}),d&&Dt(o)&&h.attr({anchorX:o,anchorY:u})}var c=this,h=c.g(l),p=c.text("",0,0,a).attr({zIndex:1}),d,v,m=0,g=3,y,b,w,E,S=0,x={},T,N=h.attrSetters,C;pn(h,"add",O),N.width=function(e){return y=e,!1},N.height=function(e){return b=e,!1},N.padding=function(e){return Dt(e)&&e!==g&&(g=e,L()),!1},N.align=function(e){return m={left:0,center:.5,right:1}[e],!1},N.text=function(e,t){return p.attr(t,e),k(),L(),!1},N[ft]=function(e,t){return C=!0,S=e%2/2,A(t,e),!1},N.stroke=N.fill=N.r=function(e,t){return t==="fill"&&(C=!0),A(t,e),!1},N.anchorX=function(e,t){return o=e,A(t,e+S-w),!1},N.anchorY=function(e,t){return u=e,A(t,e-E),!1},N.x=function(e){return h.x=e,e-=m*((y||v.width)+g),w=i(e),h.attr("translateX",w),!1},N.y=function(e){return E=h.y=i(e),h.attr("translateY",e),!1};var M=h.css;return xt(h,{css:function(t){if(t){var n={};t=hn({},t),an(["fontSize","fontWeight","fontFamily","color","lineHeight","width"],function(r){t[r]!==e&&(n[r]=t[r],delete t[r])}),p.css(n)}return M.call(h,t)},getBBox:function(){return{width:v.width+2*g,height:v.height+2*g,x:v.x-g,y:v.y-g}},shadow:function(e){return d&&d.shadow(e),h},destroy:function(){dn(h,"add",O),dn(h.element,"mouseenter"),dn(h.element,"mouseleave"),p&&(p=p.destroy()),d&&(d=d.destroy()),Cn.prototype.destroy.call(h),h=c=k=L=A=O=null}})}},N=kn;var Ln;if(!S&&!T){var An={init:function(e,t){var n=this,r=["<",t,' filled="f" stroked="f"'],i=["position: ",F,";"];(t==="shape"||t===j)&&i.push("left:0;top:0;width:1px;height:1px;"),g&&i.push("visibility: ",t===j?q:U),r.push(' style="',i.join(""),'"/>'),t&&(r=t===j||t==="span"||t==="img"?r.join(""):e.prepVML(r),n.element=Ft(r)),n.renderer=e,n.attrSetters={}},add:function(e){var t=this,n=t.renderer,r=t.element,i=n.box,s=e&&e.inverted,o=e?e.element||e:i;return s&&n.invertChild(r,o),o.appendChild(r),t.added=!0,t.alignOnAdd&&!t.deferUpdateTransform&&t.updateTransform(),vn(t,"add"),t},updateTransform:Cn.prototype.htmlUpdateTransform,attr:function(t,n){var r=this,s,o,a,f,h=r.element||{},d=h.style,v=h.nodeName,m=r.renderer,y=r.symbolName,b,w=r.shadows,E,S=r.attrSetters,x=r;Ct(t)&&Dt(n)&&(s=t,t={},t[s]=n);if(Ct(t))s=t,s==="strokeWidth"||s==="stroke-width"?x=r.strokeweight:x=r[s];else for(s in t){o=t[s],E=!1,f=S[s]&&S[s].call(r,o,s);if(f!==!1&&o!==null){f!==e&&(o=f);if(y&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(s))b||(r.symbolAttr(t),b=!0),E=!0;else if(s==="d"){o=o||[],r.d=o.join(" "),a=o.length;var T=[];while(a--)At(o[a])?T[a]=i(o[a]*10)-5:o[a]==="Z"?T[a]="x":T[a]=o[a];o=T.join(" ")||"x",h.path=o;if(w){a=w.length;while(a--)w[a].path=w[a].cutOff?this.cutOffPath(o,w[a].cutOff):o}E=!0}else if(s==="visibility"){if(w){a=w.length;while(a--)w[a].style[s]=o}v==="DIV"&&(o=o===q?"-999em":0,s="top"),d[s]=o,E=!0}else if(s==="zIndex")o&&(d[s]=o),E=!0;else if(s==="width"||s==="height")o=u(0,o),this[s]=o,r.updateClipping?(r[s]=o,r.updateClipping()):d[s]=o,E=!0;else if(s==="x"||s==="y")r[s]=o,d[{x:"left",y:"top"}[s]]=o;else if(s==="class")h.className=o;else if(s==="stroke")o=m.color(o,h,s),s="strokecolor";else if(s==="stroke-width"||s==="strokeWidth")h.stroked=o?!0:!1,s="strokeweight",r[s]=o,At(o)&&(o+=z);else if(s==="dashstyle"){var N=h.getElementsByTagName("stroke")[0]||Ft(m.prepVML(["<stroke/>"]),null,null,h);N[s]=o||"solid",r.dashstyle=o,E=!0}else s==="fill"?v==="SPAN"?d.color=o:v!=="IMG"&&(h.filled=o!==W?!0:!1,o=m.color(o,h,s,r),s="fillcolor"):v==="shape"&&s==="rotation"?(r[s]=o,h.style.left=-i(c(o*p)+1)+z,h.style.top=i(l(o*p))+z):s==="translateX"||s==="translateY"||s==="rotation"?(r[s]=o,r.updateTransform(),E=!0):s==="text"&&(this.bBox=null,h.innerHTML=o,E=!0);E||(g?h[s]=o:Pt(h,s,o))}}return x},clip:function(e){var t=this,n,r=t.element,i=r.parentNode,s;return e?(n=e.members,_t(n,t),n.push(t),t.destroyClip=function(){_t(n,t)},i&&i.className==="highcharts-tracker"&&!g&&jt(r,{visibility:q}),s=e.getCSS(t)):(t.destroyClip&&t.destroyClip(),s={clip:g?"inherit":"rect(auto)"}),t.css(s)},css:Cn.prototype.htmlCss,safeRemoveChild:function(e){e.parentNode&&Yt(e)},destroy:function(){return this.destroyClip&&this.destroyClip(),Cn.prototype.destroy.apply(this)},empty:function(){var e=this.element,t=e.childNodes,n=t.length,r;while(n--)r=t[n],r.parentNode.removeChild(r)},on:function(e,t){return this.element["on"+e]=function(){var e=n.event;e.target=e.srcElement,t(e)},this},cutOffPath:function(e,t){var n;e=e.split(/[ ,]/),n=e.length;if(n===9||n===11)e[n-4]=e[n-2]=Nt(e[n-2])-10*t;return e.join(" ")},shadow:function(e,t,n){var r=[],i,s=this.element,o=this.renderer,u,a=s.style,f,l=s.path,c,h,p,d;l&&typeof l.value!="string"&&(l="x"),h=l;if(e){p=Bt(e.width,3),d=(e.opacity||.15)/p;for(i=1;i<=3;i++)c=p*2+1-2*i,n&&(h=this.cutOffPath(l.value,c+.5)),f=['<shape isShadow="true" strokeweight="',c,'" filled="false" path="',h,'" coordsize="10 10" style="',s.style.cssText,'" />'],u=Ft(o.prepVML(f),null,{left:Nt(a.left)+Bt(e.offsetX,1),top:Nt(a.top)+Bt(e.offsetY,1)}),n&&(u.cutOff=c+1),f=['<stroke color="',e.color||"black",'" opacity="',d*i,'"/>'],Ft(o.prepVML(f),null,null,u),t?t.element.appendChild(u):s.parentNode.insertBefore(u,s),r.push(u);this.shadows=r}return this}};An=It(Cn,An);var On={Element:An,isIE8:d.indexOf("MSIE 8.0")>-1,init:function(e,n,r){var i=this,s,o;i.alignedObjects=[],s=i.createElement(j),o=s.element,o.style.position=I,e.appendChild(s.element),i.box=o,i.boxWrapper=s,i.setSize(n,r,!1),t.namespaces.hcv||(t.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),t.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ")},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,t,n,r){var s=this.createElement(),o=kt(e);return xt(s,{members:[],left:o?e.x:e,top:o?e.y:t,width:o?e.width:n,height:o?e.height:r,getCSS:function(e){var t=e.inverted,n=this,r=n.top,s=n.left,o=s+n.width,u=r+n.height,a={clip:"rect("+i(t?s:r)+"px,"+i(t?u:o)+"px,"+i(t?o:u)+"px,"+i(t?r:s)+"px)"};return!t&&g&&e.element.nodeName!=="IMG"&&xt(a,{width:o+z,height:u+z}),a},updateClipping:function(){an(s.members,function(e){e.css(s.getCSS(e))})}})},color:function(e,t,n,i){var s=this,o,u=/^rgba/,a,f,l=W;e&&e.linearGradient?f="gradient":e&&e.radialGradient&&(f="pattern");if(f){var c,p,d=e.linearGradient||e.radialGradient,v,m,g,y,b,w,E,S,x="",T=e.stops,N,C,k=[],L=function(){a=['<fill colors="'+k.join(",")+'" opacity="',w,'" o:opacity2="',b,'" type="',f,'" ',x,'focus="100%" method="any" />'],Ft(s.prepVML(a),null,null,t)};N=T[0],C=T[T.length-1],N[0]>0&&T.unshift([0,N[1]]),C[0]<1&&T.push([1,C[1]]),an(T,function(e,t){u.test(e[1])?(o=Nn(e[1]),c=o.get("rgb"),p=o.get("a")):(c=e[1],p=1),k.push(e[0]*100+"% "+c),t?(w=p,E=c):(b=p,S=c)});if(n==="fill")if(f==="gradient")v=d.x1||d[0]||0,m=d.y1||d[1]||0,g=d.x2||d[2]||0,y=d.y2||d[3]||0,x='angle="'+(90-r.atan((y-m)/(g-v))*180/h)+'"',L();else{var A=d.r,M=A*2,_=A*2,D=d.cx,P=d.cy,H=t.radialReference,B,j=function(){H&&(B=i.getBBox(),D+=(H[0]-B.x)/B.width-.5,P+=(H[1]-B.y)/B.height-.5,M*=H[2]/B.width,_*=H[2]/B.height),x='src="'+O.global.VMLRadialGradientURL+'" '+'size="'+M+","+_+'" '+'origin="0.5,0.5" '+'position="'+D+","+P+'" '+'color2="'+S+'" ',L()};i.added?j():pn(i,"add",j),l=E}else l=c}else if(u.test(e)&&t.tagName!=="IMG")o=Nn(e),a=["<",n,' opacity="',o.get("a"),'"/>'],Ft(this.prepVML(a),null,null,t),l=o.get("rgb");else{var F=t.getElementsByTagName(n);F.length&&(F[0].opacity=1),l=e}return l},prepVML:function(e){var t="display:inline-block;behavior:url(#default#VML);",n=this.isIE8;return e=e.join(""),n?(e=e.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),e.indexOf('style="')===-1?e=e.replace("/>",' style="'+t+'" />'):e=e.replace('style="','style="'+t)):e=e.replace("<","<hcv:"),e},text:kn.prototype.html,path:function(e){var t={coordsize:"10 10"};return Lt(e)?t.d=e:kt(e)&&xt(t,e),this.createElement("shape").attr(t)},circle:function(e,t,n){return this.symbol("circle").attr({x:e-n,y:t-n,width:2*n,height:2*n})},g:function(e){var t,n;return e&&(n={className:R+e,"class":R+e}),t=this.createElement(j).attr(n),t},image:function(e,t,n,r,i){var s=this.createElement("img").attr({src:e});return arguments.length>1&&s.attr({x:t,y:n,width:r,height:i}),s},rect:function(e,t,n,r,i,s){kt(e)&&(t=e.y,n=e.width,r=e.height,s=e.strokeWidth,e=e.x);var o=this.symbol("rect");return o.r=i,o.attr(o.crisp(s,e,t,u(n,0),u(r,0)))},invertChild:function(e,t){var n=t.style;jt(e,{flip:"x",left:Nt(n.width)-1,top:Nt(n.height)-1,rotation:-90})},symbols:{arc:function(e,t,n,r,i){var s=i.start,o=i.end,u=i.r||n||r,a=l(s),f=c(s),p=l(o),d=c(o),v=i.innerR,m=.08/u,g=v&&.1/v||0,y;return o-s===0?["x"]:(2*h-o+s<m?p=-m:o-s<g&&(p=l(s+g)),y=["wa",e-u,t-u,e+u,t+u,e+u*a,t+u*f,e+u*p,t+u*d],i.open&&!v&&y.push("e",X,e,t),y.push("at",e-v,t-v,e+v,t+v,e+v*p,t+v*d,e+v*a,t+v*f,"x","e"),y)},circle:function(e,t,n,r){return["wa",e,t,e+n,t+r,e+n,t+r/2,e+n,t+r/2,"e"]},rect:function(e,t,n,r,i){var s=e+n,o=t+r,u,f;return!Dt(i)||!i.r?u=kn.prototype.symbols.square.apply(0,arguments):(f=a(i.r,n,r),u=[X,e+f,t,V,s-f,t,"wa",s-2*f,t,s,t+2*f,s-f,t,s,t+f,V,s,o-f,"wa",s-2*f,o-2*f,s,o,s,o-f,s-f,o,V,e+f,o,"wa",e,o-2*f,e+2*f,o,e+f,o,e,o-f,V,e,t+f,"wa",e,t,e+2*f,t+2*f,e,t+f,e+f,t,"x","e"]),u}}};Ln=function(){this.init.apply(this,arguments)},Ln.prototype=hn(kn.prototype,On),N=Ln}var Mn,_n;T&&(Mn=function(){E="http://www.w3.org/1999/xhtml"},Mn.prototype.symbols={},_n=function(){function t(){var t=e.length,n;for(n=0;n<t;n++)e[n]();e=[]}var e=[];return{push:function(n,r){e.length===0&&on(r,t),e.push(n)}}}()),N=Ln||Mn||kn,Dn.prototype={addLabel:function(){var e=this,t=e.axis,n=t.options,r=t.chart,s=t.horiz,o=t.categories,a=e.pos,f=n.labels,l,c=t.tickPositions,h=o&&s&&o.length&&!f.step&&!f.staggerLines&&!f.rotation&&r.plotWidth/c.length||!s&&r.plotWidth/2,p=a===c[0],d=a===c[c.length-1],v,m,g=o&&Dt(o[a])?o[a]:a,y=e.label,b=c.info,w;t.isDatetimeAxis&&b&&(w=n.dateTimeLabelFormats[b.higherRanks[a]||b.unitName]),e.isFirst=p,e.isLast=d,l=t.labelFormatter.call({axis:t,chart:r,isFirst:p,isLast:d,dateTimeLabelFormat:w,value:t.isLog?en(Mt(g)):g}),v=h&&{width:u(1,i(h-2*(f.padding||10)))+z},v=xt(v,f.style),Dt(y)?y&&y.attr({text:l}).css(v):(m={align:f.align},At(f.rotation)&&(m.rotation=f.rotation),e.label=Dt(l)&&f.enabled?r.renderer.text(l,0,0,f.useHTML).attr(m).css(v).add(t.labelGroup):null)},getLabelSize:function(){var e=this.label,t=this.axis;return e?(this.labelBBox=e.getBBox())[t.horiz?"height":"width"]:0},getLabelSides:function(){var e=this.labelBBox,t=this.axis,n=t.options,r=n.labels,i=e.width,s=i*{left:0,center:.5,right:1}[r.align]-r.x;return[-s,i-s]},handleOverflow:function(e,t){var n=!0,r=this.axis,i=r.chart,s=this.isFirst,o=this.isLast,u=t.x,a=r.reversed,f=r.tickPositions;if(s||o){var l=this.getLabelSides(),c=l[0],h=l[1],p=i.plotLeft,d=p+r.len,v=r.ticks[f[e+(s?1:-1)]],m=v&&v.label.xy&&v.label.xy.x+v.getLabelSides()[s?0:1];s&&!a||o&&a?u+c<p&&(u=p-c,v&&u+h>m&&(n=!1)):u+h>d&&(u=d-h,v&&u+c<m&&(n=!1)),t.x=u}return n},getPosition:function(e,t,n,r){var i=this.axis,s=i.chart,o=r&&s.oldChartHeight||s.chartHeight;return{x:e?i.translate(t+n,null,null,r)+i.transB:i.left+i.offset+(i.opposite?(r&&s.oldChartWidth||s.chartWidth)-i.right-i.left:0),y:e?o-i.bottom+i.offset-(i.opposite?i.height:0):o-i.translate(t+n,null,null,r)-i.transB}},getLabelPosition:function(e,t,n,r,i,s,o,u){var a=this.axis,f=a.transA,l=a.reversed,c=a.staggerLines;return e=e+i.x-(s&&r?s*f*(l?-1:1):0),t=t+i.y-(s&&!r?s*f*(l?1:-1):0),Dt(i.y)||(t+=Nt(n.styles.lineHeight)*.9-n.getBBox().height/2),c&&(t+=o/(u||1)%c*16),{x:e,y:t}},getMarkPath:function(e,t,n,r,i,s){return s.crispLine([X,e,t,V,e+(i?0:-n),t+(i?n:0)],r)},render:function(t,n){var r=this,i=r.axis,s=i.options,o=i.chart,u=o.renderer,a=i.horiz,f=r.type,l=r.label,c=r.pos,h=s.labels,p=r.gridLine,d=f?f+"Grid":"grid",v=f?f+"Tick":"tick",m=s[d+"LineWidth"],g=s[d+"LineColor"],y=s[d+"LineDashStyle"],b=s[v+"Length"],w=s[v+"Width"]||0,E=s[v+"Color"],S=s[v+"Position"],x,T=r.mark,N,C=h.step,k,L=!0,A=i.tickmarkOffset,O=r.getPosition(a,c,A,n),M=O.x,_=O.y,D=i.staggerLines;m&&(x=i.getPlotLinePath(c+A,m,n),p===e&&(k={stroke:g,"stroke-width":m},y&&(k.dashstyle=y),f||(k.zIndex=1),r.gridLine=p=m?u.path(x).attr(k).add(i.gridGroup):null),!n&&p&&x&&p[r.isNew?"attr":"animate"]({d:x})),w&&b&&(S==="inside"&&(b=-b),i.opposite&&(b=-b),N=r.getMarkPath(M,_,b,w,a,u),T?T.animate({d:N}):r.mark=u.path(N).attr({stroke:E,"stroke-width":w}).add(i.axisGroup)),l&&!isNaN(M)&&(l.xy=O=r.getLabelPosition(M,_,l,a,h,A,t,C),r.isFirst&&!Bt(s.showFirstLabel,1)||r.isLast&&!Bt(s.showLastLabel,1)?L=!1:!D&&a&&h.overflow==="justify"&&!r.handleOverflow(t,O)&&(L=!1),C&&t%C&&(L=!1),L?(l[r.isNew?"attr":"animate"](O),r.isNew=!1):l.attr("y",-9999))},destroy:function(){Gt(this,this.axis)}},Pn.prototype={render:function(){var e=this,t=e.axis,n=t.horiz,r=(t.pointRange||0)/2,i=e.options,s=i.label,o=e.label,f=i.width,l=i.to,c=i.from,h=Dt(c)&&Dt(l),p=i.value,d=i.dashStyle,v=e.svgElem,m=[],g,y,b,w,E,S,x=i.color,T=i.zIndex,N=i.events,C,k=t.chart.renderer;t.isLog&&(c=Ot(c),l=Ot(l),p=Ot(p));if(f)m=t.getPlotLinePath(p,f),C={stroke:x,"stroke-width":f},d&&(C.dashstyle=d);else{if(!h)return;c=u(c,t.min-r),l=a(l,t.max+r),m=t.getPlotBandPath(c,l,i),C={fill:x},i.borderWidth&&(C.stroke=i.borderColor,C["stroke-width"]=i.borderWidth)}Dt(T)&&(C.zIndex=T);if(v)m?v.animate({d:m},null,v.onGetPath):(v.hide(),v.onGetPath=function(){v.show()});else if(m&&m.length){e.svgElem=v=k.path(m).attr(C).add();if(N){g=function(t){v.on(t,function(n){N[t].apply(e,[n])})};for(y in N)g(y)}}return s&&Dt(s.text)&&m&&m.length&&t.width>0&&t.height>0?(s=hn({align:n&&h&&"center",x:n?!h&&4:10,verticalAlign:!n&&h&&"middle",y:n?h?16:10:h?6:-4,rotation:n&&!h&&90},s),o||(e.label=o=k.text(s.text,0,0).attr({align:s.textAlign||s.align,rotation:s.rotation,zIndex:T}).css(s.style).add()),b=[m[1],m[4],Bt(m[6],m[1])],w=[m[2],m[5],Bt(m[7],m[2])],E=Kt(b),S=Kt(w),o.align(s,!1,{x:E,y:S,width:Qt(b)-E,height:Qt(w)-S}),o.show()):o&&o.hide(),e},destroy:function(){var e=this,t=e.axis;_t(t.plotLinesAndBands,e),Gt(e,this.axis)}},Hn.prototype={destroy:function(){Gt(this,this.axis)},setTotal:function(e){this.total=e,this.cum=e},render:function(e){var t=this.options.formatter.call(this);this.label?this.label.attr({text:t,visibility:q}):this.label=this.axis.chart.renderer.text(t,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:q}).add(e)},setOffset:function(e,t){var n=this,r=n.axis,i=r.chart,s=i.inverted,o=this.isNegative,u=r.translate(this.percent?100:this.total,0,0,0,1),a=r.translate(0),l=f(u-a),c=i.xAxis[0].translate(this.x)+e,h=i.plotHeight,p={x:s?o?u:u-l:c,y:s?h-c-t:o?h-u-l:h-u,width:s?l:t,height:s?t:l},d=this.label,v;d&&(d.align(this.alignOptions,null,p),v=d.alignAttr,d.attr({visibility:this.options.crop===!1||i.isInsidePlot(v.x,v.y)?S?"inherit":U:q}))}},Bn.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:bn,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total},style:bn.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(t,n){var r=n.isX,i=this;i.horiz=t.inverted?!r:r,i.isXAxis=r,i.xOrY=r?"x":"y",i.opposite=n.opposite,i.side=i.horiz?i.opposite?0:2:i.opposite?1:3,i.setOptions(n);var s=this.options,o=s.type,u=o==="datetime";i.labelFormatter=s.labels.formatter||i.defaultLabelFormatter,i.staggerLines=i.horiz&&s.labels.staggerLines,i.userOptions=n,i.minPixelPadding=0,i.chart=t,i.reversed=s.reversed,i.categories=s.categories,i.isLog=o==="logarithmic",i.isLinked=Dt(s.linkedTo),i.isDatetimeAxis=u,i.tickmarkOffset=s.categories&&s.tickmarkPlacement==="between"?.5:0,i.ticks={},i.minorTicks={},i.plotLinesAndBands=[],i.alternateBands={},i.len=0,i.minRange=i.userMinRange=s.minRange||s.maxZoom,i.range=s.range,i.offset=s.offset||0,i.stacks={},i.max=null,i.min=null;var a,f=i.options.events;t.axes.push(i),t[r?"xAxis":"yAxis"].push(i),i.series=[],t.inverted&&r&&i.reversed===e&&(i.reversed=!0),i.removePlotBand=i.removePlotBandOrLine,i.removePlotLine=i.removePlotBandOrLine,i.addPlotBand=i.addPlotBandOrLine,i.addPlotLine=i.addPlotBandOrLine;for(a in f)pn(i,a,f[a]);i.isLog&&(i.val2lin=Ot,i.lin2val=Mt)},setOptions:function(e){this.options=hn(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],hn(O[this.isXAxis?"xAxis":"yAxis"],e))},defaultLabelFormatter:function(){var t=this.axis,n=this.value,r=t.categories,i=this.dateTimeLabelFormat,s=O.lang.numericSymbols,o=s&&s.length,u,a,f=t.isLog?n:t.tickInterval;if(r)a=n;else if(i)a=M(i,n);else if(o&&f>=1e3)while(o--&&a===e)u=Math.pow(1e3,o+1),f>=u&&s[o]!==null&&(a=Rt(n/u,-1)+s[o]);return a===e&&(n>=1e3?a=Rt(n,0):a=Rt(n,-1)),a},getSeriesExtremes:function(){var t=this,n=t.chart,r=t.stacks,i=[],s=[],o;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=null,an(t.series,function(f){if(f.visible||!n.options.chart.ignoreHiddenSeries){var l=f.options,c,h,p,d,v,m,g,y,b,w,E=l.threshold,S,x=[],T=0;t.hasVisibleSeries=!0,t.isLog&&E<=0&&(E=l.threshold=null);if(t.isXAxis)g=f.xData,g.length&&(t.dataMin=a(Bt(t.dataMin,g[0]),Kt(g)),t.dataMax=u(Bt(t.dataMax,g[0]),Qt(g)));else{var N,C,k,L=f.cropped,A=f.xAxis.getExtremes(),O,M=!!f.modifyValue;c=l.stacking,t.usePercentage=c==="percent",c&&(v=l.stack,d=f.type+Bt(v,""),m="-"+d,f.stackKey=d,h=i[d]||[],i[d]=h,p=s[m]||[],s[m]=p),t.usePercentage&&(t.dataMin=0,t.dataMax=99),g=f.processedXData,y=f.processedYData,S=y.length;for(o=0;o<S;o++){b=g[o],w=y[o],c&&(N=w<E,C=N?p:h,k=N?m:d,Dt(C[b])?(C[b]=en(C[b]+w),w=[w,C[b]]):C[b]=w,r[k]||(r[k]={}),r[k][b]||(r[k][b]=new Hn(t,t.options.stackLabels,N,b,v,c)),r[k][b].setTotal(C[b]));if(w!==null&&w!==e){M&&(w=f.modifyValue(w));if(L||(g[o+1]||b)>=A.min&&(g[o-1]||b)<=A.max){O=w.length;if(O)while(O--)w[O]!==null&&(x[T++]=w[O]);else x[T++]=w}}}!t.usePercentage&&x.length&&(t.dataMin=a(Bt(t.dataMin,x[0]),Kt(x)),t.dataMax=u(Bt(t.dataMax,x[0]),Qt(x))),Dt(E)&&(t.dataMin>=E?(t.dataMin=E,t.ignoreMinPadding=!0):t.dataMax<E&&(t.dataMax=E,t.ignoreMaxPadding=!0))}}})},translate:function(e,t,n,r,i,s){var o=this,u=o.len,a=1,f=0,l=r?o.oldTransA:o.transA,c=r?o.oldMin:o.min,h,p=o.options.ordinal||o.isLog&&i;return l||(l=o.transA),n&&(a*=-1,f=u),o.reversed&&(a*=-1,f-=a*u),t?(o.reversed&&(e=u-e),h=e/l+c,p&&(h=o.lin2val(h))):(p&&(e=o.val2lin(e)),h=a*(e-c)*l+f+a*o.minPixelPadding+(s?l*o.pointRange/2:0)),h},getPlotLinePath:function(e,t,n){var r=this,s=r.chart,o=r.left,u=r.top,a,f,l,c,h=r.translate(e,null,null,n),p=n&&s.oldChartHeight||s.chartHeight,d=n&&s.oldChartWidth||s.chartWidth,v,m=r.transB;a=l=i(h+m),f=c=i(p-h-m);if(isNaN(h))v=!0;else if(r.horiz){f=u,c=p-r.bottom;if(a<o||a>o+r.width)v=!0}else{a=o,l=d-r.right;if(f<u||f>u+r.height)v=!0}return v?null:s.renderer.crispLine([X,a,f,V,l,c],t||0)},getPlotBandPath:function(e,t){var n=this.getPlotLinePath(t),r=this.getPlotLinePath(e);return r&&n?r.push(n[4],n[5],n[1],n[2]):r=null,r},getLinearTickPositions:function(e,t,n){var r,i,u=en(s(t/e)*e),a=en(o(n/e)*e),f=[];r=u;while(r<=a){f.push(r),r=en(r+e);if(r===i)break;i=r}return f},getLogTickPositions:function(e,t,n,o){var u=this,a=u.options,f=u.len,l=[];o||(u._minorAutoInterval=null);if(e>=.5)e=i(e),l=u.getLinearTickPositions(e,t,n);else if(e>=.08){var c=s(t),h,p,d,v,m,g,y;e>.3?h=[1,2,4]:e>.15?h=[1,2,4,6,8]:h=[1,2,3,4,5,6,7,8,9];for(p=c;p<n+1&&!y;p++){v=h.length;for(d=0;d<v&&!y;d++)m=Ot(Mt(p)*h[d]),m>t&&l.push(g),g>n&&(y=!0),g=m}}else{var b=Mt(t),w=Mt(n),E=a[o?"minorTickInterval":"tickInterval"],S=E==="auto"?null:E,x=a.tickPixelInterval/(o?5:1),T=o?f/u.tickPositions.length:f;e=Bt(S,u._minorAutoInterval,(w-b)*x/(T||1)),e=Wt(e,null,r.pow(10,s(r.log(e)/r.LN10))),l=cn(u.getLinearTickPositions(e,b,w),Ot),o||(u._minorAutoInterval=e/5)}return o||(u.tickInterval=e),l},getMinorTickPositions:function(){var e=this,t=e.options,n=e.tickPositions,r=e.minorTickInterval,i=[],s,o,u;if(e.isLog){u=n.length;for(o=1;o<u;o++)i=i.concat(e.getLogTickPositions(r,n[o-1],n[o],!0))}else if(e.isDatetimeAxis&&t.minorTickInterval==="auto")i=i.concat(Vt(Xt(r),e.min,e.max,t.startOfWeek));else for(s=e.min+(n[0]-e.min)%r;s<=e.max;s+=r)i.push(s);return i},adjustForMinRange:function(){var t=this,n=t.options,r=t.min,i=t.max,s,o=t.dataMax-t.dataMin>=t.minRange,u,f,l,c,h,p,d;t.isXAxis&&t.minRange===e&&!t.isLog&&(Dt(n.min)||Dt(n.max)?t.minRange=null:(an(t.series,function(t){c=t.xData,h=t.xIncrement?1:c.length-1;for(f=h;f>0;f--){l=c[f]-c[f-1];if(u===e||l<u)u=l}}),t.minRange=a(u*5,t.dataMax-t.dataMin)));if(i-r<t.minRange){var v=t.minRange;s=(v-i+r)/2,p=[r-s,Bt(n.min,r-s)],o&&(p[2]=t.dataMin),r=Qt(p),d=[r+v,Bt(n.max,r+v)],o&&(d[2]=t.dataMax),i=Kt(d),i-r<v&&(p[0]=i-v,p[1]=Bt(n.min,i-v),r=Qt(p))}t.min=r,t.max=i},setAxisTranslation:function(){var e=this,t=e.max-e.min,n=0,r,i=0,s=0,o=e.linkedParent,f=e.transA;e.isXAxis&&(o?(i=o.minPointOffset,s=o.pointRangePadding):an(e.series,function(e){var t=e.pointRange,o=e.options.pointPlacement,f=e.closestPointRange;n=u(n,t),i=u(i,o?0:t/2),s=u(s,o==="on"?0:t),!e.noSharedTooltip&&Dt(f)&&(r=Dt(r)?a(r,f):f)}),e.minPointOffset=i,e.pointRangePadding=s,e.pointRange=n,e.closestPointRange=r),e.oldTransA=f,e.translationSlope=e.transA=f=e.len/(t+s||1),e.transB=e.horiz?e.left:e.bottom,e.minPixelPadding=f*i},setTickPositions:function(e){var t=this,n=t.chart,i=t.options,o=t.isLog,f=t.isDatetimeAxis,l=t.isXAxis,c=t.isLinked,h=t.options.tickPositioner,p,d=i.maxPadding,v=i.minPadding,m,g,y=i.tickInterval,b=i.minTickInterval,w=i.tickPixelInterval,E,S=t.categories;c?(t.linkedParent=n[l?"xAxis":"yAxis"][i.linkedTo],g=t.linkedParent.getExtremes(),t.min=Bt(g.min,g.dataMin),t.max=Bt(g.max,g.dataMax),i.type!==t.linkedParent.options.type&&Zt(11,1)):(t.min=Bt(t.userMin,i.min,t.dataMin),t.max=Bt(t.userMax,i.max,t.dataMax)),o&&(!e&&a(t.min,Bt(t.dataMin,t.min))<=0&&Zt(10,1),t.min=en(Ot(t.min)),t.max=en(Ot(t.max))),t.range&&(t.userMin=t.min=u(t.min,t.max-t.range),t.userMax=t.max,e&&(t.range=null)),t.adjustForMinRange(),!S&&!t.usePercentage&&!c&&Dt(t.min)&&Dt(t.max)&&(m=t.max-t.min,m&&(!Dt(i.min)&&!Dt(t.userMin)&&v&&(t.dataMin<0||!t.ignoreMinPadding)&&(t.min-=m*v),!Dt(i.max)&&!Dt(t.userMax)&&d&&(t.dataMax>0||!t.ignoreMaxPadding)&&(t.max+=m*d))),t.min===t.max||t.min===undefined||t.max===undefined?t.tickInterval=1:c&&!y&&w===t.linkedParent.options.tickPixelInterval?t.tickInterval=t.linkedParent.tickInterval:t.tickInterval=Bt(y,S?1:(t.max-t.min)*w/(t.len||1)),l&&!e&&an(t.series,function(e){e.processData(t.min!==t.oldMin||t.max!==t.oldMax)}),t.setAxisTranslation(e),t.beforeSetTickPositions&&t.beforeSetTickPositions(),t.postProcessTickInterval&&(t.tickInterval=t.postProcessTickInterval(t.tickInterval)),!y&&t.tickInterval<b&&(t.tickInterval=b),!f&&!o&&(p=r.pow(10,s(r.log(t.tickInterval)/r.LN10)),y||(t.tickInterval=Wt(t.tickInterval,null,p,i))),t.minorTickInterval=i.minorTickInterval==="auto"&&t.tickInterval?t.tickInterval/5:i.minorTickInterval,t.tickPositions=E=i.tickPositions||h&&h.apply(t,[t.min,t.max]),E||(f?E=(t.getNonLinearTimeTicks||Vt)(Xt(t.tickInterval,i.units),t.min,t.max,i.startOfWeek,t.ordinalPositions,t.closestPointRange,!0):o?E=t.getLogTickPositions(t.tickInterval,t.min,t.max):E=t.getLinearTickPositions(t.tickInterval,t.min,t.max),t.tickPositions=E);if(!c){var x=E[0],T=E[E.length-1],N=t.minPointOffset||0,C;i.startOnTick?t.min=x:t.min-N>x&&E.shift(),i.endOnTick?t.max=T:t.max+N<T&&E.pop(),E.length===1&&(C=1e-9,t.min-=C,t.max+=C)}},setMaxTicks:function(){var e=this.chart,t=e.maxTicks,n=this.tickPositions,r=this.xOrY;t||(t={x:0,y:0}),!this.isLinked&&!this.isDatetimeAxis&&n.length>t[r]&&this.options.alignTicks!==!1&&(t[r]=n.length),e.maxTicks=t},adjustTickAmount:function(){var e=this,t=e.chart,n=e.xOrY,r=e.tickPositions,i=t.maxTicks;if(i&&i[n]&&!e.isDatetimeAxis&&!e.categories&&!e.isLinked&&e.options.alignTicks!==!1){var s=e.tickAmount,o=r.length,u;e.tickAmount=u=i[n];if(o<u){while(r.length<u)r.push(en(r[r.length-1]+e.tickInterval));e.transA*=(o-1)/(u-1),e.max=r[r.length-1]}Dt(s)&&u!==s&&(e.isDirty=!0)}},setScale:function(){var e=this,t=e.stacks,n,r,i,s;e.oldMin=e.min,e.oldMax=e.max,e.oldAxisLength=e.len,e.setAxisSize(),s=e.len!==e.oldAxisLength,an(e.series,function(e){if(e.isDirtyData||e.isDirty||e.xAxis.isDirty)i=!0});if(s||i||e.isLinked||e.userMin!==e.oldUserMin||e.userMax!==e.oldUserMax)e.getSeriesExtremes(),e.setTickPositions(),e.oldUserMin=e.userMin,e.oldUserMax=e.userMax,e.isDirty||(e.isDirty=s||e.min!==e.oldMin||e.max!==e.oldMax);if(!e.isXAxis)for(n in t)for(r in t[n])t[n][r].cum=t[n][r].total;e.setMaxTicks()},setExtremes:function(e,t,n,r,i){var s=this,o=s.chart;n=Bt(n,!0),i=xt(i,{min:e,max:t}),vn(s,"setExtremes",i,function(){s.userMin=e,s.userMax=t,s.isDirtyExtremes=!0,n&&o.redraw(r)})},zoom:function(t,n){return this.setExtremes(t,n,!1,e,{trigger:"zoom"}),!0},setAxisSize:function(){var e=this,t=e.chart,n=e.options,r=n.offsetLeft||0,i=n.offsetRight||0;e.left=Bt(n.left,t.plotLeft+r),e.top=Bt(n.top,t.plotTop),e.width=Bt(n.width,t.plotWidth-r+i),e.height=Bt(n.height,t.plotHeight),e.bottom=t.chartHeight-e.height-e.top,e.right=t.chartWidth-e.width-e.left,e.len=u(e.horiz?e.width:e.height,0)},getExtremes:function(){var e=this,t=e.isLog;return{min:t?en(Mt(e.min)):e.min,max:t?en(Mt(e.max)):e.max,dataMin:e.dataMin,dataMax:e.dataMax,userMin:e.userMin,userMax:e.userMax}},getThreshold:function(e){var t=this,n=t.isLog,r=n?Mt(t.min):t.min,i=n?Mt(t.max):t.max;return r>e||e===null?e=r:i<e&&(e=i),t.translate(e,0,1,0,1)},addPlotBandOrLine:function(e){var t=(new Pn(this,e)).render();return this.plotLinesAndBands.push(t),t},getOffset:function(){var e=this,t=e.chart,n=t.renderer,r=e.options,i=e.tickPositions,s=e.ticks,o=e.horiz,a=e.side,f,l,c=0,h,p=0,d=r.title,v=r.labels,m=0,g=t.axisOffset,y=[-1,1,1,-1][a],b;e.hasData=f=e.hasVisibleSeries||Dt(e.min)&&Dt(e.max)&&!!i,e.showAxis=l=f||Bt(r.showEmpty,!0),e.axisGroup||(e.gridGroup=n.g("grid").attr({zIndex:r.gridZIndex||1}).add(),e.axisGroup=n.g("axis").attr({zIndex:r.zIndex||2}).add(),e.labelGroup=n.g("axis-labels").attr({zIndex:v.zIndex||7}).add());if(f||e.isLinked)an(i,function(t){s[t]?s[t].addLabel():s[t]=new Dn(e,t)}),an(i,function(e){if(a===0||a===2||{1:"left",3:"right"}[a]===v.align)m=u(s[e].getLabelSize(),m)}),e.staggerLines&&(m+=(e.staggerLines-1)*16);else for(b in s)s[b].destroy(),delete s[b];d&&d.text&&(e.axisTitle||(e.axisTitle=n.text(d.text,0,0,d.useHTML).attr({zIndex:7,rotation:d.rotation||0,align:d.textAlign||{low:"left",middle:"center",high:"right"}[d.align]}).css(d.style).add(e.axisGroup),e.axisTitle.isNew=!0),l&&(c=e.axisTitle.getBBox()[o?"height":"width"],p=Bt(d.margin,o?5:10),h=d.offset),e.axisTitle[l?"show":"hide"]()),e.offset=y*Bt(r.offset,g[a]),e.axisTitleMargin=Bt(h,m+p+(a!==2&&m&&y*r.labels[o?"y":"x"])),g[a]=u(g[a],e.axisTitleMargin+c+y*e.offset)},getLinePath:function(e){var t=this.chart,n=this.opposite,r=this.offset,i=this.horiz,s=this.left+(n?this.width:0)+r,o=t.chartHeight-this.bottom-(n?this.height:0)+r;return this.lineTop=o,t.renderer.crispLine([X,i?this.left:s,i?o:this.top,V,i?t.chartWidth-this.right:s,i?o:t.chartHeight-this.bottom],e)},getTitlePosition:function(){var e=this.horiz,t=this.left,n=this.top,r=this.len,i=this.options.title,s=e?t:n,o=this.opposite,u=this.offset,a=Nt(i.style.fontSize||12),f={low:s+(e?0:r),middle:s+r/2,high:s+(e?r:0)}[i.align],l=(e?n+this.height:t)+(e?1:-1)*(o?-1:1)*this.axisTitleMargin+(this.side===2?a:0);return{x:e?f:l+(o?this.width:0)+u+(i.x||0),y:e?l-(o?this.height:0)+u:f+(i.y||0)}},render:function(){var t=this,n=t.chart,r=n.renderer,i=t.options,s=t.isLog,o=t.isLinked,u=t.tickPositions,a=t.axisTitle,f=t.stacks,l=t.ticks,c=t.minorTicks,h=t.alternateBands,p=i.stackLabels,d=i.alternateGridColor,v=t.tickmarkOffset,m=i.lineWidth,g,y=n.hasRendered,b=y&&Dt(t.oldMin)&&!isNaN(t.oldMin),w=t.hasData,E=t.showAxis,S,x;if(w||o)t.minorTickInterval&&!t.categories&&an(t.getMinorTickPositions(),function(e){c[e]||(c[e]=new Dn(t,e,"minor")),b&&c[e].isNew&&c[e].render(null,!0),c[e].isActive=!0,c[e].render()}),u.length&&an(u.slice(1).concat([u[0]]),function(e,n){n=n===u.length-1?0:n+1;if(!o||e>=t.min&&e<=t.max)l[e]||(l[e]=new Dn(t,e)),b&&l[e].isNew&&l[e].render(n,!0),l[e].isActive=!0,l[e].render(n)}),d&&an(u,function(n,r){r%2===0&&n<t.max&&(h[n]||(h[n]=new Pn(t)),S=n+v,x=u[r+1]!==e?u[r+1]+v:t.max,h[n].options={from:s?Mt(S):S,to:s?Mt(x):x,color:d},h[n].render(),h[n].isActive=!0)}),t._addedPlotLB||(an((i.plotLines||[]).concat(i.plotBands||[]),function(e){t.addPlotBandOrLine(e)}),t._addedPlotLB=!0);an([l,c,h],function(e){var t;for(t in e)e[t].isActive?e[t].isActive=!1:(e[t].destroy(),delete e[t])}),m&&(g=t.getLinePath(m),t.axisLine?t.axisLine.animate({d:g}):t.axisLine=r.path(g).attr({stroke:i.lineColor,"stroke-width":m,zIndex:7}).add(t.axisGroup),t.axisLine[E?"show":"hide"]()),a&&E&&(a[a.isNew?"attr":"animate"](t.getTitlePosition()),a.isNew=!1);if(p&&p.enabled){var T,N,C,k=t.stackTotalGroup;k||(t.stackTotalGroup=k=r.g("stack-labels").attr({visibility:U,zIndex:6}).add()),k.translate(n.plotLeft,n.plotTop);for(T in f){N=f[T];for(C in N)N[C].render(k)}}t.isDirty=!1},removePlotBandOrLine:function(e){var t=this.plotLinesAndBands,n=t.length;while(n--)t[n].id===e&&t[n].destroy()},setTitle:function(e,t){var n=this.chart,r=this.options,i=this.axisTitle;r.title=hn(r.title,e),this.axisTitle=i&&i.destroy(),this.isDirty=!0,Bt(t,!0)&&n.redraw()},redraw:function(){var e=this,t=e.chart;t.tracker.resetTracker&&t.tracker.resetTracker(!0),e.render(),an(e.plotLinesAndBands,function(e){e.render()}),an(e.series,function(e){e.isDirty=!0})},setCategories:function(e,t){var n=this,r=n.chart;n.categories=n.userOptions.categories=e,an(n.series,function(e){e.translate(),e.setTooltipPoints(!0)}),n.isDirty=!0,Bt(t,!0)&&r.redraw()},destroy:function(){var e=this,t=e.stacks,n;dn(e);for(n in t)Gt(t[n]),t[n]=null;an([e.ticks,e.minorTicks,e.alternateBands,e.plotLinesAndBands],function(e){Gt(e)}),an(["stackTotalGroup","axisLine","axisGroup","gridGroup","labelGroup","axisTitle"],function(t){e[t]&&(e[t]=e[t].destroy())})}},jn.prototype={destroy:function(){an(this.crosshairs,function(e){e&&e.destroy()}),this.label&&(this.label=this.label.destroy())},move:function(e,t,n,r){var i=this,s=i.now,o=i.options.animation!==!1&&!i.isHidden;xt(s,{x:o?(2*s.x+e)/3:e,y:o?(s.y+t)/2:t,anchorX:o?(2*s.anchorX+n)/3:n,anchorY:o?(s.anchorY+r)/2:r}),i.label.attr(s),o&&(f(e-s.x)>1||f(t-s.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){i&&i.move(e,t,n,r)},32))},hide:function(){if(!this.isHidden){var e=this.chart.hoverPoints;this.label.hide(),e&&an(e,function(e){e.setState()}),this.chart.hoverPoints=null,this.isHidden=!0}},hideCrosshairs:function(){an(this.crosshairs,function(e){e&&e.hide()})},getAnchor:function(e,t){var n,r=this.chart,s=r.inverted,o=0,u=0,a;return e=Ht(e),n=e[0].tooltipPos,n||(an(e,function(e){a=e.series.yAxis,o+=e.plotX,u+=(e.plotLow?(e.plotLow+e.plotHigh)/2:e.plotY)+(!s&&a?a.top-r.plotTop:0)}),o/=e.length,u/=e.length,n=[s?r.plotWidth-u:o,this.shared&&!s&&e.length>1&&t?t.chartY-r.plotTop:s?r.plotHeight-o:u]),cn(n,i)},getPosition:function(e,t,n){var r=this.chart,i=r.plotLeft,s=r.plotTop,o=r.plotWidth,a=r.plotHeight,f=Bt(this.options.distance,12),l=n.plotX,c=n.plotY,h=l+i+(r.inverted?f:-e-f),p=c-t+s+15,d;return h<7&&(h=i+u(l,0)+f),h+e>i+o&&(h-=h+e-(i+o),p=c-t+s-f,d=!0),p<s+5&&(p=s+5,d&&c>=p&&c<=p+t&&(p=c+s+f)),p+t>s+a&&(p=u(s,s+a-t-f)),{x:h,y:p}},refresh:function(e,t){function u(){var e=this,t=e.points||Ht(e),n=t[0].series,r;return r=[n.tooltipHeaderFormatter(t[0].key)],an(t,function(e){n=e.series,r.push(n.tooltipFormatter&&n.tooltipFormatter(e)||e.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),r.push(o.footerFormat||""),r.join("")}var n=this,r=n.chart,s=n.label,o=n.options,a,f,l,c,h={},p,d=[],v=o.formatter||u,m=r.hoverPoints,g,y,b=o.crosshairs,w=n.shared,E;c=n.getAnchor(e,t),a=c[0],f=c[1],w&&(!e.series||!e.series.noSharedTooltip)?(r.hoverPoints=e,m&&an(m,function(e){e.setState()}),an(e,function(e){e.setState(K),d.push(e.getLabelConfig())}),h={x:e[0].category,y:e[0].y},h.points=d,e=e[0]):h=e.getLabelConfig(),p=v.call(h),E=e.series,l=w||!E.isCartesian||E.tooltipOutsidePlot||r.isInsidePlot(a,f),p===!1||!l?this.hide():(n.isHidden&&s.show(),s.attr({text:p}),y=o.borderColor||e.color||E.color||"#606060",s.attr({stroke:y}),g=(o.positioner||n.getPosition).call(n,s.width,s.height,{plotX:a,plotY:f}),n.move(i(g.x),i(g.y),a+r.plotLeft,f+r.plotTop),n.isHidden=!1);if(b){b=Ht(b);var S,x=b.length,T,N;while(x--)N=e.series[x?"yAxis":"xAxis"],b[x]&&N&&(S=N.getPlotLinePath(x?Bt(e.stackY,e.y):e.x,1),n.crosshairs[x]?n.crosshairs[x].attr({d:S,visibility:U}):(T={"stroke-width":b[x].width||1,stroke:b[x].color||"#C0C0C0",zIndex:b[x].zIndex||2},b[x].dashStyle&&(T.dashstyle=b[x].dashStyle),n.crosshairs[x]=r.renderer.path(S).attr(T).add()))}vn(r,"tooltipRefresh",{text:p,x:a+r.plotLeft,y:f+r.plotTop,borderColor:y})}},Fn.prototype={normalizeMouseEvent:function(t){var r,s,o,u;return t=t||n.event,t.target||(t.target=t.srcElement),t=mn(t),u=t.touches?t.touches.item(0):t,this.chartPosition=r=ln(this.chart.container),u.pageX===e?(s=t.x,o=t.y):(s=u.pageX-r.left,o=u.pageY-r.top),xt(t,{chartX:i(s),chartY:i(o)})},getMouseCoordinates:function(e){var t={xAxis:[],yAxis:[]},n=this.chart;return an(n.axes,function(r){var i=r.isXAxis,s=n.inverted?!i:i;t[i?"xAxis":"yAxis"].push({axis:r,value:r.translate((s?e.chartX-n.plotLeft:r.top+r.len-e.chartY)-r.minPixelPadding,!0)})}),t},getIndex:function(e){var t=this.chart;return t.inverted?t.plotHeight+t.plotTop-e.chartY:e.chartX-t.plotLeft},onmousemove:function(e){var t=this,n=t.chart,r=n.series,i=n.tooltip,s,o,u=n.hoverPoint,l=n.hoverSeries,c,h,p=n.chartWidth,d=t.getIndex(e);if(i&&t.options.tooltip.shared&&(!l||!l.noSharedTooltip)){o=[],c=r.length;for(h=0;h<c;h++)r[h].visible&&r[h].options.enableMouseTracking!==!1&&!r[h].noSharedTooltip&&r[h].tooltipPoints&&r[h].tooltipPoints.length&&(s=r[h].tooltipPoints[d],s._dist=f(d-s[r[h].xAxis.tooltipPosName||"plotX"]),p=a(p,s._dist),o.push(s));c=o.length;while(c--)o[c]._dist>p&&o.splice(c,1);o.length&&o[0].plotX!==t.hoverX&&(i.refresh(o,e),t.hoverX=o[0].plotX)}l&&l.tracker&&(s=l.tooltipPoints[d],s&&s!==u&&s.onMouseOver())},resetTracker:function(t){var n=this,r=n.chart,i=r.hoverSeries,s=r.hoverPoint,o=r.tooltip,u=o&&o.shared?r.hoverPoints:s;t=t&&o&&u,t&&Ht(u)[0].plotX===e&&(t=!1),t?o.refresh(u):(s&&s.onMouseOut(),i&&i.onMouseOut(),o&&(o.hide(),o.hideCrosshairs()),n.hoverX=null)},setDOMEvents:function(){function c(){if(n.selectionMarker){var e={xAxis:[],yAxis:[]},o=n.selectionMarker.getBBox(),f=o.x-r.plotLeft,l=o.y-r.plotTop,h;s&&(an(r.axes,function(t){if(t.options.zoomEnabled!==!1){var n=t.isXAxis,i=r.inverted?!n:n,s=t.translate(i?f:r.plotHeight-l-o.height,!0,0,0,1),c=t.translate((i?f+o.width:r.plotHeight-l)-2*t.minPixelPadding,!0,0,0,1);!isNaN(s)&&!isNaN(c)&&(e[n?"xAxis":"yAxis"].push({axis:t,min:a(s,c),max:u(s,c)}),h=!0)}}),h&&vn(r,"selection",e,function(e){r.zoom(e)})),n.selectionMarker=n.selectionMarker.destroy()}r&&(jt(i,{cursor:"auto"}),r.cancelClick=s,r.mouseIsDown=s=!1),dn(t,"mouseup",c),C&&dn(t,"touchend",c)}var e=!0,n=this,r=n.chart,i=r.container,s,o=n.zoomX&&!r.inverted||n.zoomY&&r.inverted,l=n.zoomY&&!r.inverted||n.zoomX&&r.inverted;n.hideTooltipOnMouseMove=function(e){e=mn(e),n.chartPosition&&r.hoverSeries&&r.hoverSeries.isCartesian&&!r.isInsidePlot(e.pageX-n.chartPosition.left-r.plotLeft,e.pageY-n.chartPosition.top-r.plotTop)&&n.resetTracker()},n.hideTooltipOnMouseLeave=function(){n.resetTracker(),n.chartPosition=null},i.onmousedown=function(e){e=n.normalizeMouseEvent(e),e.type.indexOf("touch")===-1&&e.preventDefault&&e.preventDefault(),r.mouseIsDown=!0,r.cancelClick=!1,r.mouseDownX=n.mouseDownX=e.chartX,n.mouseDownY=e.chartY,pn(t,"mouseup",c),C&&pn(t,"touchend",c)};var h=function(t){if(t&&t.touches&&t.touches.length>1)return;t=n.normalizeMouseEvent(t);var i=t.type,u=t.chartX,a=t.chartY,c=!r.isInsidePlot(u-r.plotLeft,a-r.plotTop);i.indexOf("touch")===-1&&(t.returnValue=!1),i==="touchstart"&&(Pt(t.target,"isTracker")?r.runTrackerClick||t.preventDefault():!r.runChartClick&&!c&&t.preventDefault()),c&&(u<r.plotLeft?u=r.plotLeft:u>r.plotLeft+r.plotWidth&&(u=r.plotLeft+r.plotWidth),a<r.plotTop?a=r.plotTop:a>r.plotTop+r.plotHeight&&(a=r.plotTop+r.plotHeight));if(r.mouseIsDown&&i!=="touchstart"){s=Math.sqrt(Math.pow(n.mouseDownX-u,2)+Math.pow(n.mouseDownY-a,2));if(s>10){var h=r.isInsidePlot(n.mouseDownX-r.plotLeft,n.mouseDownY-r.plotTop);r.hasCartesianSeries&&(n.zoomX||n.zoomY)&&h&&(n.selectionMarker||(n.selectionMarker=r.renderer.rect(r.plotLeft,r.plotTop,o?1:r.plotWidth,l?1:r.plotHeight,0).attr({fill:n.options.chart.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()));if(n.selectionMarker&&o){var p=u-n.mouseDownX;n.selectionMarker.attr({width:f(p),x:(p>0?0:p)+n.mouseDownX})}if(n.selectionMarker&&l){var d=a-n.mouseDownY;n.selectionMarker.attr({height:f(d),y:(d>0?0:d)+n.mouseDownY})}h&&!n.selectionMarker&&n.options.chart.panning&&r.pan(u)}}return c||n.onmousemove(t),e=c,c||!r.hasCartesianSeries};/Android 4\.0/.test(d)||(i.onmousemove=h),pn(i,"mouseleave",n.hideTooltipOnMouseLeave),C||pn(t,"mousemove",n.hideTooltipOnMouseMove),i.ontouchstart=function(e){(n.zoomX||n.zoomY)&&i.onmousedown(e),h(e)},i.ontouchmove=h,i.ontouchend=function(){s&&n.resetTracker()},i.onclick=function(e){var t=r.hoverPoint,i,s;e=n.normalizeMouseEvent(e),e.cancelBubble=!0,r.cancelClick||(t&&(Pt(e.target,"isTracker")||Pt(e.target.parentNode,"isTracker"))?(i=t.plotX,s=t.plotY,xt(t,{pageX:n.chartPosition.left+r.plotLeft+(r.inverted?r.plotWidth-s:i),pageY:n.chartPosition.top+r.plotTop+(r.inverted?r.plotHeight-i:s)}),vn(t.series,"click",xt(e,{point:t})),t.firePointEvent("click",e)):(xt(e,n.getMouseCoordinates(e)),r.isInsidePlot(e.chartX-r.plotLeft,e.chartY-r.plotTop)&&vn(r,"click",e)))}},destroy:function(){var e=this,n=e.chart,r=n.container;n.trackerGroup&&(n.trackerGroup=n.trackerGroup.destroy()),dn(r,"mouseleave",e.hideTooltipOnMouseLeave),dn(t,"mousemove",e.hideTooltipOnMouseMove),r.onclick=r.onmousedown=r.onmousemove=r.ontouchstart=r.ontouchend=r.ontouchmove=null,clearInterval(this.tooltipTimeout)},init:function(e,t){e.trackerGroup||(e.trackerGroup=e.renderer.g("tracker").attr({zIndex:9}).add()),t.enabled&&(e.tooltip=new jn(e,t)),this.setDOMEvents()}},In.prototype={init:function(e){var t=this,n=t.options=e.options.legend;if(!n.enabled)return;var r=n.itemStyle,i=Bt(n.padding,8),s=n.itemMarginTop||0;t.baseline=Nt(r.fontSize)+3+s,t.itemStyle=r,t.itemHiddenStyle=hn(r,n.itemHiddenStyle),t.itemMarginTop=s,t.padding=i,t.initialItemX=i,t.initialItemY=i-5,t.maxItemWidth=0,t.chart=e,t.itemHeight=0,t.lastLineHeight=0,t.render(),pn(t.chart,"endResize",function(){t.positionCheckboxes()})},colorizeItem:function(t,n){var r=this,i=r.options,s=t.legendItem,o=t.legendLine,u=t.legendSymbol,a=r.itemHiddenStyle.color,f=n?i.itemStyle.color:a,l=n?t.color:a,c=t.options&&t.options.marker,h={stroke:l,fill:l},p,d;s&&s.css({fill:f}),o&&o.attr({stroke:l});if(u){if(c){c=t.convertAttribs(c);for(p in c)d=c[p],d!==e&&(h[p]=d)}u.attr(h)}},positionItem:function(e){var t=this,n=t.options,r=n.symbolPadding,i=!n.rtl,s=e._legendItemPos,o=s[0],u=s[1],a=e.checkbox;e.legendGroup&&e.legendGroup.translate(i?o:t.legendWidth-o-2*r-4,u),a&&(a.x=o,a.y=u)},destroyItem:function(e){var t=e.checkbox;an(["legendItem","legendLine","legendSymbol","legendGroup"],function(t){e[t]&&e[t].destroy()}),t&&Yt(e.checkbox)},destroy:function(){var e=this,t=e.group,n=e.box;n&&(e.box=n.destroy()),t&&(e.group=t.destroy())},positionCheckboxes:function(e){var t=this.group.alignAttr,n,r=this.clipHeight||this.legendHeight;t&&(n=t.translateY,an(this.allItems,function(i){var s=i.checkbox,o;s&&(o=n+s.y+(e||0)+3,jt(s,{left:t.translateX+i.legendItemWidth+s.x-20+z,top:o+z,display:o>n-6&&o<n+r-6?"":W}))}))},renderItem:function(e){var t=this,n=t.chart,r=n.renderer,i=t.options,s=i.layout==="horizontal",o=i.symbolWidth,a=i.symbolPadding,f=t.itemStyle,l=t.itemHiddenStyle,c=t.padding,h=!i.rtl,p,d=i.width,v=i.itemMarginBottom||0,m=t.itemMarginTop,g=t.initialItemX,y,b,w=e.legendItem,E=e.series||e,S=E.options,x=S.showCheckbox,T=i.useHTML;w||(e.legendGroup=r.g("legend-item").attr({zIndex:1}).add(t.scrollGroup),E.drawLegendSymbol(t,e),e.legendItem=w=r.text(i.labelFormatter.call(e),h?o+a:-a,t.baseline,T).css(hn(e.visible?f:l)).attr({align:h?"left":"right",zIndex:2}).add(e.legendGroup),(T?w:e.legendGroup).on("mouseover",function(){e.setState(K),w.css(t.options.itemHoverStyle)}).on("mouseout",function(){w.css(e.visible?f:l),e.setState()}).on("click",function(t){var n="legendItemClick",r=function(){e.setVisible()};t={browserEvent:t},e.firePointEvent?e.firePointEvent(n,t,r):vn(e,n,t,r)}),t.colorizeItem(e,e.visible),S&&x&&(e.checkbox=Ft("input",{type:"checkbox",checked:e.selected,defaultChecked:e.selected},i.itemCheckboxStyle,n.container),pn(e.checkbox,"click",function(t){var n=t.target;vn(e,"checkboxClick",{checked:n.checked},function(){e.select()})}))),y=w.getBBox(),b=e.legendItemWidth=i.itemWidth||o+a+y.width+c+(x?20:0),t.itemHeight=p=y.height,s&&t.itemX-g+b>(d||n.chartWidth-2*c-g)&&(t.itemX=g,t.itemY+=m+t.lastLineHeight+v,t.lastLineHeight=0),t.maxItemWidth=u(t.maxItemWidth,b),t.lastItemY=m+t.itemY+v,t.lastLineHeight=u(p,t.lastLineHeight),e._legendItemPos=[t.itemX,t.itemY],s?t.itemX+=b:(t.itemY+=m+p+v,t.lastLineHeight=p),t.offsetWidth=d||u(s?t.itemX-g:b,t.offsetWidth)},render:function(){var e=this,t=e.chart,n=t.renderer,r=e.group,i,s,o,u,a=e.box,f=e.options,l=e.padding,c=f.borderWidth,h=f.backgroundColor;e.itemX=e.initialItemX,e.itemY=e.initialItemY,e.offsetWidth=0,e.lastItemY=0,r||(e.group=r=n.g("legend").attr({zIndex:7}).add(),e.contentGroup=n.g().attr({zIndex:1}).add(r),e.scrollGroup=n.g().add(e.contentGroup),e.clipRect=n.clipRect(0,0,9999,t.chartHeight),e.contentGroup.clip(e.clipRect)),i=[],an(t.series,function(e){var t=e.options;if(!t.showInLegend)return;i=i.concat(e.legendItems||(t.legendType==="point"?e.data:e))}),Jt(i,function(e,t){return(e.options&&e.options.legendIndex||0)-(t.options&&t.options.legendIndex||0)}),f.reversed&&i.reverse(),e.allItems=i,e.display=s=!!i.length,an(i,function(t){e.renderItem(t)}),o=f.width||e.offsetWidth,u=e.lastItemY+e.lastLineHeight,u=e.handleOverflow(u);if(c||h)o+=l,u+=l,a?o>0&&u>0&&(a[a.isNew?"attr":"animate"](a.crisp(null,null,null,o,u)),a.isNew=!1):(e.box=a=n.rect(0,0,o,u,f.borderRadius,c||0).attr({stroke:f.borderColor,"stroke-width":c||0,fill:h||W}).add(r).shadow(f.shadow),a.isNew=!0),a[s?"show":"hide"]();e.legendWidth=o,e.legendHeight=u,an(i,function(t){e.positionItem(t)}),s&&r.align(xt({width:o,height:u},f),!0,t.spacingBox),t.isResizing||this.positionCheckboxes()},handleOverflow:function(e){var t=this,n=this.chart,r=n.renderer,i,s=this.options,u=s.y,f=s.verticalAlign==="top",l=n.spacingBox.height+(f?-u:u)-this.padding,c=s.maxHeight,h,p=this.clipRect,d=s.navigation,v=Bt(d.animation,!0),m=d.arrowSize||12,g=this.nav;return s.layout==="horizontal"&&(l/=2),c&&(l=a(l,c)),e>l?(this.clipHeight=h=l-20,this.pageCount=i=o(e/h),this.currentPage=Bt(this.currentPage,1),this.fullHeight=e,p.attr({height:h}),g||(this.nav=g=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,m,m).on("click",function(){t.scroll(-1,v)}).add(g),this.pager=r.text("",15,10).css(d.style).add(g),this.down=r.symbol("triangle-down",0,0,m,m).on("click",function(){t.scroll(1,v)}).add(g)),t.scroll(0),e=l):g&&(p.attr({height:n.chartHeight}),g.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e},scroll:function(t,n){var r=this.pageCount,i=this.currentPage+t,s=this.clipHeight,o=this.options.navigation,u=o.activeColor,f=o.inactiveColor,l=this.pager,c=this.padding,h;i>r&&(i=r),i>0&&(n!==e&&tn(n,this.chart),this.nav.attr({translateX:c,translateY:s+7,visibility:U}),this.up.attr({fill:i===1?f:u}).css({cursor:i===1?"default":"pointer"}),l.attr({text:i+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:i===r?f:u}).css({cursor:i===r?"default":"pointer"}),h=-a(s*(i-1),this.fullHeight-s+c)+1,this.scrollGroup.animate({translateY:h}),l.attr({text:i+"/"+r}),this.currentPage=i,this.positionCheckboxes(h))}},qn.prototype={init:function(e,t){var n,r=e.series;e.series=null,n=hn(O,e),n.series=e.series=r;var i=n.chart,s=i.margin,o=kt(s)?s:[s,s,s,s];this.optionsMarginTop=Bt(i.marginTop,o[0]),this.optionsMarginRight=Bt(i.marginRight,o[1]),this.optionsMarginBottom=Bt(i.marginBottom,o[2]),this.optionsMarginLeft=Bt(i.marginLeft,o[3]);var u=i.events;this.runChartClick=u&&!!u.click,this.callback=t,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=i.showAxes;var a=this,f;a.index=B.length,B.push(a),i.reflow!==!1&&pn(a,"load",a.initReflow);if(u)for(f in u)pn(a,f,u[f]);a.xAxis=[],a.yAxis=[],a.animation=T?!1:Bt(i.animation,!0),a.pointCount=0,a.counters=new $t,a.firstRender()},initSeries:function(e){var t=this,n=t.options.chart,r=e.type||n.type||n.defaultSeriesType,i=new St[r];return i.init(this,e),i},addSeries:function(e,t,n){var r,i=this;return e&&(tn(n,i),t=Bt(t,!0),vn(i,"addSeries",{options:e},function(){r=i.initSeries(e),i.isDirtyLegend=!0,t&&i.redraw()})),r},isInsidePlot:function(e,t,n){var r=n?t:e,i=n?e:t;return r>=0&&r<=this.plotWidth&&i>=0&&i<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&an(this.axes,function(e){e.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var t=this,n=t.axes,r=t.series,i=t.tracker,s=t.legend,o=t.isDirtyLegend,u,a=t.isDirtyBox,f=r.length,l=f,c,h=t.renderer,p=h.isHidden(),d=[];tn(e,t),p&&t.cloneRenderTo();while(l--){c=r[l];if(c.isDirty&&c.options.stacking){u=!0;break}}if(u){l=f;while(l--)c=r[l],c.options.stacking&&(c.isDirty=!0)}an(r,function(e){e.isDirty&&e.options.legendType==="point"&&(o=!0)}),o&&s.options.enabled&&(s.render(),t.isDirtyLegend=!1),t.hasCartesianSeries&&(t.isResizing||(t.maxTicks=null,an(n,function(e){e.setScale()})),t.adjustTickAmounts(),t.getMargins(),an(n,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,d.push(function(){vn(e,"afterSetExtremes",e.getExtremes())}));if(e.isDirty||a||u)e.redraw(),a=!0})),a&&t.drawChartBox(),an(r,function(e){e.isDirty&&e.visible&&(!e.isCartesian||e.xAxis)&&e.redraw()}),i&&i.resetTracker&&i.resetTracker(!0),h.draw(),vn(t,"redraw"),p&&t.cloneRenderTo(!0),an(d,function(e){e.call()})},showLoading:function(e){var t=this,n=t.options,r=t.loadingDiv,i=n.loading;r||(t.loadingDiv=r=Ft(j,{className:R+"loading"},xt(i.style,{left:t.plotLeft+z,top:t.plotTop+z,width:t.plotWidth+z,height:t.plotHeight+z,zIndex:10,display:W}),t.container),t.loadingSpan=Ft("span",null,i.labelStyle,r)),t.loadingSpan.innerHTML=e||n.lang.loading,t.loadingShown||(jt(r,{opacity:0,display:""}),gn(r,{opacity:i.style.opacity},{duration:i.showDuration||0}),t.loadingShown=!0)},hideLoading:function(){var e=this.options,t=this.loadingDiv;t&&gn(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){jt(t,{display:W})}}),this.loadingShown=!1},get:function(e){var t=this,n=t.axes,r=t.series,i,s,o;for(i=0;i<n.length;i++)if(n[i].options.id===e)return n[i];for(i=0;i<r.length;i++)if(r[i].options.id===e)return r[i];for(i=0;i<r.length;i++){o=r[i].points||[];for(s=0;s<o.length;s++)if(o[s].id===e)return o[s]}return null},getAxes:function(){var e=this,t=this.options,n=t.xAxis||{},r=t.yAxis||{},i,s;n=Ht(n),an(n,function(e,t){e.index=t,e.isX=!0}),r=Ht(r),an(r,function(e,t){e.index=t}),i=n.concat(r),an(i,function(t){s=new Bn(e,t)}),e.adjustTickAmounts()},getSelectedPoints:function(){var e=[];return an(this.series,function(t){e=e.concat(fn(t.points,function(e){return e.selected}))}),e},getSelectedSeries:function(){return fn(this.series,function(e){return e.selected})},showResetZoom:function(){var e=this,t=O.lang,n=e.options.chart.resetZoomButton,r=n.theme,i=r.states,s=n.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=e.renderer.button(t.resetZoom,null,null,function(){e.zoomOut()},r,i&&i.hover).attr({align:n.position.align,title:t.resetZoomTitle}).add().align(n.position,!1,e[s]),this.resetZoomButton.alignTo=s},zoomOut:function(){var e=this,t=e.resetZoomButton;vn(e,"selection",{resetSelection:!0},function(){e.zoom()}),t&&(e.resetZoomButton=t.destroy())},zoom:function(e){var t=this,n;!e||e.resetSelection?an(t.axes,function(e){n=e.zoom()}):an(e.xAxis.concat(e.yAxis),function(e){var r=e.axis;t.tracker[r.isXAxis?"zoomX":"zoomY"]&&(n=r.zoom(e.min,e.max))}),t.resetZoomButton||t.showResetZoom(),n&&t.redraw(Bt(t.options.chart.animation,t.pointCount<100))},pan:function(e){var t=this,n=t.xAxis[0],r=t.mouseDownX,i=n.pointRange/2,s=n.getExtremes(),o=n.translate(r-e,!0)+i,f=n.translate(r+t.plotWidth-e,!0)-i,l=t.hoverPoints;l&&an(l,function(e){e.setState()}),n.series.length&&o>a(s.dataMin,s.min)&&f<u(s.dataMax,s.max)&&n.setExtremes(o,f,!0,!1,{trigger:"pan"}),t.mouseDownX=e,jt(t.container,{cursor:"move"})},setTitle:function(e,t){var n=this,r=n.options,i,s;n.chartTitleOptions=i=hn(r.title,e),n.chartSubtitleOptions=s=hn(r.subtitle,t),an([["title",e,i],["subtitle",t,s]],function(e){var t=e[0],r=n[t],i=e[1],s=e[2];r&&i&&(n[t]=r=r.destroy()),s&&s.text&&!r&&(n[t]=n.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,"class":R+t,zIndex:s.zIndex||4}).css(s.style).add().align(s,!1,n.spacingBox))})},getChartSize:function(){var e=this,t=e.options.chart,n=e.renderToClone||e.renderTo;e.containerWidth=sn(n,"width"),e.containerHeight=sn(n,"height"),e.chartWidth=u(0,Bt(t.width,e.containerWidth,600)),e.chartHeight=u(0,Bt(t.height,e.containerHeight>19?e.containerHeight:400))},cloneRenderTo:function(e){var n=this.renderToClone,r=this.container;e?n&&(this.renderTo.appendChild(r),Yt(n),delete this.renderToClone):(r&&this.renderTo.removeChild(r),this.renderToClone=n=this.renderTo.cloneNode(0),jt(n,{position:F,top:"-9999px",display:"block"}),t.body.appendChild(n),r&&n.appendChild(r))},getContainer:function(){var e=this,n,r=e.options.chart,i,s,o,u="data-highcharts-chart",a,f;e.renderTo=o=r.renderTo,f=R+L++,Ct(o)&&(e.renderTo=o=t.getElementById(o)),o||Zt(13,!0),a=Nt(Pt(o,u)),!isNaN(a)&&B[a]&&B[a].destroy(),Pt(o,u,e.index),o.innerHTML="",o.offsetWidth||e.cloneRenderTo(),e.getChartSize(),i=e.chartWidth,s=e.chartHeight,e.container=n=Ft(j,{className:R+"container"+(r.className?" "+r.className:""),id:f},xt({position:I,overflow:q,width:i+z,height:s+z,textAlign:"left",lineHeight:"normal",zIndex:0},r.style),e.renderToClone||o),e.renderer=r.forExport?new kn(n,i,s,!0):new N(n,i,s),T&&e.renderer.create(e,n,i,s)},getMargins:function(){var e=this,t=e.options.chart,n=t.spacingTop,r=t.spacingRight,i=t.spacingBottom,s=t.spacingLeft,o,a=e.legend,f=e.optionsMarginTop,l=e.optionsMarginLeft,c=e.optionsMarginRight,h=e.optionsMarginBottom,p=e.chartTitleOptions,d=e.chartSubtitleOptions,v=e.options.legend,m=Bt(v.margin,10),g=v.x,y=v.y,b=v.align,w=v.verticalAlign,E;e.resetMargins(),o=e.axisOffset,(e.title||e.subtitle)&&!Dt(e.optionsMarginTop)&&(E=u(e.title&&!p.floating&&!p.verticalAlign&&p.y||0,e.subtitle&&!d.floating&&!d.verticalAlign&&d.y||0),E&&(e.plotTop=u(e.plotTop,E+Bt(p.margin,15)+n))),a.display&&!v.floating&&(b==="right"?Dt(c)||(e.marginRight=u(e.marginRight,a.legendWidth-g+m+r)):b==="left"?Dt(l)||(e.plotLeft=u(e.plotLeft,a.legendWidth+g+m+s)):w==="top"?Dt(f)||(e.plotTop=u(e.plotTop,a.legendHeight+y+m+n)):w==="bottom"&&(Dt(h)||(e.marginBottom=u(e.marginBottom,a.legendHeight-y+m+i)))),e.extraBottomMargin&&(e.marginBottom+=e.extraBottomMargin),e.extraTopMargin&&(e.plotTop+=e.extraTopMargin),e.hasCartesianSeries&&an(e.axes,function(e){e.getOffset()}),Dt(l)||(e.plotLeft+=o[3]),Dt(f)||(e.plotTop+=o[0]),Dt(h)||(e.marginBottom+=o[2]),Dt(c)||(e.marginRight+=o[1]),e.setChartSize()},initReflow:function(){function o(o){var u=r.width||sn(i,"width"),a=r.height||sn(i,"height"),f=o?o.target:n;if(!e.hasUserSize&&u&&a&&(f===n||f===t)){if(u!==e.containerWidth||a!==e.containerHeight)clearTimeout(s),e.reflowTimeout=s=setTimeout(function(){e.container&&(e.setSize(u,a,!1),e.hasUserSize=null)},100);e.containerWidth=u,e.containerHeight=a}}var e=this,r=e.options.chart,i=e.renderTo,s;pn(n,"resize",o),pn(e,"destroy",function(){dn(n,"resize",o)})},setSize:function(e,t,n){var r=this,s,o,a,f=r.resetZoomButton,l=r.title,c=r.subtitle,h;r.isResizing+=1,h=function(){r&&vn(r,"endResize",null,function(){r.isResizing-=1})},tn(n,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,Dt(e)&&(r.chartWidth=s=u(0,i(e)),r.hasUserSize=!!s),Dt(t)&&(r.chartHeight=o=u(0,i(t))),jt(r.container,{width:s+z,height:o+z}),r.renderer.setSize(s,o,n),r.plotWidth=s-r.plotLeft-r.marginRight,r.plotHeight=o-r.plotTop-r.marginBottom,r.maxTicks=null,an(r.axes,function(e){e.isDirty=!0,e.setScale()}),an(r.series,function(e){e.isDirty=!0}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.getMargins(),a=r.spacingBox,l&&l.align(null,null,a),c&&c.align(null,null,a),f&&f.align&&f.align(null,null,r[f.alignTo]),r.redraw(n),r.oldChartHeight=null,vn(r,"resize"),_===!1?h():setTimeout(h,_&&_.duration||500)},setChartSize:function(){var e=this,t=e.inverted,n=e.chartWidth,r=e.chartHeight,s=e.options.chart,o=s.spacingTop,a=s.spacingRight,f=s.spacingBottom,l=s.spacingLeft,c,h,p,d,v;e.plotLeft=c=i(e.plotLeft),e.plotTop=h=i(e.plotTop),e.plotWidth=p=u(0,i(n-c-e.marginRight)),e.plotHeight=d=u(0,i(r-h-e.marginBottom)),e.plotSizeX=t?d:p,e.plotSizeY=t?p:d,e.plotBorderWidth=v=s.plotBorderWidth||0,e.spacingBox={x:l,y:o,width:n-l-a,height:r-o-f},e.plotBox={x:c,y:h,width:p,height:d},e.clipBox={x:v/2,y:v/2,width:e.plotSizeX-v,height:e.plotSizeY-v},an(e.axes,function(e){e.setAxisSize(),e.setAxisTranslation()})},resetMargins:function(){var e=this,t=e.options.chart,n=t.spacingTop,r=t.spacingRight,i=t.spacingBottom,s=t.spacingLeft;e.plotTop=Bt(e.optionsMarginTop,n),e.marginRight=Bt(e.optionsMarginRight,r),e.marginBottom=Bt(e.optionsMarginBottom,i),e.plotLeft=Bt(e.optionsMarginLeft,s),e.axisOffset=[0,0,0,0]},drawChartBox:function(){var e=this,t=e.options.chart,n=e.renderer,r=e.chartWidth,i=e.chartHeight,s=e.chartBackground,o=e.plotBackground,u=e.plotBorder,a=e.plotBGImage,f=t.borderWidth||0,l=t.backgroundColor,c=t.plotBackgroundColor,h=t.plotBackgroundImage,p=t.plotBorderWidth||0,d,v,m=e.plotLeft,g=e.plotTop,y=e.plotWidth,b=e.plotHeight,w=e.plotBox,E=e.clipRect,S=e.clipBox;d=f+(t.shadow?8:0);if(f||l)s?s.animate(s.crisp(null,null,null,r-d,i-d)):(v={fill:l||W},f&&(v.stroke=t.borderColor,v["stroke-width"]=f),e.chartBackground=n.rect(d/2,d/2,r-d,i-d,t.borderRadius,f).attr(v).add().shadow(t.shadow));c&&(o?o.animate(w):e.plotBackground=n.rect(m,g,y,b,0).attr({fill:c}).add().shadow(t.plotShadow)),h&&(a?a.animate(w):e.plotBGImage=n.image(h,m,g,y,b).add()),E?E.animate({width:S.width,height:S.height}):e.clipRect=n.clipRect(S),p&&(u?u.animate(u.crisp(null,m,g,y,b)):e.plotBorder=n.rect(m,g,y,b,0,p).attr({stroke:t.plotBorderColor,"stroke-width":p,zIndex:1}).add()),e.isDirtyBox=!1},propFromSeries:function(){var e=this,t=e.options.chart,n,r=e.options.series,i,s;an(["inverted","angular","polar"],function(o){n=St[t.type||t.defaultSeriesType],s=e[o]||t[o]||n&&n.prototype[o],i=r&&r.length;while(!s&&i--)n=St[r[i].type],n&&n.prototype[o]&&(s=!0);e[o]=s})},render:function(){var e=this,t=e.axes,n=e.renderer,r=e.options,i=r.labels,s=r.credits,o;e.setTitle(),e.legend=new In(e),an(t,function(e){e.setScale()}),e.getMargins(),e.maxTicks=null,an(t,function(e){e.setTickPositions(!0),e.setMaxTicks()}),e.adjustTickAmounts(),e.getMargins(),e.drawChartBox(),e.hasCartesianSeries&&an(t,function(e){e.render()}),e.seriesGroup||(e.seriesGroup=n.g("series-group").attr({zIndex:3}).add()),an(e.series,function(e){e.translate(),e.setTooltipPoints(),e.render()}),i.items&&an(i.items,function(t){var r=xt(i.style,t.style),s=Nt(r.left)+e.plotLeft,o=Nt(r.top)+e.plotTop+12;delete r.left,delete r.top,n.text(t.html,s,o).attr({zIndex:2}).css(r).add()}),s.enabled&&!e.credits&&(o=s.href,e.credits=n.text(s.text,0,0).on("click",function(){o&&(location.href=o)}).attr({align:s.position.align,zIndex:8}).css(s.style).add().align(s.position)),e.hasRendered=!0},destroy:function(){var t=this,n=t.axes,r=t.series,i=t.container,s,o=i&&i.parentNode;vn(t,"destroy"),B[t.index]=e,t.renderTo.removeAttribute("data-highcharts-chart"),dn(t),s=n.length;while(s--)n[s]=n[s].destroy();s=r.length;while(s--)r[s]=r[s].destroy();an(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","tracker","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],function(e){var n=t[e];n&&n.destroy&&(t[e]=n.destroy())}),i&&(i.innerHTML="",dn(i),o&&Yt(i));for(s in t)delete t[s]},isReadyToRender:function(){var e=this;return!S&&n==n.top&&t.readyState!=="complete"||T&&!n.canvg?(T?_n.push(function(){e.firstRender()},e.options.global.canvasToolsURL):t.attachEvent("onreadystatechange",function(){t.detachEvent("onreadystatechange",e.firstRender),t.readyState==="complete"&&e.firstRender()}),!1):!0},firstRender:function(){var e=this,t=e.options,n=e.callback;if(!e.isReadyToRender())return;e.getContainer(),vn(e,"init"),Highcharts.RangeSelector&&t.rangeSelector.enabled&&(e.rangeSelector=new Highcharts.RangeSelector(e)),e.resetMargins(),e.setChartSize(),e.propFromSeries(),e.getAxes(),an(t.series||[],function(t){e.initSeries(t)}),Highcharts.Scroller&&(t.navigator.enabled||t.scrollbar.enabled)&&(e.scroller=new Highcharts.Scroller(e)),e.tracker=new Fn(e,t),e.render(),e.renderer.draw(),n&&n.apply(e,[e]),an(e.callbacks,function(t){t.apply(e,[e])}),e.cloneRenderTo(!0),vn(e,"load")}},qn.prototype.callbacks=[];var Rn=function(){};Rn.prototype={init:function(e,t,n){var r=this,i=e.chart.counters,s;return r.series=e,r.applyOptions(t,n),r.pointAttr={},e.options.colorByPoint&&(s=e.chart.options.colors,r.color=r.color||s[i.color++],i.wrapColor(s.length)),e.chart.pointCount++,r},applyOptions:function(t,n){var r=this,i=r.series,s=typeof t;r.config=t,s==="number"||t===null?r.y=t:typeof t[0]=="number"?(r.x=t[0],r.y=t[1]):s==="object"&&typeof t.length!="number"?(xt(r,t),r.options=t,t.dataLabels&&(i._hasPointLabels=!0),t.marker&&(i._hasPointMarkers=!0)):typeof t[0]=="string"&&(r.name=t[0],r.y=t[1]),r.x===e&&(r.x=n===e?i.autoIncrement():n)},destroy:function(){var e=this,t=e.series,n=t.chart,r=n.hoverPoints,i;n.pointCount--,r&&(e.setState(),_t(r,e),r.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut();if(e.graphic||e.dataLabel)dn(e),e.destroyElements();e.legendItem&&n.legend.destroyItem(e);for(i in e)e[i]=null},destroyElements:function(){var e=this,t=["graphic","tracker","dataLabel","dataLabelUpper","group","connector","shadowGroup"],n,r=6;while(r--)n=t[r],e[n]&&(e[n]=e[n].destroy())},getLabelConfig:function(){var e=this;return{x:e.category,y:e.y,key:e.name||e.category,series:e.series,point:e,percentage:e.percentage,total:e.total||e.stackTotal}},select:function(e,t){var n=this,r=n.series,i=r.chart;e=Bt(e,!n.selected),n.firePointEvent(e?"select":"unselect",{accumulate:t},function(){n.selected=e,n.setState(e&&Q),t||an(i.getSelectedPoints(),function(e){e.selected&&e!==n&&(e.selected=!1,e.setState(J),e.firePointEvent("unselect"))})})},onMouseOver:function(){var e=this,t=e.series,n=t.chart,r=n.tooltip,i=n.hoverPoint;i&&i!==e&&i.onMouseOut(),e.firePointEvent("mouseOver"),r&&(!r.shared||t.noSharedTooltip)&&r.refresh(e),e.setState(K),n.hoverPoint=e},onMouseOut:function(){var e=this.series.chart,t=e.hoverPoints;if(!t||un(this,t)===-1)this.firePointEvent("mouseOut"),this.setState(),e.hoverPoint=null},tooltipFormatter:function(e){var t=this,n=t.series,r=n.tooltipOptions,i=e.match(/\{(series|point)\.[a-zA-Z]+\}/g),s=/[{\.}]/,o,u,a,f,l,c,h,p={y:0,open:0,high:0,low:0,close:0,percentage:1,total:1};r.valuePrefix=r.valuePrefix||r.yPrefix,r.valueDecimals=Bt(r.valueDecimals,r.yDecimals),r.valueSuffix=r.valueSuffix||r.ySuffix;for(h in i)u=i[h],Ct(u)&&u!==e&&(l=(" "+u).split(s),o={point:t,series:n}[l[1]],c=l[2],o===t&&p.hasOwnProperty(c)?(f=p[c]?c:"value",a=(r[f+"Prefix"]||"")+Rt(t[c],Bt(r[f+"Decimals"],-1))+(r[f+"Suffix"]||"")):a=o[c],e=e.replace(u,a));return e},update:function(e,t,n){var r=this,i=r.series,s=r.graphic,o,u=i.data,a=u.length,f=i.chart;t=Bt(t,!0),r.firePointEvent("update",{options:e},function(){r.applyOptions(e),kt(e)&&(i.getAttribs(),s&&s.attr(r.pointAttr[i.state]));for(o=0;o<a;o++)if(u[o]===r){i.xData[o]=r.x,i.yData[o]=r.toYData?r.toYData():r.y,i.options.data[o]=e;break}i.isDirty=!0,i.isDirtyData=!0,t&&f.redraw(n)})},remove:function(e,t){var n=this,r=n.series,i=r.chart,s,o=r.data,u=o.length;tn(t,i),e=Bt(e,!0),n.firePointEvent("remove",null,function(){for(s=0;s<u;s++)if(o[s]===n){o.splice(s,1),r.options.data.splice(s,1),r.xData.splice(s,1),r.yData.splice(s,1);break}n.destroy(),r.isDirty=!0,r.isDirtyData=!0,e&&i.redraw()})},firePointEvent:function(e,t,n){var r=this,i=this.series,s=i.options;(s.point.events[e]||r.options&&r.options.events&&r.options.events[e])&&this.importEvents(),e==="click"&&s.allowPointSelect&&(n=function(e){r.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),vn(this,e,t,n)},importEvents:function(){if(!this.hasImportedEvents){var e=this,t=hn(e.series.options.point,e.options),n=t.events,r;e.events=n;for(r in n)pn(e,r,n[r]);this.hasImportedEvents=!0}},setState:function(e){var t=this,n=t.plotX,r=t.plotY,i=t.series,s=i.options.states,o=wn[i.type].marker&&i.options.marker,u=o&&!o.enabled,a=o&&o.states[e],f=a&&a.enabled===!1,l=i.stateMarkerGraphic,c=i.chart,h,p=t.pointAttr;e=e||J;if(e===t.state||t.selected&&e!==Q||s[e]&&s[e].enabled===!1||e&&(f||u&&!a.enabled))return;t.graphic?(h=o&&t.graphic.symbolName&&p[e].r,t.graphic.attr(hn(p[e],h?{x:n-h,y:r-h,width:2*h,height:2*h}:{}))):(e&&a&&(h=a.radius,l?l.attr({x:n-h,y:r-h}):i.stateMarkerGraphic=l=c.renderer.symbol(i.symbol,n-h,r-h,2*h,2*h).attr(p[e]).add(i.markerGroup)),l&&l[e&&c.isInsidePlot(n,r)?"show":"hide"]()),t.state=e}};var Un=function(){};Un.prototype={isCartesian:!0,type:"line",pointClass:Rn,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(e,t){var n=this,r,i;n.chart=e,n.options=t=n.setOptions(t),n.bindAxes(),xt(n,{name:t.name,state:J,pointAttr:{},visible:t.visible!==!1,selected:t.selected===!0}),T&&(t.animation=!1),i=t.events;for(r in i)pn(n,r,i[r]);if(i&&i.click||t.point&&t.point.events&&t.point.events.click||t.allowPointSelect)e.runTrackerClick=!0;n.getColor(),n.getSymbol(),n.setData(t.data,!1),n.isCartesian&&(e.hasCartesianSeries=!0),e.series.push(n),Jt(e.series,function(e,t){return(e.options.index||0)-(t.options.index||0)}),an(e.series,function(e,t){e.index=t,e.name=e.name||"Series "+(t+1)})},bindAxes:function(){var t=this,n=t.options,r=t.chart,i;t.isCartesian&&an(["xAxis","yAxis"],function(s){an(r[s],function(r){i=r.options;if(n[s]===i.index||n[s]===e&&i.index===0)r.series.push(t),t[s]=r,r.isDirty=!0})})},autoIncrement:function(){var e=this,t=e.options,n=e.xIncrement;return n=Bt(n,t.pointStart,0),e.pointInterval=Bt(e.pointInterval,t.pointInterval,1),e.xIncrement=n+e.pointInterval,n},getSegments:function(){var e=this,t=-1,n=[],r,i=e.points,s=i.length;if(s)if(e.options.connectNulls){r=s;while(r--)i[r].y===null&&i.splice(r,1);i.length&&(n=[i])}else an(i,function(e,r){e.y===null?(r>t+1&&n.push(i.slice(t+1,r)),t=r):r===s-1&&n.push(i.slice(t+1,r+1))});e.segments=n},setOptions:function(e){var t=this.chart,n=t.options,r=n.plotOptions,i=r[this.type],s=e.data,o;return e.data=null,o=hn(i,r.series,e),o.data=e.data=s,this.tooltipOptions=hn(n.tooltip,o.tooltip),i.marker===null&&delete o.marker,o},getColor:function(){var e=this.options,t=this.chart.options.colors,n=this.chart.counters;this.color=e.color||!e.colorByPoint&&t[n.color++]||"gray",n.wrapColor(t.length)},getSymbol:function(){var e=this,t=e.options.marker,n=e.chart,r=n.options.symbols,i=n.counters;e.symbol=t.symbol||r[i.symbol++],/^url/.test(e.symbol)&&(t.radius=0),i.wrapSymbol(r.length)},drawLegendSymbol:function(e){var t=this.options,n=t.marker,r,i=e.options,s,o=i.symbolWidth,u=this.chart.renderer,a=this.legendGroup,f=e.baseline,l;t.lineWidth&&(l={"stroke-width":t.lineWidth},t.dashStyle&&(l.dashstyle=t.dashStyle),this.legendLine=u.path([X,0,f-4,V,o,f-4]).attr(l).add(a)),n&&n.enabled&&(r=n.radius,this.legendSymbol=s=u.symbol(this.symbol,o/2-r,f-4-r,2*r,2*r).add(a))},addPoint:function(e,t,n,r){var i=this,s=i.options,o=i.data,u=i.graph,a=i.area,f=i.chart,l=i.xData,c=i.yData,h=u&&u.shift||0,p=s.data,d,v=i.pointClass.prototype;tn(r,f),u&&n&&(u.shift=h+1),a&&(n&&(a.shift=h+1),a.isArea=!0),t=Bt(t,!0),d={series:i},v.applyOptions.apply(d,[e]),l.push(d.x),c.push(v.toYData?v.toYData.call(d):d.y),p.push(e),s.legendType==="point"&&i.generatePoints(),n&&(o[0]&&o[0].remove?o[0].remove(!1):(o.shift(),l.shift(),c.shift(),p.shift())),i.getAttribs(),i.isDirty=!0,i.isDirtyData=!0,t&&f.redraw()},setData:function(e,t){var n=this,r=n.points,i=n.options,s=n.initialColor,o=n.chart,u=null,a=n.xAxis,f,l=n.pointClass.prototype;n.xIncrement=null,n.pointRange=a&&a.categories?1:i.pointRange,Dt(s)&&(o.counters.color=s);var c=[],h=[],p=e?e.length:[],d=i.turboThreshold||1e3,v,m=n.pointArrayMap,g=m&&m.length;if(p>d){f=0;while(u===null&&f<p)u=e[f],f++;if(At(u)){var y=Bt(i.pointStart,0),b=Bt(i.pointInterval,1);for(f=0;f<p;f++)c[f]=y,h[f]=e[f],y+=b;n.xIncrement=y}else if(Lt(u))if(g)for(f=0;f<p;f++)v=e[f],c[f]=v[0],h[f]=v.slice(1,g+1);else for(f=0;f<p;f++)v=e[f],c[f]=v[0],h[f]=v[1]}else for(f=0;f<p;f++)v={series:n},l.applyOptions.apply(v,[e[f]]),c[f]=v.x,h[f]=l.toYData?l.toYData.call(v):v.y;n.requireSorting&&c.length>1&&c[1]<c[0]&&Zt(15),Ct(h[0])&&Zt(14,!0),n.data=[],n.options.data=e,n.xData=c,n.yData=h,f=r&&r.length||0;while(f--)r[f]&&r[f].destroy&&r[f].destroy();a&&(a.minRange=a.userMinRange),n.isDirty=n.isDirtyData=o.isDirtyBox=!0,Bt(t,!0)&&o.redraw(!1)},remove:function(e,t){var n=this,r=n.chart;e=Bt(e,!0),n.isRemoving||(n.isRemoving=!0,vn(n,"remove",null,function(){n.destroy(),r.isDirtyLegend=r.isDirtyBox=!0,e&&r.redraw(t)})),n.isRemoving=!1},processData:function(t){var n=this,r=n.xData,i=n.yData,s=r.length,o=0,a=s,f,l,c,h=n.xAxis,p,d=n.options,v=d.cropThreshold,m=n.isCartesian;if(m&&!n.isDirty&&!h.isDirty&&!n.yAxis.isDirty&&!t)return!1;if(m&&n.sorted&&(!v||s>v||n.forceCrop)){var g=h.getExtremes(),y=g.min,b=g.max;if(r[s-1]<y||r[0]>b)r=[],i=[];else if(r[0]<y||r[s-1]>b){for(p=0;p<s;p++)if(r[p]>=y){o=u(0,p-1);break}for(;p<s;p++)if(r[p]>b){a=p+1;break}r=r.slice(o,a),i=i.slice(o,a),f=!0}}for(p=r.length-1;p>0;p--)l=r[p]-r[p-1],l>0&&(c===e||l<c)&&(c=l);n.cropped=f,n.cropStart=o,n.processedXData=r,n.processedYData=i,d.pointRange===null&&(n.pointRange=c||1),n.closestPointRange=c},generatePoints:function(){var t=this,n=t.options,r=n.data,i=t.data,s,o=t.processedXData,u=t.processedYData,a=t.pointClass,f=o.length,l=t.cropStart||0,c,h=t.hasGroupedData,p,d=[],v;if(!i&&!h){var m=[];m.length=r.length,i=t.data=m}for(v=0;v<f;v++)c=l+v,h?d[v]=(new a).init(t,[o[v]].concat(Ht(u[v]))):(i[c]?p=i[c]:r[c]!==e&&(i[c]=p=(new a).init(t,r[c],o[v])),d[v]=p);if(i&&(f!==(s=i.length)||h))for(v=0;v<s;v++)v===l&&!h&&(v+=f),i[v]&&(i[v].destroyElements(),i[v].plotX=e);t.data=i,t.points=d},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t=this,n=t.chart,r=t.options,s=r.stacking,o=t.xAxis,u=o.categories,a=t.yAxis,f=t.points,l=f.length,c=!!t.modifyValue,h,p=a.series,d=p.length,v=r.pointPlacement==="between";while(d--)if(p[d].visible){p[d]===t&&(h=!0);break}for(d=0;d<l;d++){var m=f[d],g=m.x,y=m.y,b=m.low,w=a.stacks[(y<r.threshold?"-":"")+t.stackKey],E,S;m.plotX=o.translate(g,0,0,0,1,v),s&&t.visible&&w&&w[g]&&(E=w[g],S=E.total,E.cum=b=E.cum-y,y=b+y,h&&(b=Bt(r.threshold,a.min)),a.isLog&&b<=0&&(b=null),s==="percent"&&(b=S?b*100/S:0,y=S?y*100/S:0),m.percentage=S?m.y*100/S:0,m.total=m.stackTotal=S,m.stackY=y),m.yBottom=Dt(b)?a.translate(b,0,1,0,1):null,c&&(y=t.modifyValue(y,m)),m.plotY=typeof y=="number"?i(a.translate(y,0,1,0,1)*10)/10:e,m.clientX=n.inverted?n.plotHeight-m.plotX:m.plotX,m.category=u&&u[m.x]!==e?u[m.x]:m.x}t.getSegments()},setTooltipPoints:function(e){var t=this,n=[],r,i,o,a=t.xAxis,f=a?a.tooltipLen||a.len:t.chart.plotSizeX,l=a&&a.tooltipPosName||"plotX",c,h,p=[];if(t.options.enableMouseTracking===!1)return;e&&(t.tooltipPoints=null),an(t.segments||t.points,function(e){n=n.concat(e)}),a&&a.reversed&&(n=n.reverse()),r=n.length;for(h=0;h<r;h++){c=n[h],i=n[h-1]?o+1:0,o=n[h+1]?u(0,s((c[l]+(n[h+1]?n[h+1][l]:f))/2)):f;while(i>=0&&i<=o)p[i++]=c}t.tooltipPoints=p},tooltipHeaderFormatter:function(e){var t=this,n=t.tooltipOptions,r=n.xDateFormat,i=t.xAxis,s=i&&i.options.type==="datetime",o;if(s&&!r)for(o in P)if(P[o]>=i.closestPointRange){r=n.dateTimeLabelFormats[o];break}return n.headerFormat.replace("{point.key}",s&&At(e)?M(r,e):e).replace("{series.name}",t.name).replace("{series.color}",t.color)},onMouseOver:function(){var e=this,t=e.chart,n=t.hoverSeries;n&&n!==e&&n.onMouseOut(),e.options.events.mouseOver&&vn(e,"mouseOver"),e.setState(K),t.hoverSeries=e},onMouseOut:function(){var e=this,t=e.options,n=e.chart,r=n.tooltip,i=n.hoverPoint;i&&i.onMouseOut(),e&&t.events.mouseOut&&vn(e,"mouseOut"),r&&!t.stickyTracking&&!r.shared&&r.hide(),e.setState(),n.hoverSeries=null},animate:function(e){var t=this,n=t.chart,r=n.renderer,i,s,o=t.options.animation,u=n.clipBox,a=n.inverted,f;o&&!kt(o)&&(o=wn[t.type].animation),f="_sharedClip"+o.duration+o.easing,e?(i=n[f],s=n[f+"m"],i||(n[f]=i=r.clipRect(xt(u,{width:0})),n[f+"m"]=s=r.clipRect(-99,a?-n.plotLeft:-n.plotTop,99,a?n.chartWidth:n.chartHeight)),t.group.clip(i),t.markerGroup.clip(s),t.sharedClipKey=f):(i=n[f],i&&(i.animate({width:n.plotSizeX},o),n[f+"m"].animate({width:n.plotSizeX+99},o)),t.animate=null,t.animationTimeout=setTimeout(function(){t.afterAnimate()},o.duration))},afterAnimate:function(){var e=this.chart,t=this.sharedClipKey,n=this.group,r=this.trackerGroup;n&&this.options.clip!==!1&&(n.clip(e.clipRect),r&&r.clip(e.clipRect),this.markerGroup.clip()),setTimeout(function(){t&&e[t]&&(e[t]=e[t].destroy(),e[t+"m"]=e[t+"m"].destroy())},100)},drawPoints:function(){var t=this,n,r=t.points,i=t.chart,s,o,u,a,f,l,c,h,p=t.options,d=p.marker,v,m,g,y=t.markerGroup;if(d.enabled||t._hasPointMarkers){u=r.length;while(u--)a=r[u],s=a.plotX,o=a.plotY,h=a.graphic,v=a.marker||{},m=d.enabled&&v.enabled===e||v.enabled,g=i.isInsidePlot(s,o,i.inverted),m&&o!==e&&!isNaN(o)?(n=a.pointAttr[a.selected?Q:J],f=n.r,l=Bt(v.symbol,t.symbol),c=l.indexOf("url")===0,h?h.attr({visibility:g?S?"inherit":U:q}).animate(xt({x:s-f,y:o-f},h.symbolName?{width:2*f,height:2*f}:{})):g&&(f>0||c)&&(a.graphic=h=i.renderer.symbol(l,s-f,o-f,2*f,2*f).attr(n).add(y))):h&&(a.graphic=h.destroy())}},convertAttribs:function(e,t,n,r){var i=this.pointAttrToOptions,s,o,u={};e=e||{},t=t||{},n=n||{},r=r||{};for(s in i)o=i[s],u[s]=Bt(e[o],t[s],n[s],r[s]);return u},getAttribs:function(){var e=this,t=wn[e.type].marker?e.options.marker:e.options,n=t.states,r=n[K],i,s=e.color,o={stroke:s,fill:s},u=e.points||[],a,f,l=[],c,h=e.pointAttrToOptions,p,d;e.options.marker?(r.radius=r.radius||t.radius+2,r.lineWidth=r.lineWidth||t.lineWidth+1):r.color=r.color||Nn(r.color||s).brighten(r.brightness).get(),l[J]=e.convertAttribs(t,o),an([K,Q],function(t){l[t]=e.convertAttribs(n[t],l[J])}),e.pointAttr=l,a=u.length;while(a--){f=u[a],t=f.options&&f.options.marker||f.options,t&&t.enabled===!1&&(t.radius=0),p=e.options.colorByPoint;if(f.options)for(d in h)Dt(t[h[d]])&&(p=!0);p?(t=t||{},c=[],n=t.states||{},i=n[K]=n[K]||{},e.options.marker||(i.color=Nn(i.color||f.color).brighten(i.brightness||r.brightness).get()),c[J]=e.convertAttribs(xt({color:f.color},t),l[J]),c[K]=e.convertAttribs(n[K],l[K],c[J]),c[Q]=e.convertAttribs(n[Q],l[Q],c[J])):c=l,f.pointAttr=c}},destroy:function(){var e=this,t=e.chart,n=/AppleWebKit\/533/.test(d),r,i,s=e.data||[],o,u,a;vn(e,"destroy"),dn(e),an(["xAxis","yAxis"],function(t){a=e[t],a&&(_t(a.series,e),a.isDirty=!0)}),e.legendItem&&e.chart.legend.destroyItem(e),i=s.length;while(i--)o=s[i],o&&o.destroy&&o.destroy();e.points=null,clearTimeout(e.animationTimeout),an(["area","graph","dataLabelsGroup","group","markerGroup","tracker","trackerGroup"],function(t){e[t]&&(r=n&&t==="group"?"hide":"destroy",e[t][r]())}),t.hoverSeries===e&&(t.hoverSeries=null),_t(t.series,e);for(u in e)delete e[u]},drawDataLabels:function(){var t=this,n=t.options,r=n.dataLabels,i=t.points,s,o,u,a;if(r.enabled||t._hasPointLabels)t.dlProcessOptions&&t.dlProcessOptions(r),a=t.plotGroup("dataLabelsGroup","data-labels",t.visible?U:q,r.zIndex||6),o=r,an(i,function(n){var i,f=n.dataLabel,l,c,h,p=!0;s=n.options&&n.options.dataLabels,i=o.enabled||s&&s.enabled;if(f&&!i)n.dataLabel=f.destroy();else if(i){h=r.rotation,r=hn(o,s),u=r.formatter.call(n.getLabelConfig(),r),r.style.color=Bt(r.color,r.style.color,t.color,"black");if(f)f.attr({text:u}),p=!1;else if(Dt(u)){l={fill:r.backgroundColor,stroke:r.borderColor,"stroke-width":r.borderWidth,r:r.borderRadius||0,rotation:h,padding:r.padding,zIndex:1};for(c in l)l[c]===e&&delete l[c];f=n.dataLabel=t.chart.renderer[h?"text":"label"](u,0,-999,null,null,null,r.useHTML).attr(l).css(r.style).add(a).shadow(r.shadow)}f&&t.alignDataLabel(n,f,r,null,p)}})},alignDataLabel:function(e,t,n,r,s){var o=this.chart,u=o.inverted,a=Bt(e.plotX,-999),f=Bt(e.plotY,-999),l=t.getBBox(),c;r=xt({x:u?o.plotWidth-f:a,y:i(u?o.plotHeight-a:f),width:0,height:0},r),xt(n,{width:l.width,height:l.height}),n.rotation?(c={align:n.align,x:r.x+n.x+r.width/2,y:r.y+n.y+r.height/2},t[s?"attr":"animate"](c)):(t.align(n,null,r),c=t.alignAttr),t.attr({visibility:n.crop===!1||o.isInsidePlot(c.x,c.y)||o.isInsidePlot(a,f,u)?o.renderer.isSVG?"inherit":U:q})},getSegmentPath:function(e){var t=this,n=[],r=t.options.step;return an(e,function(i,s){var o=i.plotX,u=i.plotY,a;t.getPointSpline?n.push.apply(n,t.getPointSpline(e,i,s)):(n.push(s?V:X),r&&s&&(a=e[s-1],r==="right"?n.push(a.plotX,u):r==="center"?n.push((a.plotX+o)/2,a.plotY,(a.plotX+o)/2,u):n.push(o,a.plotY)),n.push(i.plotX,i.plotY))}),n},getGraphPath:function(){var e=this,t=[],n,r=[];return an(e.segments,function(i){n=e.getSegmentPath(i),i.length>1?t=t.concat(n):r.push(i[0])}),e.singlePoints=r,e.graphPath=t,t},drawGraph:function(){var e=this.options,t=this.graph,n=this.group,r=e.lineColor||this.color,i=e.lineWidth,s=e.dashStyle,o,u=this.getGraphPath();t?(yn(t),t.animate({d:u})):i&&(o={stroke:r,"stroke-width":i,zIndex:1},s&&(o.dashstyle=s),this.graph=this.chart.renderer.path(u).attr(o).add(n).shadow(e.shadow))},invertGroups:function(){function n(){var t={width:e.yAxis.len,height:e.xAxis.len};an(["group","trackerGroup","markerGroup"],function(n){e[n]&&e[n].attr(t).invert()})}var e=this,t=e.chart;pn(t,"resize",n),pn(e,"destroy",function(){dn(t,"resize",n)}),n(),e.invertGroups=n},plotGroup:function(e,t,n,r,i){var s=this[e],o=this.chart,u=this.xAxis,a=this.yAxis;return s||(this[e]=s=o.renderer.g(t).attr({visibility:n,zIndex:r||.1}).add(i)),s.translate(u?u.left:o.plotLeft,a?a.top:o.plotTop),s},render:function(){var e=this,t=e.chart,n,r=e.options,i=r.animation,s=i&&!!e.animate,o=e.visible?U:q,u=r.zIndex,a=e.hasRendered,f=t.seriesGroup;n=e.plotGroup("group","series",o,u,f),e.markerGroup=e.plotGroup("markerGroup","markers",o,u,f),s&&e.animate(!0),e.getAttribs(),n.inverted=t.inverted,e.drawGraph&&e.drawGraph(),e.drawPoints(),e.drawDataLabels(),e.options.enableMouseTracking!==!1&&e.drawTracker(),t.inverted&&e.invertGroups(),r.clip!==!1&&!e.sharedClipKey&&!a&&(n.clip(t.clipRect),this.trackerGroup&&this.trackerGroup.clip(t.clipRect)),s?e.animate():a||e.afterAnimate(),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var e=this,t=e.chart,n=e.isDirtyData,r=e.group;r&&(t.inverted&&r.attr({width:t.plotWidth,height:t.plotHeight}),r.animate({translateX:e.xAxis.left,translateY:e.yAxis.top})),e.translate(),e.setTooltipPoints(!0),e.render(),n&&vn(e,"updatedData")},setState:function(e){var t=this,n=t.options,r=t.graph,i=n.states,s=n.lineWidth;e=e||J;if(t.state!==e){t.state=e;if(i[e]&&i[e].enabled===!1)return;e&&(s=i[e].lineWidth||s+1),r&&!r.dashstyle&&r.attr({"stroke-width":s},e?0:500)}},setVisible:function(t,n){var r=this,i=r.chart,s=r.legendItem,o=r.group,u=r.tracker,a=r.dataLabelsGroup,f=r.markerGroup,l,c,h=r.points,p,d=i.options.chart.ignoreHiddenSeries,v=r.visible;r.visible=t=t===e?!v:t,l=t?"show":"hide",o&&o[l](),f&&f[l]();if(u)u[l]();else if(h){c=h.length;while(c--)p=h[c],p.tracker&&p.tracker[l]()}i.hoverSeries===r&&r.onMouseOut(),a&&a[l](),s&&i.legend.colorizeItem(r,t),r.isDirty=!0,r.options.stacking&&an(i.series,function(e){e.options.stacking&&e.visible&&(e.isDirty=!0)}),d&&(i.isDirtyBox=!0),n!==!1&&i.redraw(),vn(r,l)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){var n=this;n.selected=t=t===e?!n.selected:t,n.checkbox&&(n.checkbox.checked=t),vn(n,t?"select":"unselect")},drawTracker:function(){var e=this,t=e.options,n=t.trackByArea,r=[].concat(n?e.areaPath:e.graphPath),i=r.length,s=e.chart,o=s.renderer,u=s.options.tooltip.snap,a=e.tracker,f=t.cursor,l=f&&{cursor:f},c=e.singlePoints,h=this.isCartesian&&this.plotGroup("trackerGroup",null,U,t.zIndex||1,s.trackerGroup),p,d,v=function(){s.hoverSeries!==e&&e.onMouseOver()},m=function(){t.stickyTracking||e.onMouseOut()};if(i&&!n){d=i+1;while(d--)r[d]===X&&r.splice(d+1,0,r[d+1]-u,r[d+2],V),(d&&r[d]===X||d===i)&&r.splice(d,0,V,r[d-2]+u,r[d-1])}for(d=0;d<c.length;d++)p=c[d],r.push(X,p.plotX-u,p.plotY,V,p.plotX+u,p.plotY);a?a.attr({d:r}):(e.tracker=a=o.path(r).attr({isTracker:!0,"stroke-linejoin":"round",visibility:e.visible?U:q,stroke:$,fill:n?$:W,"stroke-width":t.lineWidth+(n?0:2*u)}).on("mouseover",v).on("mouseout",m).css(l).add(h),C&&a.on("touchstart",v))}};var zn=It(Un);St.line=zn,wn.area=hn(En,{threshold:0});var Wn=It(Un,{type:"area",getSegmentPath:function(e){var t=Un.prototype.getSegmentPath.call(this,e),n=[].concat(t),r,i=this.options,s=t.length;s===3&&n.push(V,t[1],t[2]);if(i.stacking&&!this.closedStacks)for(r=e.length-1;r>=0;r--)r<e.length-1&&i.step&&n.push(e[r+1].plotX,e[r].yBottom),n.push(e[r].plotX,e[r].yBottom);else this.closeSegment(n,e);return this.areaPath=this.areaPath.concat(n),t},closeSegment:function(e,t){var n=this.yAxis.getThreshold(this.options.threshold);e.push(V,t[t.length-1].plotX,n,V,t[0].plotX,n)},drawGraph:function(){this.areaPath=[],Un.prototype.drawGraph.apply(this);var e=this.areaPath,t=this.options,n=this.area;n?n.animate({d:e}):this.area=this.chart.renderer.path(e).attr({fill:Bt(t.fillColor,Nn(this.color).setOpacity(t.fillOpacity||.75).get()),zIndex:0}).add(this.group)},drawLegendSymbol:function(e,t){t.legendSymbol=this.chart.renderer.rect(0,e.baseline-11,e.options.symbolWidth,12,2).attr({zIndex:3}).add(t.legendGroup)}});St.area=Wn,wn.spline=hn(En);var Xn=It(Un,{type:"spline",getPointSpline:function(e,t,n){var r=1.5,i=r+1,s=t.plotX,o=t.plotY,f=e[n-1],l=e[n+1],c,h,p,d,v;if(f&&l){var m=f.plotX,g=f.plotY,y=l.plotX,b=l.plotY,w;c=(r*s+m)/i,h=(r*o+g)/i,p=(r*s+y)/i,d=(r*o+b)/i,w=(d-h)*(p-s)/(p-c)+o-d,h+=w,d+=w,h>g&&h>o?(h=u(g,o),d=2*o-h):h<g&&h<o&&(h=a(g,o),d=2*o-h),d>b&&d>o?(d=u(b,o),h=2*o-d):d<b&&d<o&&(d=a(b,o),h=2*o-d),t.rightContX=p,t.rightContY=d}return n?(v=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,c||s,h||o,s,o],f.rightContX=f.rightContY=null):v=[X,s,o],v}});St.spline=Xn,wn.areaspline=hn(wn.area);var Vn=Wn.prototype,$n=It(Xn,{type:"areaspline",closedStacks:!0,getSegmentPath:Vn.getSegmentPath,closeSegment:Vn.closeSegment,drawGraph:Vn.drawGraph});St.areaspline=$n,wn.column=hn(En,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},threshold:0});var Jn=It(Un,{type:"column",tooltipOutsidePlot:!0,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){Un.prototype.init.apply(this,arguments);var e=this,t=e.chart;t.hasRendered&&an(t.series,function(t){t.type===e.type&&(t.isDirty=!0)})},translate:function(){var t=this,n=t.chart,r=t.options,i=r.stacking,s=r.borderWidth,l=0,c=t.xAxis,h=t.yAxis,p=c.reversed,d={},v,m;Un.prototype.translate.apply(t),r.grouping===!1?l=1:an(n.series,function(n){var r=n.options;n.type===t.type&&n.visible&&t.options.group===r.group&&(r.stacking?(v=n.stackKey,d[v]===e&&(d[v]=l++),m=d[v]):r.grouping!==!1&&(m=l++),n.columnIndex=m)});var g=t.points,y=f(c.transA)*(c.ordinalSlope||r.pointRange||c.closestPointRange||1),b=y*r.groupPadding,w=y-2*b,E=w/l,S=r.pointWidth,x=Dt(S)?(E-S)/2:E*r.pointPadding,T=Bt(S,E-2*x),N=o(u(T,1+2*s)),C=(p?l-(t.columnIndex||0):t.columnIndex)||0,k=x+(b+C*E-y/2)*(p?-1:1),L=r.threshold,A=t.translatedThreshold=h.getThreshold(L),O=Bt(r.minPointLength,5);an(g,function(e){var r=a(u(-999,e.plotY),h.len+999),l=Bt(e.yBottom,A),c=e.plotX+k,p=o(a(r,l)),d=o(u(r,l)-p),v=h.stacks[(e.y<0?"-":"")+t.stackKey],m;i&&t.visible&&v&&v[e.x]&&v[e.x].setOffset(k,N),f(d)<O&&O&&(d=O,p=f(p-A)>O?l-O:A-(r<=A?O:0)),e.barX=c,e.pointWidth=T,e.shapeType="rect",e.shapeArgs=m=n.renderer.Element.prototype.crisp.call(0,s,c,p,N,d),s%2&&(m.y-=1,m.height+=1),e.trackerArgs=f(d)<3&&hn(e.shapeArgs,{height:6,y:p-3})})},getSymbol:H,drawLegendSymbol:Wn.prototype.drawLegendSymbol,drawGraph:H,drawPoints:function(){var t=this,n=t.options,r=t.chart.renderer,i;an(t.points,function(s){var o=s.plotY,u=s.graphic;o!==e&&!isNaN(o)&&s.y!==null?(i=s.shapeArgs,u?(yn(u),u.animate(hn(i))):s.graphic=u=r[s.shapeType](i).attr(s.pointAttr[s.selected?Q:J]).add(t.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius)):u&&(s.graphic=u.destroy())})},drawTracker:function(){var t=this,n=t.chart,r=n.renderer,i,s,o=+(new Date),u=t.options,a=u.cursor,f=a&&{cursor:a},l=t.isCartesian&&t.plotGroup("trackerGroup",null,U,u.zIndex||1,n.trackerGroup),c,h,p,d=t.points,v,m=d.length,g=function(e){c=e.relatedTarget||e.fromElement,n.hoverSeries!==t&&Pt(c,"isTracker")!==o&&t.onMouseOver(),d[e.target._i].onMouseOver()},y=function(e){u.stickyTracking||(c=e.relatedTarget||e.toElement,Pt(c,"isTracker")!==o&&t.onMouseOut())};while(m--)v=d[m],s=v.tracker,i=v.trackerArgs||v.shapeArgs,h=v.plotY,p=!t.isCartesian||h!==e&&!isNaN(h),delete i.strokeWidth,v.y!==null&&p&&(s?s.attr(i):(v.tracker=s=r[v.shapeType](i).attr({isTracker:o,fill:$,visibility:t.visible?U:q}).on("mouseover",g).on("mouseout",y).css(f).add(v.group||l),C&&s.on("touchstart",g)),s.element._i=m)},alignDataLabel:function(e,t,n,r,i){var s=this.chart,o=s.inverted,u=e.below||e.plotY>Bt(this.translatedThreshold,s.plotSizeY),a=this.options.stacking||n.inside;e.shapeArgs&&(r=hn(e.shapeArgs),o&&(r={x:s.plotWidth-r.y-r.height,y:s.plotHeight-r.x-r.width,width:r.height,height:r.width}),a||(o?(r.x+=u?0:r.width,r.width=0):(r.y+=u?r.height:0,r.height=0))),n.align=Bt(n.align,!o||a?"center":u?"right":"left"),n.verticalAlign=Bt(n.verticalAlign,o||a?"middle":u?"top":"bottom"),Un.prototype.alignDataLabel.call(this,e,t,n,r,i)},animate:function(e){var t=this,n=t.points,r=t.options;e||(an(n,function(e){var n=e.graphic,i=e.shapeArgs,s=t.yAxis,o=r.threshold;n&&(n.attr({height:0,y:Dt(o)?s.getThreshold(o):s.translate(s.getExtremes().min,0,1,0,1)}),n.animate({height:i.height,y:i.y},r.animation))}),t.animate=null)},remove:function(){var e=this,t=e.chart;t.hasRendered&&an(t.series,function(t){t.type===e.type&&(t.isDirty=!0)}),Un.prototype.remove.apply(e,arguments)}});St.column=Jn,wn.bar=hn(wn.column);var Kn=It(Jn,{type:"bar",inverted:!0});St.bar=Kn,wn.scatter=hn(En,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var Qn=It(Un,{type:"scatter",sorted:!1,requireSorting:!1,translate:function(){var e=this;Un.prototype.translate.apply(e),an(e.points,function(t){t.shapeType="circle",t.shapeArgs={x:t.plotX,y:t.plotY,r:e.chart.options.tooltip.snap}})},drawTracker:function(){var t=this,n=t.options.cursor,r=n&&{cursor:n},i=t.points,s=i.length,o,u=t.markerGroup,a=function(n){t.onMouseOver(),n.target._i!==e&&i[n.target._i].onMouseOver()},f=function(){t.options.stickyTracking||t.onMouseOut()};while(s--)o=i[s].graphic,o&&(o.element._i=s);t._hasTracking?t._hasTracking=!0:(u.attr({isTracker:!0}).on("mouseover",a).on("mouseout",f).css(r),C&&u.on("touchstart",a))},setTooltipPoints:H});St.scatter=Qn,wn.pie=hn(En,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}}});var Gn=It(Rn,{init:function(){Rn.prototype.init.apply(this,arguments);var e=this,t;return xt(e,{visible:e.visible!==!1,name:Bt(e.name,"Slice")}),t=function(){e.slice()},pn(e,"select",t),pn(e,"unselect",t),e},setVisible:function(t){var n=this,r=n.series,i=r.chart,s=n.tracker,o=n.dataLabel,u=n.connector,a=n.shadowGroup,f;n.visible=t=t===e?!n.visible:t,f=t?"show":"hide",n.group[f](),s&&s[f](),o&&o[f](),u&&u[f](),a&&a[f](),n.legendItem&&i.legend.colorizeItem(n,t),!r.isDirty&&r.options.ignoreHiddenPoint&&(r.isDirty=!0,i.redraw())},slice:function(e,t,n){var r=this,i=r.series,s=i.chart,o=r.slicedTranslation,u;tn(n,s),t=Bt(t,!0),e=r.sliced=Dt(e)?e:!r.sliced,u={translateX:e?o[0]:s.plotLeft,translateY:e?o[1]:s.plotTop},r.group.animate(u),r.shadowGroup&&r.shadowGroup.animate(u)}}),Yn={type:"pie",isCartesian:!1,pointClass:Gn,requireSorting:!1,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(){var e=this,t=e.points,n=e.startAngleRad;an(t,function(t){var r=t.graphic,i=t.shapeArgs;r&&(r.attr({r:e.center[3]/2,start:n,end:n}),r.animate({r:i.r,start:i.start,end:i.end},e.options.animation))}),e.animate=null},setData:function(e,t){Un.prototype.setData.call(this,e,!1),this.processData(),this.generatePoints(),Bt(t,!0)&&this.chart.redraw()},getCenter:function(){var e=this.options,t=this.chart,n=t.plotWidth,r=t.plotHeight,i=e.center.concat([e.size,e.innerSize||0]),s=a(n,r),o;return cn(i,function(e,t){return o=/%$/.test(e),o?[n,r,s,s][t]*Nt(e)/100:e})},translate:function(){this.generatePoints();var e=0,t=this,n=0,s=1e3,o=t.options,u=o.slicedOffset,a=u+o.borderWidth,f,p=t.chart,d,v,m,g=t.startAngleRad=h/180*((o.startAngle||0)%360-90),y=t.points,b=2*h,w,E,S,x=o.dataLabels.distance,T=o.ignoreHiddenPoint,N,C=y.length,k;t.center=f=t.getCenter(),t.getX=function(e,t){return m=r.asin((e-f[1])/(f[2]/2+x)),f[0]+(t?-1:1)*l(m)*(f[2]/2+x)};for(N=0;N<C;N++)k=y[N],e+=T&&!k.visible?0:k.y;for(N=0;N<C;N++){k=y[N],w=e?k.y/e:0,d=i((g+n*b)*s)/s;if(!T||k.visible)n+=w;v=i((g+n*b)*s)/s,k.shapeType="arc",k.shapeArgs={x:f[0],y:f[1],r:f[2]/2,innerR:f[3]/2,start:d,end:v},m=(v+d)/2,m>.75*b&&(m-=2*h),k.slicedTranslation=cn([l(m)*u+p.plotLeft,c(m)*u+p.plotTop],i),E=l(m)*f[2]/2,S=c(m)*f[2]/2,k.tooltipPos=[f[0]+E*.7,f[1]+S*.7],k.half=m<b/4?0:1,k.angle=m,k.labelPos=[f[0]+E+l(m)*x,f[1]+S+c(m)*x,f[0]+E+l(m)*a,f[1]+S+c(m)*a,f[0]+E,f[1]+S,x<0?"center":k.half?"right":"left",m],k.percentage=w*100,k.total=e}this.setTooltipPoints()},render:function(){var e=this;e.getAttribs(),this.drawPoints(),e.options.enableMouseTracking!==!1&&e.drawTracker(),this.drawDataLabels(),e.options.animation&&e.animate&&e.animate(),e.isDirty=!1},drawPoints:function(){var e=this,t=e.chart,n=t.renderer,r,i,s,o=e.options.shadow,u,a;an(e.points,function(f){i=f.graphic,a=f.shapeArgs,s=f.group,u=f.shadowGroup,o&&!u&&(u=f.shadowGroup=n.g("shadow").attr({zIndex:4}).add()),s||(s=f.group=n.g("point").attr({zIndex:5}).add()),r=f.sliced?f.slicedTranslation:[t.plotLeft,t.plotTop],s.translate(r[0],r[1]),u&&u.translate(r[0],r[1]),i?i.animate(a):f.graphic=i=n.arc(a).setRadialReference(e.center).attr(xt(f.pointAttr[J],{"stroke-linejoin":"round"})).add(f.group).shadow(o,u),f.visible===!1&&f.setVisible(!1)})},drawDataLabels:function(){var e=this,t=e.data,n,r=e.chart,i=e.options.dataLabels,s=Bt(i.connectorPadding,10),o=Bt(i.connectorWidth,1),u,a,l=Bt(i.softConnector,!0),c=i.distance,h=e.center,p=h[2]/2,d=h[1],v=c>0,m,g,y,b=[[],[]],w,E,S,x,T=2,N,C=function(e,t){return t.y-e.y},k=function(e,t){e.sort(function(e,n){return(n.angle-e.angle)*t})};if(!i.enabled&&!e._hasPointLabels)return;Un.prototype.drawDataLabels.apply(e),an(t,function(e){e.dataLabel&&b[e.half].push(e)}),y=b[0][0]&&b[0][0].dataLabel&&(b[0][0].dataLabel.getBBox().height||21);while(T--){var L=[],A,O=[],M=b[T],_,D=M.length,P;k(M,T-.5);if(c>0){for(_=d-p-c;_<=d+p+c;_+=y)L.push(_);A=L.length;if(D>A){x=[].concat(M),x.sort(C),N=D;while(N--)x[N].rank=N;N=D;while(N--)M[N].rank>=A&&M.splice(N,1);D=M.length}for(N=0;N<D;N++){n=M[N],g=n.labelPos;var H=9999,B,j;for(j=0;j<A;j++)B=f(L[j]-g[1]),B<H&&(H=B,P=j);if(P<N&&L[N]!==null)P=N;else if(A<D-N+P&&L[N]!==null){P=A-D+N;while(L[P]===null)P++}else while(L[P]===null)P++;O.push({i:P,y:L[P]}),L[P]=null}O.sort(C)}for(N=0;N<D;N++){var F,I;n=M[N],g=n.labelPos,m=n.dataLabel,S=n.visible===!1?q:U,I=g[1];if(c>0){F=O.pop(),P=F.i,E=F.y;if(I>E&&L[P+1]!==null||I<E&&L[P-1]!==null)E=I}else E=I;w=i.justify?h[0]+(T?-1:1)*(p+c):e.getX(P===0||P===L.length-1?I:E,T),m.attr({visibility:S,align:g[6]})[m.moved?"animate":"attr"]({x:w+i.x+({left:s,right:-s}[g[6]]||0),y:E+i.y-10}),m.moved=!0,v&&o&&(u=n.connector,a=l?[X,w+(g[6]==="left"?5:-5),E,"C",w,E,2*g[2]-g[4],2*g[3]-g[5],g[2],g[3],V,g[4],g[5]]:[X,w+(g[6]==="left"?5:-5),E,V,g[2],g[3],V,g[4],g[5]],u?(u.animate({d:a}),u.attr("visibility",S)):n.connector=u=e.chart.renderer.path(a).attr({"stroke-width":o,stroke:i.connectorColor||n.color||"#606060",visibility:S,zIndex:3}).translate(r.plotLeft,r.plotTop).add())}}},alignDataLabel:H,drawTracker:Jn.prototype.drawTracker,drawLegendSymbol:Wn.prototype.drawLegendSymbol,getSymbol:function(){}};Yn=It(Un,Yn),St.pie=Yn,xt(Highcharts,{Axis:Bn,CanVGRenderer:Mn,Chart:qn,Color:Nn,Legend:In,MouseTracker:Fn,Point:Rn,Tick:Dn,Tooltip:jn,Renderer:N,Series:Un,SVGRenderer:kn,VMLRenderer:Ln,arrayMin:Kt,arrayMax:Qt,charts:B,dateFormat:M,pathAnim:D,getOptions:Tn,hasBidiBug:x,isTouchDevice:w,numberFormat:Rt,seriesTypes:St,setOptions:xn,addEvent:pn,removeEvent:dn,createElement:Ft,discardElement:Yt,css:jt,each:an,extend:xt,map:cn,merge:hn,pick:Bt,splat:Ht,extendClass:It,pInt:Nt,wrap:zt,svg:S,canvas:T,vml:!S&&!T,product:"Highcharts",version:"2.3.5"})}(),define("highcharts",function(e){return function(){var t,n;return t||e.Highcharts}}(this)),define("utils/PaginationUtil",["underscore"],function(e){var t=function(t){var n=this,r={currentPage:1,totalPage:1};this.options=e.extend(r,t),this.init()};return t.prototype={init:function(){this.options.onInit(),this.options.$el.append('<div data="pagination_wrapper"></div>'),this.render(),this.bindEvents()},render:function(){this.updateCss(),this.options.$el.find('div[data="pagination_wrapper"]').html(e.template(this._templ(),this.options))},bindEvents:function(){var e=this;e.options.$el.undelegate(),e.options.$el.delegate('a[role="prevBtn"]',"click",function(){if(e.options.currentPage===1)return;e.options.currentPage--,e.render(),e.options.onPageClick(e.options.currentPage)}),e.options.$el.delegate('a[role="nextBtn"]',"click",function(){console.log(e.options.currentPage,e.options.totalPage);if(e.options.currentPage===e.options.totalPage||e.options.totalPage<=0)return;e.options.currentPage++,e.render(),e.options.onPageClick(e.options.currentPage)})},updateCss:function(){this.options.prevClass=this.getPrevClass(),this.options.nextClass=this.getNextClass()},getPrevClass:function(){return this.options.currentPage==1?"paginate_disabled_previous":"paginate_enabled_previous"},getNextClass:function(){return this.options.totalPage<=0||this.options.currentPage===this.options.totalPage?"paginate_disabled_next":"paginate_enabled_next"},_templ:function(){return'<div class="tableview">							<div class="dataTables_paginate paging_two_button">								<a role="prevBtn" class="<%=prevClass%> paginate_button"></a>								<span class="navigationLabel">									<font class="pageIndex"><%=currentPage%></font>/<font class="totalPages"><%=totalPage%></font>								</span>								<a role="nextBtn" class="<%=nextClass%> paginate_button"></a>							</div>						</div>'}},t}),define("utils/levelUtil",["underscore"],function(e){return{split:function(t,n){n=n||50;if(t&&t.length){if(t.length<=n)return t;var r=t[0],i=t.length,s=parseInt(i/n),o=i%n,u=o===0?s-1:s,a=1,f,l,c=[],h=[];e.isObject(r)?(l=e.pluck(t,"item"),l=e.map(l,function(e){return parseInt(e)})):l=t,e.isString(r)&&(l=e.map(l,function(e){return parseInt(e)})),f=parseInt(e.max(l));var p=a;while(p<=f){var d=p+u,v=d>f?p+"~"+f:p+"~"+d;c.push(v),p=p+u+1}if(e.isObject(r)){var m,g;return e.each(c,function(n){m=parseInt(n.split("~")[0]),g=parseInt(n.split("~")[1]);var r=e.filter(t,function(e){var t=parseInt(e.item);if(t>=m&&t<=g)return e}),i=e.sum(e.pluck(r,"value"));h.push({item:n,value:i})}),h}return c}return t}}}),function(e){e.fn.extend({actual:function(t,n){if(!this[t])throw'$.actual => The jQuery method "'+t+'" you called does not exist';var r={absolute:!1,clone:!1,includeMargin:!1},i=e.extend(r,n),s=this.eq(0),o,u;if(i.clone===!0)o=function(){var e="position: absolute !important; top: -1000 !important; ";s=s.clone().attr("style",e).appendTo("body")},u=function(){s.remove()};else{var a=[],f="",l;o=function(){e.fn.jquery>="1.8.0"?l=s.parents().addBack().filter(":hidden"):l=s.parents().andSelf().filter(":hidden"),f+="visibility: hidden !important; display: block !important; ",i.absolute===!0&&(f+="position: absolute !important; "),l.each(function(){var t=e(this);a.push(t.attr("style")),t.attr("style",f)})},u=function(){l.each(function(t){var n=e(this),r=a[t];r===undefined?n.removeAttr("style"):n.attr("style",r)})}}o();var c=/(outer)/g.test(t)?s[t](i.includeMargin):s[t]();return u(),c}})}(jQuery),define("jquery.actual",function(){}),define("utils/HighchartUtil",["highcharts","underscore","utils/PaginationUtil","utils/levelUtil","jquery.actual"],function(e,t,n,r){var i=/^1\d([01]\d)([0123][0-9])\d{0,2}$/,s=/\d{2}(\d{2})(\d{2})~\d{2}(\d{2})(\d{2})/;e.theme={colors:["#6DC5FD","#72CB68","#F7941D","#45C09D","#BD77DE"],chart:{backgroundColor:"#fff"},credits:{enabled:!1},title:{style:{fontSize:"12px",fontWeight:"bold"}},xAxis:{offset:1,labels:{style:{color:"#444"}},lineColor:"#DCDCDC",tickColor:"#BEBEBE",tickWidth:1},yAxis:{gridLineColor:"#cccccc",gridLineDashStyle:"Dash",gridLineWidth:1,labels:{style:{color:"#444"}},lineColor:"#DCDCDC",tickColor:"#BEBEBE",tickWidth:1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.65)",borderColor:"rgba(0, 0, 0, 0.25)",style:{padding:"5px",color:"#F0F0F0"},formatter:function(){var e=this.series.name,t="";if(e){var n=e.split("^");n.length==2&&(e=n[0],t=n[1],t.indexOf("#")!=-1?(t=t.substring(1),this.y=t+this.y):this.y=this.y+t)}return s.test(this.x)?this.x=this.x.replace(s,"$1/$2~$3/$4"):i.test(this.x)&&(this.x=this.x.replace(i,"$1/$2")),"<b>"+e+"<br/>"+this.x+" : "+this.y}},plotOptions:{area:{fillOpacity:.1,dataLabels:{shadow:!1},cursor:"pointer",marker:{symbol:"circle",radius:2,fillColor:"#FFFFFF",lineWidth:2,lineColor:null}},bar:{borderColor:"rgba(0,0,0,0.2)",fillOpacity:.2,marker:{enabled:!1}}},legend:{align:"right",reversed:!0,floating:!0,borderWidth:0,verticalAlign:"top",x:0,y:0}},e.setOptions(e.theme);var o={regex:{day:/^1\d([01]\d)([0123][0-9])\d{0,2}$/,week:/\d{2}(\d{2})(\d{2})~\d{2}(\d{2})(\d{2})/},isDay:function(e){return this.regex.day.test(e)},isWeek:function(e){return this.regex.week.test(e)},xUnitWidth:function(e){var t=-1;if(e&&e.x&&e.x.length){var n=e.x[0];if(this.isDay(n))return 55;if(this.isWeek(n))return 125}return t},getInterval:function(e){var t=-1,n=this.xUnitWidth(e);if(n!=-1){var r=$("#"+e.id).width(),i=r/n,s=e.x.length;return Math.ceil(s/i)}return t}};return{chart:function(n){if(n.level){var o=r.split(n.level.data),u=t.pluck(o,"item"),a=t.pluck(o,"value"),f=[{name:n.level.name,data:a}];n.x=u,n.series=f}var l=new e.Chart({colors:n.colors||e.theme.colors,chart:{renderTo:n.id,type:n.type||"area"},title:{text:n.title||""},xAxis:{gridLineColor:"#cccccc",gridLineDashStyle:"Dash",gridLineWidth:1,categories:n.x,tickInterval:function(){var e=$("#"+n.id).actual("width"),t=e/60,r=n.x.length,i=Math.ceil(r/t);return i}(),tickmarkPlacement:"on",labels:{formatter:function(){return s.test(this.value)?this.value.replace(s,"$1/$2~$3/$4"):i.test(this.value)?this.value.replace(i,"$1/$2"):this.value}}},yAxis:[{title:{text:""},labels:{formatter:function(){return n.yPercent&&(this.value=this.value+"%"),this.value}},min:0,max:n.max||null},{title:{text:""},labels:{formatter:function(){return this.value}},opposite:!0}],legend:{enabled:!!n.legend,labelFormatter:function(){var e=this.name;return this.name&&(e=this.name.split("^")[0]),e}},plotOptions:{area:{fillOpacity:n.opacity||.1},series:{stacking:n.stacking}},tooltip:{formatter:function(){var e=this.series.name,r="";if(e){var o=e.split("^");o.length==2&&(e=o[0],r=o[1],r.indexOf("#")!=-1?(r=r.substring(1),this.y=r+this.y):this.y=this.y+r)}s.test(this.x)?this.x=this.x.replace(s,"$1/$2~$3/$4"):i.test(this.x)&&(this.x=this.x.replace(i,"$1/$2"));if(n.level){var u=this.x.split("~");if(u.length===2){var a=parseInt(u[0]),f=parseInt(u[1]),l=t.filter(n.level.data,function(e){var t=parseInt(e.item);if(t>=a&&t<=f)return e}),c="<b>"+e+"</b><br/>";return t.each(l,function(e){c+=e.item+": "+e.value+"<br/>"}),c+=this.x+": "+this.y,c}}return"<b>"+e+"<br/>"+this.x+" : "+this.y}},series:n.series});return l},chartBar:function(e){var r=e.series,i=[];e.x&&e.x.left&&i.push({categories:e.x.left,title:{text:null}}),e.x&&e.x.right&&(i.push({categories:e.x.right,title:{text:null},opposite:!0}),r[0].xAxis=0,r.push({name:r[0].name,xAxis:1,data:r[0].data,type:"scatter",dataLabels:{enabled:!1}})),e.x=i;var s=null;if(e.pagination){$("#"+e.id).html('<div id="'+e.id+'_wrapper"></div>');var o=10,u=e.x[0].categories.length,a=Math.ceil(u/o),f=this;new n({totalPage:a,$el:$("#"+e.id),onPageClick:function(n){var r=(n-1)*o,i=r+o>u?u:r+o,a=t.cloneDeep(e);t.each(a.x,function(e){t.map(e,function(t,n){return n==="categories"&&(t=t.slice(r,i),e[n]=t),e})}),t.each(a.series,function(e){t.map(e,function(t,n){return n==="data"&&(t=t.slice(r,i),e[n]=t),e})}),a.id=a.id+"_wrapper",s=f._chartBar(a)},onInit:function(){s=this.onPageClick(1)}})}else s=this._chartBar(e);return s},_chartBar:function(t){return new e.Chart({chart:{renderTo:t.id,type:"bar"},title:{text:""},xAxis:t.x,yAxis:{min:0,title:{text:""},labels:{overflow:"justify",formatter:function(){var e=this.value;return t.yPercent&&(e=this.value+"%"),e}}},plotOptions:{bar:{pointWidth:15,dataLabels:{enabled:!1,formatter:function(){return""+this.y}}},scatter:{marker:{enabled:!1}}},legend:{enabled:!1},series:t.series})},chartPie:function(t){return new e.Chart({chart:{renderTo:t.id,width:function(){var e=$("#"+t.id).actual("width");return e}(),plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage}%</b>",percentageDecimals:1,formatter:function(){return this.series.name+"<br/><b>"+this.point.name+"</b>:"+this.y+"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+this.y+" %"}}}},series:t.series})}}}),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v={}.hasOwnProperty,m=function(e,t){function r(){this.constructor=e}for(var n in t)v.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};(function(){var e,t,n,r,i,s,o;i=["ms","moz","webkit","o"];for(s=0,o=i.length;s<o;s++){r=i[s];if(window.requestAnimationFrame)break;window.requestAnimationFrame=window[r+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r+"CancelAnimationFrame"]||window[r+"CancelRequestAnimationFrame"]}e=null,n=0,t={};if(!requestAnimationFrame)return window.requestAnimationFrame=function(e,t){var n,r,i,s;return n=(new Date).getTime(),s=Math.max(0,16-(n-i)),r=window.setTimeout(function(){return e(n+s)},s),i=n+s,r},window.cancelAnimationFrame=function(e){return clearTimeout(e)};if(!window.cancelAnimationFrame)return e=window.requestAnimationFrame,window.requestAnimationFrame=function(r,i){var s;return s=++n,e(function(){if(!t[s])return r()},i),s},window.cancelAnimationFrame=function(e){return t[e]=!0}})(),String.prototype.hashCode=function(){var e,t,n,r,i;t=0;if(this.length===0)return t;for(n=r=0,i=this.length;0<=i?r<i:r>i;n=0<=i?++r:--r)e=this.charCodeAt(n),t=(t<<5)-t+e,t&=t;return t},p=function(e){var t,n;t=Math.floor(e/3600),n=Math.floor((e-t*3600)/60),e-=t*3600+n*60,e+="",n+="";while(n.length<2)n="0"+n;while(e.length<2)e="0"+e;return t=t?t+":":"",t+n+":"+e},c=function(e){return l(e.toFixed(0))},d=function(e,t){var n,r;for(n in t){if(!v.call(t,n))continue;r=t[n],e[n]=r}return e},h=function(e,t){var n,r,i;r={};for(n in e){if(!v.call(e,n))continue;i=e[n],r[n]=i}for(n in t){if(!v.call(t,n))continue;i=t[n],r[n]=i}return r},l=function(e){var t,n,r,i;e+="",n=e.split("."),r=n[0],i="",n.length>1&&(i="."+n[1]),t=/(\d+)(\d{3})/;while(t.test(r))r=r.replace(t,"$1,$2");return r+i},f=function(){function e(e,t){e==null&&(e=!0),this.clear=t!=null?t:!0,e&&AnimationUpdater.add(this)}return e.prototype.animationSpeed=32,e.prototype.update=function(e){var t;return e==null&&(e=!1),e||this.displayedValue!==this.value?(this.ctx&&this.clear&&this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),t=this.value-this.displayedValue,Math.abs(t/this.animationSpeed)<=.001?this.displayedValue=this.value:this.displayedValue=this.displayedValue+t/this.animationSpeed,this.render(),!0):!1},e}(),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.setTextField=function(e){return this.textField=e instanceof a?e:new a(e)},t.prototype.setMinValue=function(e,t){var n,r,i,s,o;this.minValue=e,t==null&&(t=!0);if(t){this.displayedValue=this.minValue,s=this.gp||[],o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(n.displayedValue=this.minValue);return o}},t.prototype.setOptions=function(e){return e==null&&(e=null),this.options=h(this.options,e),this.textField&&(this.textField.el.style.fontSize=e.fontSize+"px"),this},t}(f),a=function(){function e(e){this.el=e}return e.prototype.render=function(e){return this.el.innerHTML=c(e.displayedValue)},e}(),e=function(e){function t(e,t){this.elem=e,this.text=t!=null?t:!1,this.value=1*this.elem.innerHTML,this.text&&(this.value=0)}return m(t,e),t.prototype.displayedValue=0,t.prototype.value=0,t.prototype.setVal=function(e){return this.value=1*e},t.prototype.render=function(){var e;return this.text?e=p(this.displayedValue.toFixed(0)):e=l(c(this.displayedValue)),this.elem.innerHTML=e},t}(f),t={create:function(t){var n,r,i,s;r=[];for(i=0,s=t.length;i<s;i++)n=t[i],r.push(new e(n));return r}},u=function(e){function t(e){this.gauge=e,this.ctx=this.gauge.ctx,this.canvas=this.gauge.canvas,t.__super__.constructor.call(this,!1,!1),this.setOptions()}return m(t,e),t.prototype.displayedValue=0,t.prototype.value=0,t.prototype.options={strokeWidth:.035,length:.1,color:"#000000"},t.prototype.setOptions=function(e){return e==null&&(e=null),d(this.options,e),this.length=this.canvas.height*this.options.length,this.strokeWidth=this.canvas.height*this.options.strokeWidth,this.maxValue=this.gauge.maxValue,this.minValue=this.gauge.minValue,this.animationSpeed=this.gauge.animationSpeed,this.options.angle=this.gauge.options.angle},t.prototype.render=function(){var e,t,n,r,i,s,o,u,a;return e=this.gauge.getAngle.call(this,this.displayedValue),t=this.canvas.width/2,n=this.canvas.height*.9,u=Math.round(t+this.length*Math.cos(e)),a=Math.round(n+this.length*Math.sin(e)),s=Math.round(t+this.strokeWidth*Math.cos(e-Math.PI/2)),o=Math.round(n+this.strokeWidth*Math.sin(e-Math.PI/2)),r=Math.round(t+this.strokeWidth*Math.cos(e+Math.PI/2)),i=Math.round(n+this.strokeWidth*Math.sin(e+Math.PI/2)),this.ctx.fillStyle=this.options.color,this.ctx.beginPath(),this.ctx.arc(t,n,this.strokeWidth,0,Math.PI*2,!0),this.ctx.fill(),this.ctx.beginPath(),this.ctx.moveTo(s,o),this.ctx.lineTo(u,a),this.ctx.lineTo(r,i),this.ctx.fill()},t}(f),n=function(){function e(e){this.elem=e}return e.prototype.updateValues=function(e){return this.value=e[0],this.maxValue=e[1],this.avgValue=e[2],this.render()},e.prototype.render=function(){var e,t;return this.textField&&this.textField.text(c(this.value)),this.maxValue===0&&(this.maxValue=this.avgValue*2),t=this.value/this.maxValue*100,e=this.avgValue/this.maxValue*100,$(".bar-value",this.elem).css({width:t+"%"}),$(".typical-value",this.elem).css({width:e+"%"})},e}(),o=function(e){function t(e){this.canvas=e,t.__super__.constructor.call(this),typeof G_vmlCanvasManager!="undefined"&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.gp=[new u(this)],this.setOptions(),this.render()}return m(t,e),t.prototype.elem=null,t.prototype.value=[20],t.prototype.maxValue=80,t.prototype.minValue=0,t.prototype.displayedAngle=0,t.prototype.displayedValue=0,t.prototype.lineWidth=40,t.prototype.paddingBottom=.1,t.prototype.options={colorStart:"#6fadcf",colorStop:void 0,strokeColor:"#e0e0e0",pointer:{length:.8,strokeWidth:.035},angle:.15,lineWidth:.44,fontSize:40},t.prototype.setOptions=function(e){var n,r,i,s;e==null&&(e=null),t.__super__.setOptions.call(this,e),this.lineWidth=this.canvas.height*(1-this.paddingBottom)*this.options.lineWidth,this.radius=this.canvas.height*(1-this.paddingBottom)-this.lineWidth,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.render(),s=this.gp;for(r=0,i=s.length;r<i;r++)n=s[r],n.setOptions(this.options.pointer),n.render();return this},t.prototype.set=function(e){var t,n,r,i,s,o;e instanceof Array||(e=[e]);if(e.length>this.gp.length)for(t=r=0,o=e.length-this.gp.length;0<=o?r<o:r>o;t=0<=o?++r:--r)this.gp.push(new u(this));t=0;for(i=0,s=e.length;i<s;i++)n=e[i],n>this.maxValue&&(this.maxValue=this.value*1.1),this.gp[t].value=n,this.gp[t++].setOptions({maxValue:this.maxValue,angle:this.options.angle});return this.value=e[e.length-1],AnimationUpdater.run()},t.prototype.getAngle=function(e){return(1+this.options.angle)*Math.PI+(e-this.minValue)/(this.maxValue-this.minValue)*(1-this.options.angle*2)*Math.PI},t.prototype.render=function(){var e,t,n,r,i,s,o,u,a;i=this.canvas.width/2,r=this.canvas.height*(1-this.paddingBottom),e=this.getAngle(this.displayedValue),this.textField&&this.textField.render(this),this.ctx.lineCap="butt",this.options.customFillStyle!==void 0?t=this.options.customFillStyle(this):this.options.colorStop!==void 0?(t=this.ctx.createRadialGradient(i,r,9,i,r,70),t.addColorStop(0,this.options.colorStart),t.addColorStop(1,this.options.colorStop)):t=this.options.colorStart,this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.arc(i,r,this.radius,(1+this.options.angle)*Math.PI,e,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.stroke(),this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(i,r,this.radius,e,(2-this.options.angle)*Math.PI,!1),this.ctx.stroke(),u=this.gp,a=[];for(s=0,o=u.length;s<o;s++)n=u[s],a.push(n.update(!0));return a},t}(i),r=function(e){function t(e){this.canvas=e,t.__super__.constructor.call(this),typeof G_vmlCanvasManager!="undefined"&&(this.canvas=window.G_vmlCanvasManager.initElement(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.setOptions(),this.render()}return m(t,e),t.prototype.lineWidth=15,t.prototype.displayedValue=0,t.prototype.value=33,t.prototype.maxValue=80,t.prototype.minValue=0,t.prototype.options={lineWidth:.1,colorStart:"#6f6ea0",colorStop:"#c0c0db",strokeColor:"#eeeeee",shadowColor:"#d5d5d5",angle:.35},t.prototype.getAngle=function(e){return(1-this.options.angle)*Math.PI+(e-this.minValue)/(this.maxValue-this.minValue)*(2+this.options.angle-(1-this.options.angle))*Math.PI},t.prototype.setOptions=function(e){return e==null&&(e=null),t.__super__.setOptions.call(this,e),this.lineWidth=this.canvas.height*this.options.lineWidth,this.radius=this.canvas.height/2-this.lineWidth/2,this},t.prototype.set=function(e){return this.value=e,this.value>this.maxValue&&(this.maxValue=this.value*1.1),AnimationUpdater.run()},t.prototype.render=function(){var e,t,n,r,i,s;return e=this.getAngle(this.displayedValue),s=this.canvas.width/2,n=this.canvas.height/2,this.textField&&this.textField.render(this),t=this.ctx.createRadialGradient(s,n,39,s,n,70),t.addColorStop(0,this.options.colorStart),t.addColorStop(1,this.options.colorStop),r=this.radius-this.lineWidth/2,i=this.radius+this.lineWidth/2,this.ctx.strokeStyle=this.options.strokeColor,this.ctx.beginPath(),this.ctx.arc(s,n,this.radius,(1-this.options.angle)*Math.PI,(2+this.options.angle)*Math.PI,!1),this.ctx.lineWidth=this.lineWidth,this.ctx.lineCap="round",this.ctx.stroke(),this.ctx.strokeStyle=t,this.ctx.beginPath(),this.ctx.arc(s,n,this.radius,(1-this.options.angle)*Math.PI,e,!1),this.ctx.stroke()},t}(i),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.strokeGradient=function(e,t,n,r){var i;return i=this.ctx.createRadialGradient(e,t,n,e,t,r),i.addColorStop(0,this.options.shadowColor),i.addColorStop(.12,this.options._orgStrokeColor),i.addColorStop(.88,this.options._orgStrokeColor),i.addColorStop(1,this.options.shadowColor),i},t.prototype.setOptions=function(e){var n,r,i,s;return e==null&&(e=null),t.__super__.setOptions.call(this,e),s=this.canvas.width/2,n=this.canvas.height/2,r=this.radius-this.lineWidth/2,i=this.radius+this.lineWidth/2,this.options._orgStrokeColor=this.options.strokeColor,this.options.strokeColor=this.strokeGradient(s,n,r,i),this},t}(r),window.AnimationUpdater={elements:[],animId:null,addAll:function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(AnimationUpdater.elements.push(t));return i},add:function(e){return AnimationUpdater.elements.push(e)},run:function(){var e,t,n,r,i;e=!0,i=AnimationUpdater.elements;for(n=0,r=i.length;n<r;n++)t=i[n],t.update()&&(e=!1);return e?cancelAnimationFrame(AnimationUpdater.animId):AnimationUpdater.animId=requestAnimationFrame(AnimationUpdater.run)}},window.Gauge=o,window.Donut=s,window.BaseDonut=r,window.TextRenderer=a}.call(this),define("gauge",function(e){return function(){var t,n;return t||e.Gauge}}(this)),define("utils/GaugeUtil",["gauge"],function(e){return{draw:function(t){var n={lines:22,angle:1e-5,lineWidth:.4,pointer:{length:.9,strokeWidth:.05,color:"#435068"},colorStart:"#4BA04D",colorStop:"#4BA04D",strokeColor:"#8A9EAC",generateGradient:!0},r=document.getElementById(t.id),i=(new e(r)).setOptions(n);return i.maxValue=parseInt(t.maxValue),i.set(parseInt(t.currentValue)<=0?1e-10:parseInt(t.currentValue)),i.animationSpeed=32,i}}}),define("utils/RegexUtil",{email:/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*([a-zA-Z0-9]+[_|\_|\-|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,isEmail:function(e){return this.email.test(e)},formatDigit:function(e){return(""+e).replace(/(?=(?:(\d\d\d)+$))/g,",").replace(/^,/,"")}}),function(){function e(){try{return i in n&&n[i]}catch(e){return!1}}var t={},n=window,r=n.document,i="localStorage",s="__storejs__",o;t.disabled=!1,t.set=function(e,t){},t.get=function(e){},t.remove=function(e){},t.clear=function(){},t.transact=function(e,n,r){var i=t.get(e);r==null&&(r=n,n=null),typeof i=="undefined"&&(i=n||{}),r(i),t.set(e,i)},t.getAll=function(){},t.serialize=function(e){return JSON.stringify(e)},t.deserialize=function(e){if(typeof e!="string")return undefined;try{return JSON.parse(e)}catch(t){return e||undefined}};if(e())o=n[i],t.set=function(e,n){return n===undefined?t.remove(e):(o.setItem(e,t.serialize(n)),n)},t.get=function(e){return t.deserialize(o.getItem(e))},t.remove=function(e){o.removeItem(e)},t.clear=function(){o.clear()},t.getAll=function(){var e={};for(var n=0;n<o.length;++n){var r=o.key(n);e[r]=t.get(r)}return e};else if(r.documentElement.addBehavior){var u,a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write('<script>document.w=window</script><iframe src="/favicon.ico"></iframe>'),a.close(),u=a.w.frames[0].document,o=u.createElement("div")}catch(f){o=r.createElement("div"),u=r.body}function l(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(o),u.appendChild(o),o.addBehavior("#default#userData"),o.load(i);var r=e.apply(t,n);return u.removeChild(o),r}}var c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function h(e){return e.replace(c,"___")}t.set=l(function(e,n,r){return n=h(n),r===undefined?t.remove(n):(e.setAttribute(n,t.serialize(r)),e.save(i),r)}),t.get=l(function(e,n){return n=h(n),t.deserialize(e.getAttribute(n))}),t.remove=l(function(e,t){t=h(t),e.removeAttribute(t),e.save(i)}),t.clear=l(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var n=0,r;r=t[n];n++)e.removeAttribute(r.name);e.save(i)}),t.getAll=l(function(e){var n=e.XMLDocument.documentElement.attributes,r={};for(var i=0,s;s=n[i];++i){var o=h(s.name);r[s.name]=t.deserialize(e.getAttribute(o))}return r})}try{t.set(s,s),t.get(s)!=s&&(t.disabled=!0),t.remove(s)}catch(f){t.disabled=!0}t.enabled=!t.disabled,typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define("libs/store.min",t):this.store=t}(),define("text!templates/public/table.html",[],function(){return' <table class="table_style1" border="0" cellspacing="0" cellpadding="0" width="100%">\n	<thead>\n		<tr>\n			<%_.each(head,function(o){%>\n				<th width="<%=width%>"><%=o%></th>\n			<%});%>\n		</tr>\n	</thead>\n	<tbody>\n		<%_.each(body,function(o){%>\n			<tr>\n				<%_.each(o,function(cell){\n					cell = (cell+\'\').replace(/^(1\\d)([01]\\d)([0123][0-9])$/,\'20$1-$2-$3\');\n				%>\n					<td width="<%=width%>"><%=cell%></td>\n				<%});%>\n			</tr>\n		<%});%>\n	</tbody>\n</table>'}),function($,window,document){$.fn.dataTableSettings=[];var _aoSettings=$.fn.dataTableSettings;$.fn.dataTableExt={};var _oExt=$.fn.dataTableExt;_oExt.sVersion="1.8.1",_oExt.sErrMode="throw",_oExt.iApiIndex=0,_oExt.oApi={},_oExt.afnFiltering=[],_oExt.aoFeatures=[],_oExt.ofnSearch={},_oExt.afnSortData=[],_oExt.oStdClasses={sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"buttonDiv l",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""},_oExt.oJUIClasses={sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last ui-corner-tr ui-corner-br",sStripOdd:"odd",sStripEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sLength:"buttonDiv l",sProcessing:"dataTables_processing",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortColumn:"sorting_",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot ui-state-default",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"ui-state-default"},_oExt.oPagination={two_button:{fnInit:function(e,t,n){var r,i,s,o;e.bJUI?(r=document.createElement("a"),i=document.createElement("a"),o=document.createElement("span"),o.className=e.oClasses.sPageJUINext,i.appendChild(o),s=document.createElement("span"),s.className=e.oClasses.sPageJUIPrev,r.appendChild(s)):(r=document.createElement("div"),i=document.createElement("div")),r.className=e.oClasses.sPagePrevDisabled,i.className=e.oClasses.sPageNextDisabled,r.title=e.oLanguage.oPaginate.sPrevious,i.title=e.oLanguage.oPaginate.sNext,t.appendChild(r),t.appendChild(i),$(r).bind("click.DT",function(){e.oApi._fnPageChange(e,"previous")&&n(e)}),$(i).bind("click.DT",function(){e.oApi._fnPageChange(e,"next")&&n(e)}),$(r).bind("selectstart.DT",function(){return!1}),$(i).bind("selectstart.DT",function(){return!1}),e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"&&(t.setAttribute("id",e.sTableId+"_paginate"),r.setAttribute("id",e.sTableId+"_previous"),i.setAttribute("id",e.sTableId+"_next"))},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=e.aanFeatures.p;for(var r=0,i=n.length;r<i;r++)n[r].childNodes.length!==0&&(n[r].childNodes[0].className=e._iDisplayStart===0?e.oClasses.sPagePrevDisabled:e.oClasses.sPagePrevEnabled,n[r].childNodes[1].className=e.fnDisplayEnd()==e.fnRecordsDisplay()?e.oClasses.sPageNextDisabled:e.oClasses.sPageNextEnabled)}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,t,n){var r=document.createElement("span"),i=document.createElement("span"),s=document.createElement("span"),o=document.createElement("span"),u=document.createElement("span");r.innerHTML=e.oLanguage.oPaginate.sFirst,i.innerHTML=e.oLanguage.oPaginate.sPrevious,o.innerHTML=e.oLanguage.oPaginate.sNext,u.innerHTML=e.oLanguage.oPaginate.sLast;var a=e.oClasses;r.className=a.sPageButton+" "+a.sPageFirst,i.className=a.sPageButton+" "+a.sPagePrevious,o.className=a.sPageButton+" "+a.sPageNext,u.className=a.sPageButton+" "+a.sPageLast,t.appendChild(r),t.appendChild(i),t.appendChild(s),t.appendChild(o),t.appendChild(u),$(r).bind("click.DT",function(){e.oApi._fnPageChange(e,"first")&&n(e)}),$(i).bind("click.DT",function(){e.oApi._fnPageChange(e,"previous")&&n(e)}),$(o).bind("click.DT",function(){e.oApi._fnPageChange(e,"next")&&n(e)}),$(u).bind("click.DT",function(){e.oApi._fnPageChange(e,"last")&&n(e)}),$("span",t).bind("mousedown.DT",function(){return!1}).bind("selectstart.DT",function(){return!1}),e.sTableId!==""&&typeof e.aanFeatures.p=="undefined"&&(t.setAttribute("id",e.sTableId+"_paginate"),r.setAttribute("id",e.sTableId+"_first"),i.setAttribute("id",e.sTableId+"_previous"),o.setAttribute("id",e.sTableId+"_next"),u.setAttribute("id",e.sTableId+"_last"))},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=_oExt.oPagination.iFullNumbersShowPages,r=Math.floor(n/2),i=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),s=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,o="",u,a,f,l,c=e.oClasses;i<n?(u=1,a=i):s<=r?(u=1,a=n):s>=i-r?(u=i-n+1,a=i):(u=s-Math.ceil(n/2)+1,a=u+n-1);for(f=u;f<=a;f++)s!=f?o+='<span class="'+c.sPageButton+'">'+f+"</span>":o+='<span class="'+c.sPageButtonActive+'">'+f+"</span>";var h=e.aanFeatures.p,p,d,v,m=function(n){var r=this.innerHTML*1-1;e._iDisplayStart=r*e._iDisplayLength,t(e),n.preventDefault()},g=function(){return!1};for(f=0,l=h.length;f<l;f++){if(h[f].childNodes.length===0)continue;var y=$("span:eq(2)",h[f]);y.html(o),$("span",y).bind("click.DT",m).bind("mousedown.DT",g).bind("selectstart.DT",g),p=h[f].getElementsByTagName("span"),d=[p[0],p[1],p[p.length-2],p[p.length-1]],$(d).removeClass(c.sPageButton+" "+c.sPageButtonActive+" "+c.sPageButtonStaticDisabled),s==1?(d[0].className+=" "+c.sPageButtonStaticDisabled,d[1].className+=" "+c.sPageButtonStaticDisabled):(d[0].className+=" "+c.sPageButton,d[1].className+=" "+c.sPageButton),i===0||s==i||e._iDisplayLength==-1?(d[2].className+=" "+c.sPageButtonStaticDisabled,d[3].className+=" "+c.sPageButtonStaticDisabled):(d[2].className+=" "+c.sPageButton,d[3].className+=" "+c.sPageButton)}}}},_oExt.oSort={"string-asc":function(e,t){typeof e!="string"&&(e=""),typeof t!="string"&&(t="");var n=e.toLowerCase(),r=t.toLowerCase();return n<r?-1:n>r?1:0},"string-desc":function(e,t){typeof e!="string"&&(e=""),typeof t!="string"&&(t="");var n=e.toLowerCase(),r=t.toLowerCase();return n<r?1:n>r?-1:0},"html-asc":function(e,t){var n=e.replace(/<.*?>/g,"").toLowerCase(),r=t.replace(/<.*?>/g,"").toLowerCase();return n<r?-1:n>r?1:0},"html-desc":function(e,t){var n=e.replace(/<.*?>/g,"").toLowerCase(),r=t.replace(/<.*?>/g,"").toLowerCase();return n<r?1:n>r?-1:0},"date-asc":function(e,t){var n=Date.parse(e),r=Date.parse(t);if(isNaN(n)||n==="")n=Date.parse("01/01/1970 00:00:00");if(isNaN(r)||r==="")r=Date.parse("01/01/1970 00:00:00");return n-r},"date-desc":function(e,t){var n=Date.parse(e),r=Date.parse(t);if(isNaN(n)||n==="")n=Date.parse("01/01/1970 00:00:00");if(isNaN(r)||r==="")r=Date.parse("01/01/1970 00:00:00");return r-n},"numeric-asc":function(e,t){var n=e=="-"||e===""?0:e*1,r=t=="-"||t===""?0:t*1;return n-r},"numeric-desc":function(e,t){var n=e=="-"||e===""?0:e*1,r=t=="-"||t===""?0:t*1;return r-n}},_oExt.aTypes=[function(e){if(typeof e=="number")return"numeric";if(typeof e!="string")return null;var t="0123456789-",n="0123456789.",r,i=!1;r=e.charAt(0);if(t.indexOf(r)==-1)return null;for(var s=1;s<e.length;s++){r=e.charAt(s);if(n.indexOf(r)==-1)return null;if(r=="."){if(i)return null;i=!0}}return"numeric"},function(e){var t=Date.parse(e);return t!==null&&!isNaN(t)||typeof e=="string"&&e.length===0?"date":null},function(e){return typeof e=="string"&&e.indexOf("<")!=-1&&e.indexOf(">")!=-1?"html":null}],_oExt.fnVersionCheck=function(e){var t=function(e,t){while(e.length<t)e+="0";return e},n=_oExt.sVersion.split("."),r=e.split("."),i="",s="";for(var o=0,u=r.length;o<u;o++)i+=t(n[o],3),s+=t(r[o],3);return parseInt(i,10)>=parseInt(s,10)},_oExt._oExternConfig={iNextUnique:0},$.fn.dataTable=function(oInit){function classSettings(){this.fnRecordsTotal=function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},this.fnRecordsDisplay=function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},this.fnDisplayEnd=function(){return this.oFeatures.bServerSide?this.oFeatures.bPaginate===!1||this._iDisplayLength==-1?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},this.oInstance=null,this.sInstance=null,this.oFeatures={bPaginate:!0,bLengthChange:!0,bFilter:!0,bSort:!0,bInfo:!0,bAutoWidth:!0,bProcessing:!1,bSortClasses:!0,bStateSave:!1,bServerSide:!1,bDeferRender:!1},this.oScroll={sX:"",sXInner:"",sY:"",bCollapse:!1,bInfinite:!1,iLoadGap:100,iBarWidth:0,bAutoCss:!0},this.aanFeatures=[],this.oLanguage={sProcessing:"Processing...",sLengthMenu:"Show _MENU_ entries",sZeroRecords:"No matching records found",sEmptyTable:"No data available in table",sLoadingRecords:"Loading...",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sSearch:"Search:",sUrl:"",oPaginate:{sFirst:"First",sPrevious:"Previous",sNext:"Next",sLast:"Last"},fnInfoCallback:null},this.aoData=[],this.aiDisplay=[],this.aiDisplayMaster=[],this.aoColumns=[],this.aoHeader=[],this.aoFooter=[],this.iNextId=0,this.asDataSearch=[],this.oPreviousSearch={sSearch:"",bRegex:!1,bSmart:!0},this.aoPreSearchCols=[],this.aaSorting=[[0,"asc",0]],this.aaSortingFixed=null,this.asStripClasses=[],this.asDestoryStrips=[],this.sDestroyWidth=0,this.fnRowCallback=null,this.fnHeaderCallback=null,this.fnFooterCallback=null,this.aoDrawCallback=[],this.fnPreDrawCallback=null,this.fnInitComplete=null,this.sTableId="",this.nTable=null,this.nTHead=null,this.nTFoot=null,this.nTBody=null,this.nTableWrapper=null,this.bDeferLoading=!1,this.bInitialised=!1,this.aoOpenRows=[],this.sDom="lfrtip",this.sPaginationType="two_button",this.iCookieDuration=7200,this.sCookiePrefix="SpryMedia_DataTables_",this.fnCookieCallback=null,this.aoStateSave=[],this.aoStateLoad=[],this.oLoadedState=null,this.sAjaxSource=null,this.sAjaxDataProp="aaData",this.bAjaxDataGet=!0,this.jqXHR=null,this.fnServerData=function(e,t,n,r){r.jqXHR=$.ajax({url:e,data:t,success:n,dataType:"json",cache:!1,error:function(e,t,n){t=="parsererror"&&alert("DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},this.fnFormatNumber=function(e){if(e<1e3)return e;var t=e+"",n=t.split(""),r="",i=t.length;for(var s=0;s<i;s++)s%3===0&&s!==0&&(r=","+r),r=n[i-s-1]+r;return r},this.aLengthMenu=[10,25,50,100],this.iDraw=0,this.bDrawing=0,this.iDrawError=-1,this._iDisplayLength=10,this._iDisplayStart=0,this._iDisplayEnd=10,this._iRecordsTotal=0,this._iRecordsDisplay=0,this.bJUI=!1,this.oClasses=_oExt.oStdClasses,this.bFiltered=!1,this.bSorted=!1,this.bSortCellsTop=!1,this.oInit=null}function _fnExternApiFunc(e){return function(){var t=[_fnSettingsFromNode(this[_oExt.iApiIndex])].concat(Array.prototype.slice.call(arguments));return _oExt.oApi[e].apply(this,t)}}function _fnInitalise(e){var t,n,r=e.iInitDisplayStart;if(e.bInitialised===!1){setTimeout(function(){_fnInitalise(e)},200);return}_fnAddOptionsHtml(e),_fnBuildHead(e),_fnDrawHead(e,e.aoHeader),e.nTFoot&&_fnDrawHead(e,e.aoFooter),_fnProcessingDisplay(e,!0),e.oFeatures.bAutoWidth&&_fnCalculateColumnWidths(e);for(t=0,n=e.aoColumns.length;t<n;t++)e.aoColumns[t].sWidth!==null&&(e.aoColumns[t].nTh.style.width=_fnStringToCss(e.aoColumns[t].sWidth));e.oFeatures.bSort?_fnSort(e):e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch):(e.aiDisplay=e.aiDisplayMaster.slice(),_fnCalculateEnd(e),_fnDraw(e));if(e.sAjaxSource!==null&&!e.oFeatures.bServerSide){e.fnServerData.call(e.oInstance,e.sAjaxSource,[],function(n){var s=n;if(e.sAjaxDataProp!==""){var o=_fnGetObjectDataFn(e.sAjaxDataProp);s=o(n)}for(t=0;t<s.length;t++)_fnAddData(e,s[t]);e.iInitDisplayStart=r,e.oFeatures.bSort?_fnSort(e):(e.aiDisplay=e.aiDisplayMaster.slice(),_fnCalculateEnd(e),_fnDraw(e)),_fnProcessingDisplay(e,!1),_fnInitComplete(e,n)},e);return}e.oFeatures.bServerSide||(_fnProcessingDisplay(e,!1),_fnInitComplete(e))}function _fnInitComplete(e,t){e._bInitComplete=!0,typeof e.fnInitComplete=="function"&&(typeof t!="undefined"?e.fnInitComplete.call(e.oInstance,e,t):e.fnInitComplete.call(e.oInstance,e))}function _fnLanguageProcess(e,t,n){_fnMap(e.oLanguage,t,"sProcessing"),_fnMap(e.oLanguage,t,"sLengthMenu"),_fnMap(e.oLanguage,t,"sEmptyTable"),_fnMap(e.oLanguage,t,"sLoadingRecords"),_fnMap(e.oLanguage,t,"sZeroRecords"),_fnMap(e.oLanguage,t,"sInfo"),_fnMap(e.oLanguage,t,"sInfoEmpty"),_fnMap(e.oLanguage,t,"sInfoFiltered"),_fnMap(e.oLanguage,t,"sInfoPostFix"),_fnMap(e.oLanguage,t,"sSearch"),typeof t.oPaginate!="undefined"&&(_fnMap(e.oLanguage.oPaginate,t.oPaginate,"sFirst"),_fnMap(e.oLanguage.oPaginate,t.oPaginate,"sPrevious"),_fnMap(e.oLanguage.oPaginate,t.oPaginate,"sNext"),_fnMap(e.oLanguage.oPaginate,t.oPaginate,"sLast")),typeof t.sEmptyTable=="undefined"&&typeof t.sZeroRecords!="undefined"&&_fnMap(e.oLanguage,t,"sZeroRecords","sEmptyTable"),typeof t.sLoadingRecords=="undefined"&&typeof t.sZeroRecords!="undefined"&&_fnMap(e.oLanguage,t,"sZeroRecords","sLoadingRecords"),n&&_fnInitalise(e)}function _fnAddColumn(e,t){var n=e.aoColumns.length,r={sType:null,_bAutoType:!0,bVisible:!0,bSearchable:!0,bSortable:!0,asSorting:["asc","desc"],sSortingClass:e.oClasses.sSortable,sSortingClassJUI:e.oClasses.sSortJUI,sTitle:t?t.innerHTML:"",sName:"",sWidth:null,sWidthOrig:null,sClass:null,fnRender:null,bUseRendered:!0,iDataSort:n,mDataProp:n,fnGetData:null,fnSetData:null,sSortDataType:"std",sDefaultContent:null,sContentPadding:"",nTh:t?t:document.createElement("th"),nTf:null};e.aoColumns.push(r),typeof e.aoPreSearchCols[n]=="undefined"||e.aoPreSearchCols[n]===null?e.aoPreSearchCols[n]={sSearch:"",bRegex:!1,bSmart:!0}:(typeof e.aoPreSearchCols[n].bRegex=="undefined"&&(e.aoPreSearchCols[n].bRegex=!0),typeof e.aoPreSearchCols[n].bSmart=="undefined"&&(e.aoPreSearchCols[n].bSmart=!0)),_fnColumnOptions(e,n,null)}function _fnColumnOptions(e,t,n){var r=e.aoColumns[t];typeof n!="undefined"&&n!==null&&(typeof n.sType!="undefined"&&(r.sType=n.sType,r._bAutoType=!1),_fnMap(r,n,"bVisible"),_fnMap(r,n,"bSearchable"),_fnMap(r,n,"bSortable"),_fnMap(r,n,"sTitle"),_fnMap(r,n,"sName"),_fnMap(r,n,"sWidth"),_fnMap(r,n,"sWidth","sWidthOrig"),_fnMap(r,n,"sClass"),_fnMap(r,n,"fnRender"),_fnMap(r,n,"bUseRendered"),_fnMap(r,n,"iDataSort"),_fnMap(r,n,"mDataProp"),_fnMap(r,n,"asSorting"),_fnMap(r,n,"sSortDataType"),_fnMap(r,n,"sDefaultContent"),_fnMap(r,n,"sContentPadding")),r.fnGetData=_fnGetObjectDataFn(r.mDataProp),r.fnSetData=_fnSetObjectDataFn(r.mDataProp),e.oFeatures.bSort||(r.bSortable=!1),!r.bSortable||$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortableNone,r.sSortingClassJUI=""):r.bSortable||$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortable,r.sSortingClassJUI=e.oClasses.sSortJUI):$.inArray("asc",r.asSorting)!=-1&&$.inArray("desc",r.asSorting)==-1?(r.sSortingClass=e.oClasses.sSortableAsc,r.sSortingClassJUI=e.oClasses.sSortJUIAscAllowed):$.inArray("asc",r.asSorting)==-1&&$.inArray("desc",r.asSorting)!=-1&&(r.sSortingClass=e.oClasses.sSortableDesc,r.sSortingClassJUI=e.oClasses.sSortJUIDescAllowed)}function _fnAddData(e,t){var n,r=typeof t.length=="number"?t.slice():$.extend(!0,{},t),i=e.aoData.length,s={nTr:null,_iId:e.iNextId++,_aData:r,_anHidden:[],_sRowStripe:""};e.aoData.push(s);var o,u;for(var a=0,f=e.aoColumns.length;a<f;a++){n=e.aoColumns[a],typeof n.fnRender=="function"&&n.bUseRendered&&n.mDataProp!==null&&_fnSetCellData(e,i,a,n.fnRender({iDataRow:i,iDataColumn:a,aData:s._aData,oSettings:e}));if(n._bAutoType&&n.sType!="string"){var l=_fnGetCellData(e,i,a,"type");l!==null&&l!==""&&(u=_fnDetectType(l),n.sType===null?n.sType=u:n.sType!=u&&(n.sType="string"))}}return e.aiDisplayMaster.push(i),e.oFeatures.bDeferRender||_fnCreateTr(e,i),i}function _fnCreateTr(e,t){var n=e.aoData[t],r;if(n.nTr===null){n.nTr=document.createElement("tr"),typeof n._aData.DT_RowId!="undefined"&&n.nTr.setAttribute("id",n._aData.DT_RowId),typeof n._aData.DT_RowClass!="undefined"&&$(n.nTr).addClass(n._aData.DT_RowClass);for(var i=0,s=e.aoColumns.length;i<s;i++){var o=e.aoColumns[i];r=document.createElement("td"),typeof o.fnRender!="function"||!!o.bUseRendered&&o.mDataProp!==null?r.innerHTML=_fnGetCellData(e,t,i,"display"):r.innerHTML=o.fnRender({iDataRow:t,iDataColumn:i,aData:n._aData,oSettings:e}),o.sClass!==null&&(r.className=o.sClass),o.bVisible?(n.nTr.appendChild(r),n._anHidden[i]=null):n._anHidden[i]=r}}}function _fnGatherData(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m;if(e.bDeferLoading||e.sAjaxSource===null){a=e.nTBody.childNodes;for(n=0,r=a.length;n<r;n++)if(a[n].nodeName.toUpperCase()=="TR"){c=e.aoData.length,e.aoData.push({nTr:a[n],_iId:e.iNextId++,_aData:[],_anHidden:[],_sRowStripe:""}),e.aiDisplayMaster.push(c),u=a[n].childNodes,o=0;for(i=0,s=u.length;i<s;i++){m=u[i].nodeName.toUpperCase();if(m=="TD"||m=="TH")_fnSetCellData(e,c,o,$.trim(u[i].innerHTML)),o++}}}a=_fnGetTrNodes(e),u=[];for(n=0,r=a.length;n<r;n++)for(i=0,s=a[n].childNodes.length;i<s;i++)f=a[n].childNodes[i],m=f.nodeName.toUpperCase(),(m=="TD"||m=="TH")&&u.push(f);u.length!=a.length*e.aoColumns.length&&_fnLog(e,1,"Unexpected number of TD elements. Expected "+a.length*e.aoColumns.length+" and got "+u.length+". DataTables does "+"not support rowspan / colspan in the table body, and there must be one cell for each "+"row/column combination.");for(d=0,v=e.aoColumns.length;d<v;d++){e.aoColumns[d].sTitle===null&&(e.aoColumns[d].sTitle=e.aoColumns[d].nTh.innerHTML);var g=e.aoColumns[d]._bAutoType,y=typeof e.aoColumns[d].fnRender=="function",b=e.aoColumns[d].sClass!==null,w=e.aoColumns[d].bVisible,E,S,x,T;if(g||y||b||!w)for(h=0,p=e.aoData.length;h<p;h++)E=u[h*v+d],g&&e.aoColumns[d].sType!="string"&&(T=_fnGetCellData(e,h,d,"type"),T!==""&&(S=_fnDetectType(T),e.aoColumns[d].sType===null?e.aoColumns[d].sType=S:e.aoColumns[d].sType!=S&&(e.aoColumns[d].sType="string"))),y&&(x=e.aoColumns[d].fnRender({iDataRow:h,iDataColumn:d,aData:e.aoData[h]._aData,oSettings:e}),E.innerHTML=x,e.aoColumns[d].bUseRendered&&_fnSetCellData(e,h,d,x)),b&&(E.className+=" "+e.aoColumns[d].sClass),w?e.aoData[h]._anHidden[d]=null:(e.aoData[h]._anHidden[d]=E,E.parentNode.removeChild(E))}}function _fnBuildHead(e){var t,n,r,i,s,o=e.nTHead.getElementsByTagName("tr"),u=e.nTHead.getElementsByTagName("th").length,a=0,f;if(u!==0)for(t=0,r=e.aoColumns.length;t<r;t++)n=e.aoColumns[t].nTh,e.aoColumns[t].sClass!==null&&$(n).addClass(e.aoColumns[t].sClass),e.aoColumns[t].sTitle!=n.innerHTML&&(n.innerHTML=e.aoColumns[t].sTitle);else{var l=document.createElement("tr");for(t=0,r=e.aoColumns.length;t<r;t++)n=e.aoColumns[t].nTh,n.innerHTML=e.aoColumns[t].sTitle,e.aoColumns[t].sClass!==null&&$(n).addClass(e.aoColumns[t].sClass),l.appendChild(n);$(e.nTHead).html("")[0].appendChild(l),_fnDetectHeader(e.aoHeader,e.nTHead)}if(e.bJUI)for(t=0,r=e.aoColumns.length;t<r;t++){n=e.aoColumns[t].nTh;var c=document.createElement("div");c.className=e.oClasses.sSortJUIWrapper,$(n).contents().appendTo(c);var h=document.createElement("span");h.className=e.oClasses.sSortIcon,c.appendChild(h),n.appendChild(c)}var p=function(e){return this.onselectstart=function(){return!1},!1};if(e.oFeatures.bSort)for(t=0;t<e.aoColumns.length;t++)e.aoColumns[t].bSortable!==!1?(_fnSortAttachListener(e,e.aoColumns[t].nTh,t),$(e.aoColumns[t].nTh).bind("mousedown.DT",p)):$(e.aoColumns[t].nTh).addClass(e.oClasses.sSortableNone);e.oClasses.sFooterTH!==""&&$(">tr>th",e.nTFoot).addClass(e.oClasses.sFooterTH);if(e.nTFoot!==null){var d=_fnGetUniqueThs(e,null,e.aoFooter);for(t=0,r=e.aoColumns.length;t<r;t++)typeof d[t]!="undefined"&&(e.aoColumns[t].nTf=d[t])}}function _fnDrawHead(e,t,n){var r,i,s,o,u,a,f=[],l=[],c=e.aoColumns.length,h,p;typeof n=="undefined"&&(n=!1);for(r=0,i=t.length;r<i;r++){f[r]=t[r].slice(),f[r].nTr=t[r].nTr;for(s=c-1;s>=0;s--)!e.aoColumns[s].bVisible&&!n&&f[r].splice(s,1);l.push([])}for(r=0,i=f.length;r<i;r++){if(f[r].nTr)for(u=0,a=f[r].nTr.childNodes.length;u<a;u++)f[r].nTr.removeChild(f[r].nTr.childNodes[0]);for(s=0,o=f[r].length;s<o;s++){h=1,p=1;if(typeof l[r][s]=="undefined"){f[r].nTr.appendChild(f[r][s].cell),l[r][s]=1;while(typeof f[r+h]!="undefined"&&f[r][s].cell==f[r+h][s].cell)l[r+h][s]=1,h++;while(typeof f[r][s+p]!="undefined"&&f[r][s].cell==f[r][s+p].cell){for(u=0;u<h;u++)l[r+u][s+p]=1;p++}f[r][s].cell.setAttribute("rowspan",h),f[r][s].cell.setAttribute("colspan",p)}}}}function _fnDraw(e){var t,n,r=[],i=0,s=!1,o=e.asStripClasses.length,u=e.aoOpenRows.length;if(e.fnPreDrawCallback!==null&&e.fnPreDrawCallback.call(e.oInstance,e)===!1)return;e.bDrawing=!0,typeof e.iInitDisplayStart!="undefined"&&e.iInitDisplayStart!=-1&&(e.oFeatures.bServerSide?e._iDisplayStart=e.iInitDisplayStart:e._iDisplayStart=e.iInitDisplayStart>=e.fnRecordsDisplay()?0:e.iInitDisplayStart,e.iInitDisplayStart=-1,_fnCalculateEnd(e));if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++;else if(!e.oFeatures.bServerSide)e.iDraw++;else if(!e.bDestroying&&!_fnAjaxUpdate(e))return;if(e.aiDisplay.length!==0){var a=e._iDisplayStart,f=e._iDisplayEnd;e.oFeatures.bServerSide&&(a=0,f=e.aoData.length);for(var l=a;l<f;l++){var c=e.aoData[e.aiDisplay[l]];c.nTr===null&&_fnCreateTr(e,e.aiDisplay[l]);var h=c.nTr;if(o!==0){var p=e.asStripClasses[i%o];c._sRowStripe!=p&&($(h).removeClass(c._sRowStripe).addClass(p),c._sRowStripe=p)}typeof e.fnRowCallback=="function"&&(h=e.fnRowCallback.call(e.oInstance,h,e.aoData[e.aiDisplay[l]]._aData,i,l),!h&&!s&&(_fnLog(e,0,"A node was not returned by fnRowCallback"),s=!0)),r.push(h),i++;if(u!==0)for(var d=0;d<u;d++)h==e.aoOpenRows[d].nParent&&r.push(e.aoOpenRows[d].nTr)}}else{r[0]=document.createElement("tr"),typeof e.asStripClasses[0]!="undefined"&&(r[0].className=e.asStripClasses[0]);var v=e.oLanguage.sZeroRecords.replace("_MAX_",e.fnFormatNumber(e.fnRecordsTotal()));e.iDraw==1&&e.sAjaxSource!==null&&!e.oFeatures.bServerSide?v=e.oLanguage.sLoadingRecords:typeof e.oLanguage.sEmptyTable!="undefined"&&e.fnRecordsTotal()===0&&(v=e.oLanguage.sEmptyTable);var m=document.createElement("td");m.setAttribute("valign","top"),m.colSpan=_fnVisbleColumns(e),m.className=e.oClasses.sRowEmpty,m.innerHTML=v,r[i].appendChild(m)}typeof e.fnHeaderCallback=="function"&&e.fnHeaderCallback.call(e.oInstance,$(">tr",e.nTHead)[0],_fnGetDataMaster(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay),typeof e.fnFooterCallback=="function"&&e.fnFooterCallback.call(e.oInstance,$(">tr",e.nTFoot)[0],_fnGetDataMaster(e),e._iDisplayStart,e.fnDisplayEnd(),e.aiDisplay);var g=document.createDocumentFragment(),y=document.createDocumentFragment(),b,w;if(e.nTBody){b=e.nTBody.parentNode,y.appendChild(e.nTBody);if(!e.oScroll.bInfinite||!e._bInitComplete||e.bSorted||e.bFiltered){w=e.nTBody.childNodes;for(t=w.length-1;t>=0;t--)w[t].parentNode.removeChild(w[t])}for(t=0,n=r.length;t<n;t++)g.appendChild(r[t]);e.nTBody.appendChild(g),b!==null&&b.appendChild(e.nTBody)}for(t=e.aoDrawCallback.length-1;t>=0;t--)e.aoDrawCallback[t].fn.call(e.oInstance,e);e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1,e.oFeatures.bServerSide&&(_fnProcessingDisplay(e,!1),typeof e._bInitComplete=="undefined"&&_fnInitComplete(e))}function _fnReDraw(e){e.oFeatures.bSort?_fnSort(e,e.oPreviousSearch):e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch):(_fnCalculateEnd(e),_fnDraw(e))}function _fnAjaxUpdate(e){if(e.bAjaxDataGet){_fnProcessingDisplay(e,!0);var t=e.aoColumns.length,n=[],r,i;e.iDraw++,n.push({name:"sEcho",value:e.iDraw}),n.push({name:"iColumns",value:t}),n.push({name:"sColumns",value:_fnColumnOrdering(e)}),n.push({name:"iDisplayStart",value:e._iDisplayStart}),n.push({name:"iDisplayLength",value:e.oFeatures.bPaginate!==!1?e._iDisplayLength:-1});for(i=0;i<t;i++)r=e.aoColumns[i].mDataProp,n.push({name:"mDataProp_"+i,value:typeof r=="function"?"function":r});if(e.oFeatures.bFilter!==!1){n.push({name:"sSearch",value:e.oPreviousSearch.sSearch}),n.push({name:"bRegex",value:e.oPreviousSearch.bRegex});for(i=0;i<t;i++)n.push({name:"sSearch_"+i,value:e.aoPreSearchCols[i].sSearch}),n.push({name:"bRegex_"+i,value:e.aoPreSearchCols[i].bRegex}),n.push({name:"bSearchable_"+i,value:e.aoColumns[i].bSearchable})}if(e.oFeatures.bSort!==!1){var s=e.aaSortingFixed!==null?e.aaSortingFixed.length:0,o=e.aaSorting.length;n.push({name:"iSortingCols",value:s+o});for(i=0;i<s;i++)n.push({name:"iSortCol_"+i,value:e.aaSortingFixed[i][0]}),n.push({name:"sSortDir_"+i,value:e.aaSortingFixed[i][1]});for(i=0;i<o;i++)n.push({name:"iSortCol_"+(i+s),value:e.aaSorting[i][0]}),n.push({name:"sSortDir_"+(i+s),value:e.aaSorting[i][1]});for(i=0;i<t;i++)n.push({name:"bSortable_"+i,value:e.aoColumns[i].bSortable})}return e.fnServerData.call(e.oInstance,e.sAjaxSource,n,function(t){_fnAjaxUpdateDraw(e,t)},e),!1}return!0}function _fnAjaxUpdateDraw(e,t){if(typeof t.sEcho!="undefined"){if(t.sEcho*1<e.iDraw)return;e.iDraw=t.sEcho*1}(!e.oScroll.bInfinite||e.oScroll.bInfinite&&(e.bSorted||e.bFiltered))&&_fnClearTable(e),e._iRecordsTotal=t.iTotalRecords,e._iRecordsDisplay=t.iTotalDisplayRecords;var n=_fnColumnOrdering(e),r=typeof t.sColumns!="undefined"&&n!==""&&t.sColumns!=n;if(r)var i=_fnReOrderIndex(e,t.sColumns);var s=_fnGetObjectDataFn(e.sAjaxDataProp),o=s(t);for(var u=0,a=o.length;u<a;u++)if(r){var f=[];for(var l=0,c=e.aoColumns.length;l<c;l++)f.push(o[u][i[l]]);_fnAddData(e,f)}else _fnAddData(e,o[u]);e.aiDisplay=e.aiDisplayMaster.slice(),e.bAjaxDataGet=!1,_fnDraw(e),e.bAjaxDataGet=!0,_fnProcessingDisplay(e,!1)}function _fnAddOptionsHtml(e){var t=document.createElement("div");e.nTable.parentNode.insertBefore(t,e.nTable),e.nTableWrapper=document.createElement("div"),e.nTableWrapper.className=e.oClasses.sWrapper,e.sTableId!==""&&e.nTableWrapper.setAttribute("id",e.sTableId+"_wrapper"),e.nTableReinsertBefore=e.nTable.nextSibling;var n=e.nTableWrapper,r=e.sDom.split(""),i,s,o,u,a,f,l;for(var c=0;c<r.length;c++){s=0,o=r[c];if(o=="<"){u=document.createElement("div"),a=r[c+1];if(a=="'"||a=='"'){f="",l=2;while(r[c+l]!=a)f+=r[c+l],l++;f=="H"?f="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix":f=="F"&&(f="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix");if(f.indexOf(".")!=-1){var h=f.split(".");u.setAttribute("id",h[0].substr(1,h[0].length-1)),u.className=h[1]}else f.charAt(0)=="#"?u.setAttribute("id",f.substr(1,f.length-1)):u.className=f;c+=l}n.appendChild(u),n=u}else if(o==">")n=n.parentNode;else if(o=="l"&&e.oFeatures.bPaginate&&e.oFeatures.bLengthChange)i=_fnFeatureHtmlLength(e),s=1;else if(o=="f"&&e.oFeatures.bFilter)i=_fnFeatureHtmlFilter(e),s=1;else if(o=="r"&&e.oFeatures.bProcessing)i=_fnFeatureHtmlProcessing(e),s=1;else if(o=="t")i=_fnFeatureHtmlTable(e),s=1;else if(o=="i"&&e.oFeatures.bInfo)i=_fnFeatureHtmlInfo(e),s=1;else if(o=="p"&&e.oFeatures.bPaginate)i=_fnFeatureHtmlPaginate(e),s=1;else if(_oExt.aoFeatures.length!==0){var p=_oExt.aoFeatures;for(var d=0,v=p.length;d<v;d++)if(o==p[d].cFeature){i=p[d].fnInit(e),i&&(s=1);break}}s==1&&i!==null&&(typeof e.aanFeatures[o]!="object"&&(e.aanFeatures[o]=[]),e.aanFeatures[o].push(i),n.appendChild(i))}t.parentNode.replaceChild(e.nTableWrapper,t)}function _fnFeatureHtmlTable(e){if(e.oScroll.sX===""&&e.oScroll.sY==="")return e.nTable;var t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),u=e.nTable.cloneNode(!1),a=e.nTable.cloneNode(!1),f=e.nTable.getElementsByTagName("thead")[0],l=e.nTable.getElementsByTagName("tfoot").length===0?null:e.nTable.getElementsByTagName("tfoot")[0],c=typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI?_oExt.oJUIClasses:_oExt.oStdClasses;n.appendChild(r),s.appendChild(o),i.appendChild(e.nTable),t.appendChild(n),t.appendChild(i),r.appendChild(u),u.appendChild(f),l!==null&&(t.appendChild(s),o.appendChild(a),a.appendChild(l)),t.className=c.sScrollWrapper,n.className=c.sScrollHead,r.className=c.sScrollHeadInner,i.className=c.sScrollBody,s.className=c.sScrollFoot,o.className=c.sScrollFootInner,e.oScroll.bAutoCss&&(n.style.overflow="hidden",n.style.position="relative",s.style.overflow="hidden",i.style.overflow="auto"),n.style.border="0",n.style.width="100%",s.style.border="0",r.style.width="150%",u.removeAttribute("id"),u.style.marginLeft="0",e.nTable.style.marginLeft="0",l!==null&&(a.removeAttribute("id"),a.style.marginLeft="0");var h=$(">caption",e.nTable);for(var p=0,d=h.length;p<d;p++)u.appendChild(h[p]);return e.oScroll.sX!==""&&(n.style.width=_fnStringToCss(e.oScroll.sX),i.style.width=_fnStringToCss(e.oScroll.sX),l!==null&&(s.style.width=_fnStringToCss(e.oScroll.sX)),$(i).scroll(function(e){n.scrollLeft=this.scrollLeft,l!==null&&(s.scrollLeft=this.scrollLeft)})),e.oScroll.sY!==""&&(i.style.height=_fnStringToCss(e.oScroll.sY)),e.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"}),e.oScroll.bInfinite&&$(i).scroll(function(){e.bDrawing||$(this).scrollTop()+$(this).height()>$(e.nTable).height()-e.oScroll.iLoadGap&&e.fnDisplayEnd()<e.fnRecordsDisplay()&&(_fnPageChange(e,"next"),_fnCalculateEnd(e),_fnDraw(e))}),e.nScrollHead=n,e.nScrollFoot=s,t}function _fnScrollDraw(e){var t=e.nScrollHead.getElementsByTagName("div")[0],n=t.getElementsByTagName("table")[0],r=e.nTable.parentNode,i,s,o,u,a,f,l,c,h,p,d,v=[],m,g=e.nTable.getElementsByTagName("thead");g.length>0&&e.nTable.removeChild(g[0]);if(e.nTFoot!==null){var y=e.nTable.getElementsByTagName("tfoot");y.length>0&&e.nTable.removeChild(y[0])}g=e.nTHead.cloneNode(!0),e.nTable.insertBefore(g,e.nTable.childNodes[0]),e.nTFoot!==null&&(y=e.nTFoot.cloneNode(!0),e.nTable.insertBefore(y,e.nTable.childNodes[1])),e.oScroll.sX===""&&(r.style.width="100%",t.parentNode.style.width="100%");var b=_fnGetUniqueThs(e,g);for(i=0,s=b.length;i<s;i++)p=_fnVisibleToColumnIndex(e,i),b[i].style.width=e.aoColumns[p].sWidth;e.nTFoot!==null&&_fnApplyToChildren(function(e){e.style.width=""},y.getElementsByTagName("tr")),m=$(e.nTable).outerWidth(),e.oScroll.sX===""?(e.nTable.style.width="100%",$.browser.msie&&$.browser.version<=7&&(e.nTable.style.width=_fnStringToCss($(e.nTable).outerWidth()-e.oScroll.iBarWidth))):e.oScroll.sXInner!==""?e.nTable.style.width=_fnStringToCss(e.oScroll.sXInner):m==$(r).width()&&$(r).height()<$(e.nTable).height()?(e.nTable.style.width=_fnStringToCss(m-e.oScroll.iBarWidth),$(e.nTable).outerWidth()>m-e.oScroll.iBarWidth&&(e.nTable.style.width=_fnStringToCss(m))):e.nTable.style.width=_fnStringToCss(m),m=$(e.nTable).outerWidth(),e.oScroll.sX===""&&(r.style.width=_fnStringToCss(m+e.oScroll.iBarWidth),t.parentNode.style.width=_fnStringToCss(m+e.oScroll.iBarWidth)),a=e.nTHead.getElementsByTagName("tr"),f=g.getElementsByTagName("tr"),_fnApplyToChildren(function(e,t){h=e.style,h.paddingTop="0",h.paddingBottom="0",h.borderTopWidth="0",h.borderBottomWidth="0",h.height=0,d=$(e).width(),t.style.width=_fnStringToCss(d),v.push(d)},f,a),$(f).height(0),e.nTFoot!==null&&(l=y.getElementsByTagName("tr"),c=e.nTFoot.getElementsByTagName("tr"),_fnApplyToChildren(function(e,t){h=e.style,h.paddingTop="0",h.paddingBottom="0",h.borderTopWidth="0",h.borderBottomWidth="0",h.height=0,d=$(e).width(),t.style.width=_fnStringToCss(d),v.push(d)},l,c),$(l).height(0)),_fnApplyToChildren(function(e){e.innerHTML="",e.style.width=_fnStringToCss(v.shift())},f),e.nTFoot!==null&&_fnApplyToChildren(function(e){e.innerHTML="",e.style.width=_fnStringToCss(v.shift())},l),$(e.nTable).outerWidth()<m&&(e.oScroll.sX===""?_fnLog(e,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you enable x-scrolling or increase the width the table has in which to be drawn"):e.oScroll.sXInner!==""&&_fnLog(e,1,"The table cannot fit into the current element which will cause column misalignment. It is suggested that you increase the sScrollXInner property to allow it to draw in a larger area, or simply remove that parameter to allow automatic calculation")),e.oScroll.sY===""&&$.browser.msie&&$.browser.version<=7&&(r.style.height=_fnStringToCss(e.nTable.offsetHeight+e.oScroll.iBarWidth));if(e.oScroll.sY!==""&&e.oScroll.bCollapse){r.style.height=_fnStringToCss(e.oScroll.sY);var w=e.oScroll.sX!==""&&e.nTable.offsetWidth>r.offsetWidth?e.oScroll.iBarWidth:0;e.nTable.offsetHeight<r.offsetHeight&&(r.style.height=_fnStringToCss($(e.nTable).height()+w))}var E=$(e.nTable).outerWidth();n.style.width=_fnStringToCss(E),t.style.width=_fnStringToCss(E+e.oScroll.iBarWidth);if(e.nTFoot!==null){var S=e.nScrollFoot.getElementsByTagName("div")[0],x=S.getElementsByTagName("table")[0];S.style.width=_fnStringToCss(e.nTable.offsetWidth+e.oScroll.iBarWidth),x.style.width=_fnStringToCss(e.nTable.offsetWidth)}if(e.bSorted||e.bFiltered)r.scrollTop=0}function _fnAjustColumnSizing(e){if(e.oFeatures.bAutoWidth===!1)return!1;_fnCalculateColumnWidths(e);for(var t=0,n=e.aoColumns.length;t<n;t++)e.aoColumns[t].nTh.style.width=e.aoColumns[t].sWidth}function _fnFeatureHtmlFilter(e){var t=e.oLanguage.sSearch;t=t.indexOf("_INPUT_")!==-1?t.replace("_INPUT_",'<input type="text" />'):t===""?'<input type="text" />':t+' <input type="text" />';var n=document.createElement("div");n.className=e.oClasses.sFilter,n.innerHTML="<label>"+t+"</label>",e.sTableId!==""&&typeof e.aanFeatures.f=="undefined"&&n.setAttribute("id",e.sTableId+"_filter");var r=$("input",n);return r.val(e.oPreviousSearch.sSearch.replace('"',"&quot;")),r.bind("keyup.DT",function(t){var n=e.aanFeatures.f;for(var r=0,i=n.length;r<i;r++)n[r]!=this.parentNode&&$("input",n[r]).val(this.value);this.value!=e.oPreviousSearch.sSearch&&_fnFilterComplete(e,{sSearch:this.value,bRegex:e.oPreviousSearch.bRegex,bSmart:e.oPreviousSearch.bSmart})}),r.bind("keypress.DT",function(e){if(e.keyCode==13)return!1}),n}function _fnFilterComplete(e,t,n){_fnFilter(e,t.sSearch,n,t.bRegex,t.bSmart);for(var r=0;r<e.aoPreSearchCols.length;r++)_fnFilterColumn(e,e.aoPreSearchCols[r].sSearch,r,e.aoPreSearchCols[r].bRegex,e.aoPreSearchCols[r].bSmart);_oExt.afnFiltering.length!==0&&_fnFilterCustom(e),e.bFiltered=!0,e._iDisplayStart=0,_fnCalculateEnd(e),_fnDraw(e),_fnBuildSearchArray(e,0)}function _fnFilterCustom(e){var t=_oExt.afnFiltering;for(var n=0,r=t.length;n<r;n++){var i=0;for(var s=0,o=e.aiDisplay.length;s<o;s++){var u=e.aiDisplay[s-i];t[n](e,_fnGetRowData(e,u,"filter"),u)||(e.aiDisplay.splice(s-i,1),i++)}}}function _fnFilterColumn(e,t,n,r,i){if(t==="")return;var s=0,o=_fnFilterCreateSearch(t,r,i);for(var u=e.aiDisplay.length-1;u>=0;u--){var a=_fnDataToSearch(_fnGetCellData(e,e.aiDisplay[u],n,"filter"),e.aoColumns[n].sType);o.test(a)||(e.aiDisplay.splice(u,1),s++)}}function _fnFilter(e,t,n,r,i){var s,o=_fnFilterCreateSearch(t,r,i);if(typeof n=="undefined"||n===null)n=0;_oExt.afnFiltering.length!==0&&(n=1);if(t.length<=0)e.aiDisplay.splice(0,e.aiDisplay.length),e.aiDisplay=e.aiDisplayMaster.slice();else if(e.aiDisplay.length==e.aiDisplayMaster.length||e.oPreviousSearch.sSearch.length>t.length||n==1||t.indexOf(e.oPreviousSearch.sSearch)!==0){e.aiDisplay.splice(0,e.aiDisplay.length),_fnBuildSearchArray(e,1);for(s=0;s<e.aiDisplayMaster.length;s++)o.test(e.asDataSearch[s])&&e.aiDisplay.push(e.aiDisplayMaster[s])}else{var u=0;for(s=0;s<e.asDataSearch.length;s++)o.test(e.asDataSearch[s])||(e.aiDisplay.splice(s-u,1),u++)}e.oPreviousSearch.sSearch=t,e.oPreviousSearch.bRegex=r,e.oPreviousSearch.bSmart=i}function _fnBuildSearchArray(e,t){e.asDataSearch.splice(0,e.asDataSearch.length);var n=typeof t!="undefined"&&t==1?e.aiDisplayMaster:e.aiDisplay;for(var r=0,i=n.length;r<i;r++)e.asDataSearch[r]=_fnBuildSearchRow(e,_fnGetRowData(e,n[r],"filter"))}function _fnBuildSearchRow(e,t){var n="";typeof e.__nTmpFilter=="undefined"&&(e.__nTmpFilter=document.createElement("div"));var r=e.__nTmpFilter;for(var i=0,s=e.aoColumns.length;i<s;i++)if(e.aoColumns[i].bSearchable){var o=t[i];n+=_fnDataToSearch(o,e.aoColumns[i].sType)+"  "}return n.indexOf("&")!==-1&&(r.innerHTML=n,n=r.textContent?r.textContent:r.innerText,n=n.replace(/\n/g," ").replace(/\r/g,"")),n}function _fnFilterCreateSearch(e,t,n){var r,i;return n?(r=t?e.split(" "):_fnEscapeRegex(e).split(" "),i="^(?=.*?"+r.join(")(?=.*?")+").*$",new RegExp(i,"i")):(e=t?e:_fnEscapeRegex(e),new RegExp(e,"i"))}function _fnDataToSearch(e,t){return typeof _oExt.ofnSearch[t]=="function"?_oExt.ofnSearch[t](e):t=="html"?e.replace(/\n/g," ").replace(/<.*?>/g,""):typeof e=="string"?e.replace(/\n/g," "):e===null?"":e}function _fnSort(e,t){var n,r,i,s,o,u,a=[],f=[],l=_oExt.oSort,c=e.aoData,h=e.aoColumns;if(!e.oFeatures.bServerSide&&(e.aaSorting.length!==0||e.aaSortingFixed!==null)){e.aaSortingFixed!==null?a=e.aaSortingFixed.concat(e.aaSorting):a=e.aaSorting.slice();for(i=0;i<a.length;i++){var p=a[i][0],d=_fnColumnIndexToVisible(e,p),v=e.aoColumns[p].sSortDataType;if(typeof _oExt.afnSortData[v]!="undefined"){var m=_oExt.afnSortData[v](e,p,d);for(o=0,u=c.length;o<u;o++)_fnSetCellData(e,o,p,m[o])}}for(i=0,s=e.aiDisplayMaster.length;i<s;i++)f[e.aiDisplayMaster[i]]=i;var g=a.length;e.aiDisplayMaster.sort(function(t,n){var r,s,o;for(i=0;i<g;i++){s=h[a[i][0]].iDataSort,o=h[s].sType,r=l[(o?o:"string")+"-"+a[i][1]](_fnGetCellData(e,t,s,"sort"),_fnGetCellData(e,n,s,"sort"));if(r!==0)return r}return l["numeric-asc"](f[t],f[n])})}(typeof t=="undefined"||t)&&!e.oFeatures.bDeferRender&&_fnSortingClasses(e),e.bSorted=!0,e.oFeatures.bFilter?_fnFilterComplete(e,e.oPreviousSearch,1):(e.aiDisplay=e.aiDisplayMaster.slice(),e._iDisplayStart=0,_fnCalculateEnd(e),_fnDraw(e))}function _fnSortAttachListener(e,t,n,r){$(t).bind("click.DT",function(t){if(e.aoColumns[n].bSortable===!1)return;var i=function(){var r,i;if(t.shiftKey){var s=!1;for(var o=0;o<e.aaSorting.length;o++)if(e.aaSorting[o][0]==n){s=!0,r=e.aaSorting[o][0],i=e.aaSorting[o][2]+1,typeof e.aoColumns[r].asSorting[i]=="undefined"?e.aaSorting.splice(o,1):(e.aaSorting[o][1]=e.aoColumns[r].asSorting[i],e.aaSorting[o][2]=i);break}s===!1&&e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0])}else e.aaSorting.length==1&&e.aaSorting[0][0]==n?(r=e.aaSorting[0][0],i=e.aaSorting[0][2]+1,typeof e.aoColumns[r].asSorting[i]=="undefined"&&(i=0),e.aaSorting[0][1]=e.aoColumns[r].asSorting[i],e.aaSorting[0][2]=i):(e.aaSorting.splice(0,e.aaSorting.length),e.aaSorting.push([n,e.aoColumns[n].asSorting[0],0]));_fnSort(e)};e.oFeatures.bProcessing?(_fnProcessingDisplay(e,!0),setTimeout(function(){i(),e.oFeatures.bServerSide||_fnProcessingDisplay(e,!1)},0)):i(),typeof r=="function"&&r(e)})}function _fnSortingClasses(e){var t,n,r,i,s,o,u,a=e.aoColumns.length,f=e.oClasses;for(t=0;t<a;t++)e.aoColumns[t].bSortable&&$(e.aoColumns[t].nTh).removeClass(f.sSortAsc+" "+f.sSortDesc+" "+e.aoColumns[t].sSortingClass);e.aaSortingFixed!==null?o=e.aaSortingFixed.concat(e.aaSorting):o=e.aaSorting.slice();for(t=0;t<e.aoColumns.length;t++)if(e.aoColumns[t].bSortable){u=e.aoColumns[t].sSortingClass,s=-1;for(r=0;r<o.length;r++)if(o[r][0]==t){u=o[r][1]=="asc"?f.sSortAsc:f.sSortDesc,s=r;break}$(e.aoColumns[t].nTh).addClass(u);if(e.bJUI){var l=$("span",e.aoColumns[t].nTh);l.removeClass(f.sSortJUIAsc+" "+f.sSortJUIDesc+" "+f.sSortJUI+" "+f.sSortJUIAscAllowed+" "+f.sSortJUIDescAllowed);var c;s==-1?c=e.aoColumns[t].sSortingClassJUI:o[s][1]=="asc"?c=f.sSortJUIAsc:c=f.sSortJUIDesc,l.addClass(c)}}else $(e.aoColumns[t].nTh).addClass(e.aoColumns[t].sSortingClass);u=f.sSortColumn;if(e.oFeatures.bSort&&e.oFeatures.bSortClasses){var h=_fnGetTdNodes(e);if(e.oFeatures.bDeferRender)$(h).removeClass(u+"1 "+u+"2 "+u+"3");else if(h.length>=a)for(t=0;t<a;t++)if(h[t].className.indexOf(u+"1")!=-1)for(r=0,i=h.length/a;r<i;r++)h[a*r+t].className=$.trim(h[a*r+t].className.replace(u+"1",""));else if(h[t].className.indexOf(u+"2")!=-1)for(r=0,i=h.length/a;r<i;r++)h[a*r+t].className=$.trim(h[a*r+t].className.replace(u+"2",""));else if(h[t].className.indexOf(u+"3")!=-1)for(r=0,i=h.length/a;r<i;r++)h[a*r+t].className=$.trim(h[a*r+t].className.replace(" "+u+"3",""));var p=1,d;for(t=0;t<o.length;t++){d=parseInt(o[t][0],10);for(r=0,i=h.length/a;r<i;r++)h[a*r+d].className+=" "+u+p;p<3&&p++}}}function _fnFeatureHtmlPaginate(e){if(e.oScroll.bInfinite)return null;var t=document.createElement("div");return t.className=e.oClasses.sPaging+e.sPaginationType,_oExt.oPagination[e.sPaginationType].fnInit(e,t,function(e){_fnCalculateEnd(e),_fnDraw(e)}),typeof e.aanFeatures.p=="undefined"&&e.aoDrawCallback.push({fn:function(e){_oExt.oPagination[e.sPaginationType].fnUpdate(e,function(e){_fnCalculateEnd(e),_fnDraw(e)})},sName:"pagination"}),t}function _fnPageChange(e,t){var n=e._iDisplayStart;if(t=="first")e._iDisplayStart=0;else if(t=="previous")e._iDisplayStart=e._iDisplayLength>=0?e._iDisplayStart-e._iDisplayLength:0,e._iDisplayStart<0&&(e._iDisplayStart=0);else if(t=="next")e._iDisplayLength>=0?e._iDisplayStart+e._iDisplayLength<e.fnRecordsDisplay()&&(e._iDisplayStart+=e._iDisplayLength):e._iDisplayStart=0;else if(t=="last")if(e._iDisplayLength>=0){var r=parseInt((e.fnRecordsDisplay()-1)/e._iDisplayLength,10)+1;e._iDisplayStart=(r-1)*e._iDisplayLength}else e._iDisplayStart=0;else _fnLog(e,0,"Unknown paging action: "+t);return n!=e._iDisplayStart}function _fnFeatureHtmlInfo(e){var t=document.createElement("div");return t.className=e.oClasses.sInfo,typeof e.aanFeatures.i=="undefined"&&(e.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"}),e.sTableId!==""&&t.setAttribute("id",e.sTableId+"_info")),t}function _fnUpdateInfo(e){if(!e.oFeatures.bInfo||e.aanFeatures.i.length===0)return;var t=e._iDisplayStart+1,n=e.fnDisplayEnd(),r=e.fnRecordsTotal(),i=e.fnRecordsDisplay(),s=e.fnFormatNumber(t),o=e.fnFormatNumber(n),u=e.fnFormatNumber(r),a=e.fnFormatNumber(i),f;e.oScroll.bInfinite&&(s=e.fnFormatNumber(1)),e.fnRecordsDisplay()===0&&e.fnRecordsDisplay()==e.fnRecordsTotal()?f=e.oLanguage.sInfoEmpty+e.oLanguage.sInfoPostFix:e.fnRecordsDisplay()===0?f=e.oLanguage.sInfoEmpty+" "+e.oLanguage.sInfoFiltered.replace("_MAX_",u)+e.oLanguage.sInfoPostFix:e.fnRecordsDisplay()==e.fnRecordsTotal()?f=e.oLanguage.sInfo.replace("_START_",s).replace("_END_",o).replace("_TOTAL_",a)+e.oLanguage.sInfoPostFix:f=e.oLanguage.sInfo.replace("_START_",s).replace("_END_",o).replace("_TOTAL_",a)+" "+e.oLanguage.sInfoFiltered.replace("_MAX_",e.fnFormatNumber(e.fnRecordsTotal()))+e.oLanguage.sInfoPostFix,e.oLanguage.fnInfoCallback!==null&&(f=e.oLanguage.fnInfoCallback(e,t,n,r,i,f));var l=e.aanFeatures.i;for(var c=0,h=l.length;c<h;c++)$(l[c]).html(f)}function _fnFeatureHtmlLength(e){if(e.oScroll.bInfinite)return null;var t=e.sTableId===""?"":'name="'+e.sTableId+'_length"',n='<select size="1" '+t+"  id= "+e.sTableId+'_page class="d" title="pages">',r,i;if(e.aLengthMenu.length==2&&typeof e.aLengthMenu[0]=="object"&&typeof e.aLengthMenu[1]=="object")for(r=0,i=e.aLengthMenu[0].length;r<i;r++)n+='<option value="'+e.aLengthMenu[0][r]+'">'+e.aLengthMenu[1][r]+"</option>";else for(r=0,i=e.aLengthMenu.length;r<i;r++)n+='<option value="'+e.aLengthMenu[r]+'">'+e.aLengthMenu[r]+"</option>";n+="</select>";var s=document.createElement("div");return e.sTableId!==""&&typeof e.aanFeatures.l=="undefined"&&(s.setAttribute("id",e.sTableId+"_length"),s.className=e.oClasses.sLength),s.innerHTML=e.oLanguage.sLengthMenu.replace("_MENU_",n),$('select option[value="'+e._iDisplayLength+'"]',s).attr("selected",!0),$("select",s).bind("change.DT",function(t){var n=$(this).val(),s=e.aanFeatures.l;for(r=0,i=s.length;r<i;r++)s[r]!=this.parentNode&&$("select",s[r]).val(n);e._iDisplayLength=parseInt(n,10),_fnCalculateEnd(e),e.fnDisplayEnd()==e.fnRecordsDisplay()&&(e._iDisplayStart=e.fnDisplayEnd()-e._iDisplayLength,e._iDisplayStart<0&&(e._iDisplayStart=0)),e._iDisplayLength==-1&&(e._iDisplayStart=0),_fnDraw(e)}),s}function _fnFeatureHtmlProcessing(e){var t=document.createElement("div");return e.sTableId!==""&&typeof e.aanFeatures.r=="undefined"&&t.setAttribute("id",e.sTableId+"_processing"),t.innerHTML=e.oLanguage.sProcessing,t.className=e.oClasses.sProcessing,e.nTable.parentNode.insertBefore(t,e.nTable),t}function _fnProcessingDisplay(e,t){if(e.oFeatures.bProcessing){var n=e.aanFeatures.r;for(var r=0,i=n.length;r<i;r++)n[r].style.visibility=t?"visible":"hidden"}}function _fnVisibleToColumnIndex(e,t){var n=-1;for(var r=0;r<e.aoColumns.length;r++){e.aoColumns[r].bVisible===!0&&n++;if(n==t)return r}return null}function _fnColumnIndexToVisible(e,t){var n=-1;for(var r=0;r<e.aoColumns.length;r++){e.aoColumns[r].bVisible===!0&&n++;if(r==t)return e.aoColumns[r].bVisible===!0?n:null}return null}function _fnNodeToDataIndex(e,t){var n,r;for(n=e._iDisplayStart,r=e._iDisplayEnd;n<r;n++)if(e.aoData[e.aiDisplay[n]].nTr==t)return e.aiDisplay[n];for(n=0,r=e.aoData.length;n<r;n++)if(e.aoData[n].nTr==t)return n;return null}function _fnVisbleColumns(e){var t=0;for(var n=0;n<e.aoColumns.length;n++)e.aoColumns[n].bVisible===!0&&t++;return t}function _fnCalculateEnd(e){e.oFeatures.bPaginate===!1?e._iDisplayEnd=e.aiDisplay.length:e._iDisplayStart+e._iDisplayLength>e.aiDisplay.length||e._iDisplayLength==-1?e._iDisplayEnd=e.aiDisplay.length:e._iDisplayEnd=e._iDisplayStart+e._iDisplayLength}function _fnConvertToWidth(e,t){if(!e||e===null||e==="")return 0;typeof t=="undefined"&&(t=document.getElementsByTagName("body")[0]);var n,r=document.createElement("div");return r.style.width=_fnStringToCss(e),t.appendChild(r),n=r.offsetWidth,t.removeChild(r),n}function _fnCalculateColumnWidths(e){var t=e.nTable.offsetWidth,n=0,r,i=0,s=e.aoColumns.length,o,u,a,f,l=$("th",e.nTHead);for(o=0;o<s;o++)e.aoColumns[o].bVisible&&(i++,e.aoColumns[o].sWidth!==null&&(r=_fnConvertToWidth(e.aoColumns[o].sWidthOrig,e.nTable.parentNode),r!==null&&(e.aoColumns[o].sWidth=_fnStringToCss(r)),n++));if(s==l.length&&n===0&&i==s&&e.oScroll.sX===""&&e.oScroll.sY==="")for(o=0;o<e.aoColumns.length;o++)r=$(l[o]).width(),r!==null&&(e.aoColumns[o].sWidth=_fnStringToCss(r));else{var c=e.nTable.cloneNode(!1),h=e.nTHead.cloneNode(!0),p=document.createElement("tbody"),d=document.createElement("tr"),v;c.removeAttribute("id"),c.appendChild(h),e.nTFoot!==null&&(c.appendChild(e.nTFoot.cloneNode(!0)),_fnApplyToChildren(function(e){e.style.width=""},c.getElementsByTagName("tr"))),c.appendChild(p),p.appendChild(d);var m=$("thead th",c);m.length===0&&(m=$("tbody tr:eq(0)>td",c));var g=_fnGetUniqueThs(e,h);a=0;for(o=0;o<s;o++){var y=e.aoColumns[o];y.bVisible&&y.sWidthOrig!==null&&y.sWidthOrig!==""?g[o-a].style.width=_fnStringToCss(y.sWidthOrig):y.bVisible?g[o-a].style.width="":a++}for(o=0;o<s;o++)if(e.aoColumns[o].bVisible){var b=_fnGetWidestNode(e,o);b!==null&&(b=b.cloneNode(!0),e.aoColumns[o].sContentPadding!==""&&(b.innerHTML+=e.aoColumns[o].sContentPadding),d.appendChild(b))}var w=e.nTable.parentNode;w.appendChild(c),e.oScroll.sX!==""&&e.oScroll.sXInner!==""?c.style.width=_fnStringToCss(e.oScroll.sXInner):e.oScroll.sX!==""?(c.style.width="",$(c).width()<w.offsetWidth&&(c.style.width=_fnStringToCss(w.offsetWidth))):e.oScroll.sY!==""&&(c.style.width=_fnStringToCss(w.offsetWidth)),c.style.visibility="hidden",_fnScrollingWidthAdjust(e,c);var E=$("tbody tr:eq(0)",c).children();E.length===0&&(E=_fnGetUniqueThs(e,$("thead",c)[0]));if(e.oScroll.sX!==""){var S=0;a=0;for(o=0;o<e.aoColumns.length;o++)e.aoColumns[o].bVisible&&(e.aoColumns[o].sWidthOrig===null?S+=$(E[a]).outerWidth():S+=parseInt(e.aoColumns[o].sWidth.replace("px",""),10)+($(E[a]).outerWidth()-$(E[a]).width()),a++);c.style.width=_fnStringToCss(S),e.nTable.style.width=_fnStringToCss(S)}a=0;for(o=0;o<e.aoColumns.length;o++)e.aoColumns[o].bVisible&&(f=$(E[a]).width(),f!==null&&f>0&&(e.aoColumns[o].sWidth=_fnStringToCss(f)),a++);e.nTable.style.width=_fnStringToCss($(c).outerWidth()),c.parentNode.removeChild(c)}}function _fnScrollingWidthAdjust(e,t){if(e.oScroll.sX===""&&e.oScroll.sY!==""){var n=$(t).width();t.style.width=_fnStringToCss($(t).outerWidth()-e.oScroll.iBarWidth)}else e.oScroll.sX!==""&&(t.style.width=_fnStringToCss($(t).outerWidth()))}function _fnGetWidestNode(e,t){var n=_fnGetMaxLenString(e,t);if(n<0)return null;if(e.aoData[n].nTr===null){var r=document.createElement("td");return r.innerHTML=_fnGetCellData(e,n,t,""),r}return _fnGetTdNodes(e,n)[t]}function _fnGetMaxLenString(e,t){var n=-1,r=-1;for(var i=0;i<e.aoData.length;i++){var s=_fnGetCellData(e,i,t,"display")+"";s=s.replace(/<.*?>/g,""),s.length>n&&(n=s.length,r=i)}return r}function _fnStringToCss(e){if(e===null)return"0px";if(typeof e=="number")return e<0?"0px":e+"px";var t=e.charCodeAt(e.length-1);return t<48||t>57?e:e+"px"}function _fnArrayCmp(e,t){if(e.length!=t.length)return 1;for(var n=0;n<e.length;n++)if(e[n]!=t[n])return 2;return 0}function _fnDetectType(e){var t=_oExt.aTypes,n=t.length;for(var r=0;r<n;r++){var i=t[r](e);if(i!==null)return i}return"string"}function _fnSettingsFromNode(e){for(var t=0;t<_aoSettings.length;t++)if(_aoSettings[t].nTable==e)return _aoSettings[t];return null}function _fnGetDataMaster(e){var t=[],n=e.aoData.length;for(var r=0;r<n;r++)t.push(e.aoData[r]._aData);return t}function _fnGetTrNodes(e){var t=[];for(var n=0,r=e.aoData.length;n<r;n++)e.aoData[n].nTr!==null&&t.push(e.aoData[n].nTr);return t}function _fnGetTdNodes(e,t){var n=[],r,i,s,o=e.aoData.length,u,a,f,l,c=0,h=o;typeof t!="undefined"&&(c=t,h=t+1);for(s=c;s<h;s++){f=e.aoData[s];if(f.nTr!==null){i=[];for(u=0,a=f.nTr.childNodes.length;u<a;u++)l=f.nTr.childNodes[u].nodeName.toLowerCase(),(l=="td"||l=="th")&&i.push(f.nTr.childNodes[u]);r=0;for(u=0,a=e.aoColumns.length;u<a;u++)e.aoColumns[u].bVisible?n.push(i[u-r]):(n.push(f._anHidden[u]),r++)}}return n}function _fnEscapeRegex(e){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"],n=new RegExp("(\\"+t.join("|\\")+")","g");return e.replace(n,"\\$1")}function _fnDeleteIndex(e,t){var n=-1;for(var r=0,i=e.length;r<i;r++)e[r]==t?n=r:e[r]>t&&e[r]--;n!=-1&&e.splice(n,1)}function _fnReOrderIndex(e,t){var n=t.split(","),r=[];for(var i=0,s=e.aoColumns.length;i<s;i++)for(var o=0;o<s;o++)if(e.aoColumns[i].sName==n[o]){r.push(o);break}return r}function _fnColumnOrdering(e){var t="";for(var n=0,r=e.aoColumns.length;n<r;n++)t+=e.aoColumns[n].sName+",";return t.length==r?"":t.slice(0,-1)}function _fnLog(e,t,n){var r=e.sTableId===""?"DataTables warning: "+n:"DataTables warning (table id = '"+e.sTableId+"'): "+n;if(t===0){if(_oExt.sErrMode!="alert")throw r;alert(r);return}typeof console!="undefined"&&typeof console.log!="undefined"&&console.log(r)}function _fnClearTable(e){e.aoData.splice(0,e.aoData.length),e.aiDisplayMaster.splice(0,e.aiDisplayMaster.length),e.aiDisplay.splice(0,e.aiDisplay.length),_fnCalculateEnd(e)}function _fnSaveState(e){if(!e.oFeatures.bStateSave||typeof e.bDestroying!="undefined")return;var t,n,r,i="{";i+='"iCreate":'+(new Date).getTime()+",",i+='"iStart":'+(e.oScroll.bInfinite?0:e._iDisplayStart)+",",i+='"iEnd":'+(e.oScroll.bInfinite?e._iDisplayLength:e._iDisplayEnd)+",",i+='"iLength":'+e._iDisplayLength+",",i+='"sFilter":"'+encodeURIComponent(e.oPreviousSearch.sSearch)+'",',i+='"sFilterEsc":'+!e.oPreviousSearch.bRegex+",",i+='"aaSorting":[ ';for(t=0;t<e.aaSorting.length;t++)i+="["+e.aaSorting[t][0]+',"'+e.aaSorting[t][1]+'"],';i=i.substring(0,i.length-1),i+="],",i+='"aaSearchCols":[ ';for(t=0;t<e.aoPreSearchCols.length;t++)i+='["'+encodeURIComponent(e.aoPreSearchCols[t].sSearch)+'",'+!e.aoPreSearchCols[t].bRegex+"],";i=i.substring(0,i.length-1),i+="],",i+='"abVisCols":[ ';for(t=0;t<e.aoColumns.length;t++)i+=e.aoColumns[t].bVisible+",";i=i.substring(0,i.length-1),i+="]";for(t=0,n=e.aoStateSave.length;t<n;t++)r=e.aoStateSave[t].fn(e,i),r!==""&&(i=r);i+="}",_fnCreateCookie(e.sCookiePrefix+e.sInstance,i,e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)}function _fnLoadState(oSettings,oInit){if(!oSettings.oFeatures.bStateSave)return;var oData,i,iLen,sData=_fnReadCookie(oSettings.sCookiePrefix+oSettings.sInstance);if(sData!==null&&sData!==""){try{oData=typeof $.parseJSON=="function"?$.parseJSON(sData.replace(/'/g,'"')):eval("("+sData+")")}catch(e){return}for(i=0,iLen=oSettings.aoStateLoad.length;i<iLen;i++)if(!oSettings.aoStateLoad[i].fn(oSettings,oData))return;oSettings.oLoadedState=$.extend(!0,{},oData),oSettings._iDisplayStart=oData.iStart,oSettings.iInitDisplayStart=oData.iStart,oSettings._iDisplayEnd=oData.iEnd,oSettings._iDisplayLength=oData.iLength,oSettings.oPreviousSearch.sSearch=decodeURIComponent(oData.sFilter),oSettings.aaSorting=oData.aaSorting.slice(),oSettings.saved_aaSorting=oData.aaSorting.slice(),typeof oData.sFilterEsc!="undefined"&&(oSettings.oPreviousSearch.bRegex=!oData.sFilterEsc);if(typeof oData.aaSearchCols!="undefined")for(i=0;i<oData.aaSearchCols.length;i++)oSettings.aoPreSearchCols[i]={sSearch:decodeURIComponent(oData.aaSearchCols[i][0]),bRegex:!oData.aaSearchCols[i][1]};if(typeof oData.abVisCols!="undefined"){oInit.saved_aoColumns=[];for(i=0;i<oData.abVisCols.length;i++)oInit.saved_aoColumns[i]={},oInit.saved_aoColumns[i].bVisible=oData.abVisCols[i]}}}function _fnCreateCookie(sName,sValue,iSecs,sBaseName,fnCallback){var date=new Date;date.setTime(date.getTime()+iSecs*1e3);var aParts=window.location.pathname.split("/"),sNameFile=sName+"_"+aParts.pop().replace(/[\/:]/g,"").toLowerCase(),sFullCookie,oData;fnCallback!==null?(oData=typeof $.parseJSON=="function"?$.parseJSON(sValue):eval("("+sValue+")"),sFullCookie=fnCallback(sNameFile,oData,date.toGMTString(),aParts.join("/")+"/")):sFullCookie=sNameFile+"="+encodeURIComponent(sValue)+"; expires="+date.toGMTString()+"; path="+aParts.join("/")+"/";var sOldName="",iOldTime=9999999999999,iLength=_fnReadCookie(sNameFile)!==null?document.cookie.length:sFullCookie.length+document.cookie.length;if(iLength+10>4096){var aCookies=document.cookie.split(";");for(var i=0,iLen=aCookies.length;i<iLen;i++)if(aCookies[i].indexOf(sBaseName)!=-1){var aSplitCookie=aCookies[i].split("=");try{oData=eval("("+decodeURIComponent(aSplitCookie[1])+")")}catch(e){continue}typeof oData.iCreate!="undefined"&&oData.iCreate<iOldTime&&(sOldName=aSplitCookie[0],iOldTime=oData.iCreate)}sOldName!==""&&(document.cookie=sOldName+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+aParts.join("/")+"/")}document.cookie=sFullCookie}function _fnReadCookie(e){var t=window.location.pathname.split("/"),n=e+"_"+t[t.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",r=document.cookie.split(";");for(var i=0;i<r.length;i++){var s=r[i];while(s.charAt(0)==" ")s=s.substring(1,s.length);if(s.indexOf(n)===0)return decodeURIComponent(s.substring(n.length,s.length))}return null}function _fnDetectHeader(e,t){var n=t.getElementsByTagName("tr"),r,i,s,o,u,a,f,l,c=function(e,t,n){while(typeof e[t][n]!="undefined")n++;return n};e.splice(0,e.length);for(i=0,a=n.length;i<a;i++)e.push([]);for(i=0,a=n.length;i<a;i++){var h=0;for(s=0,f=n[i].childNodes.length;s<f;s++){r=n[i].childNodes[s];if(r.nodeName.toUpperCase()=="TD"||r.nodeName.toUpperCase()=="TH"){var p=r.getAttribute("colspan")*1,d=r.getAttribute("rowspan")*1;p=!p||p===0||p===1?1:p,d=!d||d===0||d===1?1:d,l=c(e,i,h);for(u=0;u<p;u++)for(o=0;o<d;o++)e[i+o][l+u]={cell:r,unique:p==1?!0:!1},e[i+o].nTr=n[i]}}}}function _fnGetUniqueThs(e,t,n){var r=[];typeof n=="undefined"&&(n=e.aoHeader,typeof t!="undefined"&&(n=[],_fnDetectHeader(n,t)));for(var i=0,s=n.length;i<s;i++)for(var o=0,u=n[i].length;o<u;o++)n[i][o].unique&&(typeof r[o]=="undefined"||!e.bSortCellsTop)&&(r[o]=n[i][o].cell);return r}function _fnScrollBarWidth(){var e=document.createElement("p"),t=e.style;t.width="100%",t.height="200px";var n=document.createElement("div");t=n.style,t.position="absolute",t.top="0px",t.left="0px",t.visibility="hidden",t.width="200px",t.height="150px",t.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var r=e.offsetWidth;n.style.overflow="scroll";var i=e.offsetWidth;return r==i&&(i=n.clientWidth),document.body.removeChild(n),r-i}function _fnApplyToChildren(e,t,n){for(var r=0,i=t.length;r<i;r++)for(var s=0,o=t[r].childNodes.length;s<o;s++)t[r].childNodes[s].nodeType==1&&(typeof n!="undefined"?e(t[r].childNodes[s],n[r].childNodes[s]):e(t[r].childNodes[s]))}function _fnMap(e,t,n,r){typeof r=="undefined"&&(r=n),typeof t[n]!="undefined"&&(e[r]=t[n])}function _fnGetRowData(e,t,n){var r=[];for(var i=0,s=e.aoColumns.length;i<s;i++)r.push(_fnGetCellData(e,t,i,n));return r}function _fnGetCellData(e,t,n,r){var i,s=e.aoColumns[n],o=e.aoData[t]._aData;return(i=s.fnGetData(o))===undefined?(e.iDrawError!=e.iDraw&&s.sDefaultContent===null&&(_fnLog(e,0,"Requested unknown parameter '"+s.mDataProp+"' from the data source for row "+t),e.iDrawError=e.iDraw),s.sDefaultContent):(i===null&&s.sDefaultContent!==null&&(i=s.sDefaultContent),r=="display"&&i===null?"":i)}function _fnSetCellData(e,t,n,r){var i=e.aoColumns[n],s=e.aoData[t]._aData;i.fnSetData(s,r)}function _fnGetObjectDataFn(e){if(e===null)return function(e){return null};if(typeof e=="function")return function(t){return e(t)};if(typeof e=="string"&&e.indexOf(".")!=-1){var t=e.split(".");return t.length==2?function(e){return e[t[0]][t[1]]}:t.length==3?function(e){return e[t[0]][t[1]][t[2]]}:function(e){for(var n=0,r=t.length;n<r;n++)e=e[t[n]];return e}}return function(t){return t[e]}}function _fnSetObjectDataFn(e){if(e===null)return function(e,t){};if(typeof e=="function")return function(t,n){return e(t,n)};if(typeof e=="string"&&e.indexOf(".")!=-1){var t=e.split(".");return t.length==2?function(e,n){e[t[0]][t[1]]=n}:t.length==3?function(e,n){e[t[0]][t[1]][t[2]]=n}:function(e,n){for(var r=0,i=t.length-1;r<i;r++)e=e[t[r]];e[t[t.length-1]]=n}}return function(t,n){t[e]=n}}this.oApi={},this.fnDraw=function(e){var t=_fnSettingsFromNode(this[_oExt.iApiIndex]);typeof e!="undefined"&&e===!1?(_fnCalculateEnd(t),_fnDraw(t)):_fnReDraw(t)},this.fnFilter=function(e,t,n,r,i){var s=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(!s.oFeatures.bFilter)return;typeof n=="undefined"&&(n=!1),typeof r=="undefined"&&(r=!0),typeof i=="undefined"&&(i=!0);if(typeof t=="undefined"||t===null){_fnFilterComplete(s,{sSearch:e,bRegex:n,bSmart:r},1);if(i&&typeof s.aanFeatures.f!="undefined"){var o=s.aanFeatures.f;for(var u=0,a=o.length;u<a;u++)$("input",o[u]).val(e)}}else s.aoPreSearchCols[t].sSearch=e,s.aoPreSearchCols[t].bRegex=n,s.aoPreSearchCols[t].bSmart=r,_fnFilterComplete(s,s.oPreviousSearch,1)},this.fnSettings=function(e){return _fnSettingsFromNode(this[_oExt.iApiIndex])},this.fnVersionCheck=_oExt.fnVersionCheck,this.fnSort=function(e){var t=_fnSettingsFromNode(this[_oExt.iApiIndex]);t.aaSorting=e,_fnSort(t)},this.fnSortListener=function(e,t,n){_fnSortAttachListener(_fnSettingsFromNode(this[_oExt.iApiIndex]),e,t,n)},this.fnAddData=function(e,t){if(e.length===0)return[];var n=[],r,i=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof e[0]=="object")for(var s=0;s<e.length;s++){r=_fnAddData(i,e[s]);if(r==-1)return n;n.push(r)}else{r=_fnAddData(i,e);if(r==-1)return n;n.push(r)}return i.aiDisplay=i.aiDisplayMaster.slice(),(typeof t=="undefined"||t)&&_fnReDraw(i),n},this.fnDeleteRow=function(e,t,n){var r=_fnSettingsFromNode(this[_oExt.iApiIndex]),i,s;s=typeof e=="object"?_fnNodeToDataIndex(r,e):e;var o=r.aoData.splice(s,1),u=$.inArray(s,r.aiDisplay);r.asDataSearch.splice(u,1),_fnDeleteIndex(r.aiDisplayMaster,s),_fnDeleteIndex(r.aiDisplay,s),typeof t=="function"&&t.call(this,r,o),r._iDisplayStart>=r.aiDisplay.length&&(r._iDisplayStart-=r._iDisplayLength,r._iDisplayStart<0&&(r._iDisplayStart=0));if(typeof n=="undefined"||n)_fnCalculateEnd(r),_fnDraw(r);return o},this.fnClearTable=function(e){var t=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnClearTable(t),(typeof e=="undefined"||e)&&_fnDraw(t)},this.fnOpen=function(e,t,n){var r=_fnSettingsFromNode(this[_oExt.iApiIndex]);this.fnClose(e);var i=document.createElement("tr"),s=document.createElement("td");i.appendChild(s),s.className=n,s.colSpan=_fnVisbleColumns(r),typeof t.jquery!="undefined"||typeof t=="object"?s.appendChild(t):s.innerHTML=t;var o=$("tr",r.nTBody);return $.inArray(e,o)!=-1&&$(i).insertAfter(e),r.aoOpenRows.push({nTr:i,nParent:e}),i},this.fnClose=function(e){var t=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(t==null)return 0;for(var n=0;n<t.aoOpenRows.length;n++)if(t.aoOpenRows[n].nParent==e){var r=t.aoOpenRows[n].nTr.parentNode;return r&&r.removeChild(t.aoOpenRows[n].nTr),t.aoOpenRows.splice(n,1),0}return 1},this.fnGetData=function(e,t){var n=_fnSettingsFromNode(this[_oExt.iApiIndex]);if(typeof e!="undefined"){var r=typeof e=="object"?_fnNodeToDataIndex(n,e):e;return typeof t!="undefined"?_fnGetCellData(n,r,t,""):typeof n.aoData[r]!="undefined"?n.aoData[r]._aData:null}return _fnGetDataMaster(n)},this.fnGetNodes=function(e){var t=_fnSettingsFromNode(this[_oExt.iApiIndex]);return typeof e!="undefined"?typeof t.aoData[e]!="undefined"?t.aoData[e].nTr:null:_fnGetTrNodes(t)},this.fnGetPosition=function(e){var t=_fnSettingsFromNode(this[_oExt.iApiIndex]),n=e.nodeName.toUpperCase();if(n=="TR")return _fnNodeToDataIndex(t,e);if(n=="TD"||n=="TH"){var r=_fnNodeToDataIndex(t,e.parentNode),i=_fnGetTdNodes(t,r);for(var s=0;s<t.aoColumns.length;s++)if(i[s]==e)return[r,_fnColumnIndexToVisible(t,s),s]}return null},this.fnUpdate=function(e,t,n,r,i){var s=_fnSettingsFromNode(this[_oExt.iApiIndex]),o,u,a,f,l=typeof t=="object"?_fnNodeToDataIndex(s,t):t;if($.isArray(e)&&typeof e=="object"){s.aoData[l]._aData=e.slice();for(u=0;u<s.aoColumns.length;u++)this.fnUpdate(_fnGetCellData(s,l,u),l,u,!1,!1)}else if(typeof e=="object"){s.aoData[l]._aData=$.extend(!0,{},e);for(u=0;u<s.aoColumns.length;u++)this.fnUpdate(_fnGetCellData(s,l,u),l,u,!1,!1)}else f=e,_fnSetCellData(s,l,n,f),s.aoColumns[n].fnRender!==null&&(f=s.aoColumns[n].fnRender({iDataRow:l,iDataColumn:n,aData:s.aoData[l]._aData,oSettings:s}),s.aoColumns[n].bUseRendered&&_fnSetCellData(s,l,n,f)),s.aoData[l].nTr!==null&&(_fnGetTdNodes(s,l)[n].innerHTML=f);var c=$.inArray(l,s.aiDisplay);return s.asDataSearch[c]=_fnBuildSearchRow(s,_fnGetRowData(s,l,"filter")),(typeof i=="undefined"||i)&&_fnAjustColumnSizing(s),(typeof r=="undefined"||r)&&_fnReDraw(s),0},this.fnSetColumnVis=function(e,t,n){var r=_fnSettingsFromNode(this[_oExt.iApiIndex]),i,s,o=r.aoColumns.length,u,a,f,l,c,h;if(r.aoColumns[e].bVisible==t)return;if(t){var p=0;for(i=0;i<e;i++)r.aoColumns[i].bVisible&&p++;c=p>=_fnVisbleColumns(r);if(!c)for(i=e;i<o;i++)if(r.aoColumns[i].bVisible){h=i;break}for(i=0,s=r.aoData.length;i<s;i++)r.aoData[i].nTr!==null&&(c?r.aoData[i].nTr.appendChild(r.aoData[i]._anHidden[e]):r.aoData[i].nTr.insertBefore(r.aoData[i]._anHidden[e],_fnGetTdNodes(r,i)[h]))}else for(i=0,s=r.aoData.length;i<s;i++)r.aoData[i].nTr!==null&&(u=_fnGetTdNodes(r,i)[e],r.aoData[i]._anHidden[e]=u,u.parentNode.removeChild(u));r.aoColumns[e].bVisible=t,_fnDrawHead(r,r.aoHeader),r.nTFoot&&_fnDrawHead(r,r.aoFooter);for(i=0,s=r.aoOpenRows.length;i<s;i++)r.aoOpenRows[i].nTr.colSpan=_fnVisbleColumns(r);if(typeof n=="undefined"||n)_fnAjustColumnSizing(r),_fnDraw(r);_fnSaveState(r)},this.fnPageChange=function(e,t){var n=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnPageChange(n,e),_fnCalculateEnd(n),(typeof t=="undefined"||t)&&_fnDraw(n)},this.fnDestroy=function(){var e=_fnSettingsFromNode(this[_oExt.iApiIndex]),t=e.nTableWrapper.parentNode,n=e.nTBody,r,i;e.bDestroying=!0;for(r=0,i=e.aoColumns.length;r<i;r++)e.aoColumns[r].bVisible===!1&&this.fnSetColumnVis(r,!0);$(e.nTableWrapper).find("*").andSelf().unbind(".DT"),$("tbody>tr>td."+e.oClasses.sRowEmpty,e.nTable).parent().remove(),e.nTable!=e.nTHead.parentNode&&($(">thead",e.nTable).remove(),e.nTable.appendChild(e.nTHead)),e.nTFoot&&e.nTable!=e.nTFoot.parentNode&&($(">tfoot",e.nTable).remove(),e.nTable.appendChild(e.nTFoot)),e.nTable.parentNode.removeChild(e.nTable),$(e.nTableWrapper).remove(),e.aaSorting=[],e.aaSortingFixed=[],_fnSortingClasses(e),$(_fnGetTrNodes(e)).removeClass(e.asStripClasses.join(" ")),e.bJUI?($("th",e.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oJUIClasses.sSortableAsc,_oExt.oJUIClasses.sSortableDesc,_oExt.oJUIClasses.sSortableNone].join(" ")),$("th span."+_oExt.oJUIClasses.sSortIcon,e.nTHead).remove(),$("th",e.nTHead).each(function(){var e=$("div."+_oExt.oJUIClasses.sSortJUIWrapper,this),t=e.contents();$(this).append(t),e.remove()})):$("th",e.nTHead).removeClass([_oExt.oStdClasses.sSortable,_oExt.oStdClasses.sSortableAsc,_oExt.oStdClasses.sSortableDesc,_oExt.oStdClasses.sSortableNone].join(" ")),e.nTableReinsertBefore?t.insertBefore(e.nTable,e.nTableReinsertBefore):t.appendChild(e.nTable);for(r=0,i=e.aoData.length;r<i;r++)e.aoData[r].nTr!==null&&n.appendChild(e.aoData[r].nTr);e.oFeatures.bAutoWidth===!0&&(e.nTable.style.width=_fnStringToCss(e.sDestroyWidth)),$(">tr:even",n).addClass(e.asDestoryStrips[0]),$(">tr:odd",n).addClass(e.asDestoryStrips[1]);for(r=0,i=_aoSettings.length;r<i;r++)_aoSettings[r]==e&&_aoSettings.splice(r,1);e=null},this.fnAdjustColumnSizing=function(e){var t=_fnSettingsFromNode(this[_oExt.iApiIndex]);_fnAjustColumnSizing(t),typeof e=="undefined"||e?this.fnDraw(!1):(t.oScroll.sX!==""||t.oScroll.sY!=="")&&this.oApi._fnScrollDraw(t)};for(var sFunc in _oExt.oApi)sFunc&&(this[sFunc]=_fnExternApiFunc(sFunc));this.oApi._fnExternApiFunc=_fnExternApiFunc,this.oApi._fnInitalise=_fnInitalise,this.oApi._fnInitComplete=_fnInitComplete,this.oApi._fnLanguageProcess=_fnLanguageProcess,this.oApi._fnAddColumn=_fnAddColumn,this.oApi._fnColumnOptions=_fnColumnOptions,this.oApi._fnAddData=_fnAddData,this.oApi._fnCreateTr=_fnCreateTr,this.oApi._fnGatherData=_fnGatherData,this.oApi._fnBuildHead=_fnBuildHead,this.oApi._fnDrawHead=_fnDrawHead,this.oApi._fnDraw=_fnDraw,this.oApi._fnReDraw=_fnReDraw,this.oApi._fnAjaxUpdate=_fnAjaxUpdate,this.oApi._fnAjaxUpdateDraw=_fnAjaxUpdateDraw,this.oApi._fnAddOptionsHtml=_fnAddOptionsHtml,this.oApi._fnFeatureHtmlTable=_fnFeatureHtmlTable,this.oApi._fnScrollDraw=_fnScrollDraw,this.oApi._fnAjustColumnSizing=_fnAjustColumnSizing,this.oApi._fnFeatureHtmlFilter=_fnFeatureHtmlFilter,this.oApi._fnFilterComplete=_fnFilterComplete,this.oApi._fnFilterCustom=_fnFilterCustom,this.oApi._fnFilterColumn=_fnFilterColumn,this.oApi._fnFilter=_fnFilter,this.oApi._fnBuildSearchArray=_fnBuildSearchArray,this.oApi._fnBuildSearchRow=_fnBuildSearchRow,this.oApi._fnFilterCreateSearch=_fnFilterCreateSearch,this.oApi._fnDataToSearch=_fnDataToSearch,this.oApi._fnSort=_fnSort,this.oApi._fnSortAttachListener=_fnSortAttachListener,this.oApi._fnSortingClasses=_fnSortingClasses,this.oApi._fnFeatureHtmlPaginate=_fnFeatureHtmlPaginate,this.oApi._fnPageChange=_fnPageChange,this.oApi._fnFeatureHtmlInfo=_fnFeatureHtmlInfo,this.oApi._fnUpdateInfo=_fnUpdateInfo,this.oApi._fnFeatureHtmlLength=_fnFeatureHtmlLength,this.oApi._fnFeatureHtmlProcessing=_fnFeatureHtmlProcessing,this.oApi._fnProcessingDisplay=_fnProcessingDisplay,this.oApi._fnVisibleToColumnIndex=_fnVisibleToColumnIndex,this.oApi._fnColumnIndexToVisible=_fnColumnIndexToVisible,this.oApi._fnNodeToDataIndex=_fnNodeToDataIndex,this.oApi._fnVisbleColumns=_fnVisbleColumns,this.oApi._fnCalculateEnd=_fnCalculateEnd,this.oApi._fnConvertToWidth=_fnConvertToWidth,this.oApi._fnCalculateColumnWidths=_fnCalculateColumnWidths,this.oApi._fnScrollingWidthAdjust=_fnScrollingWidthAdjust,this.oApi._fnGetWidestNode=_fnGetWidestNode,this.oApi._fnGetMaxLenString=_fnGetMaxLenString,this.oApi._fnStringToCss=_fnStringToCss,this.oApi._fnArrayCmp=_fnArrayCmp,this.oApi._fnDetectType=_fnDetectType,this.oApi._fnSettingsFromNode=_fnSettingsFromNode,this.oApi._fnGetDataMaster=_fnGetDataMaster,this.oApi._fnGetTrNodes=_fnGetTrNodes,this.oApi._fnGetTdNodes=_fnGetTdNodes,this.oApi._fnEscapeRegex=_fnEscapeRegex,this.oApi._fnDeleteIndex=_fnDeleteIndex,this.oApi._fnReOrderIndex=_fnReOrderIndex,this.oApi._fnColumnOrdering=_fnColumnOrdering,this.oApi._fnLog=_fnLog,this.oApi._fnClearTable=_fnClearTable,this.oApi._fnSaveState=_fnSaveState,this.oApi._fnLoadState=_fnLoadState,this.oApi._fnCreateCookie=_fnCreateCookie,this.oApi._fnReadCookie=_fnReadCookie,this.oApi._fnDetectHeader=_fnDetectHeader,this.oApi._fnGetUniqueThs=_fnGetUniqueThs,this.oApi._fnScrollBarWidth=_fnScrollBarWidth,this.oApi._fnApplyToChildren=_fnApplyToChildren,this.oApi._fnMap=_fnMap,this.oApi._fnGetRowData=_fnGetRowData,this.oApi._fnGetCellData=_fnGetCellData,this.oApi._fnSetCellData=_fnSetCellData,this.oApi._fnGetObjectDataFn=_fnGetObjectDataFn,this.oApi._fnSetObjectDataFn=_fnSetObjectDataFn;var _that=this;return this.each(function(){var e=0,t,n,r,i,s;for(e=0,t=_aoSettings.length;e<t;e++){if(_aoSettings[e].nTable==this){if(typeof oInit=="undefined"||typeof oInit.bRetrieve!="undefined"&&oInit.bRetrieve===!0)return _aoSettings[e].oInstance;if(typeof oInit.bDestroy!="undefined"&&oInit.bDestroy===!0){_aoSettings[e].oInstance.fnDestroy();break}_fnLog(_aoSettings[e],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, please pass either no arguments to the dataTable() function, or set bRetrieve to true. Alternatively, to destory the old table and create a new one, set bDestroy to true (note that a lot of changes to the configuration can be made through the API which is usually much faster).");return}if(_aoSettings[e].sTableId!==""&&_aoSettings[e].sTableId==this.getAttribute("id")){_aoSettings.splice(e,1);break}}var o=new classSettings;_aoSettings.push(o);var u=!1,a=!1,f=this.getAttribute("id");f!==null?(o.sTableId=f,o.sInstance=f):o.sInstance=_oExt._oExternConfig.iNextUnique++;if(this.nodeName.toLowerCase()!="table"){_fnLog(o,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);return}o.nTable=this,o.oInstance=_that.length==1?_that:$(this).dataTable(),o.oApi=_that.oApi,o.sDestroyWidth=$(this).width();if(typeof oInit!="undefined"&&oInit!==null){o.oInit=oInit,_fnMap(o.oFeatures,oInit,"bPaginate"),_fnMap(o.oFeatures,oInit,"bLengthChange"),_fnMap(o.oFeatures,oInit,"bFilter"),_fnMap(o.oFeatures,oInit,"bSort"),_fnMap(o.oFeatures,oInit,"bInfo"),_fnMap(o.oFeatures,oInit,"bProcessing"),_fnMap(o.oFeatures,oInit,"bAutoWidth"),_fnMap(o.oFeatures,oInit,"bSortClasses"),_fnMap(o.oFeatures,oInit,"bServerSide"),_fnMap(o.oFeatures,oInit,"bDeferRender"),_fnMap(o.oScroll,oInit,"sScrollX","sX"),_fnMap(o.oScroll,oInit,"sScrollXInner","sXInner"),_fnMap(o.oScroll,oInit,"sScrollY","sY"),_fnMap(o.oScroll,oInit,"bScrollCollapse","bCollapse"),_fnMap(o.oScroll,oInit,"bScrollInfinite","bInfinite"),_fnMap(o.oScroll,oInit,"iScrollLoadGap","iLoadGap"),_fnMap(o.oScroll,oInit,"bScrollAutoCss","bAutoCss"),_fnMap(o,oInit,"asStripClasses"),_fnMap(o,oInit,"fnPreDrawCallback"),_fnMap(o,oInit,"fnRowCallback"),_fnMap(o,oInit,"fnHeaderCallback"),_fnMap(o,oInit,"fnFooterCallback"),_fnMap(o,oInit,"fnCookieCallback"),_fnMap(o,oInit,"fnInitComplete"),_fnMap(o,oInit,"fnServerData"),_fnMap(o,oInit,"fnFormatNumber"),_fnMap(o,oInit,"aaSorting"),_fnMap(o,oInit,"aaSortingFixed"),_fnMap(o,oInit,"aLengthMenu"),_fnMap(o,oInit,"sPaginationType"),_fnMap(o,oInit,"sAjaxSource"),_fnMap(o,oInit,"sAjaxDataProp"),_fnMap(o,oInit,"iCookieDuration"),_fnMap(o,oInit,"sCookiePrefix"),_fnMap(o,oInit,"sDom"),_fnMap(o,oInit,"bSortCellsTop"),_fnMap(o,oInit,"oSearch","oPreviousSearch"),_fnMap(o,oInit,"aoSearchCols","aoPreSearchCols"),_fnMap(o,oInit,"iDisplayLength","_iDisplayLength"),_fnMap(o,oInit,"bJQueryUI","bJUI"),_fnMap(o.oLanguage,oInit,"fnInfoCallback"),typeof oInit.fnDrawCallback=="function"&&o.aoDrawCallback.push({fn:oInit.fnDrawCallback,sName:"user"}),typeof oInit.fnStateSaveCallback=="function"&&o.aoStateSave.push({fn:oInit.fnStateSaveCallback,sName:"user"}),typeof oInit.fnStateLoadCallback=="function"&&o.aoStateLoad.push({fn:oInit.fnStateLoadCallback,sName:"user"}),o.oFeatures.bServerSide&&o.oFeatures.bSort&&o.oFeatures.bSortClasses?o.aoDrawCallback.push({fn:_fnSortingClasses,sName:"server_side_sort_classes"}):o.oFeatures.bDeferRender&&o.aoDrawCallback.push({fn:_fnSortingClasses,sName:"defer_sort_classes"}),typeof oInit.bJQueryUI!="undefined"&&oInit.bJQueryUI&&(o.oClasses=_oExt.oJUIClasses,typeof oInit.sDom=="undefined"&&(o.sDom='<"H"lfr>t<"F"ip>'));if(o.oScroll.sX!==""||o.oScroll.sY!=="")o.oScroll.iBarWidth=_fnScrollBarWidth();typeof oInit.iDisplayStart!="undefined"&&typeof o.iInitDisplayStart=="undefined"&&(o.iInitDisplayStart=oInit.iDisplayStart,o._iDisplayStart=oInit.iDisplayStart),typeof oInit.bStateSave!="undefined"&&(o.oFeatures.bStateSave=oInit.bStateSave,_fnLoadState(o,oInit),o.aoDrawCallback.push({fn:_fnSaveState,sName:"state_save"})),typeof oInit.iDeferLoading!="undefined"&&(o.bDeferLoading=!0,o._iRecordsTotal=oInit.iDeferLoading,o._iRecordsDisplay=oInit.iDeferLoading),typeof oInit.aaData!="undefined"&&(a=!0),typeof oInit!="undefined"&&typeof oInit.aoData!="undefined"&&(oInit.aoColumns=oInit.aoData),typeof oInit.oLanguage!="undefined"&&(typeof oInit.oLanguage.sUrl!="undefined"&&oInit.oLanguage.sUrl!==""?(o.oLanguage.sUrl=oInit.oLanguage.sUrl,$.getJSON(o.oLanguage.sUrl,null,function(e){_fnLanguageProcess(o,e,!0)}),u=!0):_fnLanguageProcess(o,oInit.oLanguage,!1))}else oInit={};typeof oInit.asStripClasses=="undefined"&&(o.asStripClasses.push(o.oClasses.sStripOdd),o.asStripClasses.push(o.oClasses.sStripEven));var l=!1,c=$(">tbody>tr",this);for(e=0,t=o.asStripClasses.length;e<t;e++)if(c.filter(":lt(2)").hasClass(o.asStripClasses[e])){l=!0;break}l&&(o.asDestoryStrips=["",""],$(c[0]).hasClass(o.oClasses.sStripOdd)&&(o.asDestoryStrips[0]+=o.oClasses.sStripOdd+" "),$(c[0]).hasClass(o.oClasses.sStripEven)&&(o.asDestoryStrips[0]+=o.oClasses.sStripEven),$(c[1]).hasClass(o.oClasses.sStripOdd)&&(o.asDestoryStrips[1]+=o.oClasses.sStripOdd+" "),$(c[1]).hasClass(o.oClasses.sStripEven)&&(o.asDestoryStrips[1]+=o.oClasses.sStripEven),c.removeClass(o.asStripClasses.join(" ")));var h=[],p,d=this.getElementsByTagName("thead");d.length!==0&&(_fnDetectHeader(o.aoHeader,d[0]),h=_fnGetUniqueThs(o));if(typeof oInit.aoColumns=="undefined"){p=[];for(e=0,t=h.length;e<t;e++)p.push(null)}else p=oInit.aoColumns;for(e=0,t=p.length;e<t;e++)typeof oInit.saved_aoColumns!="undefined"&&oInit.saved_aoColumns.length==t&&(p[e]===null&&(p[e]={}),p[e].bVisible=oInit.saved_aoColumns[e].bVisible),_fnAddColumn(o,h?h[e]:null);if(typeof oInit.aoColumnDefs!="undefined")for(e=oInit.aoColumnDefs.length-1;e>=0;e--){var v=oInit.aoColumnDefs[e].aTargets;$.isArray(v)||_fnLog(o,1,"aTargets must be an array of targets, not a "+typeof v);for(n=0,r=v.length;n<r;n++)if(typeof v[n]=="number"&&v[n]>=0){while(o.aoColumns.length<=v[n])_fnAddColumn(o);_fnColumnOptions(o,v[n],oInit.aoColumnDefs[e])}else if(typeof v[n]=="number"&&v[n]<0)_fnColumnOptions(o,o.aoColumns.length+v[n],oInit.aoColumnDefs[e]);else if(typeof v[n]=="string")for(i=0,s=o.aoColumns.length;i<s;i++)(v[n]=="_all"||$(o.aoColumns[i].nTh).hasClass(v[n]))&&_fnColumnOptions(o,i,oInit.aoColumnDefs[e])}if(typeof p!="undefined")for(e=0,t=p.length;e<t;e++)_fnColumnOptions(o,e,p[e]);for(e=0,t=o.aaSorting.length;e<t;e++){o.aaSorting[e][0]>=o.aoColumns.length&&(o.aaSorting[e][0]=0);var m=o.aoColumns[o.aaSorting[e][0]];typeof o.aaSorting[e][2]=="undefined"&&(o.aaSorting[e][2]=0),typeof oInit.aaSorting=="undefined"&&typeof o.saved_aaSorting=="undefined"&&(o.aaSorting[e][1]=m.asSorting[0]);for(n=0,r=m.asSorting.length;n<r;n++)if(o.aaSorting[e][1]==m.asSorting[n]){o.aaSorting[e][2]=n;break}}_fnSortingClasses(o);var g=$(">thead",this);g.length===0&&(g=[document.createElement("thead")],this.appendChild(g[0])),o.nTHead=g[0];var y=$(">tbody",this);y.length===0&&(y=[document.createElement("tbody")],this.appendChild(y[0])),o.nTBody=y[0];var b=$(">tfoot",this);b.length>0&&(o.nTFoot=b[0],_fnDetectHeader(o.aoFooter,o.nTFoot));if(a)for(e=0;e<oInit.aaData.length;e++)_fnAddData(o,oInit.aaData[e]);else _fnGatherData(o);o.aiDisplay=o.aiDisplayMaster.slice(),o.bInitialised=!0,u===!1&&_fnInitalise(o)})}}(jQuery,window,document),define("dataTable",function(){}),define("jquery.select",["libs/store.min","jquery"],function(e,t){function r(e){var n=[].slice.call(arguments,1),r=0,i=!0;return e=t.event.fix(e||window.event),e.type="mousewheel",e.wheelDelta&&(r=e.wheelDelta/120),e.detail&&(r=-e.detail/3),n.unshift(e,r),t.event.handle.apply(this,n)}t.fn.extend({sSelect:function(){return this.each(function(e,n){var r=this.id+"__jQSelect"+e||"__jQSelect"+e,i="dropdown_"+this.id;if(n.style.display!="none"&&t(this).parents()[0].id.indexOf("__jQSelect")<0){var s=this.tabIndex||0;t(this).before("<div id="+i+" class='selectlist margins'><div class='relative' id="+r+" tabIndex="+s+"></div></div>").prependTo(t("#"+r)),t("#"+r).append("<div class='dropselect'><h4></h4></div><ul id='dropselistbox'></ul>");var o=t(this).css("z-index"),u=t("#"+r+" option").index(t("#"+r+" option:selected")[0]);t("#"+r+" h4").attr("title",t("#"+r+" option:selected").text());var a=t("#"+r+" option:selected").text();t("#"+r+" h4").empty().append(a);if(r=="platformList__jQSelect0"&&a){var f=a.split("+");for(var e=f.length;e>0;e--)t("#"+r+" h4").prepend("<img src='images/"+f[e-1]+"_icon.png'/>")}var l=t("#"+r+" select").width(),c=t("#"+r+" select").height(),h=t("#"+r+" select").css("z-index"),p=parseFloat(t("#"+r+" select").css("left"));t("#"+i).css({height:c+"px","float":"left"}),t("#"+r).css({"z-index":h}),p>0&&t("#"+i).css({width:p});var d=t("#"+i).width();d>l?t("#"+r+" ul").css({width:d-2+"px",display:"none"}):t("#"+r+" ul").css({width:l-2+"px",display:"none"}),t("#"+r+" select").hide(),t("#"+r+" div").hover(function(){t("#"+r+" .dropselect").addClass("over")},function(){t("#"+r+" .dropselect").removeClass("over")});var v;t("#"+r+" ul").bind("mouseover",function(e){clearTimeout(v)}),t("#"+this.id+"_icon").bind("mouseover",function(e){t("#"+r+" .dropselect").addClass("over")}),t("#"+this.id+"_icont").bind("mouseover",function(e){t("#"+r+" .dropselect").addClass("over")});var m=function(){t("#"+r+" .dropselect").addClass("current"),t("#"+r+" ul").show();var e=t("#"+r).css("z-index");t.fn.setSelectValue(r),u=t("#"+r+" li").index(t(".selectedli")[0]);var n=t(window).scrollTop()+document.documentElement.clientHeight-t("#"+r).offset().top,i=t("#"+r+" ul").outerHeight(!0),s=t("#"+r).offset().top-t(window).scrollTop()-i;n<i&&s>0?t("#"+r+" ul").css({top:-i}):t("#"+r+" ul").css({top:t("#"+r+" h4").outerHeight(!0)}),t(window).scroll(function(){n<i?t("#"+r+" ul").css({top:-i}):t("#"+r+" ul").css({top:t("#"+r+" h4").outerHeight(!0)})}),t("#"+r+" li").click(function(n){u=t("#"+r+" li").index(this),t.fn.keyDown(r,u);var i=t("#"+r+" option:selected").text();t("#"+r+" h4").empty().append(i);if(r=="platformList__jQSelect0"&&i){var s=i.split("+");for(var o=s.length;o>0;o--)t("#"+r+" h4").prepend("<img src='images/"+s[o-1]+"_icon.png'/>")}t("#"+r+" h4").attr("title",t("#"+r+" option:selected").text()),t.fn.clearSelectMenu(r,e),n.stopPropagation(),n.cancelbubble=!0}).hover(function(){t("#"+r+" li").removeClass("over"),t(this).addClass("over").addClass("selectedli"),u=t("#"+r+" li").index(this)})};t("#"+r).bind("focus",function(){t("#"+r+" h4").addClass("over")}).bind("click",function(e){if(t("#"+r+" ul").css("display")=="block")return t.fn.clearSelectMenu(r,o),!1;m(),e.stopPropagation()}).bind("keydown",function(e){t(this).bind("keydown",function(e){if(e.keyCode==40||e.keyCode==38||e.keyCode==35||e.keyCode==36)return!1});var n=t("#"+r+" li.over"),i=t("#"+r+" option").length;switch(e.keyCode){case 9:return!0;case 13:t.fn.clearSelectMenu(r,o);break;case 27:t.fn.clearSelectMenu(r,o);break;case 33:n.removeClass("over"),u=0,t.fn.keyDown(r,u);break;case 34:n.removeClass("over"),u=i-1,t.fn.keyDown(r,u);break;case 35:n.removeClass("over"),u=i-1,t.fn.keyDown(r,u);break;case 36:n.removeClass("over"),u=0,t.fn.keyDown(r,u);break;case 38:e.preventDefault(),n.removeClass("over"),u==0?u=0:u--,t.fn.keyDown(r,u);break;case 40:e.preventDefault(),n.removeClass("over"),u==i-1?u=i-1:u++,t.fn.keyDown(r,u);break;default:e.preventDefault()}}).bind("blur",function(){return t.fn.clearSelectMenu(r,o),!1}).bind("selectstart",function(){return!1})}else if(t(this).parents()[0].id.indexOf("__jQSelect")>0){r=t(this).parents()[0].id,t.fn.setSelectValue(r);var l=t("#"+r+" select").width();t.browser.safari&&(l+=24);var p=parseFloat(t("#"+r+" select").css("left"));p>0&&t("#"+i).css({width:p});var d=t("#"+i).width();d>l?t("#"+r+" ul").css({width:d-2+"px"}):t("#"+r+" ul").css({width:l-2+"px"}),this.style.display!="none"&&t(this).hide()}})},clearSelectMenu:function(e,n){e!=undefined&&(n=n||"auto",t("#"+e+" ul").empty().hide(),t("#"+e+" .dropselect").removeClass("over").removeClass("current"))},setSelectValue:function(e){var n=[];t.each(t("#"+e+" option"),function(r){n.push("<li class='FixSelectBrowser' id='"+e+r+"' title='"+t(this).text()+"'>"+t(this).text()+"</li>")}),n=n.join(""),t("#"+e+" ul").html(n);var r=t("#"+e+" option:selected").text();t("#"+e+" h4").html(r);if(e=="platformList__jQSelect0"&&r){var i=r.split("+");for(var s=i.length;s>0;s--)t("#"+e+" h4").prepend("<img src='images/"+i[s-1]+"_icon.png'/>")}t("#"+e+" h4").attr("title",t("#"+e+" option:selected").text()),t("#"+e+" li").eq(t("#"+e+" select")[0].selectedIndex).addClass("over").addClass("selectedli")},keyDown:function(n,r){var i=t("#"+n+" select");i[0].selectedIndex=r,i.change(),t("#"+n+" li:eq("+r+")").toggleClass("over");var s=t("#"+n+" option:selected").text();t("#"+n+" h4").html(s);if(n=="platformList__jQSelect0"&&s){var o=s.split("+");for(var u=o.length;u>0;u--)t("#"+n+" h4").prepend("<img src='images/"+o[u-1]+"_icon.png'/>")}t("#"+n+" h4").attr("title",t("#"+n+" option:selected").text()),e.set(n.split("__")[0],s)}});var n=["DOMMouseScroll","mousewheel"];t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],r,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("utils/dataTableUtil",["underscore","libs/store.min","text!templates/public/table.html","i18n!nls/gameI18N","dataTable","jquery.select"],function(e,t,n,r){var i={dataTable:function(t){var n={pagination:!0,filter:!1,sort:!0,autoWidth:!1};t=e.extend(n,t);var r=t.$el,i=r.attr("id");i||(i=(new Date).getTime()),t.id=i,r.attr("id",i);var s=r.dataTable({sDom:'rt<"page"flp>',bPaginate:t.pagination,bLengthChange:!0,bFilter:t.filter,bSort:t.sort,bInfo:!0,bAutoWidth:t.autoWidth,iDisplayLength:parseInt(this._getCurPageiDisplayLength(t.id+"_page")),sPaginationType:"full_numbers",oLanguage:this._getPagiantionOption()});t.pagination&&$("#"+t.id+"_page").sSelect()},drawTable:function(t){var i=t.head.length;i&&(t.width=100/i+"%");var s=e.template(n,t);t.$el.html(s),$.fn.dataTableExt.oPagination.two_button={fnInit:function(e,t,n){nPrevious=$("<a/>",{"class":"paginate_button previous"}),nNext=$("<a/>",{"class":"paginate_button next"});var r='<font class="pageIndex">#</font>/<font class="totalPages">TOTAL</font>';navLabel=$("<span />",{html:r,"class":"navigationLabel"}),$(t).append(nPrevious).append(navLabel).append(nNext),nPrevious.click(function(){e.oApi._fnPageChange(e,"previous"),n(e)}).bind("selectstart",function(){return!1}),nNext.click(function(){e.oApi._fnPageChange(e,"next"),n(e)}).bind("selectstart",function(){return!1})},fnUpdate:function(e,t){if(!e.aanFeatures.p)return;var n=e.aanFeatures.p;for(var r=0,i=n.length;r<i;r++){var s=$(n[r]).find("a.paginate_button");e._iDisplayStart===0?s.eq(0).attr("class","paginate_disabled_previous paginate_button"):s.eq(0).attr("class","paginate_enabled_previous paginate_button"),e.fnDisplayEnd()==e.fnRecordsDisplay()?s.eq(1).attr("class","paginate_disabled_next paginate_button"):s.eq(1).attr("class","paginate_enabled_next paginate_button")}}},$.fn.dataTableExt.oApi.fnPagingInfo=function(e){return{iStart:e._iDisplayStart,iEnd:e.fnDisplayEnd(),iLength:e._iDisplayLength,iTotal:e.fnRecordsTotal(),iFilteredTotal:e.fnRecordsDisplay(),iPage:Math.ceil((e._iDisplayStart+e._iDisplayLength)/e._iDisplayLength),iTotalPages:Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength)}},t.$el.find("table").dataTable({sDom:'rt<"tableview"flp>',bFilter:!1,bSort:!0,bInfo:!1,bAutoWidth:!1,iDisplayLength:parseInt(this._getCurPageiDisplayLength(t.id+"_page")),sPaginationType:"two_button",fnDrawCallback:function(){var e=this.fnGetData().length;e<=this.fnPagingInfo().iLength&&$(this).parent().children(".dataTables_paginate").hide(),$(this).parent().find(".dataTables_paginate .navigationLabel .pageIndex").text(""+this.fnPagingInfo().iPage+""),$(this).parent().find(".dataTables_paginate .navigationLabel .totalPages").text(this.fnPagingInfo().iTotalPages)},oLanguage:{sLengthMenu:"",sZeroRecords:r.GameCommon.sorryForNoData}})},_getPagiantionOption:function(){return{sLengthMenu:"<b class='l'>"+r.GameCommon.perPageDisplay+"</b> _MENU_ <b class='l'> "+r.GameCommon.records+"</b>",sZeroRecords:r.GameCommon.sorryForNoData,sInfo:r.GameCommon.currentDisplay+" _START_ "+r.GameCommon.to+" _END_ "+r.GameCommon.barTotal+" _TOTAL_ "+r.GameCommon.records,sInfoEmtpy:r.GameCommon.cannotFindData,sInfoFiltered:r.GameCommon.totalNumber+" _MAX_ "+r.GameCommon.records+")",sProcessing:r.GameCommon.loading,sSearch:r.GameCommon.seek,sUrl:"",oPaginate:{sFirst:r.GameCommon.first,sPrevious:r.GameCommon.pre,sNext:r.GameCommon.next,sLast:r.GameCommon.last}}},_getCurPageiDisplayLength:function(e){return t.get(e)||10}};return i}),define("text!templates/summary/index.html",[],function(){return'<div class="content r">\r\n	<!-- Concurrent Users begin -->\r\n	<div class="infoBar after">\r\n		<ul class="l">\r\n			<li class="infoBar1"><span><%=GameCommon.equipmentActive%></span><strong id="totalDeviceInstallNum"></strong></li>\r\n			<li class="infoBar2"><span><%=GameCommon.newIncreasedPlayer%></span><strong id="totalNewPlayerNum"></strong></li>\r\n			<li class="infoBar3"><span><%=GameCommon.payPlayer%></span><strong id="totalChargePlayerNum"></strong></li>\r\n			<li class="infoBar4"><span><%=GameCommon.income%></span><strong id="totalIncomeNum"></strong></li>\r\n		</ul>\r\n<!-- 		<div class="RegionalServices l">\r\n			区服\r\n			<strong>12、13</strong>\r\n		</div> -->\r\n		<div class="r relative" id="datePicker">\r\n\r\n		</div> \r\n	</div>\r\n	<div class="boxmax">\r\n		<div class="title">\r\n			<strong class="l"><%=Summary.Summary.onlineTrend%></strong> \r\n		</div>\r\n		<div class="tablebox">\r\n			<div class="gauge after">\r\n				<ul class="canvasDIV l">\r\n					<li>\r\n						<%=GameCommon.avg%>ACU\r\n					</li>\r\n					<li>\r\n						<strong id="acuavgNum"></strong>\r\n					</li>\r\n					<li class="relative">\r\n						<canvas width=180 height=100 id="canvas-acuavg"></canvas>\r\n					</li>\r\n					<li>\r\n						<span>Max<br><font id="maxNum"></font></span>\r\n					</li>\r\n				</ul>\r\n				<div class="center">\r\n					<div id="chart-acupcu" style="width: 100%; height: 200px; margin: 0 auto;padding-top: 20px">\r\n						<div class="login">\r\n							<img src="images/loading.gif" height="25px"></img> <br>\r\n							<%=GameCommon.loadingData%>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="boxmax">\r\n		<div id="keyCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=Summary.Summary.keyIndicator%></strong> \r\n			</div>\r\n			<div class="textbox">\r\n				<div role="tabbar" class="box_top">\r\n	                <a class="tab hover" data-tab="newInstallAndPlayer"><%=GameCommon.newInstallAndPlayer%></a>\r\n<!-- 	                <a class="tab" data-tab="newPlayer"><%=Summary.Summary.newPlayer%></a> -->\r\n	                <a class="tab" data-tab="activePlayer"><%=GameCommon.activePlayer%></a>\r\n	                <a class="tab" data-tab="chargePlayer"><%=GameCommon.payPlayer%></a>\r\n	                <a class="tab" data-tab="income"><%=GameCommon.income%></a>\r\n	                <div class="info r">\r\n	                	<span id="sum-span">SUM <span class="info_display"><%=GameCommon.equipmentAcount%></span>：<font id="keycode-sum"></font>&nbsp;&nbsp;</span>AVG <span class="info_display"><%=GameCommon.equipmentAcount%></span>：<font id="keycode-avg"></font>\r\n	                </div>\r\n				</div>\r\n				<div role="chart">\r\n					<div id="keyCode-chart" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n				<div role="table">\r\n					<div id="keyCode-table" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n\r\n	<div class="boxmax">\r\n		<div id="chargeCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=GameCommon.payPermeate%></strong> \r\n			</div>\r\n			<div class="textbox">\r\n				<div role="tabbar" class="box_top">\r\n	                <a class="tab hover" data-tab="paidRate"><%=GameCommon.dailyPayRate%></a>\r\n	                <a class="tab" data-tab="dayARPU"><%=GameCommon.day%>ARPU</a>\r\n	                <a class="tab" data-tab="dayARPPU"><%=GameCommon.day%>ARPPU</a>\r\n	                <div class="info r">\r\n	                	AVG：<font id="charge-avg"></font>\r\n	                </div>\r\n				</div>\r\n				<div role="chart">\r\n					<div id="chargeCode-chart" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n				<div role="table">\r\n					<div id="chargeCode-table" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n	<div class="boxmax">\r\n		<div id="retentionCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=Summary.Summary.playerRetain%></strong> \r\n			</div>\r\n			<div class="textbox">\r\n				<div role="chart">\r\n					<div id="retentionCode-chart" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n				<div role="table">\r\n					<div id="retentionCode-table" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n\r\n	<div class="boxmax">\r\n		<div id="playTimeNumsCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=GameCommon.avgGamingTimeCount%></strong> \r\n			</div>\r\n			<div class="textbox">\r\n				<div class="box_top">\r\n	                <div class="info r">\r\n	                	AVG：<%=Summary.Summary.avgEveryPlayerGaming%><font id="chart-playtimes-num"></font><%=Summary.Summary.minute%>\r\n	                </div>\r\n				</div>\r\n				<div role="chart">\r\n					<div id="playTimeNumsCode-chart" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n				<div role="table">\r\n					<div id="playTimeNumsCode-table" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=Summary.Summary.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=Summary.Summary.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n</div>'}),define("utils/excelDataUtil",["i18n!nls/gameI18N","models/Constant"],function(e,t){var n={buildArray:function(t){var n=new Array;n.push(t.head);var r=t.body||"";typeof r=="string"&&n.push(new Array([e.GameCommon.sorryForNoData]));if(typeof r=="object")for(var i=0;i<t.body.length;i++)n.push(t.body[i]);return this.arrayToJson(n)},arrayToJson:function(e){var n="[";for(var r=0;r<e.length;r++){var i=e[r],s="";for(var o=0;o<i.length;o++){var u=(i[o]+"").replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3");s=s+u+"^"}n=n+"{'"+t.TABLE_DATA_KEY+"':'"+s.substring(0,s.length-1)+"'},"}return n.substring(0,n.length-1)+"]"},tableToJson:function(e){var n="[";for(var r=0;r<e.rows.length;r++){var i=e.rows[r],s="";for(var o=0;o<i.cells.length;o++){i.cells[o].innerText||(i.cells[o].innerText="--");var u=(i.cells[o].innerText+"").replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3");s=s+u+"^"}n=n+"{'"+t.TABLE_DATA_KEY+"':'"+s.substring(0,s.length-1)+"'},"}return n.substring(0,n.length-1)+"]"}};return n}),define("text!templates/public/indicator.html",[],function(){return"<div class='norm'>\n	<i></i>\n	<div class='normTitle'><%=title%></div>\n	<ul>\n		<% _.each(list,function(o){%>\n			<li class=\"after\">\n				<font><%= o.value%></font>\n				<span><%= o.key%></span>\n			</li>\n		<%});%>\n	</ul>\n</div>\n"}),define("text!templates/public/excelExport.html",[],function(){return'<form style="display: none;" action="/excelExport/export" method="post" id="excelExportForm">\n	<input type="text" name="excelName" value="<%=excelName%>"/>\n	<input type="text" name="excelArray" value="<%=excelArray%>"/>\n</form>'}),define("jquery.tabs",["i18n!nls/gameI18N","underscore","utils/excelDataUtil","models/Constant","text!templates/public/indicator.html","text!templates/public/excelExport.html"],function(e,t,n,r,i,s){$.fn.extend({tabs:function(r){var o,u,a;if(t.isFunction(r))o=r,u=!0,a=!0;else if(t.isObject(r)){var f={callback:null,excel:!1,indicator:!0};r=t.extend(f,r),o=r.callback,u=r.excel,a=r.indicator}var l=$(this),c=l.find('div[role="tabbar"]'),h=l.find('div[role="chart"]'),p=l.find('div[role="table"]'),d=l.find('div[role="title"]'),v=h.css("display"),m=p.css("display");v==="block"&&m==="block"&&p.hide(),l.undelegate(),l.delegate('a[role="chartBtn"]',"click",function(){p.hide(),h.show()}),l.delegate('a[role="tableBtn"]',"click",function(){h.hide(),p.show()});if(u){var g=this;l.attr("id")!="consumeHabbitAnalasisCode"&&(d.find('a[role="excel"]').remove(),d.append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>')),l.delegate('a[role="excel"]',"click",function(){var e=l.attr("id"),r=$("#"+e).find('div[role="title"]>strong').html(),i=$("#"+e).find('div[role="tabbar"]>a.hover').html()||"";i&&(i="-"+i);var o="("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",u=r+i+o,a=n.buildArray({head:g.head,body:g.body}),f=t.template(s,{excelName:u,excelArray:a});$("body").append(f),$("#excelExportForm").submit(),$("#excelExportForm").remove()})}if(a){d.find('a[role="indicator"]').remove(),$indicatorBtn=$('<a role="indicator" class="Cancel r relative minCancel" style="z-index:10"><font class="indicator">?</font></a>'),d.append($indicatorBtn);for(var y=$('a[role="indicator"]').length,b=0;y>=0;y--)$('a[role="indicator"]:eq('+b+")").css({"z-index":"1"+y}),b++;l.delegate('a[role="indicator"]',"click",function(n){$target=$(n.currentTarget),$c=$target.children("div"),hasLoaded=!!$c.length;if(hasLoaded)$c.toggle();else{var r=l.attr("id"),s=e.Indicator[r],o=t.template(i,{list:s,title:e.Indicator.DataIndicatorExplain.explain});$target.append(o)}})}if(o){var w='<div class="login"><img src="images/loading.gif" height="25px"></img> <br>'+e.GameCommon.loadingData+"</div>";if(c.length){c.undelegate(),c.delegate("a","click",function(){var e=$(this).attr("data-tab");c.trigger("change.tabs",e)}),c.bind("change.tabs",function(e,t){c.find("a").removeClass("hover"),c.find("[data-tab='"+t+"']").addClass("hover"),h.find("div:first").html(w),p.find("div:first").html(w),o(t)});var E=c.find("a.hover").attr("data-tab");c.trigger("change.tabs",E)}else h.find("div:first").html(w),p.find("div:first").html(w),o()}return this}})}),define("views/summary/SummaryView",["backbone","views/public/DatePicker","views/public/SelectView","models/player/NewPlayer","models/player/Retention","models/player/ActivePlayer","models/revenue/IncomeData","models/revenue/PayPermeate","models/concurrent/ConcurrentUser","models/player/Behavior","models/Constant","utils/HighchartUtil","utils/GaugeUtil","utils/RegexUtil","utils/dataTableUtil","text!templates/summary/index.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){var g=e.View.extend({el:"#container",initialize:function(){$("#container").html(_.template(v,m)),new t({el:"#datePicker",style:"summary"}),this.params=_.clone(Params),this.params.partnerID="",this.render()},render:function(){return this.renderHeader(),this.renderConrurrent(),this.renderKeyCode(),this.renderCharge(),this.renderRetention(),this.renderPlayTimes(),this},renderHeader:function(){o.fetchChargePlayerNumsBetweenDays({data:this.params,success:function(e){$("#totalChargePlayerNum").html(p.formatDigit(e))}}),o.fetchIncomeNumsBetweenDays({data:this.params,success:function(e){$("#totalIncomeNum").html("<small>"+m.GameCommon.zhMonryUnit+"</small>"+p.formatDigit(e))}}),r.fetchNewPlayerList({data:this.params,success:function(e){$("#totalNewPlayerNum").html(p.formatDigit(_.sum(_.pluck(e,"value"))))}}),r.fetchInstallList({data:this.params,success:function(e){$("#totalDeviceInstallNum").html(p.formatDigit(_.sum(_.pluck(e,"value"))))}})},renderKeyCode:function(){var e=this,t=$("#keyCode").tabs(function(n){var i,u,a,f="",l=null;switch(n){case"newInstallAndPlayer":i=r,u="fetchInstallNewPlayerList",a=m.GameCommon.newInstallAndPlayer,legend=!0;break;case"activePlayer":i=s,u="fetchDauList",a=m.GameCommon.activePlayer,legend=!1;break;case"chargePlayer":i=o,u="fetchNewAndOldChargePlayers",l="normal",a=m.GameCommon.payPlayer,legend=!1;break;case"income":i=o,u="incomeNumList",a=m.GameCommon.income,f="#"+m.GameCommon.zhMonryUnit,legend=!1}i[u]({data:e.params,success:function(e){var r,i,s,o,u,h,v;if(n==="chargePlayer"){var g=e["new"],y=e.old,b=e.total;r=_.pluck(b,"item"),i=_.pluck(b,"value"),o=_.pluck(g,"value"),u=_.pluck(y,"value"),s=[{name:m.Summary.Summary.newChargePlayer,data:o},{name:m.Summary.Summary.oldChargePlayer,data:u}]}else n==="newInstallAndPlayer"?(r=_.pluck(e.install,"item"),h=_.pluck(e.install,"value"),v=_.pluck(e.newPlayer,"value"),s=[{name:m.GameCommon.newIncreasedPlayer,data:v},{name:m.GameCommon.equipmentActive,data:h}]):(r=_.pluck(e,"item"),i=_.pluck(e,"value"),s=[{name:a+"^"+f,data:i}]);var w=null,E=null;n==="income"?(E=[m.GameCommon.date,a],w=_.zip(r,_.map(i,function(e){return m.GameCommon.zhMonryUnit+e}))):n==="chargePlayer"?(E=[m.GameCommon.date,m.Summary.Summary.newChargePlayer,m.Summary.Summary.oldChargePlayer,m.GameCommon.total],w=_.zip(r,o,u,i)):n==="newInstallAndPlayer"?(E=[m.GameCommon.date,m.GameCommon.equipmentActive,m.GameCommon.newIncreasedPlayer],w=_.zip(r,_.map(h),_.map(v))):(E=[m.GameCommon.date,a],w=_.zip(r,i)),c.chart({id:"keyCode-chart",x:r,series:s,legend:legend,stacking:l}),d.drawTable({head:E,body:w,$el:$("#keyCode-table")}),t.head=E,t.body=w,n==="activePlayer"||n==="chargePlayer"?($(".info_display").hide(),$("#sum-span").hide(),$("#keycode-avg").html(f.substring(1)+p.formatDigit(_.avg(i)))):n==="newInstallAndPlayer"?($(".info_display").show(),$("#sum-span").show(),$("#keycode-sum").html(p.formatDigit(_.sum(h))+"|"+p.formatDigit(_.sum(v))),$("#keycode-avg").html(p.formatDigit(_.avg(h))+"|"+p.formatDigit(_.avg(v)))):($(".info_display").hide(),$("#sum-span").show(),$("#keycode-sum").html(f.substring(1)+p.formatDigit(_.sum(i))),$("#keycode-avg").html(f.substring(1)+p.formatDigit(_.avg(i))))}})})},renderConrurrent:function(){a.fetchACUPCU({data:this.params,success:function(e){var t,n,r,i;t=e.acu;var s=_.pluck(t,"item"),o=_.pluck(t,"value"),u=[{name:"ACU",data:o}];r=_.avg(o);if(e.pcu){n=e.pcu;var a=_.pluck(n,"value");u.push({name:"PCU",data:a}),i=_.max(a)}else i=_.max(o);c.chart({id:"chart-acupcu",x:s,series:u,title:"ACU & PCU"}),$("#acuavgNum").html(p.formatDigit(r)),$("#maxNum").html(p.formatDigit(i)),h.draw({id:"canvas-acuavg",maxValue:i,currentValue:r})}})},renderCharge:function(){var e,t,n,r=!1,i=this,s="",o=$("#chargeCode").tabs(function(a){switch(a){case"paidRate":e=u,t="fetchDailyRateOfPay",n=m.GameCommon.dailyPayRate,r=!0,s="%";break;case"dayARPU":e=u,t="fetchDailyARPU",n=m.GameCommon.day+"ARPU",s="#"+m.GameCommon.zhMonryUnit,r=!1;break;case"dayARPPU":e=u,t="fetchDailyARPPU",n=m.GameCommon.day+"ARPPU",s="#"+m.GameCommon.zhMonryUnit,r=!1}e[t]({data:i.params,success:function(e){var t=_.pluck(e,"item"),i=_.pluck(e,"value"),u=[{name:n+"^"+s,data:i}];s.indexOf("#")!=-1?$("#charge-avg").html(s.substring(1)+p.formatDigit(_.avg(i))):$("#charge-avg").html(p.formatDigit(_.avg(i))+s),c.chart({id:"chargeCode-chart",x:t,series:u,yPercent:r});var a=null,f=[m.GameCommon.date,n];s.indexOf("#")!=-1?a=_.zip(t,_.map(i,function(e){return s.substring(1)+e})):a=_.zip(t,_.map(i,function(e){return e+s})),d.drawTable({head:f,body:a,$el:$("#chargeCode-table")}),o.head=f,o.body=a}})})},renderRetention:function(){var e=this,t=$("#retentionCode").tabs(function(){i.fetchDay1Day7Day30Retention({data:e.params,success:function(e){var n=_.pluck(e.day01,"item"),r=_.pluck(e.day01,"value"),i=_.pluck(e.day07,"value"),s=_.pluck(e.day30,"value"),o=[{name:m.Summary.Summary.morrowRetainRate+"^%",data:r},{name:m.Summary.Summary.sevenDaysRetainRate+"^%",data:i},{name:m.Summary.Summary.thiryDaysRetainTate+"^%",data:s}];c.chart({id:"retentionCode-chart",x:n,series:o,legend:!0,yPercent:!0});var u=_.zip(n,_.map(r,function(e){return e+"%"}),_.map(i,function(e){return e+"%"}),_.map(s,function(e){return e+"%"})),a=[m.GameCommon.date,m.Summary.Summary.morrowRetainRate,m.Summary.Summary.sevenDaysRetainRate,m.Summary.Summary.thiryDaysRetainTate];d.drawTable({head:a,body:u,$el:$("#retentionCode-table")}),t.head=a,t.body=u}})})},renderPlayTimes:function(){var e=_.clone(Params);e.player={userType:"newPlayer",dayType:"day"},e.partnerID="";var t=$("#playTimeNumsCode").tabs(function(){f.fetchAvgGameTimesList({data:e,success:function(e){var n=_.pluck(e.useTimeList,"item"),r=_.pluck(e.useTimeList,"value"),i=_.pluck(e.useTimesList,"value"),s=_.pluck(e.dauList,"value"),o=[],u=[],a=0,f=0;for(var l=0;l<r.length;l++)s[l]==0?(o[l]=0,u[l]=0):(o[l]=Math.round(r[l]/60/s[l]),u[l]=Math.round(i[l]/s[l]*10)/10),f+=s[l],a+=r[l];var h=f==0?0:Math.round(a/60/f);$("#chart-playtimes-num").html(h);var p=[{name:m.GameCommon.timeTimes,data:u,type:"column",yAxis:1},{name:m.GameCommon.timeMinute,data:o}];c.chart({id:"playTimeNumsCode-chart",x:n,series:p});var v=_.zip(n,_.map(u,function(e){return e+m.GameCommon.times}),_.map(o,function(e){return e+m.GameCommon.point})),g=[m.GameCommon.date,m.Player.Behavior.avgGamingCount,m.Player.Behavior.avgGamingTime];d.drawTable({head:g,body:v,$el:$("#playTimeNumsCode-table")}),t.head=g,t.body=v}})})}});return g}),define("text!templates/player/newPlayer.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="newPlayerCode">\r			<div class="title"  role="title">\r				<strong class="l"><%=Summary.Summary.newPlayer%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a class="tab hover" data-tab="installAndNewPlayer"><%=GameCommon.newInstallAndPlayer%></a>\r<!-- 					<a class="tab" data-tab="newPlayer"><%=GameCommon.newIncreasedPlayer%></a> -->\r					<a class="tab" data-tab="conversion"><%=GameCommon.player%><%=GameCommon.transform%></a>\r					<div class="info r" id="sumAvgMd">\r	                	SUM <%=GameCommon.equipmentAcount%>：<font id="newPlayerCode-sum"></font>&nbsp;&nbsp;\r	                	AVG <%=GameCommon.equipmentAcount%>：<font id="newPlayerCode-avg"></font>&nbsp;&nbsp;   \r	                	MD <%=GameCommon.equipmentAcount%>：<font id="newPlayerCode-md"></font>\r	                </div>\r				</div>\r				<div role="chart">\r					<div id="newPlayerCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="newPlayerCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r\r<!-- 	<div class="box"> -->\r<!-- 		<div class="contentbox l"> -->\r<!-- 			<div class="title"> -->\r<!-- 				<strong class="l"><%=GameCommon.equipmentActive%></strong> -->\r<!-- 			</div> -->\r<!--             <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2"> -->\r<!--                 <tbody> -->\r<!--                     <tr> -->\r<!--                         <td class="left border_none">SUM</td> -->\r<!--                         <td class="center border_none"><strong id="installSum"></strong> -->\r<!--                         </td> -->\r<!--                     </tr> -->\r<!--                     <tr> -->\r<!--                         <td class="left ">AVG | MD</td> -->\r<!--                         <td class="center "><strong><font id="installAvg"></font>|<font id="installMD"></font></strong> -->\r<!--                         </td> -->\r<!--                     </tr> -->\r<!--                 </tbody> -->\r<!--             </table> -->\r<!-- 		</div> -->\r	\r<!-- 		<div class="contentbox r"> -->\r<!-- 			<div class="title"> -->\r<!-- 				<strong class="l"><%=GameCommon.newIncreasedPlayer%></strong> -->\r<!-- 			</div> -->\r<!--             <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2"> -->\r<!--                 <tbody> -->\r<!--                     <tr> -->\r<!--                         <td class="left border_none">SUM</td> -->\r<!--                         <td class="center border_none"><strong id="newPlayerSum"></strong> -->\r<!--                         </td> -->\r<!--                     </tr> -->\r<!--                     <tr> -->\r<!--                         <td class="left ">AVG | MD</td> -->\r<!--                         <td class="center "><strong><font id="newPlayerAvg"></font>|<font id="newPlayerMD"></font></strong> -->\r<!--                         </td> -->\r<!--                     </tr> -->\r<!--                 </tbody> -->\r<!--             </table> -->\r<!-- 		</div> -->\r<!-- 		<div class="clear"></div> -->\r<!-- 	</div> -->\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="newPlayerLocationCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.newIncreasedPlayer%> <%=GameCommon.region%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="newPlayerLocationCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="newPlayerLocationCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="newPlayerPartnerCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.newIncreasedPlayer%> <%=GameCommon.channel%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="newPlayerPartnerCode-chart" class="minpicbox">\r							<!-- <div class="tableview">\r								<div class="dataTables_paginate paging_two_button">\r									<a class="paginate_disabled_previous paginate_button"></a>\r									<span class="navigationLabel">\r										<font class="pageIndex">1</font>/<font class="totalPages">4</font>\r									</span>\r									<a class="paginate_enabled_next paginate_button"></a>\r								</div>\r							</div> -->\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        		<div id="pagination"></div>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="newPlayerPartnerCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="newPlayerSexCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.newIncreasedPlayer%> <%=GameCommon.sex%></strong>\r				</div>\r	            <div class="textbox">\r            		<div role="chart">\r            			<div class="minpicbox" id="newPlayerSexCode-chart">\r		            	</div>\r		            	<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r            		</div>\r	            	<div role="table">\r						<div id="newPlayerSexCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r            	</div>\r            </div>\r		</li>\r		<li class="contentbox r" >\r			<div id="newPlayerAgeCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.newIncreasedPlayer%> <%=GameCommon.age%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="newPlayerAgeCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="newPlayerAgeCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="newPlayerAccountCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.newIncreasedPlayer%> <%=GameCommon.accountType%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="newPlayerAccountCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="newPlayerAccountCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("text!templates/public/people.html",[],function(){return'<div class="famale" style="height:140px">\n	<p class="male" id="maleScale"></p>\n    <p style="padding-left:35px" id="malePicture"></p>\n</div>\n<p style="height:35px;margin:0px; text-align:center;font-size:30px; line-height:35px; color:#693">VS</p>\n<div class="famale r" style="height:120px">\n	<p id="femaleScale" class="male"></p>\n    <p style="padding-right:35px; text-align:right" id="femalePicture">\n    </p>\n</div>\n<div class="clear"></div>'}),define("views/player/NewPlayerView",["backbone","models/player/NewPlayer","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","models/Constant","text!templates/player/newPlayer.html","text!templates/public/people.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{},initialize:function(){$("#container").html(_.template(f,c)),new o({el:"#datePicker"}),new u({el:"#selectChoose"}),this.player={userType:a.NEW_PLAYER},this.render()},render:function(){return this.renderPlayer(),this.renderLocation(),this.renderChannel(),this.renderGender(),this.renderAge(),this.renderAccountType(),this},renderPlayer:function(){var e=_.clone(Params);e.player=this.player;var i=$("#newPlayerCode").tabs(function(o){var u,a,f=!1,l="";switch(o){case"installAndNewPlayer":u="fetchInstallNewPlayerList",a=c.GameCommon.equipmentActive,f=!1;break;case"conversion":f=!0,u="fetchConversionList",a=c.GameCommon.player+c.GameCommon.transform,l="%"}t[u]({data:e,success:function(e){var t=null,h=null,p=null,d=null,v=null;u==="fetchInstallNewPlayerList"?(t=_.pluck(e.install,"item"),p=_.pluck(e.install,"value"),d=_.pluck(e.newPlayer,"value"),h=[{name:c.GameCommon.newIncreasedPlayer,data:d},{name:c.GameCommon.equipmentActive,data:p}],n.chart({id:"newPlayerCode-chart",x:t,series:h,legend:!0,yPercent:f})):(t=_.pluck(e,"item"),v=_.pluck(e,"value"),h=[{name:a+"^"+l,data:v}],n.chart({id:"newPlayerCode-chart",x:t,series:h,yPercent:f})),o==="installAndNewPlayer"?($("#sumAvgMd").show(),$("#newPlayerCode-sum").html(r.formatDigit(_.sum(p))+"|"+r.formatDigit(_.sum(d))),$("#newPlayerCode-avg").html(r.formatDigit(_.avg(p))+"|"+r.formatDigit(_.avg(d))),$("#newPlayerCode-md").html(r.formatDigit(_.median(p))+"|"+r.formatDigit(_.median(d)))):$("#sumAvgMd").hide();var m=null,g=null;u==="fetchConversionList"?(m=_.zip(t,_.map(v,function(e){return e+"%"})),g=[c.GameCommon.date,a]):(g=[c.GameCommon.date,c.GameCommon.equipmentActive,c.GameCommon.newIncreasedPlayer],m=_.zip(t,_.map(p),_.map(d))),s.drawTable({head:g,body:m,$el:$("#newPlayerCode-table")}),i.head=g,i.body=m}})})},renderInstallNum:function(e){t.fetchInstallList({data:Params,success:function(e){e=_.pluck(e,"value"),$("#installSum").html(r.formatDigit(_.sum(e))),$("#installAvg").html(r.formatDigit(_.avg(e))),$("#installMD").html(r.formatDigit(_.median(e)))}})},renderNewPlayerNum:function(e){var n=_.clone(Params);n.player=this.player,t.fetchNewPlayerList({data:n,success:function(e){e=_.pluck(e,"value"),$("#newPlayerSum").html(r.formatDigit(_.sum(e))),$("#newPlayerAvg").html(r.formatDigit(_.avg(e))),$("#newPlayerMD").html(r.formatDigit(_.median(e)))}})},renderLocation:function(){this.request("newPlayerLocationCode","location",c.GameCommon.region,!0)},renderChannel:function(){this.request("newPlayerPartnerCode","partner",c.GameCommon.channel,!0)},renderGender:function(){this.request("newPlayerSexCode","sex",c.GameCommon.sex)},renderAge:function(){this.request("newPlayerAgeCode","age",c.GameCommon.age)},renderAccountType:function(){this.request("newPlayerAccountCode","accountType",c.GameCommon.accountType)},request:function(e,r,i,o){var u=this,a=_.clone(Params);a.player=this.player,a.groupBy=r;var f=$("#"+e).tabs(function(){t.fetchNewPlayerList({data:a,success:function(t){if(r=="sex")$("#newPlayerSexCode-chart").html(l),u.drawSex(t),f.head=[c.GameCommon.sex,c.GameCommon.percentage],f.body=_.zip([c.GameCommon.male,c.GameCommon.female],_.percent(_.pluck(t,"value"),3,1));else{var a=_.pluck(t,"item"),h=_.pluck(t,"value"),p=[{name:i,data:h}],d=_.percent(h,3,1),v=_.zip(a,h,d),m=[i,c.GameCommon.newIncreasedPlayer,c.GameCommon.percentage];n.chartBar({id:e+"-chart",x:{left:a,right:d},series:p,pagination:o}),s.drawTable({head:m,body:v,$el:$("#"+e+"-table")}),f.head=m,f.body=v}}})})},drawSex:function(e){var t=0,n=10,r=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),n=10-t,r=10-t,o=10-r);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(n))u.append('<img src="images/malehiddle.png">');for(i in _.range(r))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var h=_.zip([c.GameCommon.male,c.GameCommon.female],f),p=[c.GameCommon.sex,c.GameCommon.percentage];s.drawTable({head:p,body:h,$el:$("#newPlayerSexCode-table")})}});return h}),define("text!templates/player/activePlayer.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		\r		<div id="dauCode">\r			<div class="title"  role="title">\r				<strong class="l"><%=GameCommon.player%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="dautab" class="tab hover">DAU</a>\r					<a data-tab="wautab" class="tab">WAU</a>\r					<a data-tab="mautab" class="tab">MAU</a>\r					<a data-tab="daumautab" class="tab">DAU/MAU</a>\r					<div class="info r">\r	                	AVG | MD：<font id="dauAvg"></font> | <font id="dauMD"></font>\r	                </div>\r				</div>\r				<div role="chart">\r					<div id="dauCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="dauCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="activePlayerPlayedDaysCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=Player.ActivePlayer.playedDays%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="activePlayerPlayedDaysCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="activePlayerPlayedDaysCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="activePlayerLevelCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.grade%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="activePlayerLevelCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="activePlayerLevelCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="activePlayerLocationCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.region%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="activePlayerLocationCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="activePlayerLocationCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="activePlayerPartnerCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.channel%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="activePlayerPartnerCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="activePlayerPartnerCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>	\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="activePlayerSexCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.sex%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div class="minpicbox" id="activePlayerSexCode-chart"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="activePlayerSexCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r            </div>\r		</li>\r		<li class="contentbox r" >\r			<div id="activePlayerAgeCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=GameCommon.activePlayer%> <%=GameCommon.age%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="activePlayerAgeCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="activePlayerAgeCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/player/ActivePlayerView",["backbone","models/player/ActivePlayer","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","models/Constant","text!templates/player/activePlayer.html","text!templates/public/people.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{},initialize:function(){$("#container").html(_.template(f,c)),new o({el:"#datePicker"}),new u({el:"#selectChoose"}),this.player={userType:a.ACTIVE_PLAYER},this.render()},render:function(){return this.renderActivity(),this.renderLifetime(),this.renderLevel(),this.renderLocation(),this.renderChannel(),this.renderGender(),this.renderAge(),this},renderActivity:function(){var e=_.clone(Params),i="";e.player=this.player;var o=$("#dauCode").tabs(function(u){switch(u){case"dautab":api="fetchDauList",i="DAU";break;case"wautab":api="fetchWauList",i="WAU";break;case"mautab":api="fetchMauList",i="MAU";break;case"daumautab":api="fetchDauDivideMauList",i="DAU/MAU"}t[api]({data:e,success:function(e){var t=_.pluck(e,"item"),e=_.pluck(e,"value"),u=[{name:i,data:e}],a=_.zip(t,e),f=[c.GameCommon.date,i];s.drawTable({head:f,body:a,$el:$("#dauCode-table")}),n.chart({id:"dauCode-chart",x:t,series:u}),o.head=f,o.body=a,$("#dauAvg").html(r.formatDigit(_.avg(e))),$("#dauMD").html(r.formatDigit(_.median(e)))}})})},renderLifetime:function(){this.request(a.LIFETIME,"activePlayerPlayedDaysCode",c.Player.ActivePlayer.playedDays)},renderLevel:function(){this.request(a.LEVEL,"activePlayerLevelCode",c.GameCommon.grade,!0)},renderLocation:function(){this.request(a.LOCATION,"activePlayerLocationCode",c.GameCommon.region,!0)},renderChannel:function(){this.request(a.PARTNER,"activePlayerPartnerCode",c.GameCommon.channel,!0)},renderGender:function(){this.request(a.SEX,"activePlayerSexCode",c.GameCommon.sex)},renderAge:function(){this.request(a.AGE,"activePlayerAgeCode",c.GameCommon.age)},request:function(e,r,i,o){var u=_.clone(Params);u.groupBy=e,u.player={},u.player.userType=a.ACTIVE_PLAYER;var f=this,h=$("#"+r).tabs(function(){t.fetchGroupedPlayerList({data:u,success:function(t){if(e=="sex")$("#activePlayerSexCode-chart").html(l),f.drawSex(t),h.head=[c.GameCommon.sex,c.GameCommon.percentage],h.body=_.zip([c.GameCommon.male,c.GameCommon.female],_.percent(_.pluck(t,"value"),3,1));else{var u=_.pluck(t,"item"),a=_.pluck(t,"value"),p=[{name:c.Player.CustomRetention.activeUser,data:a}],d=_.percent(a,3,1),v=_.zip(u,a,d),m=[i,c.Player.CustomRetention.activeUser,c.GameCommon.percentage];s.drawTable({head:m,body:v,$el:$("#"+r+"-table")}),n.chartBar({id:r+"-chart",x:{left:u,right:d},series:p,pagination:o}),h.head=m,h.body=v}}})})},drawSex:function(e){var t=0,n=10,r=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),n=10-t,r=10-t,o=10-r);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(n))u.append('<img src="images/malehiddle.png">');for(i in _.range(r))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var h=_.zip([c.GameCommon.male,c.GameCommon.female],f),p=[c.GameCommon.sex,c.GameCommon.percentage];s.drawTable({head:p,body:h,$el:$("#activePlayerSexCode-table")})}});return h}),define("text!templates/player/behavior.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="playerTabs" class="l margin_left">\r                <a data="newPlayer" class="tagbut tagbutL hover"><%=GameCommon.newIncreasedPlayer%></a>\r                <a data="activePlayer" class="tagbut"><%=GameCommon.activePlayer%></a>\r                <a data="chargePlayer" class="tagbut tagbutR" ><%=GameCommon.payPlayer%></a>\r			</div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r\r		<div id="avgTimeAndTimeCode">\r			<div class="title"   role="title">\r				<strong class="l"><%=GameCommon.avgGamingTimeCount%></strong>\r			</div>\r			<div class="textbox">\r				<div role="tabbar" class="box_top">\r					<a class="tab hover" data-tab="day"><%=Player.Behavior.daily%></a>\r					<a class="tab" data-tab="week"><%=Player.Behavior.weekly%></a>\r					<a class="tab" data-tab="month"><%=Player.Behavior.monthly%></a>\r					<div class="info r">\r	                	AVG：<span id="avgTimeAndTimeCode-avg"></span>\r	                </div>\r				</div>\r				<div role="chart">\r					<div id="avgTimeAndTimeCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="avgTimeAndTimeCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r\r<!-- 		<div class="box"> -->\r<!-- 			<div class="contentbox l"> -->\r<!-- 				<div class="title"> -->\r<!-- 					<strong class="l"><%=Player.Behavior.avgGamingTime%></strong> -->\r<!-- 				</div> -->\r<!--                 <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2"> -->\r<!--                     <tbody> -->\r<!--                         <tr> -->\r<!--                             <td class="left border_none" id="avgUseTimeName"></td> -->\r<!--                             <td class="center border_none"><strong id="avgUseTimeNum"></strong></td> -->\r<!--                         </tr> -->\r<!--                     </tbody> -->\r<!--                 </table> -->\r<!-- 			</div> -->\r		\r<!-- 			<div class="contentbox r"> -->\r<!-- 				<div class="title"> -->\r<!-- 					<strong class="l"><%=Player.Behavior.avgGamingCount%></strong> -->\r<!-- 				</div> -->\r<!--                 <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2"> -->\r<!--                     <tbody> -->\r<!--                         <tr> -->\r<!--                             <td class="left border_none" id="avgUseTimeNumName"></td> -->\r<!--                             <td class="center border_none"><strong  id="avgUseTimesNum"></strong></td> -->\r<!--                         </tr> -->\r<!--                     </tbody> -->\r<!--                 </table> -->\r<!-- 			</div> -->\r<!-- 			<div class="clear"></div> -->\r<!-- 		</div> -->\r\r		<div class="boxmax">\r			<div id="playFrequencyCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Behavior.gameFrequency%></strong>\r				</div>\r				<div class="textbox">\r					<div role="tabbar" class="box_top">\r						<a class="tab hover" data-tab="monthDays"><%=Player.Behavior.monthGamingDays%></a>\r						<a class="tab" data-tab="weekDays"><%=Player.Behavior.weekGamingDays%></a>\r						<a class="tab" data-tab="weekTimes"><%=Player.Behavior.weekGamingTimes%></a>\r						<a class="tab" data-tab="dayTimes"><%=Player.Behavior.dayGamingTimes%></a>\r					</div>\r					<div role="chart">\r						<div id="playFrequencyCode-chart" class="picbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="playFrequencyCode-table" class="picbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r\r			</div>\r		</div>\r\r		<div class="boxmax">\r			<div id="playTimeCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Behavior.gamingTime%></strong>\r				</div>\r				<div class="textbox">\r					<div role="tabbar" class="box_top">\r						<a class="tab hover" data-tab="weekTime"><%=Player.Behavior.weekGamingTime%></a>\r						<a class="tab" data-tab="dayTime"><%=Player.Behavior.dayGamingTime%></a>\r						<a class="tab" data-tab="singleTime"><%=Player.Behavior.singleGamingTime%></a>\r					</div>\r					<div role="chart">\r						<div id="playTimeCode-chart" class="picbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="playTimeCode-table" class="picbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</div>\r\r		<div class="boxmax">\r			<div id="playTimesDistributeCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Behavior.gamingTimeInterval%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="playTimesDistributeCode-chart" class="picbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="playTimesDistributeCode-table" class="picbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</div>\r\r		<!-- <div class="boxmax">\r			<div class="title">\r				<strong class="l">游戏间隔</strong>\r			</div>\r			<div class="textbox">\r				<div id="playIntervalChart" style="width: 100%; height: 350px; margin: 0 auto">\r					<div class="login">\r						<img src="images/loading.gif" height="25px"></img> <br>\r						正在加载统计数据...\r					</div>\r				</div>\r			</div>\r		</div> -->\r\r	</div>\r	\r</div>'}),define("views/player/BehaviorView",["backbone","views/public/DatePicker","views/public/SelectView","utils/HighchartUtil","utils/dataTableUtil","text!templates/player/behavior.html","models/player/Behavior","models/Constant","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a){var f=e.View.extend({el:"#container",events:{"click #playerTabs>a":"changePlayerType"},initialize:function(){$("#container").html(_.template(s,a)),new t({el:"#datePicker"}),new n({el:"#selectChoose"}),this.userType="newPlayer",this.playerName=$("#playerTabs>a.hover").text(),this.render()},render:function(){return this.renderToPlayAvgTimeAndTimes(),this.renderToPlayFrequency(),this.renderToPlayTime(),this.renderToPlayTimeInterval(),this},renderToPlayAvgTimeAndTimes:function(){var e=this,t=$("#avgTimeAndTimeCode").tabs(function(n){var s,u="";switch(n){case"day":s=a.Player.Behavior.everyDayGame,u="day";break;case"week":s=a.Player.Behavior.everyWeekGame,u="week";break;case"month":s=a.Player.Behavior.everyMonthGame,u="month"}var f=_.clone(Params);f.player={userType:e.userType,dayType:u},o.fetchAvgGameTimesList({$entity:f,$callback:function(e,o,u){var f=_.pluck(u.useTimeList,"item"),l=_.pluck(u.useTimeList,"value"),c=_.pluck(u.useTimesList,"value"),h=_.pluck(u.dauList,"value"),p=[],d=[],v=0,m=0,g=0;for(var y=0;y<l.length;y++)h[y]==0?(p[y]=0,d[y]=0):(p[y]=Math.round(l[y]/60/h[y]),d[y]=Math.round(c[y]/h[y]*10)/10),g+=h[y],v+=l[y],m+=c[y];var b=g==0?0:Math.round(v/60/g),w=g==0?0:Math.round(m/g*10)/10;n==="day"?$("#avgTimeAndTimeCode-avg").html(a.Player.Behavior.avgPlayerDailyGaming+"<font>"+w+"</font>"+a.Player.Behavior.timesTotal+"<font>"+b+"</font>"+a.Player.Behavior.minute):n==="week"?$("#avgTimeAndTimeCode-avg").html(a.Player.Behavior.avgPlayerWeeklyGaming+"<font>"+w+"</font>"+a.Player.Behavior.timesTotal+"<font>"+b+"</font>"+a.Player.Behavior.minute):n==="month"&&$("#avgTimeAndTimeCode-avg").html(a.Player.Behavior.avgPlayerMonthlyGaming+"<font>"+w+"</font>"+a.Player.Behavior.timesTotal+"<font>"+b+"</font>"+a.Player.Behavior.minute);var E=[{name:s+a.GameCommon.timeTimes,data:d,type:"column",yAxis:1},{name:s+a.GameCommon.timeMinute,data:p}];r.chart({id:"avgTimeAndTimeCode-chart",x:f,series:E});var S=_.zip(f,_.map(p,function(e){return e+a.GameCommon.point}),_.map(d,function(e){return e+a.GameCommon.times})),x=[a.GameCommon.date,s+a.GameCommon.timeNum,s+a.GameCommon.timesNum];i.drawTable({head:x,body:S,$el:$("#avgTimeAndTimeCode-table")}),t.head=x,t.body=S}})})},renderToPlayFrequency:function(){var e=this,t=$("#playFrequencyCode").tabs(function(n){var s,u="";switch(n){case"monthDays":s=a.Player.Behavior.monthGamingDays,u="monthGameDays";break;case"weekDays":s=a.Player.Behavior.weekGamingDays,u="weekGameDays";break;case"weekTimes":s=a.Player.Behavior.weekGamingTimes,u="weekGameTimes";break;case"dayTimes":s=a.Player.Behavior.dayGamingTimes,u="dayGameTimes"}var f=_.clone(Params);f.player={userType:e.userType,groupType:u},o.fetchGameFrequencyList({$entity:f,$callback:function(n,o,u){var f=_.pluck(u,"item"),u=_.pluck(u,"value"),l=_.percent(u,3,1),c=[{name:s,data:u}];r.chartBar({id:"playFrequencyCode-chart",x:{left:f,right:l},series:c});var h=_.zip(f,u,l),p=[s,e.playerName,a.GameCommon.percentage];i.drawTable({head:p,body:h,$el:$("#playFrequencyCode-table")}),t.head=p,t.body=h}})})},renderToPlayTime:function(){var e=this,t=$("#playTimeCode").tabs(function(n){var s,u="";switch(n){case"weekTime":s=a.Player.Behavior.weekGamingTime,u="weekUseTime";break;case"dayTime":s=a.Player.Behavior.dayGamingTime,u="dayUseTime";break;case"singleTime":s=a.Player.Behavior.singleGamingTime,u="perTimeUseTime"}var f=_.clone(Params);f.player={userType:e.userType,groupType:u},o.fetchGameDurationTimeList({$entity:f,$callback:function(n,o,u){var f=_.pluck(u,"item"),u=_.pluck(u,"value"),l=_.percent(u,3,1),c=[{name:s,data:u}],h=_.zip(f,u,l),p=[s,e.playerName,a.GameCommon.percentage];i.drawTable({head:p,body:h,$el:$("#playTimeCode-table")}),r.chartBar({id:"playTimeCode-chart",x:{left:f,right:l},series:c}),t.head=p,t.body=h}})})},renderToPlayTimeInterval:function(){var e=_.clone(Params);e.player={userType:this.userType,groupType:"hour"};var t=this,n=$("#playTimesDistributeCode").tabs(function(){o.fetchGameTimesList({$entity:e,$callback:function(e,s,o){var u=a.Product.ProductList.gameTimes,f=_.pluck(o,"item"),o=_.pluck(o,"value"),l=[{name:u,data:o}],c=_.zip(f,o),h=[u,t.playerName];i.drawTable({head:h,body:c,$el:$("#playTimesDistributeCode-table")}),r.chart({id:"playTimesDistributeCode-chart",x:f,series:l}),n.head=h,n.body=c}})})},renderToPlayInterval:function(){var e=_.clone(Params);e.player={userType:this.userType,groupType:"interval"},o.fetchIntervalList({$entity:e,$callback:function(e,t,n){var i=_.pluck(n,"item"),n=_.pluck(n,"value"),s=_.percent(n,3,1),o=[{name:a.Player.Behavior.gameGap,data:n}];r.chartBar({id:"playIntervalChart",x:{left:i,right:s},series:o})}})},userGroupSelectClick:function(e){this.render()},changePlayerType:function(e){var t=$(e.currentTarget);$("#playerTabs>a").removeClass("hover"),t.addClass("hover"),this.userType=t.attr("data"),this.playerName=t.text(),this.render()}});return f}),define("text!templates/player/device.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop" style="margin-bottom:0px;">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="playerTabs" class="l margin_left">\r                <a data="newPlayer" class="tagbut tagbutL hover"><%=GameCommon.newIncreasedPlayer%></a>\r                <a data="activePlayer" class="tagbut"><%=GameCommon.activePlayer%></a>\r                <a data="chargePlayer" class="tagbut tagbutR" ><%=GameCommon.payPlayer%></a>\r			</div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r	</div>\r\r	\r	<div class="boxmax" >\r		<div id="deviceModelCode">\r			<div class="title"   role="title">\r				<strong class="l"><%=Player.Device.model%></strong>\r			</div>\r			<div class="textbox">\r				<div role="chart">\r					<div id="deviceModelCode-chart" class="minpicbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="deviceModelCode-table" class="minpicbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r	<ul class="Esbox">\r		<li class="contentbox r" >\r			<div id="deviceOSCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Device.operateSystem%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="deviceOSCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="deviceOSCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="deviceResolutionCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Device.DPI%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="deviceResolutionCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="deviceResolutionCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="deviceCarrierCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Device.serviceProvider%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="deviceCarrierCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="deviceCarrierCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="deviceNetworkCode">\r				<div class="title"   role="title">\r					<strong class="l"><%=Player.Device.networkingModeDistribution%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="deviceNetworkCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="deviceNetworkCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/player/DeviceView",["backbone","views/public/DatePicker","views/public/SelectView","models/Constant","models/player/ActivePlayer","utils/HighchartUtil","utils/dataTableUtil","text!templates/player/device.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a){var f=e.View.extend({el:"#container",events:{"click #playerTabs>a":"changePlayerType"},initialize:function(){$("#container").html(_.template(u,a)),new t({el:"#datePicker"}),new n({el:"#selectChoose"}),this.player={userType:r.NEW_PLAYER},this.playerName=$("#playerTabs>a.hover").text(),this.render()},render:function(){return this.renderPhoneModel(),this.renderOS(),this.renderResolution(),this.renderCarrier(),this.renderNetWorking(),this},changePlayerType:function(e){var t=$(e.currentTarget);$("#playerTabs>a").removeClass("hover"),t.addClass("hover"),this.player.userType=t.attr("data"),this.playerName=t.text(),this.render()},renderPhoneModel:function(){this.request(r.MOBILE,"deviceModelCode",a.Player.Device.model,!0)},renderOS:function(){this.request(r.MOBILE_OS,"deviceOSCode",a.Player.Device.operateSystem,!0)},renderResolution:function(){this.request(r.PIXEL,"deviceResolutionCode",a.Player.Device.DPI,!0)},renderCarrier:function(){this.request(r.CARRIER,"deviceCarrierCode",a.Player.Device.serviceProvider,!0)},renderNetWorking:function(){this.request(r.NETWORK,"deviceNetworkCode",a.Player.Device.networkingModeDistribution)},request:function(e,t,n,r){var u=_.clone(Params);u.groupBy=e,u.player=this.player;var f=this,l=$("#"+t).tabs(function(){i.fetchGroupedPlayerList({data:u,success:function(e){var i=_.pluck(e,"item"),u=_.pluck(e,"value");if(t=="deviceNetworkCode"){var c=_.percent(u,3),h=_.map(c,function(e){return parseFloat((e*100).toFixed(1))}),u=_.zip(i,h),p=[{type:"pie",name:n,data:u}];s.chartPie({id:t+"-chart",series:p});var d=_.zip(i,_.map(h,function(e){return e+"%"})),v=[a.Player.Device.linkNetType,a.GameCommon.percentage];o.drawTable({head:v,body:d,$el:$("#"+t+"-table")}),l.head=v,l.body=d}else{var p=[{name:n,data:u}],c=_.percent(u,3,1);s.chartBar({id:t+"-chart",x:{left:i,right:c},series:p,pagination:r});var d=_.zip(i,u,c),v=[n,f.playerName,a.GameCommon.percentage];o.drawTable({head:v,body:d,$el:$("#"+t+"-table")}),l.head=v,l.body=d}}})})}});return f}),define("models/player/Churned",["models/BaseModel"],function(e){var t=[{name:"fetchPerDayLostNumList",url:"/v1/churned/perDayLostNumList"},{name:"fetchPerDayReturnNumList",url:"/v1/churned/perDayReturnNumList"},{name:"fetchLostUserAnalysNumList",url:"/v1/churned/lostUserAnalysNumList"}];return e.init(t)}),define("text!templates/player/churned.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			\r			<!-- 每日流失/流失漏斗 标签 -->\r			<div class="l margin_right" id="tagb">\r                <a class="tagbut tagbutL hover"><%=Player.Churned.dailyLoss%></a>\r                <a class="tagbut tagbutR" id="toLostFunnelBtn"><%=Player.Churned.lossFunnel%></a>\r			</div>\r			\r			<!-- 日历控件 -->\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r\r		</div>\r		<div id="churnedPerDayCode">\r			<div class="title"   role="title">\r				<strong class="l"><%=Player.Churned.dailyLoss%></strong>\r				<div class="buttonDiv l">\r					<label class="l selectlble"><%=Player.Churned.lossCondition%>：</label>\r					<select id="churnedSelect" class="true">\r						<option selected="selected" value="7"><%=Player.Churned.servenDaysNotLoginIn%></option>\r						<option value="14"><%=Player.Churned.fourteenDaysNotLoginIn%></option>\r						<option value="30"><%=Player.Churned.thirtynDaysNotLoginIn%></option>\r					</select>\r	                </div>\r				<div class="buttonDiv l" style="margin-left:0;">\r					<label class="l selectlble"><%=GameCommon.of%></label>\r					<select id="userTypeSelect" class="true">\r						<option selected="selected" value="3"><%=Player.Churned.allPlayers%></option>\r						<option value="2"><%=GameCommon.payPlayer%></option>\r					</select>\r				</div>\r			</div>\r			<div class="textbox">\r				<div role="tabbar" class="box_top">\r					<a class="tab hover" data-tab="lost"><%=Player.Churned.dailyLoss%></a>\r					<a class="tab" data-tab="return"><%=Player.Churned.dailyBackflow%></a>\r				</div>\r				<div role="chart">\r					<div id="churnedPerDayCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="churnedPerDayCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r	\r	<div class="boxmax">\r		<div id="churnedPlayerAnalysisCode">\r			<div class="title"   role="title">\r				<strong class="l"><%=Player.Churned.lossUserAnalysis%></strong>\r				<div class="buttonDiv l">\r					<div class="l selectlble"><%=Player.Churned.analysisType%>：</div>\r					<select id="analyticalMethodsSelect" class="true">\r						<option selected="selected" value="1"><%=Player.Churned.lossLevel%></option>\r						<option value="2"><%=Player.Churned.userLifeCycle%></option>\r						<option value="3"><%=Player.Churned.paySum%></option>\r						<option value="4"><%=Player.Churned.payCount%></option>\r					</select>\r				</div>\r			</div>\r			<div class="textbox">\r				<div role="chart">\r					<div id="churnedPlayerAnalysisCode-chart" class="minpicbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="churnedPlayerAnalysisCode-table" class="minpicbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r</div>\r'}),define("views/player/ChurnedView",["backbone","models/player/Churned","models/Constant","utils/HighchartUtil","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","text!templates/player/churned.html","i18n!nls/gameI18N","jquery.select","jquery.tabs"],function(e,t,n,r,i,s,o,u,a){var f=e.View.extend({el:"#container",events:{"change #churnedSelect":"churnedSelectClick","change #userTypeSelect":"userTypeSelectClick","change #analyticalMethodsSelect":"analyticalMethodsSelectClick","click #toLostFunnelBtn":"toLostFunnel"},initialize:function(){$("#container").html(_.template(u,a)),$("#churnedSelect").sSelect(),$("#userTypeSelect").sSelect(),$("#analyticalMethodsSelect").sSelect(),new s({el:"#datePicker"}),new o({el:"#selectChoose"}),this.params=_.clone(Params),this.dayType=parseInt($("#churnedSelect").val()),this.playerType=parseInt($("#userTypeSelect").val()),this.analysType=parseInt($("#analyticalMethodsSelect").val()),this.params.churnedParameterBean={playerType:this.playerType,dayType:this.dayType,analysType:this.analysType},this.playerName=$("#userTypeSelect option:selected").text(),this.render()},render:function(){this.renderPerDayLostReturnChart(),this.renderLostUserAnalysChart()},renderPerDayLostReturnChart:function(){var e=this.params,n=this,s=$("#churnedPerDayCode").tabs(function(o){var u,f,l;switch(o){case"lost":l="fetchPerDayLostNumList",u="perDayLostChart",f=a.Player.Churned.dailyLoss;break;case"return":l="fetchPerDayReturnNumList",u="perDayReturnChart",f=a.Player.Churned.dailyBackflow}t[l]({$entity:e,$callback:function(e,t,o){var u=_.pluck(o,"item"),o=_.pluck(o,"value"),l=[{name:f,data:o}],c=_.zip(u,o),h=[a.GameCommon.date,n.playerName];i.drawTable({head:h,body:c,$el:$("#churnedPerDayCode-table")}),r.chart({id:"churnedPerDayCode-chart",x:u,series:l}),s.head=h,s.body=c}})},!1)},renderLostUserAnalysChart:function(){var e=this.params.churnedParameterBean.analysType,n=this,s=$("#churnedPlayerAnalysisCode").tabs(function(){var o=!1;t.fetchLostUserAnalysNumList({$entity:n.params,$callback:function(t,u,f){var l="";switch(parseInt(e)){case 1:l=a.Player.Churned.lossLevel,o=!0;break;case 2:l=a.Player.Churned.userLifeCycle;break;case 3:l=a.GameCommon.paySum;break;case 4:l=a.GameCommon.payCount}var c=_.pluck(f,"item"),f=_.pluck(f,"value"),h=_.percent(f,3,1),p=[{name:l,data:f}];r.chartBar({id:"churnedPlayerAnalysisCode-chart",x:{left:c,right:h},series:p,pagination:o});var d=_.zip(c,f,h),v=[l,n.playerName,a.GameCommon.percentage];i.drawTable({head:v,body:d,$el:$("#churnedPlayerAnalysisCode-table")}),s.head=v,s.body=d}})})},churnedSelectClick:function(e){this.params.churnedParameterBean.dayType=parseInt($(e.currentTarget).val()),this.renderPerDayLostReturnChart(),this.renderLostUserAnalysChart()},userTypeSelectClick:function(e){this.playerName=$("#userTypeSelect option:selected").text(),this.params.churnedParameterBean.playerType=parseInt($(e.currentTarget).val()),this.renderPerDayLostReturnChart(),this.renderLostUserAnalysChart()},analyticalMethodsSelectClick:function(e){this.params.churnedParameterBean.analysType=parseInt($(e.currentTarget).val()),this.renderLostUserAnalysChart()},toLostFunnel:function(){require(["utils/urlUtil"],function(e){e.changeHashByParams("#page/player-lostFunnel_churned/")})},loading:function(){return'<div class="login"><img src="images/loading.gif" height="25px"></img> <br>'+a.GameCommon.loadingData+"</div>"}});return f}),define("models/player/Conversion",["models/BaseModel"],function(e){var t=[{name:"fetchNewChargeUserNumList",url:"/v1/convertion/newChargeUserNumList"},{name:"fetchChargeUserNumList",url:"/v1/convertion/chargeUserNumList"},{name:"fetchTotalPaidRate",url:"/v1/convertion/fetchTotalPaidRate"},{name:"fetchFirstDayChargeRateAndNum",url:"/v1/convertion/fetchFirstDayChargeRateAndNum"},{name:"fetchFirstWeekChargeRateAndNum",url:"/v1/convertion/fetchFirstWeekChargeRateAndNum"},{name:"fetchFirstMonthChargeRateAndNum",url:"/v1/convertion/fetchFirstMonthChargeRateAndNum"},{name:"fetchFirstChargeTotalTimeList",url:"/v1/convertion/firstChargeTotalTimeList"},{name:"fetchFirstChargeTotalDayNumList",url:"/v1/convertion/firstChargeTotalDayNumList"},{name:"fetchFirstChargeLevelList",url:"/v1/convertion/firstChargeLevelList"}];return e.init(t)}),define("text!templates/player/convertion.html",[],function(){return'<div id="convertion">\r		<div class="content r">\r			<div class="boxmax">\r				<div class="maintop">\r					<div id="datePicker" class="relative l" style=" z-index:99"></div>\r					<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r					<div class="clear"></div>\r					<div id="showSelectedPartners" class="Editor hide Filter" >\r						<div id="selectVersion"></div>\r					</div>\r				</div>\r				<div id="chargeConvertionCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.payConversion%></strong>\r					</div>\r					<div class="textbox">\r						<div role="tabbar" class="box_top">\r							<a class="tab hover" data-tab="newPayPlayer"><%=Player.Convertion.newIncreasedPayPlayer%></a>\r							<a class="tab" data-tab="totalPayPlayer"><%=Player.Convertion.accumulativePayPlayer%></a>\r							<a class="tab" data-tab="payRate"><%=Player.Convertion.totalPayRate%></a>\r							<div class="info r" id="sumDiv">\r		                		SUM：<font id="chart-sum"></font>\r		                	</div>\r						</div>\r						<div role="chart">\r							<div id="chargeConvertionCode-chart" class="picbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r						<div role="table">\r							<div id="chargeConvertionCode-table" class="picbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r					</div>\r				</div>\r			</div>\r			\r			<div class="boxmax">\r				<div id="newPlayerChargeCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.newPalyerPay%></strong>\r					</div>\r					<div class="textbox">\r						<div role="tabbar" class="box_top">\r							<a class="tab hover" data-tab="dailyPayRate"><%=Player.Convertion.firstDayPayRate%></a>\r							<a class="tab" data-tab="weekPayRate"><%=Player.Convertion.firstWeekPayRate%></a>\r							<a class="tab" data-tab="monthPayRate"><%=Player.Convertion.firstMonthPayRate%></a>\r						</div>\r						<div role="chart">\r							<div id="newPlayerChargeCode-chart" class="picbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r						<div role="table">\r							<div id="newPlayerChargeCode-table" class="picbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r					</div>\r				</div>\r			</div>\r		</div>\r			\r		<ul id="Esbox" class="Esbox">\r			<li class="contentbox l">\r				<div id="playerFirstBuyPeriodCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.playerFirstPayPeriod%></strong>\r					</div>\r					<div class="textbox">\r						<div role="tabbar" class="box_top">\r							<a class="tab hover" data-tab="gameDays"><%=Player.Convertion.gamingDays%></a>\r							<a class="tab" data-tab="accumulGameTime"><font><%=Player.Convertion.accumulativeGamingTime%></font></a>\r							<div class="info r">\r			                	AVG | MD：<font id="avgCycle"></font>| <font id="middleCycle"></font>\r			                </div>\r						</div>\r						<div role="chart">\r							<div id="playerFirstBuyPeriodCode-chart" class="minpicbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r						<div role="table">\r							<div id="playerFirstBuyPeriodCode-table" class="minpicbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r					</div>\r				</div>\r			</li>\r			<li class="contentbox r" >\r				<div id="playerFirstBuyLevelCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Convertion.playerFirstPayLevel%></strong>\r					</div>\r					<div class="textbox">\r						<div class="box_top">\r							<div class="info r">\r			                	AVG | MD：<font id="avgLevel"></font>| <font id="middleLevel"></font>\r			                </div>\r						</div>\r						<div role="chart">\r							<div id="playerFirstBuyLevelCode-chart" class="minpicbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r						<div role="table">\r							<div id="playerFirstBuyLevelCode-table" class="minpicbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r					</div>\r				</div>\r			</li>\r		</ul>\r</div>\r'}),define("views/player/ConvertionView",["backbone","models/player/Conversion","models/Constant","views/public/DatePicker","views/public/SelectView","utils/HighchartUtil","utils/dataTableUtil","utils/RegexUtil","text!templates/player/convertion.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f){var l=e.View.extend({el:"#container",events:{},initialize:function(){$("#container").html(_.template(a,f)),new r({el:"#datePicker"}),new i({el:"#selectChoose"}),this.render()},render:function(){return this.renderConvertionPayIntoChart(),this.renderNewPlayerPayChart(),this.renderFirstChargeCycleChart(),this.renderFirstChargeLevelChart(),this},renderConvertionPayIntoChart:function(){var e=_.clone(Params);e.player={userType:"newPlayer"};var n=$("#chargeConvertionCode").tabs(function(r){var i,a,l=!1,c="";switch(r){case"newPayPlayer":i="fetchNewChargeUserNumList",a=f.Player.Convertion.newIncreasedPayPlayer;break;case"totalPayPlayer":i="fetchChargeUserNumList",a=f.Player.Convertion.accumulativePayPlayer;break;case"payRate":i="fetchTotalPaidRate",a=f.Player.Convertion.totalPayRate,c="^%",l=!0}r==="newPayPlayer"?$("#sumDiv").show():$("#sumDiv").hide(),t[i]({$entity:e,$callback:function(e,t,r){var h=_.pluck(r,"item"),r=_.pluck(r,"value"),p=[{name:a+c,data:r}];$("#chart-sum").html(u.formatDigit(_.sum(r))+c),s.chart({id:"chargeConvertionCode-chart",x:h,series:p,yPercent:l});var d=null,v=[f.GameCommon.date,a];i==="fetchTotalPaidRate"?d=_.zip(h,_.map(r,function(e){return e+"%"})):d=_.zip(h,r),o.drawTable({head:v,body:d,$el:$("#chargeConvertionCode-table")}),n.head=v,n.body=d}})})},renderNewPlayerPayChart:function(){var e=_.clone(Params);e.player={userType:"newPlayer"};var n=$("#newPlayerChargeCode").tabs(function(r){var i,u;switch(r){case"dailyPayRate":i="fetchFirstDayChargeRateAndNum",u=f.Player.Convertion.firstDayPay;break;case"weekPayRate":i="fetchFirstWeekChargeRateAndNum",u=f.Player.Convertion.firstWeekPay;break;case"monthPayRate":i="fetchFirstMonthChargeRateAndNum",u=f.Player.Convertion.firstMonthPay}t[i]({$entity:e,$callback:function(e,t,r){var i=r.rate,a=r.num,l=_.pluck(i,"item"),c=_.pluck(a,"value"),h=_.pluck(i,"value"),p=[{name:u+f.GameCommon.number,data:c,type:"column",yAxis:1},{name:u+f.GameCommon.rate+"^%",data:h,type:"area"}];s.chart({id:"newPlayerChargeCode-chart",x:l,series:p,yPercent:!0});var d=_.zip(l,c,_.map(h,function(e){return e+"%"})),v=[f.GameCommon.date,u+f.GameCommon.number,u+f.GameCommon.rate];o.drawTable({head:v,body:d,$el:$("#newPlayerChargeCode-table")}),n.head=v,n.body=d}})})},renderFirstChargeCycleChart:function(){var e,n,r=this,i=$("#playerFirstBuyPeriodCode").tabs(function(u){switch(u){case"gameDays":e="fetchFirstChargeTotalDayNumList",n=f.Player.Convertion.gamingDays;break;case"accumulGameTime":e="fetchFirstChargeTotalTimeList",n=f.Player.Convertion.accumulativeGamingTime}t[e]({$entity:Params,$callback:function(e,t,u){var a=_.pluck(u.processed,"item"),l=_.pluck(u.processed,"value"),c=[{name:n,data:l}],h=u.all;percent=_.percent(l,3,1);var p="";n==f.Player.Convertion.gamingDays?($("#avgCycle").html(_.avg(h)+f.GameCommon._day),$("#middleCycle").html(_.median(h)+f.GameCommon._day)):n==f.Player.Convertion.accumulativeGamingTime&&($("#avgCycle").html(r.handleMinute(_.avg(h))),$("#middleCycle").html(r.handleMinute(_.median(h))));var d=_.zip(a,l,percent),v=[n,f.GameCommon.payPlayer,f.GameCommon.percentage];o.drawTable({head:v,body:d,$el:$("#playerFirstBuyPeriodCode-table")}),s.chartBar({id:"playerFirstBuyPeriodCode-chart",x:{left:a,right:percent},series:c}),i.head=v,i.body=d}})})},renderFirstChargeLevelChart:function(){var e=$("#playerFirstBuyLevelCode").tabs(function(){t.fetchFirstChargeLevelList({$entity:Params,$callback:function(t,n,r){r=_.sortBy(r,function(e){return-e.value}),r&&r.length>10&&(r=r.slice(0,10));var i=_.pluck(r,"item"),u=_.pluck(r,"value"),a=[{name:f.Player.Convertion.playerFirstPayLevel,data:u}],l=_.percent(u,3,1);$("#avgLevel").html(_.avg(u)),$("#middleLevel").html(_.median(u));var c=_.zip(i,u,l),h=[f.Player.Convertion.playerFirstPayLevel,f.GameCommon.payPlayer,f.GameCommon.percentage];o.drawTable({head:h,body:c,$el:$("#playerFirstBuyLevelCode-table")}),s.chartBar({id:"playerFirstBuyLevelCode-chart",x:{left:i,right:l},series:a,pagination:!0}),e.head=h,e.body=c}})})},handleMinute:function(e){return e<=60?e+f.Summary.Summary.minute:e<=1440?(e/60).toFixed(1)+f.GameCommon.hour:(e/1440).toFixed(1)+f.GameCommon._day}});return l}),define("text!templates/player/retention.html",[],function(){return'<div id="retention">\r		<div class="content r">\r			<div class="boxmax">\r				<div class="maintop">\r					<div class="l margin_right" id="tagb">\r						<a class="tagbut tagbutL hover"><%=GameCommon.retain%></a>\r						<a class="tagbut tagbutR" id="customRetentionBtn"><%=Player.Retention.customRetain%></a>\r					</div>\r					<div id="datePicker" class="relative l" style=" z-index:99"></div>\r					<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r					<div class="clear"></div>\r					<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r				</div>\r				<div id="retentionCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Retention.retainRate%></strong>\r					</div>\r					<div class="textbox">\r						<div role="chart">\r							<div id="retentionCode-chart" class="picbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r						<div role="table">\r							<div id="retentionCode-table" class="picbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r					</div>\r				</div>\r				<div class="clear"></div>\r			</div>\r\r			<div class="box">\r				<div class="contentbox l" style="width:32%">\r					<div class="title">\r						<strong class="l"><%=Player.Retention.morrowRetain%></strong>\r					</div>\r                    <table cellspacing="0" cellpadding="0" border="0" width="100%"	class="table_style2">\r                        <tbody>\r                            <tr>\r                                <td class="left border_none">AVG</td>\r                                <td class="center border_none"><strong><font id="avgday01"></font><font>%</font></strong>\r                                </td>\r                            </tr>\r                        </tbody>\r                    </table>\r				</div>\r\r				<div class="contentbox r" style="width:32%">\r					<div class="title">\r						<strong class="l">30<%=Player.Retention.dayRetain%></strong>\r					</div>\r                    <table cellspacing="0" cellpadding="0" border="0" width="100%"\r                        class="table_style2">\r                        <tbody>\r                            <tr>\r                                <td class="left border_none">AVG</td>\r                                <td class="center border_none"><strong><font id="avgday30"></font><font>%</font></strong>\r                                </td>\r                            </tr>\r                        </tbody>\r                    </table>\r				</div>\r\r				<div class="contentbox" style="width:32%; margin:0 auto">\r					<div class="title">\r						<strong class="l">7<%=Player.Retention.dayRetain%></strong>\r					</div>\r                    <table cellspacing="0" cellpadding="0" border="0" width="100%"\r                        class="table_style2">\r                        <tbody>\r                            <tr>\r                                <td class="left border_none">AVG</td>\r                                <td class="center border_none"><strong><font id="avgday07"></font><font>%</font></strong>\r                                </td>\r                            </tr>\r                        </tbody>\r                    </table>\r				</div>\r			</div>\r			<div class="boxmax">\r				<div id="retainedUserAnallyticCode">\r					<div class="title"  role="title">\r						<strong class="l"><%=Player.Retention.retainUserAnalysis%></strong>\r						<div class="buttonDiv l">\r							<div class="l selectlble"><%=Player.Retention.userGroup%>：</div>\r							<select id="retainedUsersSelect" class="true">\r								<option selected="selected"  value="1">Day1 <%=Player.Retention.retainUser%></option>\r								<option value="7">Day7 <%=Player.Retention.retainUser%></option>\r								<option value="30">Day30 <%=Player.Retention.retainUser%></option>\r							</select>\r						</div>\r						<div class="buttonDiv l">\r							<div class="l selectlble"><%=Player.Churned.analysisType%>：</div>\r							<select id="analyticalMethodsSelect" class="true">\r								<option  selected="selected" value="firstDayLevel"><%=Player.Retention.newIncreasedDayLevel%></option>\r								<option value="logintimes"><%=Player.Retention.newIncreasedDayGameTimes%></option>\r								<option value="firstDayUseTime"><%=Player.Retention.newIncreasedDayGamingTime%></option>\r								<option value="isFirstDayCharge"><%=Player.Retention.newIncreasedDayWhetherPay%></option>\r							    <option value="sex"><%=GameCommon.player%><%=GameCommon.sex%></option>\r								<option value="age"><%=GameCommon.player%><%=GameCommon.age%></option>\r							</select>\r						</div>\r					</div>\r					<div class="textbox">\r						<div role="chart">\r							<div id="retainedUserAnallyticCode-chart" class="minpicbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r						<div role="table">\r							<div id="retainedUserAnallyticCode-table" class="minpicbox"></div>\r							<div class="after">\r				        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r				        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r				        	</div>\r						</div>\r					</div>\r				</div>\r			</div>\r		</div>\r		<div class="clear"></div>\r	</div>\r'}),define("views/player/RetentionView",["backbone","models/player/Retention","models/Constant","utils/HighchartUtil","utils/urlUtil","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","text!templates/player/retention.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f){var l=e.View.extend({el:"#container",events:{"change #retainedUsersSelect":"retainedUsersSelectClick","change #analyticalMethodsSelect":"analyticalMethodsSelectClick","click #customRetentionBtn":"toCustomRetention"},initialize:function(){$("#container").html(_.template(a,f)),new o({el:"#datePicker"}),new u({el:"#selectChoose"}),this.$retainedUsersSelect=$("#retainedUsersSelect"),this.$analyticalMethodsSelect=$("#analyticalMethodsSelect"),this.$retainedUsersSelect.sSelect(),this.$analyticalMethodsSelect.sSelect(),this.keepUserBean={keepDay:1},this.groupBy="firstDayLevel",this.render()},render:function(){this.retentionRateChart(),this.renderRetentionAnalysChart()},retainedUsersSelectClick:function(){this.keepUserBean.keepDay=parseInt(this.$retainedUsersSelect.val()),this.renderRetentionAnalysChart()},analyticalMethodsSelectClick:function(){this.groupBy=this.$analyticalMethodsSelect.val(),this.renderRetentionAnalysChart()},retentionRateChart:function(){var e=_.clone(Params),n=$("#retentionCode").tabs(function(){t.fetchDay1Day7Day30Retention({$entity:e,$callback:function(e,t,i){var o=_.pluck(i.day01,"item"),u=_.pluck(i.day01,"value"),a=_.pluck(i.day07,"value"),l=_.pluck(i.day30,"value"),c=_.avg(u),h=_.avg(a),p=_.avg(l),d=[{name:f.Summary.Summary.morrowRetainRate+"^%",data:u},{name:f.Summary.Summary.sevenDaysRetainRate+"^%",data:a},{name:f.Summary.Summary.thiryDaysRetainTate+"^%",data:l}];$("#avgday01").html(c),$("#avgday07").html(h),$("#avgday30").html(p),r.chart({id:"retentionCode-chart",x:o,series:d,legend:!0,yPercent:!0});var v=_.zip(o,_.map(u,function(e){return e+"%"}),_.map(a,function(e){return e+"%"}),_.map(l,function(e){return e+"%"})),m=[f.GameCommon.date,f.Summary.Summary.morrowRetainRate,f.Summary.Summary.sevenDaysRetainRate,f.Summary.Summary.thiryDaysRetainTate];s.drawTable({head:m,body:v,$el:$("#retentionCode-table")}),n.head=m,n.body=v}})})},renderRetentionAnalysChart:function(){var e=_.clone(Params);e.keepUserBean=this.keepUserBean,e.groupBy=this.groupBy;var n=!1;e.groupBy==="firstDayLevel"&&(n=!0);var i=$("#analyticalMethodsSelect option:selected").text(),o=$("#retainedUsersSelect option:selected").text(),u=$("#retainedUserAnallyticCode").tabs(function(){t.fetchRetentionUserAnalys({$entity:e,$callback:function(e,t,a){var l=_.pluck(a,"item"),c=_.pluck(a,"value"),h=_.percent(c,3,1),p=_.zip(l,c,h),d=[i,o,f.GameCommon.percentage];s.drawTable({head:d,body:p,$el:$("#retainedUserAnallyticCode-table")}),r.chartBar({id:"retainedUserAnallyticCode-chart",x:{left:l,right:h},series:[{name:o+"<br/>"+i,data:c}],pagination:n}),u.head=d,u.body=p}})})},toCustomRetention:function(){i.changeHashByParams("#page/player-customRetention_retention/")}});return l}),define("models/player/CustomRetention",["models/BaseModel"],function(e){var t=[{name:"fetchCustomRetentionList",url:"/v1/customRetention/customRetentionList"},{name:"fetchMaxUserNum",url:"/v1/customRetention/maxUserNum"},{name:"fetchYesterdayPerHourUserNumList",url:"/v1/customRetention/yesterdayPerHourUserNumList"},{name:"fetchTodayPerHourUserNumList",url:"/v1/customRetention/todayPerHourUserNumList"},{name:"fetchRecentPlayerList",url:"/v1/customRetention/recentPlayerList"},{name:"fetchACUList",url:"/v1/customRetention/acuList"},{name:"fetchPCUList",url:"/v1/customRetention/pcuList"}];return e.init(t)}),define("text!templates/player/customRetention.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div class="l margin_right">\r                <a class="tagbut tagbutL" id="retentionBtn"><%=GameCommon.retain%></a>\r                <a class="tagbut tagbutR hover"><%=Player.CustomRetention.customRetain %></a>\r			</div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r        <div id="playerCustomRetentionCustomRetain">\r            <div class="title" role="title">\r                <strong class="l"><%=Player.CustomRetention.customRetain %></strong>\r                <div id="ayalyseParticle" class="buttonDiv l">\r                    <a data="day" class="but l butL hover"><%=GameCommon.day %></a>\r                    <a data="week" class="but l"><%=GameCommon.week %></a>\r                    <a data="month" class="but l butR"><%=GameCommon.month %></a>\r                </div>\r            </div>\r        </div>\r\r		<div class="tablebox">\r			<div class="Condition after">\r				<ul class="l customul">\r                    <li class="buttonDiv">\r                        <label class="l selectlble">Players：</label>\r                        <input type="text" id="startTime" name="startTime" class="Timeinput l" />\r                        <label class="l selectlble"><%=GameCommon.to %></label>\r                        <input type="text" id="endTime"	name="endTime" class="Timeinput l" />\r                        <label class="l selectlble"><%=Player.CustomRetention.during %></label>\r                        <select id="userSelect" class="true">\r                            <option value="new"><%=Player.CustomRetention.newIncreasedUser %></option>\r                            <option value="active"><%=Player.CustomRetention.activeUser %></option>\r                        </select>\r                    </li>\r                    <li class="buttonDiv">\r                        <label class="l selectlble"><%=Player.CustomRetention.retainAction%></label>\r                        <select id="activitySelect" class="true">\r                            <option><%=Player.CustomRetention.startApp %></option>\r                        </select>\r                        <select id="activityResultSelect" class="true">\r                            <option value="1"><%=Player.CustomRetention.atLeast%>1<%=GameCommon.times%></option>\r                            <option value="2"><%=Player.CustomRetention.atLeast %>2<%=GameCommon.times%></option>\r                            <option value="3"><%=Player.CustomRetention.atLeast %>3<%=GameCommon.times%></option>\r                        </select>\r                        <label class="l selectlble"><%=Player.CustomRetention.asRetainUser %></label>\r                    </li>\r                </ul>\r				<div class="custombutton l"><a id="searchBtn" class="Confirm" ><%=Player.CustomRetention.query %></a></div>\r			</div>\r			<div id="dataTable">\r				\r			</div>\r		</div>\r	</div>\r	\r</div>'}),define("text!templates/player/retention-custom-table.html",[],function(){return'<% _.each(data,function(item,index){%>\n	<tr class=<%= index%2 == 0 ? "odd" : "even"%>>\n	<%_.each(item,function(value){%>\n		<td><%= value%></td>\n	<%});%>\n	</tr>\n<%}); %>\n'}),define("text!templates/player/retention-day.html",[],function(){return'<table id="grid_day" class="table_style1 bctable" height="100%" width="100%" cellspacing="0" cellpadding="0" border="0">\r	<thead>\r    <tr>\r		<th rowspan="2" width="20%" style="line-height:60px;"><%=Player.CustomRetention.firstUseDay %></th>\r		<th rowspan="2" width="10%" style="line-height:60px;" title="<%=Player.CustomRetention.userCount %>"><%=Player.CustomRetention.userCount %></th>\r		<th colspan="9"  style="height:28px; font-size:12px; line-height:28px;"><%=Player.CustomRetention.nDaysReserveUser %></th>\r		</tr>\r		<tr class="yhbl">\r		<th>+1<%=GameCommon.day%>\r		</th>\r		<th>+2<%=GameCommon.day%>\r		</th>\r		<th>+3<%=GameCommon.day%>\r		</th>\r		<th>+4<%=GameCommon.day%>\r		</th>\r		<th>+5<%=GameCommon.day%>\r		</th>\r		<th>+6<%=GameCommon.day%>\r		</th>\r		<th>+7<%=GameCommon.day%>\r		</th>\r		<th>+8<%=GameCommon.day%>\r		</th>\r		<th>+9<%=GameCommon.day%>\r		</th>\r		</tr>\r	</thead>\r	<tbody id="customTableData_day">\r\r	</tbody>\r</table>'}),define("text!templates/player/retention-week.html",[],function(){return'<table id="grid_week" class="table_style1 bctable" height="100%" width="100%" cellspacing="0" cellpadding="0" border="0">\r	<thead>\r		<tr>\r		<th rowspan="2" width="20%" style="line-height:60px;"><%=Player.CustomRetention.firstUseWeek%></th>\r		<th rowspan="2" width="10%" style="line-height:60px;" title="<%=Player.CustomRetention.userCount%>"><%=Player.CustomRetention.userCount%></th>\r		<th colspan="8" style="height:28px; font-size:12px; line-height:28px;"><%=Player.CustomRetention.nWeekReserveUser%></th>\r		</tr>\r		<tr class="yhbl">\r		<th>+1<%=GameCommon.week%>\r		</th>\r		<th>+2<%=GameCommon.week%>\r		</th>\r		<th>+3<%=GameCommon.week%>\r		</th>\r		<th>+4<%=GameCommon.week%>\r		</th>\r		<th>+5<%=GameCommon.week%>\r		</th>\r		<th>+6<%=GameCommon.week%>\r		</th>\r		<th>+7<%=GameCommon.week%>\r		</th>\r		<th>+8<%=GameCommon.week%>\r		</th>\r		</tr>\r	</thead>\r	<tbody id="customTableData_week">\r	</tbody>\r</table>'}),define("text!templates/player/retention-month.html",[],function(){return'<table id="grid_month" class="table_style1 bctable" height="100%" width="100%" cellspacing="0" cellpadding="0" border="0">\r	<thead>\r		<tr>\r		<th rowspan="2" width="20%" style="line-height:60px;"><%=Player.CustomRetention.firstUseMonth%></th>\r		<th rowspan="2" width="10%" style="line-height:60px;"title="<%=Player.CustomRetention.userCount%>"><%=Player.CustomRetention.userCount%></th>\r		<th colspan="6"  style="height:28px; font-size:12px; line-height:28px;"><%=Player.CustomRetention.nMonthReserveUser%></th>\r		</tr>\r		<tr class="yhbl">\r		<th>+1<%=GameCommon.month%>\r		</th>\r		<th>+2<%=GameCommon.month%>\r		</th>\r		<th>+3<%=GameCommon.month%>\r		</th>\r		<th>+4<%=GameCommon.month%>\r		</th>\r		<th>+5<%=GameCommon.month%>\r		</th>\r		<th>+6<%=GameCommon.month%>\r		</th>\r		</tr>\r	</thead>\r	<tbody id="customTableData_month">\r\r	</tbody>\r</table>'}),define("text!templates/public/loading.html",[],function(){return'<div class="login"><img src="images/loading.gif" height="25px"></img> <br><%=GameCommon.loadingData%></div>'}),define("views/player/CustomRetentionView",["backbone","models/player/CustomRetention","views/public/SelectView","utils/HighchartUtil","utils/urlUtil","utils/excelDataUtil","text!templates/player/customRetention.html","text!templates/player/retention-custom-table.html","text!templates/player/retention-day.html","text!templates/player/retention-week.html","text!templates/player/retention-month.html","text!templates/public/loading.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=e.View.extend({el:"#container",events:{"click #ayalyseParticle>a":"chooseAyalyseParticle","click #searchBtn":"search","click #retentionBtn":"toRetention"},initialize:function(){$("#container").html(_.template(o,p)),new n({el:"#selectChoose"}),this.$userSelect=$("#userSelect"),this.$activitySelect=$("#activitySelect"),this.$activityResultSelect=$("#activityResultSelect"),this.$startTime=$("#startTime"),this.$endTime=$("#endTime"),this.$dataTable=$("#dataTable"),this.$userSelect.sSelect(),this.$activitySelect.sSelect(),this.$activityResultSelect.sSelect(),this.timeFormat="YYYY-MM-DD",this.startTime=(new Date).add({days:-10}).toFormat("YYYY-MM-DD"),Date.compare(Params.productRegistTime,this.startTime)==1&&(this.startTime=Params.productRegistTime),this.endTime=(new Date).add({days:-1}).toFormat("YYYY-MM-DD"),this.keepUserBean={userType:"new",minLoginTimes:1,ayalyseParticle:"day"},this.$startTime.val(this.startTime),this.$endTime.val(this.endTime),this.$startTime.datepicker({minDate:new Date(this.registTime),maxDate:new Date(this.endTime),dateFormat:"yy-mm-dd"}),this.$endTime.datepicker({minDate:new Date(this.registTime),maxDate:new Date(this.endTime),dateFormat:"yy-mm-dd"}),this.render()},render:function(){return this.renderTable(),this},renderTable:function(){$("#playerCustomRetentionCustomRetain").tabs({indicator:!0});var e="day";switch(this.keepUserBean.ayalyseParticle){case"day":e=a;break;case"week":e=f;break;case"month":e=l}this.$dataTable.html(_.template(e,p));var n=_.clone(Params);n.startTime=parseInt(this.formatDate(this.startTime)),n.endTime=parseInt(this.formatDate(this.endTime)),n.keepUserBean=this.keepUserBean,t.fetchCustomRetentionList({$entity:n,$callback:function(e,t,r){var i=_.template(u,{data:r});$('#playerCustomRetentionCustomRetain div[role="title"] a[role="excel"]').click(function(){var e=p.Level.LevelDetailed.gradeDetail+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",t=$("<table></table>"),r=$("<thead></thead>"),i=$("<tbody></tbody>");i.append($("#customTableData_"+n.keepUserBean.ayalyseParticle).html()),t.append(r).append(i);var o=s.tableToJson(t[0]),u=_.template(h,{excelName:e,excelArray:o});$("body").append(u),$("#excelExportForm").submit(),$("#excelExportForm").remove()}),$("#customTableData_"+n.keepUserBean.ayalyseParticle).html(i)}})},chooseAyalyseParticle:function(e){var t=$(e.currentTarget);$("#ayalyseParticle a").removeClass("hover"),t.addClass("hover"),this.keepUserBean.ayalyseParticle=t.attr("data"),this.renderTable()},search:function(){var e=this.$startTime.val(),t=this.$endTime.val();if(!e||!t){alert(p.Player.CustomRetention.dateNotEmpty);return}if(Date.compare(e,t)==1){alert(p.Player.CustomRetention.dateIsWrong);return}this.startTime=e,this.endTime=t,this.keepUserBean.userType=this.$userSelect.val(),this.keepUserBean.minLoginTimes=parseInt(this.$activityResultSelect.val()),this.renderTable()},formatDate:function(e){return e.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3")},toRetention:function(){i.changeHashByParams("#page/player-retention/")}});return d}),define("models/player/LostFunnel",["models/BaseModel"],function(e){var t=[{name:"fetchLostFunnelDataList",url:"/v1/lostFunnel/lostfunneldata"}];return e.init(t)}),define("text!templates/player/lostFunnel.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div class="l margin_right" id="tagb">\r                <a class="tagbut tagbutL" id="toChurnedBtn"><%=Player.LostFunnel.dailyLoss%></a>\r                <a class="tagbut tagbutR hover"><%=Player.LostFunnel.lossFunnel%></a>\r			</div>\r			\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="playerLostFunnelLossFunnel">\r			<div class="title"   role="title">\r				<strong class="l"><%=Player.LostFunnel.lossFunnel%></strong>\r				<div id="dayTypeSelect" class="buttonDiv l">\r					<a class="hover but butL l" data="0" ><%=Player.LostFunnel.analysisSomeDay%></a>\r					<a data="1"class="but butR l"  ><%=Player.LostFunnel.analysisSomeWeek%></a>\r				</div>\r			</div>\r		</div>\r		<div class="textbox">\r			<div class="Condition after">\r            	<ul class="Condition-Top">\r                    <li class="buttonDiv">\r                       <label class="l selectlble"><%=Player.LostFunnel.duringInspectAnalysis%></label>\r                        <input id="datePicker" type="text" class="Timeinput l"/>\r                        <select id="weekSelect" class="true" style="display: none;">\r                            <option value="1" selected="selected"><%=Player.LostFunnel.one%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="2"><%=Player.LostFunnel.two%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="3"><%=Player.LostFunnel.three%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="4"><%=Player.LostFunnel.four%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="5"><%=Player.LostFunnel.five%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="6"><%=Player.LostFunnel.six%><%=Player.LostFunnel.beforeWeek%></option>\r                            <option value="7"><%=Player.LostFunnel.seven%><%=Player.LostFunnel.beforeWeek%></option>\r                        </select>\r                        <label class="l selectlble"><%=Player.LostFunnel.during%></label>\r                        <select id="userTypeSelect" class="true">\r                            <option value="0" selected="selected"><%=Player.LostFunnel.newIncreasedUser%></option>\r                            <option value="1"><%=Player.LostFunnel.activeUser%></option>\r                            <option value="2"><%=Player.LostFunnel.activePayUser%></option>\r                        </select>\r                        <label class="l selectlble"><%=Player.LostFunnel.lossCourse%></label>\r                        <a id="searchBtn" class="Confirm l"><%=Player.LostFunnel.updateData%></a>\r                    </li>\r                </ul>\r            </div>\r			<div class="table" id="tagContentthrday0">\r				<div id="lostFunelChart" class="picbox">\r					<div class="login">\r						<img src="images/loading.gif" height="25px"></img> <br>\r						<%=GameCommon.loadingData%>\r					</div>\r				</div>\r			</div>\r		</div>	\r	</div>\r</div>'}),define("views/player/LostFunnelView",["backbone","models/player/LostFunnel","utils/HighchartUtil","utils/urlUtil","views/public/SelectView","text!templates/player/lostFunnel.html","i18n!nls/gameI18N","jquery.select","jquery.datepicker"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"#container",events:{"click #searchBtn":"searchBtnClick","click #dayTypeSelect > a":"dayTypeSelectClick","click #toChurnedBtn":"toChurned"},initialize:function(){$("#container").html(_.template(s,o)),new i({el:"#selectChoose"}),$("#userTypeSelect").sSelect(),$("#weekSelect").sSelect();var e=(new Date).add({days:-6}).toFormat("YYYY-MM-DD");this.registTime=Params.productRegistTime,this.startTime=Date.compare(this.registTime,e)==1?this.registTime:e,this.endTime=(new Date).add({days:-1}).toFormat("YYYY-MM-DD"),this.playerType=$("#userTypeSelect").val(),this.dayType="0",this.weekNum=$("#weekSelect").val(),this.weekStartTime=(new Date).add({days:-(7*this.weekNum)-7}).toFormat("YYYY-MM-DD"),this.weekEndTime=(new Date).add({days:-(7*this.weekNum)}).toFormat("YYYY-MM-DD"),$("#datePicker").val(this.startTime),$("#datePicker").datepicker({minDate:new Date(this.registTime),maxDate:new Date(this.endTime),dateFormat:"yy-mm-dd"}),this.render()},render:function(){this.lostFunelChart()},dayTypeSelectClick:function(e){this.dayType=$(e.currentTarget).attr("data"),$("#dayTypeSelect > a").removeClass("hover"),$(e.currentTarget).addClass("hover"),this.dayType=="0"?($("#dropdown_weekSelect").hide(),$("#datePicker").show()):($("#datePicker").hide(),$("#weekSelect").show(),$("#dropdown_weekSelect").show(),$("#weekSelect").sSelect()),this.lostFunelChart()},timeSelectClick:function(e){},searchBtnClick:function(e){this.playerType=$("#userTypeSelect").val(),this.dayType=="0"?this.startTime=$("#datePicker").val():this.weekNum=$("#weekSelect").val(),this.lostFunelChart()},lostFunelChart:function(){$("#playerLostFunnelLossFunnel").tabs({indicator:!0});var e=_.clone(Params);this.dayType=="0"?(e.startTime=parseInt(this.formatDate(this.startTime)),e.endTime=parseInt(this.formatDate(this.startTime))):e.timeflag=this.weekNum,e.item=this.dayType,e.churnedParameterBean={playerType:this.playerType},t.fetchLostFunnelDataList({$entity:e,$callback:function(e,t,n){var r=0,i=_.pluck(n,"value"),s=i[0],u=[],a=0;for(var f=0;f<i.length;f++)f==0?(a=i[f],u[f]=i[f]):(a!=0&&i[f]!=0?u[f]=Math.round(i[f]/a*1e3)/10:u[f]="0.0",a=i[f]);var l=u,c=i,h=i,p=i,d=_.pluck(n,"item"),v=new Highcharts.Chart({chart:{renderTo:"lostFunelChart",zoomType:"xy",backgroundColor:"#fff"},title:{text:""},xAxis:{categories:d},yAxis:{title:{text:""}},legend:{enabled:!1},tooltip:{formatter:function(){return""+this.x+": "+this.y}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}},area:{marker:{enabled:!0,states:{hover:{enabled:!0}}},dataLabels:{enabled:!0,formatter:function(){if(s!=0){var e=100;return this.y<s&&(e=Math.round(this.y/s*1e3)/10),e==0?"0.0"+o.Player.LostFunnel._rateUser:e+o.Player.LostFunnel._rateUser}}}},line:{dataLabels:{enabled:!0,x:-56,y:20,formatter:function(){var e=l[r];return r+=1,e?r==1?"":e+"%":""}},lineWidth:0,marker:{enabled:!1}}},series:[{name:o.Player.LostFunnel.visittimes,type:"column",data:p},{name:o.Player.LostFunnel.line,color:"#6DC5FD",type:"line",data:c},{name:o.Player.LostFunnel.funnel,color:"#6DC5FD",type:"area",data:h}]})}})},toChurned:function(){r.changeHashByParams("#page/player-churned/")},formatDate:function(e){return e.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3")}});return u});var Mustache;(function(e){typeof module!="undefined"&&module.exports?module.exports=e:typeof define=="function"?define("mustache",e):Mustache=e})(function(){function u(e,t){return RegExp.prototype.test.call(e,t)}function a(e){return!u(r,e)}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function h(e){return String(e).replace(/[&<>"'\/]/g,function(e){return c[e]})}function p(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.parent=t,this.clearCache()}function v(){this.clearCache()}function m(e){var t=e[3],n=t,r;while((r=e[4])&&r.length)e=r[r.length-1],n=e[3];return[t,n]}function g(e){function n(e,n,r){if(!t[e]){var i=g(n);t[e]=function(e,t){return i(e,t,r)}}return t[e]}var t={};return function(t,r,i){var s="",o,u;for(var a=0,f=e.length;a<f;++a){o=e[a];switch(o[0]){case"#":u=i.slice.apply(i,m(o)),s+=t._section(o[1],r,u,n(a,o[4],i));break;case"^":s+=t._inverted(o[1],r,n(a,o[4],i));break;case">":s+=t._partial(o[1],r);break;case"&":s+=t._name(o[1],r);break;case"name":s+=t._escaped(o[1],r);break;case"text":s+=o[1]}}return s}}function y(e){var t=[],n=t,r=[],i,s;for(var o=0;o<e.length;++o){i=e[o];switch(i[0]){case"#":case"^":i[4]=[],r.push(i),n.push(i),n=i[4];break;case"/":if(r.length===0)throw new Error("Unopened section: "+i[1]);s=r.pop();if(s[1]!==i[1])throw new Error("Unclosed section: "+s[1]);r.length>0?n=r[r.length-1][4]:n=t;break;default:n.push(i)}}s=r.pop();if(s)throw new Error("Unclosed section: "+s[1]);return t}function b(e){var t,n;for(var r=0;r<e.length;++r)t=e[r],n&&n[0]==="text"&&t[0]==="text"?(n[1]+=t[1],n[3]=t[3],e.splice(r--,1)):n=t}function w(e){if(e.length!==2)throw new Error("Invalid tags: "+e.join(" "));return[new RegExp(l(e[0])+"\\s*"),new RegExp("\\s*"+l(e[1]))]}var e={};e.name="mustache.js",e.version="0.7.0",e.tags=["{{","}}"],e.Scanner=p,e.Context=d,e.Writer=v;var t=/\s*/,n=/\s+/,r=/\S/,i=/\s*=/,s=/\s*\}/,o=/#|\^|\/|>|\{|&|=|!/,f=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.escape=h,p.prototype.eos=function(){return this.tail===""},p.prototype.scan=function(e){var t=this.tail.match(e);return t&&t.index===0?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},p.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},d.make=function(e){return e instanceof d?e:new d(e)},d.prototype.clearCache=function(){this._cache={}},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var t=this._cache[e];if(!t){if(e===".")t=this.view;else{var n=this;while(n){if(e.indexOf(".")>0){var r=e.split("."),i=0;t=n.view;while(t&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}}this._cache[e]=t}return typeof t=="function"&&(t=t.call(this.view)),t},v.prototype.clearCache=function(){this._cache={},this._partialCache={}},v.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r},v.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},v.prototype.compileTokens=function(e,t){var n=g(e),r=this;return function(e,i){if(i)if(typeof i=="function")r._loadPartial=i;else for(var s in i)r.compilePartial(s,i[s]);return n(r,d.make(e),t)}},v.prototype.render=function(e,t,n){return this.compile(e)(t,n)},v.prototype._section=function(e,t,n,r){var i=t.lookup(e);switch(typeof i){case"object":if(f(i)){var s="";for(var o=0,u=i.length;o<u;++o)s+=r(this,t.push(i[o]));return s}return i?r(this,t.push(i)):"";case"function":var a=this,l=function(e){return a.render(e,t)};return i.call(t.view,n,l)||"";default:if(i)return r(this,t)}return""},v.prototype._inverted=function(e,t,n){var r=t.lookup(e);return!r||f(r)&&r.length===0?n(this,t):""},v.prototype._partial=function(e,t){!(e in this._partialCache)&&this._loadPartial&&this.compilePartial(e,this._loadPartial(e));var n=this._partialCache[e];return n?n(t):""},v.prototype._name=function(e,t){var n=t.lookup(e);return typeof n=="function"&&(n=n.call(t.view)),n==null?"":String(n)},v.prototype._escaped=function(t,n){return e.escape(this._name(t,n))},e.parse=function(r,u){function g(){if(v&&!m)while(d.length)h.splice(d.pop(),1);else d=[];v=!1,m=!1}u=u||e.tags;var f=w(u),c=new p(r),h=[],d=[],v=!1,m=!1,E,S,x,T;while(!c.eos()){E=c.pos,x=c.scanUntil(f[0]);if(x)for(var N=0,C=x.length;N<C;++N)T=x.charAt(N),a(T)?d.push(h.length):m=!0,h.push(["text",T,E,E+1]),E+=1,T==="\n"&&g();E=c.pos;if(!c.scan(f[0]))break;v=!0,S=c.scan(o)||"name",c.scan(t);if(S==="=")x=c.scanUntil(i),c.scan(i),c.scanUntil(f[1]);else if(S==="{"){var k=new RegExp("\\s*"+l("}"+u[1]));x=c.scanUntil(k),c.scan(s),c.scanUntil(f[1]),S="&"}else x=c.scanUntil(f[1]);if(!c.scan(f[1]))throw new Error("Unclosed tag at "+c.pos);h.push([S,x,E,c.pos]);if(S==="name"||S==="{"||S==="&")m=!0;S==="="&&(u=x.split(n),f=w(u))}return b(h),y(h)};var E=new v;return e.clearCache=function(){return E.clearCache()},e.compile=function(e,t){return E.compile(e,t)},e.compilePartial=function(e,t,n){return E.compilePartial(e,t,n)},e.compileTokens=function(e,t){return E.compileTokens(e,t)},e.render=function(e,t,n){return E.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(typeof i!="function")return s;i(s)},e}()),define("text!templates/concurrent/concurrentUser.html",[],function(){return'<div id="concurrentUser">\r<div class="content r">\r	<!-- Concurrent Users begin -->\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div class="title">\r			<strong class="l"><%=Concurrent.ConcurrentUser.onlineUsers%></strong> \r		</div>\r		<div class="tablebox">\r			<div class="gauge after">\r				<ul class="canvasDIV l">\r					<li>\r						<%=Concurrent.ConcurrentUser.final5Minutes%>\r					</li>\r					<li>\r						<strong id="last5Num"></strong>\r					</li>\r					<li class="relative">\r						<canvas width=180 height=100 id="gaugeCanvas"></canvas>\r					</li>\r					<li>\r						<span>30 Day Max<br><font id="max30DayNum"></font></span>\r					</li>\r				</ul>\r				<div class="center">\r					<div id="todayAndYestodayChart" style="width: 100%; height: 200px; margin: 0 auto;padding-top:20px;">\r						<div class="login">\r							<img src="images/loading.gif" height="25px"></img> <br>\r							<%=GameCommon.loadingData%>\r						</div>\r					</div>\r				</div>\r			</div>\r		</div>\r	</div>\r	<!-- Concurrent Users end -->\r	<!-- Recent Players begin -->\r	<div class="boxmax">\r		<div class="title"   role="title">\r			<strong class="l"><%=Concurrent.ConcurrentUser.recentlyPlayers%></strong> <span class="relative r"></span>\r		</div>\r		<div class="tablebox" id="RecentPlayers">\r            <div class="login">\r                <img src="images/loading.gif" height="25px"></img><br>\r                <%=GameCommon.loadingData%>\r            </div>\r		</div>\r	</div>\r	<!-- Recent Players end -->\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div class="clear"></div>\r		</div>\r		\r		<!-- Daily Concurrent Users begin -->\r		<div id="concurrentDailyPlayers">\r			<div class="title"   role="title">\r				<strong class="l"><%=Concurrent.ConcurrentUser.dailyOnlineUsers%></strong>\r			</div>\r		</div>\r		<div class="textbox">\r       		<div class="box_top" id="concurrentTabs">\r				<a data-tab="dailyAcu" class="tab hover">ACU</a>\r				<a data-tab="dailyPcu" class="tab">PCU</a>\r				<a data-tab="dailyAcuPcu" class="tab">ACU/PCU</a>\r			</div>\r        \r			<div id="concurrentTabContents">\r				<div data-tab="dailyAcu" id="dailyAcu" class="picbox">\r						<div class="login">\r							<img src="images/loading.gif" height="25px"></img><br>\r							<%=GameCommon.loadingData%>\r						</div>\r				</div>\r				<div data-tab="dailyPcu"  id="dailyPcu"  class="picbox hide">\r						<div class="login">\r							<img src="images/loading.gif" height="25px"></img><br>\r							<%=GameCommon.loadingData%>\r						</div>\r				</div>\r				<div data-tab="dailyAcuPcu" id="dailyAcuPcu"  class="picbox hide">\r						<div class="login">\r							<img src="images/loading.gif" height="25px"></img><br>\r							<%=GameCommon.loadingData%>\r						</div>\r				</div>\r			</div>\r		</div>\r	</div>\r		<!-- Daily Concurrent Users begin -->\r	<div class="box">\r		<div class="contentbox l">\r			<div class="title">\r				<strong class="l">ACU</strong>\r			</div>\r            <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2">\r                <tbody>\r                    <tr>\r                        <td class="left border_none">MAX</td>\r                        <td class="center border_none">\r                            <strong>\r                                <font id="ACUMax"></font>|<font id="ACUMaxDate"	style="font-size: 15px"></font>\r                        </strong>\r                        </td>\r                    </tr>\r                    <tr>\r                        <td class="left">AVG</td>\r                        <td class="center"><strong id="ACUAVG"></strong></td>\r                    </tr>\r                </tbody>\r            </table>\r		</div>\r		<div class="contentbox r">\r			<div class="title">\r				<strong class="l">PCU</strong>\r			</div>\r            <table cellspacing="0" cellpadding="0" border="0" width="100%" class="table_style2">\r                <tbody>\r                    <tr>\r                        <td class="left border_none">MAX</td>\r                        <td class="center border_none">\r                            <strong>\r                                <font id="PCUMax"></font>|<font id="PCUMaxDate" style="font-size: 15px"></font>\r                        </strong>\r                        </td>\r                    </tr>\r                    <tr>\r                        <td class="left">AVG</td>\r                        <td class="center"><strong id="PCUAVG"></strong></td>\r                    </tr>\r                </tbody>\r            </table>\r		</div>\r		<div class="clear"></div>\r	</div>\r</div>\r<div class="clear"></div>\r</div>\r'}),define("text!templates/concurrent/concurrentUser-table.html",[],function(){return'<div id="recentPlayerList" class="dataTables_wrapper">\r	<table height="100%" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style_ope">\r		<tbody>\r			{{#resultData}}\r			<tr class="odd">\r				<td class="aroww left">\r					<span>{{time}}</span>\r				</td>\r				<td class="left">Player <font style="margin: 0 10px;">in</font> {{province}}</td>\r			</tr>\r			<tr class="hide">\r				<td class="details" colspan="2">\r						<div class="mintdbox mintable" id="valueinfogrid_wrapper">\r							<div class="mintablebox">\r								<table height="100%" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style1" id="valueinfogrid">\r									<thead>\r										<tr>\r											<th class="sorting_disabled center " rowspan="1"\r												colspan="1">Device:{{mobileModel}}</th>\r											<th class="sorting_disabled center " rowspan="1"\r												colspan="1">OS version:{{osVersion}}</th>\r											<th class="sorting_disabled center " rowspan="1"\r												colspan="1">Pixel:{{pixel}}</th>\r											<th class="sorting_disabled center " rowspan="1"\r												colspan="1">Language:{{language}}</th>\r										</tr>\r									</thead>\r									<tbody>\r										{{#events}}\r										<tr>\r											<td>{{time}}</td>\r											<td colspan="3" class="left">{{action}}</td>\r										</tr>\r										{{/events}}\r									</tbody>\r								</table>\r							</div>\r						</div>\r				</td>\r			</tr>\r			{{/resultData}}\r			{{^resultData}}\r				<div class="login"><%=GameCommon.noData%></div>\r			{{/resultData}}\r		</tbody>\r	</table>\r</div>\r'}),define("views/concurrent/ConcurrentUserView",["backbone","mustache","models/concurrent/ConcurrentUser","utils/GaugeUtil","utils/RegexUtil","utils/HighchartUtil","views/public/DatePicker","views/public/SelectView","text!templates/concurrent/concurrentUser.html","text!templates/concurrent/concurrentUser-table.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l){var c=e.View.extend({el:"#container",events:{"click #concurrentTabs>a":"tabClick","click #recentPlayerList tr.odd":"recentPlayerTrToggle"},initialize:function(){$("#container").html(_.template(a,l)),new o({el:"#datePicker"}),new u({el:"#selectChoose",partner:!1}),this.render()},render:function(){return this.renderConcurrentUser(),this.renderRecentPlayers(),this.renderDailyConcurrentUser(),this},renderConcurrentUser:function(){n.fetchLastMinsUserNum({$entity:Params,$callback:function(e,t,s){var o=s?parseInt(s):0;$("#last5Num").html(o),n.fetchMaxUserNum({$entity:Params,$callback:function(e,t,n){n&&(n=parseInt(n));var s=n<o?o:n;$("#max30DayNum").html(i.formatDigit(s));var u=r.draw({id:"gaugeCanvas",maxValue:s,currentValue:o})}})}}),this.renderTodayYestodayChart()},renderRecentPlayers:function(){n.fetchRecentPlayerList({$entity:Params,$callback:function(e,n,r){$("#RecentPlayers").html(t.render(_.template(f,l),{resultData:r}))}})},renderDailyConcurrentUser:function(){$("#concurrentDailyPlayers").tabs({indicator:!0});var e=this;this.dailyConcurrentUserChart={},n.fetchACUList({$entity:Params,$callback:function(t,r,o){var u=_.pluck(o,"item"),a=_.pluck(o,"value"),f=_.max(a);$("#ACUMax").html(i.formatDigit(f));var l=u[_.indexOf(a,f)];$("#ACUMaxDate").html(e.formatDate(l)),$("#ACUAVG").html(i.formatDigit(Math.floor(_.sum(a)/a.length)));var c=[{name:"ACU",data:a}];e.dailyConcurrentUserChart.dailyAcu={id:"dailyAcu",x:u,series:c},s.chart({id:"dailyAcu",x:u,series:c}),n.fetchPCUList({$entity:Params,$callback:function(t,n,r){var s=_.pluck(r,"item"),o=_.pluck(r,"value"),f=_.max(o);$("#PCUMax").html(i.formatDigit(f));var l=s[_.indexOf(o,f)];$("#PCUMaxDate").html(e.formatDate(l)),$("#PCUAVG").html(i.formatDigit(Math.floor(_.sum(o)/o.length)));var c=[{name:"PCU",data:o}];e.dailyConcurrentUserChart.dailyPcu={id:"dailyPcu",x:s,series:c};var h=_.twoArraysDivide(a,o,1),c=[{name:"ACU/PCU",data:h}];e.dailyConcurrentUserChart.dailyAcuPcu={id:"dailyAcuPcu",x:u,series:c}}})}})},renderTodayYestodayChart:function(){var e=null;n.fetchYesterdayPerHourUserNumList({$entity:Params,$callback:function(t,r,i){var o=[{name:"Yesterday",data:_.pluck(i,"value"),color:"#cccccc"}];e=s.chart({id:"todayAndYestodayChart",x:_.pluck(i,"item"),series:o,title:l.Concurrent.todayAndYes}),n.fetchTodayPerHourUserNumList({$entity:Params,$callback:function(t,n,r){e.addSeries({data:_.pluck(r,"value"),name:"Today"})}})}})},recentPlayerTrToggle:function(e){$(e.currentTarget).next("tr").toggle(),$(e.currentTarget).toggleClass("hover")},tabClick:function(e){var t=$(e.currentTarget).attr("data-tab");$("#concurrentTabs>a").removeClass("hover"),$('#concurrentTabs>a[data-tab="'+t+'"]').addClass("hover"),$("#concurrentTabContents>div").hide(),$('#concurrentTabContents>div[data-tab="'+t+'"]').show();var n=$("#"+t+" div.highcharts-container").length!=0;n||s.chart(this.dailyConcurrentUserChart[t])},formatDate:function(e){return e.replace(/(\d\d)(\d\d)(\d\d)/,"20$1-$2-$3")}});return c}),define("text!templates/public/alert.html",[],function(){return'<div class="Pop_line">\n    <div class="timetop">\n        <b class="l"><%=title%></b>\n    </div>\n    <div class="Poptxt">\n        <div class="Prompt"><%=message%></div>\n        <div class="opeDiv after">\n            <a class="timecolse r Confirm"><%=GameCommon.confirm%></a>\n        </div>\n    </div>\n</div>'}),define("text!templates/public/confirm.html",[],function(){return'<div class="Pop_line" style="width:300px;">\n	<div class="timetop">\n    	<b class="l"><%=i18n.GameCommon.confirmTitle%></b>\n    </div>\n	<div class="Poptxt">\n    	<p class="Prompt"><%=i18n.GameCommon.confirmDelete%></p>\n        <div class="opeDiv after">\n            <a  class="timecolse r Confirm"><%=i18n.GameCommon.confirm%></a>\n            <a class="r Cancel"><%=i18n.GameCommon.cancel%></a>\n        </div>\n    </div>\n</div>'}),define("text!templates/public/block.html",[],function(){return'<div class="weblogin">\n	<img src="images/loading.gif" height="25px"></img>	\n	<p><%=message%></p>\n</div>'}),function(e){function u(n,u){var f=n==window,c=u&&u.message!==undefined?u.message:undefined;u=e.extend({},e.blockUI.defaults,u||{}),u.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,u.overlayCSS||{});var v=e.extend({},e.blockUI.defaults.css,u.css||{}),m=e.extend({},e.blockUI.defaults.themedCSS,u.themedCSS||{});c=c===undefined?u.message:c,f&&s&&a(window,{fadeOut:0});if(c&&typeof c!="string"&&(c.parentNode||c.jquery)){var g=c.jquery?c[0]:c,y={};e(n).data("blockUI.history",y),y.el=g,y.parent=g.parentNode,y.display=g.style.display,y.position=g.style.position,y.parent&&y.parent.removeChild(g)}var b=u.baseZ,w=e.browser.msie||u.forceIframe?e('<iframe class="blockUI" style="z-index:'+b++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+u.iframeSrc+'"></iframe>'):e('<div class="blockUI" style="display:none"></div>'),E=e('<div class="blockUI blockOverlay" style="z-index:'+b++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),S,x;u.theme&&f?x='<div class="blockUI '+u.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+b+';display:none;position:fixed">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(u.title||"&nbsp;")+"</div>"+'<div class="ui-widget-content ui-dialog-content"></div>'+"</div>":u.theme?x='<div class="blockUI '+u.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+b+';display:none;position:absolute">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(u.title||"&nbsp;")+"</div>"+'<div class="ui-widget-content ui-dialog-content"></div>'+"</div>":f?x='<div class="blockUI '+u.blockMsgClass+' blockPage" style="z-index:'+b+';display:none;position:fixed"></div>':x='<div class="blockUI '+u.blockMsgClass+' blockElement" style="z-index:'+b+';display:none;position:absolute"></div>',S=e(x),c&&(u.theme?(S.css(m),S.addClass("ui-widget-content")):S.css(v)),(!u.applyPlatformOpacityRules||!e.browser.mozilla||!/Linux/.test(navigator.platform))&&E.css(u.overlayCSS),E.css("position",f?"fixed":"absolute"),(e.browser.msie||u.forceIframe)&&w.css("opacity",0);var T=[w,E,S],N=f?e("body"):e(n);e.each(T,function(){this.appendTo(N)}),u.theme&&u.draggable&&e.fn.draggable&&S.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var C=r&&(!e.boxModel||e("object,embed",f?null:n).length>0);if(i||C){f&&u.allowBodyStretch&&e.boxModel&&e("html,body").css("height","100%");if((i||!e.boxModel)&&!f)var k=d(n,"borderTopWidth"),L=d(n,"borderLeftWidth"),A=k?"(0 - "+k+")":0,O=L?"(0 - "+L+")":0;e.each([w,E,S],function(e,t){var n=t[0].style;n.position="absolute";if(e<2)f?n.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+u.quirksmodeOffsetHack+') + "px"'):n.setExpression("height",'this.parentNode.offsetHeight + "px"'),f?n.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):n.setExpression("width",'this.parentNode.offsetWidth + "px"'),O&&n.setExpression("left",O),A&&n.setExpression("top",A);else if(u.centerY)f&&n.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),n.marginTop=0;else if(!u.centerY&&f){var r=u.css&&u.css.top?parseInt(u.css.top):0,i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"';n.setExpression("top",i)}})}c&&(u.theme?S.find(".ui-widget-content").append(c):S.append(c),(c.jquery||c.nodeType)&&e(c).show()),(e.browser.msie||u.forceIframe)&&u.showOverlay&&w.show();if(u.fadeIn){var M=u.onBlock?u.onBlock:t,_=u.showOverlay&&!c?M:t,D=c?M:t;u.showOverlay&&E._fadeIn(u.fadeIn,_),c&&S._fadeIn(u.fadeIn,D)}else u.showOverlay&&E.show(),c&&S.show(),u.onBlock&&u.onBlock();l(1,n,u),f?(s=S[0],o=e(":input:enabled:visible",s),u.focusInput&&setTimeout(h,20)):p(S[0],u.centerX,u.centerY);if(u.timeout){var P=setTimeout(function(){f?e.unblockUI(u):e(n).unblock(u)},u.timeout);e(n).data("blockUI.timeout",P)}}function a(t,n){var r=t==window,i=e(t),u=i.data("blockUI.history"),a=i.data("blockUI.timeout");a&&(clearTimeout(a),i.removeData("blockUI.timeout")),n=e.extend({},e.blockUI.defaults,n||{}),l(0,t,n);var c;r?c=e("body").children().filter(".blockUI").add("body > .blockUI"):c=e(".blockUI",t),r&&(s=o=null),n.fadeOut?(c.fadeOut(n.fadeOut),setTimeout(function(){f(c,u,n,t)},n.fadeOut)):f(c,u,n,t)}function f(t,n,r,i){t.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),n&&n.el&&(n.el.style.display=n.display,n.el.style.position=n.position,n.parent&&n.parent.appendChild(n.el),e(i).removeData("blockUI.history")),typeof r.onUnblock=="function"&&r.onUnblock(i,r)}function l(t,n,r){var i=n==window,o=e(n);if(!t&&(i&&!s||!i&&!o.data("blockUI.isBlocked")))return;i||o.data("blockUI.isBlocked",t);if(!r.bindEvents||t&&!r.showOverlay)return;var u="mousedown mouseup keydown keypress";t?e(document).bind(u,r,c):e(document).unbind(u,c)}function c(t){if(t.keyCode&&t.keyCode==9&&s&&t.data.constrainTabKey){var n=o,r=!t.shiftKey&&t.target===n[n.length-1],i=t.shiftKey&&t.target===n[0];if(r||i)return setTimeout(function(){h(i)},10),!1}var u=t.data;return e(t.target).parents("div."+u.blockMsgClass).length>0?!0:e(t.target).parents().children().filter("div.blockUI").length==0}function h(e){if(!o)return;var t=o[e===!0?o.length-1:0];t&&t.focus()}function p(e,t,n){var r=e.parentNode,i=e.style,s=(r.offsetWidth-e.offsetWidth)/2-d(r,"borderLeftWidth"),o=(r.offsetHeight-e.offsetHeight)/2-d(r,"borderTopWidth");t&&(i.left=s>0?s+"px":"0"),n&&(i.top=o>0?o+"px":"0")}function d(t,n){return parseInt(e.css(t,n))||0}if(/1\.(0|1|2)\.(0|1|2)/.test(e.fn.jquery)||/^1.1/.test(e.fn.jquery)){alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+e.fn.jquery);return}e.fn._fadeIn=e.fn.fadeIn;var t=function(){},n=document.documentMode||0,r=e.browser.msie&&(e.browser.version<8&&!n||n<8),i=e.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!n;e.blockUI=function(e){u(window,e)},e.unblockUI=function(e){a(window,e)},e.growlUI=function(t,n,r,i){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),n&&s.append("<h2>"+n+"</h2>"),r==undefined&&(r=3e3),e.blockUI({message:s,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:r,showOverlay:!1,onUnblock:i,css:e.blockUI.defaults.growlCSS})},e.fn.block=function(t){return this.unblock({fadeOut:0}).each(function(){e.css(this,"position")=="static"&&(this.style.position="relative"),e.browser.msie&&(this.style.zoom=1),u(this,t)})},e.fn.unblock=function(e){return this.each(function(){a(this,e)})},e.blockUI.version=2.35,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"default"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"default"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!0,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg"};var s=null,o=[]}(jQuery),define("blockUI",function(){}),define("utils/ModelBox",["underscore","text!templates/public/alert.html","text!templates/public/confirm.html","text!templates/public/block.html","i18n!nls/gameI18N","blockUI"],function(e,t,n,r,i){var s={toast:function(e){$.blockUI({message:e,timeout:2e3})},block:function(t){t.message=t.message||i.GameCommon.loadingData,t.width=200,t.height=150,t.message=e.template(r,{message:t.message});var n=this._getCss(t);$.blockUI({message:t.message,css:n})},unblock:function(){$.unblockUI()},alert:function(n){var r=this,s={title:i.Product.CreateProduct.tips,width:256,height:156};e.extend(s,n),s.GameCommon=i.GameCommon;var o=e.template(t,s),u=r._getCss(s);$.blockUI({css:u,message:o,onBlock:function(){$(this).find(".Confirm").bind("click",function(){r.unblock()})}})},confirm:function(t){var r=this,t=t||{},s={message:e.template(n,{i18n:i})};t=e.extend(s,t);var o=(new Date).getTime();$("body").append('<div id="'+o+'" style="display:none;"></div>');var u=$("#"+o).html(t.message),a=$(window).height(),f=$(document).width(),l=u.width(),c=u.height(),h=f/2-l/2,p=a/2-c/2;$(".blockUI .blockMsg .blockPage").undelegate(),$.blockUI({css:{border:"0",background:"none",width:l,left:h,top:p},message:t.message,onBlock:function(){var n=this;e.each(t.buttons,function(e){for(attr in e)$(".blockPage").delegate(attr,"click",e[attr])}),$(this).find(".Cancel").bind("click",function(){r.unblock()})}}),$("#"+o).remove()},_getCss:function(e){var t=$(window).height(),n=$(document).width(),r=e.width,i=e.height,s=n/2-r/2,o=t/2-i/2,u={border:"0",background:"none",width:r,left:s,top:o};return u}};return s}),define("models/level/LevelDetail",["models/BaseModel"],function(e){var t=[{name:"levelSettingList",url:"/v1/levelDetail/levelSettingList"},{name:"saveLevelSetting",url:"/v1/levelDetail/saveLevelSetting"},{name:"theMaxLevel",url:"/v1/levelDetail/theMaxLevel"},{name:"levelStageData",url:"/v1/levelDetail/levelStageData"},{name:"levelDetailList",url:"/v1/levelDetail/levelDetailList"},{name:"levelUpTimeList",url:"/v1/levelDetail/levelUpTimeList"},{name:"levelStayRateList",url:"/v1/levelDetail/levelStayRateList"},{name:"chargeTimesList",url:"/v1/levelDetail/chargeTimesList"},{name:"chargeValueList",url:"/v1/levelDetail/chargeValueList"},{name:"levelUpTimeDistribution",url:"/v1/levelDetail/levelUpTimeDistribution"}];return e.init(t)}),define("text!templates/Level/LevelDetailed.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="levelLevelDetailedAboutGrade">\r			<div class="title" role="title">\r				<strong class="l"><%=Level.LevelDetailed.importantGrade%></strong>\r				<a class="Cancel r minCancel" id="levelSetting"><font class="SetUp">设置</font></a>\r			</div>\r			<div class="textbox  relative">\r				<div class="Keylevel" id="importantLevelChart">\r\r				</div>\r			</div>\r		</div>\r	</div>\r	<div class="boxmax">\r		<div id="levelLevelDetailedGradeDetail">\r			<div class="title" role="title">\r				<strong class="l"><%=Level.LevelDetailed.gradeDetail%></strong>\r			</div>\r		</div>\r		<div class="tablebox" id="levelDetailTableDiv">\r			\r		</div>\r	</div>\r</div>'}),define("text!templates/Level/LevelSetting.html",[],function(){return'<div class="Pop_line">\r\n    <div class="EditPop_top timetop">\r\n        <b class="l"><%=Level.LevelDetailed.levelSettingTitle%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n    	<p class="setupPop_P"><%=Level.LevelDetailed.levelSettingTip%></p>\r\n        <ul class="setupPop" id="levelStep">\r\n        	\r\n        </ul>\r\n        <div class="opeDiv after product_opeDiv">\r\n            <a class="l CancelonCL" id="addStepBtn">+<%=Level.LevelDetailed.addStep%></a>\r\n            <a class="timecolse r Confirm" id="saveBtn"><%=Level.LevelDetailed.saveAndClose%></a>\r\n            <a class="r Cancel" id="canelBtn"><%=Level.LevelDetailed.canel%></a>\r\n        </div>\r\n    </div>\r\n</div>	\r\n'}),define("text!templates/Level/LevelStep.html",[],function(){return'<% _.each(resultData,function(obj){\r\n	var currlevel = obj.level;\r\n	var index = resultData.indexOf(obj)+1;\r\n%>\r\n	<li class="step">\r\n		<b>step<%=index%>：</b>\r\n		<label><%=Level.LevelDetailed.chooseLevel%></label>\r\n		<select class="levelSelect" id="levelSelect<%=index%>" style="left: 100px;">\r\n			<option value="-1">-<%=Level.LevelDetailed.choose%>-</option>\r\n			<% 	\r\n				for(var i=2;i < maxLevel;i++){\r\n				 	var selected=\'\';\r\n                    if(currlevel == i) selected=\'selected\';\r\n			%>\r\n				<option <%=selected%> value="<%=i%>"><%=i%></option>\r\n			<%}%>\r\n		</select>\r\n		<label><%=Level.LevelDetailed.stageName%></label>\r\n		<input value="<%=obj.name%>" class="textinput" type="text"/>\r\n		<em class="r deleteItemtype">删除</em>\r\n	</li> 	\r\n<%});%>\r\n\r\n\r\n\r\n\r\n \r\n\r\n '}),define("text!templates/Level/LevelStageChart.html",[],function(){return'<ul id="levelStageChart">\r\n<% _.each(renderData,function(obj){\r\n	var index = renderData.indexOf(obj);\r\n%>\r\n	<li>\r\n		<span><font>￥</font><small>SUM</small><strong><%=obj.chargeValueSum%></strong></span>\r\n		<span><small>AVG</small><strong><%=avgTime(obj.levelUpTimeAvg)%></strong><small></small></span>\r\n		<b><%=obj.endLevel%><%=GameCommon.level%></b>\r\n		<%\r\n			if(index == 0 ){\r\n		%>\r\n				<b class="left">1<%=GameCommon.level%></b>\r\n		<%}%>\r\n	</li>\r\n<%});%>\r\n</ul>\r\n\r\n'}),define("text!templates/Level/LevelDetail-Table.html",[],function(){return'<table id="levelDetailTable" border="0" width="100%" cellpadding="0" cellspacing="0" class="table_style_ope">\r\n	<thead>\r\n		<tr>\r\n			<th class="left"><%=GameCommon.grade%></th>\r\n			<th><%=Level.LevelDetailed.upgradeTime%></th>\r\n			<th><%=Level.LevelDetailed.gradeStagnateRate%></th>\r\n			<th><%=GameCommon.payCount%></th>\r\n			<th><%=GameCommon.paySum%></th>\r\n			<th><%=GameCommon.detail%></th>\r\n		</tr>\r\n	</thead>\r\n	<tbody id="levelDetailTable-body">\r\n		<%_.each(tableData,function(obj){\r\n		%>\r\n			<tr>\r\n				<td class="left aroww"><span><%=obj.level%><%=GameCommon.level%></span></td>\r\n				<td><%= avgTime(obj.avgLevelUpTime)%></td>\r\n				<td><%=obj.levelStayRate%>%</td>\r\n				<td><%=obj.chargeTimes%></td>\r\n				<td><%=obj.chargeValue%></td>\r\n				<td><a class="detail" data-name="upgradeTime" data-id="<%=obj.level%>"><%=Level.LevelDetailed.upgradeTime%></a><a class="detail" data-name="dailyTrend" data-id="<%=obj.level%>"><%=GameCommon.dailyTrend%></a></td>\r\n			</tr>\r\n		<%})%>\r\n	</tbody>\r\n</table>'}),define("views/Level/LevelDetailedView",["jquery","backbone","mustache","utils/ModelBox","utils/dataTableUtil","utils/HighchartUtil","utils/excelDataUtil","models/level/LevelDetail","text!templates/Level/LevelDetailed.html","text!templates/Level/LevelSetting.html","text!templates/Level/LevelStep.html","text!templates/Level/LevelStageChart.html","text!templates/Level/LevelDetail-Table.html","text!templates/public/excelExport.html","text!templates/public/loading.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=t.View.extend({el:"#container",events:{"click #levelSetting":"showLevelSetting","click #levelDetailTable-body a.detail":"showDetail","click #clickToSet":"showLevelSetting"},initialize:function(){e("#container").html(_.template(a,v)),require(["views/public/DatePicker","views/public/SelectView"],function(e,t){new e({el:"#datePicker"}),new t({el:"#selectChoose"})}),this.render()},render:function(){return this.showImportLevelStage(),this.levelDetialTable(),this},levelDetialTable:function(){var t=e('#levelLevelDetailedGradeDetail div[role="title"] a[role="excel"]').length==0;t&&e('#levelLevelDetailedGradeDetail div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),e("#levelLevelDetailedGradeDetail").tabs({indicator:!0});var n=this;e("#levelDetailTableDiv").html(_.template(d,v)),u.levelDetailList({data:Params,success:function(t){var r={tableData:t,Level:v.Level,GameCommon:v.GameCommon};r.avgTime=n.formatSeconds,e("#levelDetailTableDiv").html(_.template(h,r));var s=e("<table></table>");s.append(e("#levelDetailTableDiv table").html()),e('#levelLevelDetailedGradeDetail div[role="title"] a[role="excel"]').click(function(){var t=v.Level.LevelDetailed.gradeDetail+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=o.tableToJson(s[0]),r=_.template(p,{excelName:t,excelArray:n});e("body").append(r),e("#excelExportForm").submit(),e("#excelExportForm").remove()}),i.dataTable({$el:e("#levelDetailTable"),sort:!1})}})},showImportLevelStage:function(){e("#levelLevelDetailedAboutGrade").tabs({indicator:!0});var t=this;u.levelStageData({data:Params,success:function(n){if(!n.length){e("#importantLevelChart").html(v.Level.Tips.tip6);return}var r={renderData:n,GameCommon:v.GameCommon};r.avgTime=t.formatSeconds,e("#importantLevelChart").html(_.template(c,r));var i=(e("#levelStageChart").width()-15)/n.length;e("#levelStageChart").width(i*n.length),e("#levelStageChart li").width(i),e(window).bind("resize",function(){var t=e("#levelStageChart").width()/n.length;e("#levelStageChart li").width(t)})}})},showLevelSetting:function(t){var n=0;u.theMaxLevel({data:Params,success:function(t){n=t,u.levelSettingList({data:Params,success:function(t){var r={resultData:t,maxLevel:n,Level:v.Level};e("#levelStep").html(_.template(l,r)),e(".levelSelect").sSelect()}})}});var i=this;r.confirm({message:_.template(f,v),buttons:[{"#saveBtn":function(){var t=[],n=[],s=[];e("#levelStep").find("li.step").each(function(r){var i={};i.productId=Params.productID,i.level=e(this).find("select.levelSelect").val(),i.name=e(this).find("input.textinput").val(),t.push(i),n.push(e(this).find("input.textinput").val()),s.push(e(this).find("select.levelSelect").val())});if(s.length<1){alert(v.Level.Tips.tip1);return}if(n.indexOf("")!=-1||n.indexOf(" ")!=-1||s.indexOf("-1")!=-1){alert(v.Level.Tips.tip3);return}if(i.isRepeat(s)){alert(v.Level.Tips.tip4);return}if(i.isRepeat(n)){alert(v.Level.Tips.tip5);return}u.saveLevelSetting({data:t,success:function(e){r.unblock(),i.render()}})},"#canelBtn":function(){r.unblock()},"#addStepBtn":function(){var t=e("#levelStep").find("li.step").length;if(t>=5){alert(v.Level.Tips.tip2);return}var r='<li class="step"><b>step'+(t+1)+"：</b>"+"<label>"+v.Level.LevelDetailed.chooseLevel+"</label>"+'<select class="levelSelect" id="levelSelect'+(t+1)+'" style="left: 100px;">'+'<option value="-1">-'+v.Level.LevelDetailed.choose+"-</option>";for(var s=2;s<n;s++)r+='<option value="'+s+'">'+s+"</option>";r+="</select><label>"+v.Level.LevelDetailed.stageName+"</label>"+'<input value="" class="textinput" type="text"/>'+'<em class="r deleteItemtype">删除</em>',e("#levelStep").append(r),e(".levelSelect").sSelect(),i.Pop_place(e(".Pop_line").parent())},".deleteItemtype":function(t){var n=e("#levelStep").find("li.step").length;if(n<2){alert(v.Level.Tips.tip1);return}e(t.currentTarget).parent("li").remove(),e("#levelStep").find("li.step").each(function(t){e(this).find("b").html("step"+(t+1)+"：")}),i.Pop_place(e(".Pop_line").parent())}}]})},Pop_place:function(t){var n=e(window).height(),r=e(document).width(),i=t.width(),s=t.height(),o=r/2-i/2,u=n/2-s/2;t.css({left:o+"px",top:u+"px"})},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},showDetail:function(t){var n=e(t.currentTarget),r=n.parent().parent(),o=n.attr("data-name"),a=n.attr("data-id"),f=n.html();r.addClass("hover"),r.next("tr.itempointdetail").remove();var l='<tr class="itempointdetail"><td colspan="6"><div class="mintdbox mintable"><div class="title"><strong id="chartTitle_'+a+'"></strong></div>'+'<div class="textbox">'+'<div id="levelDetailCode'+a+'">',c='<div class="box_top" role="tabbar"><a data-tab="levelUpTime_'+a+'" class="tab hover">'+v.Level.LevelDetailed.upgradeTime+"</a>"+'<a data-tab="levelStayRate_'+a+'" class="tab">'+v.Level.LevelDetailed.gradeStagnateRate+"</a>"+'<a data-tab="chargeTimes_'+a+'" class="tab">'+v.GameCommon.payCount+"</a>"+'<a data-tab="chargeValue_'+a+'" class="tab">'+v.GameCommon.paySum+"</a>"+"</div>",h='<div role="chart"><div id="levelDetailCode'+a+'-chart" class="picbox"></div>'+'<div class="after">'+'<a role="chartBtn" class="pic_but l hover"><font class="pic_icon">'+v.GameCommon.chart+"</font></a>"+'<a role="tableBtn" class="pic_but l"><font class="table_icon">'+v.GameCommon.grid+"</font></a>"+"</div>"+"</div>"+'<div role="table">'+'<div id="levelDetailCode'+a+'-table" class="picbox"></div>'+'<div class="after">'+'<a role="chartBtn" class="pic_but l"><font class="pic_icon">'+v.GameCommon.chart+"</font></a>"+'<a role="tableBtn" class="pic_but l hover"><font class="table_icon">'+v.GameCommon.grid+"</font></a>"+"</div>"+"</div>"+"</div>"+"   </div>"+"</div>"+"</td>"+"</tr>";if(n.html()==v.GameCommon.packUp){r.find("a").each(function(t){t==0?e(this).html(v.Level.LevelDetailed.upgradeTime):t==1&&e(this).html(v.GameCommon.dailyTrend)}),r.removeClass("hover");return}r.find("a").each(function(t){t==0?e(this).html(v.Level.LevelDetailed.upgradeTime):t==1&&e(this).html(v.GameCommon.dailyTrend)}),n.html(v.GameCommon.packUp),r.addClass("hover"),o=="dailyTrend"?(r.after(l+c+h),e("#chartTitle_"+a).html(a+v.GameCommon.level)):(r.after(l+h),e("#chartTitle_"+a).html(a+v.GameCommon.level+" "+v.Level.LevelDistributed.levelupTimeDistribution)),this.params=_.clone(Params),this.params.leveltype=a;var p=this;e("#levelDetailCode"+a).tabs(function(t){var n,r;if(!t)u.levelUpTimeDistribution({data:p.params,success:function(t){var n=_.pluck(t,"item"),t=_.pluck(t,"value"),r=_.percent(t,3,1),o=[{name:v.Level.LevelDetailed.levelUpTime,data:t}];s.chartBar({id:"levelDetailCode"+a+"-chart",x:{left:n,right:r},series:o});var u=_.zip(n,r),f=[v.Level.LevelDetailed.levelUpTime,v.GameCommon.percentage];i.drawTable({head:f,body:u,$el:e("#levelDetailCode"+a+"-table")})}});else{switch(t){case"levelUpTime_"+a:n="levelUpTimeList",r=v.Level.LevelDetailed.upgradeTime;break;case"levelStayRate_"+a:n="levelStayRateList",r=v.Level.LevelDetailed.gradeStagnateRate;break;case"chargeTimes_"+a:n="chargeTimesList",r=v.GameCommon.payCount;break;case"chargeValue_"+a:n="chargeValueList",r=v.GameCommon.paySum}u[n]({data:p.params,success:function(t){var n=_.pluck(t,"item"),t=_.pluck(t,"value"),o=[{name:r,data:t}],u=_.zip(n,t),f=[v.GameCommon.date,r];i.drawTable({head:f,body:u,$el:e("#levelDetailCode"+a+"-table")}),s.chart({id:"levelDetailCode"+a+"-chart",x:n,series:o})}})}})},formatSeconds:function(e){var t=Number(e),n=0,r=0;t>60&&(n=Number(t/60),t=Number(t%60),n>60&&(r=Number(n/60),n=Number(t%60)));var i=""+t<10?"0"+t:t;return n=parseInt(n),r=parseInt(r),n>0&&(i=""+(n<10?"0"+n:n)+":"+i),r>0&&(i=""+(r<10?"0"+r:r)+":"+i),r>0?i+=" hours":i+=" mins",i}});return m}),define("models/level/Level",["models/BaseModel"],function(e){var t=[{name:"fetchLevelDistributionOfActivePlayer",url:"/v1/level/levelDistributionOfActivePlayer"},{name:"fetchLevelDistributionOfPlayTimes",url:"/v1/level/levelDistributionOfPlayTimes"},{name:"fetchLevelOfLossPlayer",url:"/v1/level/levelOfLossPlayer"},{name:"fetchLevelOfNewPlayer",url:"/v1/level/levelOfNewPlayer"},{name:"fetchLevelChangedIn7Days",url:"/v1/level/levelChangedIn7Days"}];return e.init(t)}),define("text!templates/Level/Schedule.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r	</div>\r	<div class="boxmax" id="levelOfNewPlayerCode">\r		<div class="title" role="title">\r			<strong class="l"><%=Level.Schedule.newPlayerLevel%></strong>\r		</div>\r		<div class="textbox">\r			<div class="box_top" role="tabbar">\r				<a data-tab="firstDayLevel" class="tab hover"><%=Level.Schedule.firstDayLevel%></a>\r				<a data-tab="firstWeekLevel" class="tab"><%=Level.Schedule.firstWeekLevel%></a>\r				<a data-tab="fourteenDayLevel" class="tab"><%=Level.Schedule.fourteenDayLevel%></a>\r				<div class="info r">\r                	AVG ：<font id="levelOfNewPlayerCodeAvg"></font>\r                </div>\r			</div>\r			<div role="chart">\r				<div id="levelOfNewPlayerCode-chart" class="picbox"></div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r			<div role="table">\r				<div id="levelOfNewPlayerCode-table" class="picbox"></div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r\r	<div class="boxmax" id="levelChangeIn7DaysCode">\r		<div class="title" role="title">\r			<strong class="l"><%=Level.Schedule.levelChangeOfNewPlayerServenDays%></strong>\r		</div>\r		<div class="textbox">\r			<div role="chart">\r				<div id="levelChangeIn7DaysCode-chart" class="picbox"></div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r			<div role="table">\r				<div id="levelChangeIn7DaysCode-table" class="picbox"></div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r</div>'}),define("views/Level/ScheduleView",["backbone","models/level/Level","utils/levelUtil","utils/HighchartUtil","utils/dataTableUtil","text!templates/Level/Schedule.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"#container",initialize:function(){$("#container").html(_.template(s,o)),require(["views/public/DatePicker","views/public/SelectView"],function(e,t){new e({el:"#datePicker"}),new t({el:"#selectChoose"})}),this.render()},render:function(){return this.renderLevelOfNewPlayer(),this.renderLevelChangedIn7Days(),this},renderLevelOfNewPlayer:function(){var e=$("#levelOfNewPlayerCode").tabs(function(n){var s,u;switch(n){case"firstDayLevel":s=o.Level.Schedule.firstDayLevel,u=0;break;case"firstWeekLevel":s=o.Level.Schedule.firstWeekLevel,u=6;break;case"fourteenDayLevel":s=o.Level.Schedule.fourteenDayLevel,u=13}var a=_.clone(Params);a.player={days:u},t.fetchLevelOfNewPlayer({data:a,success:function(t){var n=t.avg,u=t.md,a=t.result;$("#levelOfNewPlayerCodeAvg").html(n+o.GameCommon.level),r.chart({id:"levelOfNewPlayerCode-chart",type:"column",level:{name:s,data:a}});var f=_.zip(_.pluck(a,"item"),_.pluck(a,"value")),l=[o.GameCommon.grade,s];i.drawTable({head:l,body:f,$el:$("#levelOfNewPlayerCode-table")}),e.head=l,e.body=f}})})},renderLevelChangedIn7Days:function(){var e=this,s=$("#levelChangeIn7DaysCode").tabs(function(){t.fetchLevelChangedIn7Days({data:Params,success:function(t){if(t){var u=_.pluck(t,"item"),a=_.pluck(t,"value"),f,l=[],c=[],h=[],p=[];_.each(a,function(e){h.push(n.split(e,10))}),f=_.pluck(h[0],"item");for(var d=0;d<h.length;d++)l.push(e._percent(h[d])),c.push(e._percent(h[d],!0));var v=_.zip(l[0],l[1],l[2],l[3],l[4],l[5],l[6]);for(var d=0;d<f.length;d++)p.unshift({name:f[d]+"^%",data:v[d]});r.chart({opacity:.6,colors:["#c490bf","#cc9900","#8957a1","#f0e53d","#00a073","#48a0fd","#60bb5d","#f7941d","#d35d03","#0068b7"],id:"levelChangeIn7DaysCode-chart",x:u,series:p,stacking:"normal",yPercent:!0,max:100});var m=u,g=_.zip(f,c[0],c[1],c[2],c[3],c[4],c[5],c[6]);m.unshift(""),i.drawTable({head:m,body:g,$el:$("#levelChangeIn7DaysCode-table")}),s.head=m,s.body=g}else $("#levelChangeIn7DaysCode-chart").html(o.GameCommon.sorryForNoData),$("#levelChangeIn7DaysCode-table").html(o.GameCommon.sorryForNoData)}})})},_percent:function(e,t){t=t||!1;var n=_.pluck(e,"item"),r=_.pluck(e,"value");return _.map(_.percent(r),function(e){return t?parseInt(e*100)+"%":parseInt(e*100)})}});return u}),define("text!templates/Level/LevelDistributed.html",[],function(){return'<div class="content r">\r\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r\r		<div id="levelDistributionOfPlayerCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Level.LevelDistributed.playerLevelDistribution%></strong>\r			</div>\r			<div class="textbox">\r				<div role="chart">\r					<div id="levelDistributionOfPlayerCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="levelDistributionOfPlayerCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r	\r	<div class="boxmax">\r		<div id="levelDistributionOfPlayTimesCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Level.LevelDistributed.gameTimesLevelDistribution%></strong>\r			</div>\r			<div class="textbox">\r				<div role="chart">\r					<div id="levelDistributionOfPlayTimesCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="levelDistributionOfPlayTimesCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>	\r\r	<div class="boxmax" id="levelOfLossPlayerCode">\r		<div class="title" role="title">\r			<strong class="l"><%=Level.LevelDistributed.lossPlayerLevel%></strong>\r		</div>\r		<div class="textbox">\r			<div class="box_top" role="tabbar">\r				<a data-tab="seven" class="tab hover"><%=Level.LevelDistributed.servenDaysNotLoginInPlayers%></a>\r				<a data-tab="fourteen" class="tab"><%=Level.LevelDistributed.fourteenDaysNotLoginInPlayers%></a>\r				<a data-tab="thirty" class="tab"><%=Level.LevelDistributed.thirtyDaysNotLoginInPlayers%></a>\r			</div>\r			<div role="chart">\r				<div id="levelOfLossPlayerCode-chart" class="picbox"></div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r			<div role="table">\r				<div id="levelOfLossPlayerCode-table" class="picbox"></div>\r				<div class="after">\r	        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r	        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r	        	</div>\r			</div>\r		</div>\r	</div>\r</div>'}),define("views/Level/LevelDistributedView",["backbone","models/level/Level","utils/levelUtil","utils/HighchartUtil","utils/dataTableUtil","models/Constant","text!templates/Level/LevelDistributed.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u){var a=e.View.extend({el:"#container",initialize:function(){$("#container").html(_.template(o,u)),require(["views/public/DatePicker","views/public/SelectView"],function(e,t){new e({el:"#datePicker"}),new t({el:"#selectChoose"})}),this.render()},render:function(){return this.renderLevelDistribution(),this.renderLevelDistributionOfPlayTimes(),this.renderLevelOfLossPlayer(),this},renderLevelDistribution:function(){var e=u.Level.LevelDistributed.playerLevelDistribution,n=$("#levelDistributionOfPlayerCode").tabs(function(){t.fetchLevelDistributionOfActivePlayer({data:Params,success:function(t){r.chart({id:"levelDistributionOfPlayerCode-chart",type:"column",level:{data:t,name:e,unitPosition:"last",unit:""}});var s=_.zip(_.pluck(t,"item"),_.pluck(t,"value")),o=[u.GameCommon.grade,u.GameCommon.activePlayer];i.drawTable({head:o,body:s,$el:$("#levelDistributionOfPlayerCode-table")}),n.head=o,n.body=s}})})},renderLevelDistributionOfPlayTimes:function(){var e=u.Level.LevelDistributed.gameTimesLevelDistribution,n=$("#levelDistributionOfPlayTimesCode").tabs(function(){t.fetchLevelDistributionOfPlayTimes({data:Params,success:function(t){r.chart({id:"levelDistributionOfPlayTimesCode-chart",type:"column",level:{data:t,name:e}});var s=_.zip(_.pluck(t,"item"),_.pluck(t,"value")),o=[u.GameCommon.grade,u.Level.LevelDistributed.playTimes];i.drawTable({head:o,body:s,$el:$("#levelDistributionOfPlayTimesCode-table")}),n.head=o,n.body=s}})})},renderLevelOfLossPlayer:function(){var e=_.cloneDeep(Params),n=$("#levelOfLossPlayerCode").tabs(function(s){var o,a;switch(s){case"seven":a=7,o=u.Level.LevelDistributed.servenDaysNotLoginInPlayers;break;case"fourteen":a=14,o=u.Level.LevelDistributed.fourteenDaysNotLoginInPlayers;break;case"thirty":a=30,o=u.Level.LevelDistributed.thirtyDaysNotLoginInPlayers}e.churnedParameterBean={dayType:a},t.fetchLevelOfLossPlayer({data:e,success:function(e){r.chart({id:"levelOfLossPlayerCode-chart",type:"column",level:{name:o,data:e}});var t=_.zip(_.pluck(e,"item"),_.pluck(e,"value")),s=[u.GameCommon.grade,o];i.drawTable({head:s,body:t,$el:$("#levelOfLossPlayerCode-table")}),n.head=s,n.body=t}})})}});return a}),define("text!templates/play/tasks.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="playTasksNewHandConversionRate">\r			<div class="title"  role="title">\r				<strong class="l"><%=Play.Tasks.newHandConversionRate%></strong>\r				<a class="Cancel r minCancel" id="guideFunnelSetting"><font class="SetUp">设置</font></a>\r			</div>\r		</div>	\r		<div class="textbox">\r			<div id="guideFunelChart" class="picbox">\r				<div class="login">\r					<img src="images/loading.gif" height="25px"></img> <br>\r					<%=GameCommon.loadingData%>\r				</div>\r			</div>\r		</div>\r	</div>\r	<div class="boxmax">\r		<div id="playTasksTaskTollgateDetail">\r			<div class="titlemax"   role="title">\r				<strong class="l"><%=Play.TasksSetUp.taskTollgateDetail%></strong>\r	            <div id="indexTab" class="buttonDiv l">\r					<label class="l selectlble"><%=Play.Tasks.filterType%>：</label>\r	            	<a data="" class="but l butL hover "><%=GameCommon.all%></a>\r	            	<a data="1001" class="but l "><%=Play.TasksSetUp.newHand%></a>\r	            	<a data="1002" class="but l "><%=Play.Tasks.mainline%></a>\r	            	<a data="1003" class="but l "><%=Play.TasksSetUp.subline%></a>\r	            	<a data="-1" class="but l butR"><%=Play.TasksSetUp.other%></a>\r	            </div>\r			</div>\r		</div>\r		<div class="tablebox" id="taskDetailTableDiv">\r			<div class="login">\r					<img src="images/loading.gif" height="25px"></img> <br>\r					<%=GameCommon.loadingData%>\r				</div>\r		</div>\r	</div>\r</div>'}),define("text!templates/play/taskTollgateDataList.html",[],function(){return'<table id="taskTollgateDetailTable" border="0" width="100%" cellpadding="0" cellspacing="0" class="table_style_ope">\r	<thead id="taskTollgateDetailTableHead">\r		<tr data="">\r			<th width="15%"><%=GameCommon.designation%></th>\r			<th width="10%"><%=GameCommon.alias%></th>\r			<th width="10%"><%=Play.Tasks.type%></th>\r			<th width="10%"><%=Play.Tasks.enterCount%></th>\r			<th width="10%"><%=Play.Tasks.avgAccomplishTime%></th>\r			<th width="10%"><%=Play.Tasks.failTime%></th>\r			<th width="10%"><%=Play.Tasks.failRate%></th>\r			<th width="15%"><%=GameCommon.detail%></th>\r		</tr>\r	</thead>\r	<tbody id="taskData" >\r		{{#resultData}}\r		<tr>\r			<td width="15%">{{taskTollgateId}}</td>\r			<td width="10%">{{displayName}}</td>\r			<td width="10%">{{taskTollgateType}}</td>\r			<td width="10%">{{startTimes}}</td>\r			<td width="10%">{{avgSuccessTimeConsume}}</td>\r			<td width="10%">{{failedTimes}}</td>\r			<td width="10%">{{failedRate}}%</td>\r			<td width="15%">\r			  	<a class="levelDetail detail" data-id="{{id}}" ><%=Play.TasksSetUp.failReason%></a>\r			  	<a class="missionDetail detail" data-id="{{id}}"><%=Play.TasksSetUp.playerLevel%></a>\r			</td>\r		</tr>\r		{{/resultData}}\r		{{^resultData}}\r		<tr><td colspan="8" class="noData"><%=GameCommon.noData%></td></tr>\r		{{/resultData}}\r	</tbody>\r</table>\r\r\r'}),define("text!templates/play/failReason.html",[],function(){return'<tr class="itempointdetail"> \r\n	<td colspan="8" width="100%" >\r\n		<div class="mintdbox mintable">\r\n			<div class="title">\r\n				<strong id="chartTitle_<%=cur_itemId%>"></strong>\r\n			</div>\r\n			<div class="textbox">\r\n				<div id="itemDetailCode<%=cur_itemId%>">\r\n					<div role="chart">\r\n						<div id="itemDetailCode<%=cur_itemId%>-chart" class="minpicbox">\r\n						</div>\r\n						<div class="after">\r\n							<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n							<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n						</div>\r\n					</div>\r\n					<div role="table">\r\n						<div id="itemDetailCode<%=cur_itemId%>-table" class="minpicbox">\r\n						</div>\r\n						<div class="after">\r\n							<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n							<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>'}),define("text!templates/play/playerLevel.html",[],function(){return'<tr class="itempointdetail" id="itempointdetail"> \r\n	<td colspan="8" width="100%" >\r\n		<div class="mintdbox mintable">\r\n			<div class="title">\r\n				<strong id="chartTitle_<%=cur_itemId%>"></strong>\r\n			</div>\r\n			<div class="textbox">\r\n				<div id="itemDetailCode<%=cur_itemId%>">\r\n				<div class="box_top" role="tabbar">\r\n					<a data-tab="enter_<%=cur_itemId%>" class="tab hover"><%=Play.Tasks.enterCount%></a>\r\n					<a data-tab="success_<%=cur_itemId%>" class="tab"><%=Play.Tasks.successTime%></a>\r\n					<a data-tab="fail_<%=cur_itemId%>" class="tab"><%=Play.Tasks.failTime%></a>\r\n				</div>\r\n					<div role="chart">\r\n						<div id="itemDetailCode<%=cur_itemId%>-chart" class="picbox">\r\n						</div>\r\n						<div class="after">\r\n							<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n							<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n						</div>\r\n					</div>\r\n					<div role="table">\r\n						<div id="itemDetailCode<%=cur_itemId%>-table" class="picbox">\r\n						</div>\r\n						<div class="after">\r\n							<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n							<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n						</div>\r\n					</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>'}),define("text!templates/play/guideFunnelSetting.html",[],function(){return'<div class="Pop_line">\r\n    <div class="EditPop_top timetop">\r\n        <b class="l"><%=Play.MissionFunnel.missionFunnelSetting%></b>\r\n    </div>\r\n    <div class="Poptxt">\r\n    	<p class="setupPop_P"><%=Play.MissionFunnel.missionFunnelSettingTip%></p>\r\n        <ul class="setupPop" id="missionStep">\r\n        	\r\n        </ul>\r\n        <div class="opeDiv after product_opeDiv">\r\n            <a class="l CancelonCL" id="addStepBtn">+<%=Play.MissionFunnel.addStep%></a>\r\n            <a class="timecolse r Confirm" id="saveBtn"><%=Play.MissionFunnel.saveAndClose%></a>\r\n            <a class="r Cancel" id="canelBtn"><%=Play.MissionFunnel.canel%></a>\r\n        </div>\r\n    </div>\r\n</div>	\r\n'}),define("text!templates/play/missionFlowStep.html",[],function(){return'<% _.each(resultData,function(obj){\r\n	var missionId = obj.missionId;\r\n%>\r\n	<li class="step">\r\n		<b>step<%=obj.flowOrder%>：</b>\r\n		<label><%=Play.MissionFunnel.chooseMission%></label>\r\n		<select class="missionSelect" id="missionSelect<%=obj.flowOrder%>" style="left: 100px;">\r\n			<option value="-1"><%=Play.MissionFunnel.missionSelect%></option>\r\n			<% _.each(selectData,function(obj){\r\n				 var id = obj.item,selected=\'\';\r\n                  if(missionId == id) selected=\'selected\';\r\n			%>\r\n				<option <%=selected%> value="<%=obj.item%>"><%=obj.value%></option>\r\n			<%});%>\r\n		</select>\r\n		<label><%=Play.MissionFunnel.stepAlias%></label>\r\n		<input value="<%=obj.flowName%>" class="textinput" type="text"/>\r\n		<em class="r deleteItemtype">删除</em>\r\n	</li> 	\r\n<%});%>\r\n\r\n '}),define("models/play/TaskMission",["models/BaseModel"],function(e){var t=[{name:"taskList",url:"/v1/taskMissionManage/taskList"},{name:"updateTaskName",url:"/v1/taskMissionManage/updateTaskName"},{name:"clearMission",url:"/v1/taskMissionManage/clearMission"},{name:"missionTypeList",url:"/v1/taskMissionManage/missionTypeList"},{name:"updateTaskType",url:"/v1/taskMissionManage/updateTaskType"},{name:"addTaskType",url:"/v1/taskMissionManage/addTaskType"},{name:"deleteTaskType",url:"/v1/taskMissionManage/deleteTaskType"},{name:"guideFunnel",url:"/v1/taskMission/guideFunnel"},{name:"missionIdNameList",url:"/v1/taskMission/missionIdNameList"},{name:"saveMissionFlowSetting",url:"/v1/taskMission/saveMissionFlowSetting"},{name:"missionFlowSettingList",url:"/v1/taskMission/missionFlowSettingList"},{name:"fetchTaskTollgateDataList",url:"/v1/taskMission/fetchTaskTollgateDataList"},{name:"fetchFailReasonList",url:"/v1/taskMission/fetchFailReasonList"},{name:"fetchPlayerLevelList",url:"/v1/taskMission/fetchPlayerLevelList"}];return e.init(t)}),define("views/play/tasksView",["jquery","backbone","mustache","utils/ModelBox","utils/HighchartUtil","utils/dataTableUtil","utils/excelDataUtil","text!templates/play/tasks.html","text!templates/play/taskTollgateDataList.html","text!templates/play/failReason.html","text!templates/play/playerLevel.html","text!templates/play/guideFunnelSetting.html","text!templates/play/missionFlowStep.html","text!templates/public/loading.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","models/play/TaskMission","models/Constant","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g){var y=t.View.extend({el:"#container",events:{"click tbody>tr>td>a":"showDetailInfo","click #indexTab>a":"changeTab","click #guideFunnelSetting":"showGuideFunnelSetting","click #clickToSet":"showGuideFunnelSetting"},initialize:function(){e("#container").html(_.template(u,v)),require(["views/public/DatePicker","views/public/SelectView"],function(e,t){new e({el:"#datePicker"}),new t({el:"#selectChoose"})}),this.taskTollgateType="",this.render()},render:function(){return this.renderToGuideFunnel(),this.renderTaskTollgateDetailTable(),this},renderTaskTollgateDetailTable:function(){var t=e('#playTasksTaskTollgateDetail div[role="title"] a[role="excel"]').length==0;t&&e('#playTasksTaskTollgateDetail div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),e("#playTasksTaskTollgateDetail").tabs({indicator:!0});var r=_.clone(Params);r.taskTollgateType=this.taskTollgateType,m.fetchTaskTollgateDataList({data:r,success:function(t){var i={resultData:t};e("#taskDetailTableDiv").html(n.render(_.template(a,v),i));var u=e("<table></table>");u.append(e("#taskDetailTableDiv table").html()),e('#playTasksTaskTollgateDetail div[role="title"] a[role="excel"]').unbind("click").click(function(){var t=v.Play.TasksSetUp.taskTollgateDetail+"-"+e('#playTasksTaskTollgateDetail div[role="title"] a[data="'+r.taskTollgateType+'"]').html()+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=o.tableToJson(u[0]),i=_.template(d,{excelName:t,excelArray:n});e("body").append(i),e("#excelExportForm").submit(),e("#excelExportForm").remove()}),t&&t.length&&s.dataTable({$el:e("#taskTollgateDetailTable"),sort:!1})}})},showDetailInfo:function(t){var n=_.clone(Params),r=e(t.currentTarget),o=r.attr("class"),u=r.attr("data-id"),a=r.parent().parent(),c=r.html();a.next("tr.itempointdetail").remove();if(r.html()==v.GameCommon.packUp){a.find("a").each(function(t){t==0?e(this).html(v.Play.TasksSetUp.failReason):t==1&&e(this).html(v.Play.TasksSetUp.playerLevel)}),a.removeClass("hover");return}a.find("a").each(function(t){t==0?e(this).html(v.Play.TasksSetUp.failReason):t==1&&e(this).html(v.Play.TasksSetUp.playerLevel)}),r.html(v.GameCommon.packUp),a.addClass("hover"),v.cur_itemId=u,c==v.Play.TasksSetUp.playerLevel?a.after(_.template(l,v)):a.after(_.template(f,v)),e("#chartTitle_"+u).html(c),a.next("tr.hide").removeClass("hide"),this.params=_.clone(Params);var h=this,p=e("#itemDetailCode"+u).tabs(function(t){c==v.Play.TasksSetUp.playerLevel?(t=t.split("_")[0],h.params.item=t,h.params.id=u,t=="enter"?name=v.Play.Tasks.enterCount:t=="success"?name=v.Play.Tasks.successTime:t=="fail"&&(name=v.Play.Tasks.failTime),m.fetchPlayerLevelList({data:h.params,success:function(t){var n=_.pluck(t,"item"),t=_.pluck(t,"value"),r=[{name:name,data:t}];i.chart({id:"itemDetailCode"+u+"-chart",x:n,type:"column",series:r});var o=_.zip(n,t),a=[v.Play.TasksSetUp.playerLevel,name];s.drawTable({head:a,body:o,$el:e("#itemDetailCode"+u+"-table")}),ttabObj.head=a,p.body=o}})):(h.params.id=u,name=v.Play.TasksSetUp.failReason,m.fetchFailReasonList({data:h.params,success:function(t){var n=_.pluck(t,"item"),t=_.pluck(t,"value"),r=_.percent(t,3,1),o=[{name:name,data:t}];i.chartBar({id:"itemDetailCode"+u+"-chart",x:{left:n,right:r},series:o,pagination:!0});var a=_.zip(n,t,r),f=[v.Play.TasksSetUp.failReason,v.Play.Tasks.failTime,v.GameCommon.percentage];s.drawTable({head:f,body:a,$el:e("#itemDetailCode"+u+"-table")}),p.head=f,p.body=a}}))})},changeTab:function(t){var n=e(t.currentTarget),r=n.attr("data");this.taskTollgateType=r,e("#indexTab>a").removeClass("hover"),n.addClass("hover"),e("#taskDetailTableDiv").html(_.template(p,v)),this.renderTaskTollgateDetailTable()},deleteStep:function(t){console.log(e(t.currentTarget).attr("data"))},showGuideFunnelSetting:function(t){var n;m.missionIdNameList({data:Params,success:function(t){n=t,m.missionFlowSettingList({data:Params,success:function(t){var r={resultData:t,selectData:n,Play:v.Play};e("#missionStep").html(_.template(h,r)),e(".missionSelect").sSelect()}})}});var i=this;r.confirm({message:_.template(c,v),buttons:[{"#saveBtn":function(){var t=[],n=[],s=[];e("#missionStep").find("li.step").each(function(r){var i={};i.missionId=e(this).find("select.missionSelect").val(),i.flowName=e(this).find("input.textinput").val(),s.push(e(this).find("input.textinput").val()),i.flowOrder=r+1,i.productId=Params.productID,t.push(e(this).find("select.missionSelect").val()),n.push(i)});if(t.length<2){alert(v.Play.MissionFunnel.funelTip);return}if(s.indexOf("")!=-1||s.indexOf(" ")!=-1||t.indexOf("-1")!=-1){alert(v.Play.Tasks.tip1);return}if(i.isRepeat(t)){alert(v.Play.Tasks.tip2);return}if(i.isRepeat(s)){alert(v.Play.Tasks.tip3);return}m.saveMissionFlowSetting({data:n,success:function(e){r.unblock(),i.render()}})},"#canelBtn":function(){r.unblock()},"#addStepBtn":function(){var t=e("#missionStep").find("li.step").length;if(t>=10){alert(v.Play.Tasks.tip4);return}var r='<li class="step"><b>step'+(t+1)+"：</b>"+"<label>"+v.Play.MissionFunnel.chooseMission+"</label>"+'<select class="missionSelect" id="missionSelect'+(t+1)+'" style="left: 100px;">'+'<option value="-1">'+v.Play.MissionFunnel.missionSelect+"</option>";_.each(n,function(e){r+='<option value="'+e.item+'">'+e.value+"</option>"}),r+="</select>",r+="<label>"+v.Play.MissionFunnel.stepAlias+"</label>",r+='<input value="" class="textinput" type="text"/>',r+='<em class="r deleteItemtype">删除</em></li>',e("#missionStep").append(r),e(".missionSelect").sSelect(),i.Pop_place(e(".Pop_line").parent())},".deleteItemtype":function(t){var n=e("#missionStep").find("li.step").length;if(n<3){alert(v.Play.MissionFunnel.funelTip);return}e(t.currentTarget).parent("li").remove(),e("#missionStep").find("li.step").each(function(t){e(this).find("b").html("step"+(t+1)+"：")}),i.Pop_place(e(".Pop_line").parent())}}]})},Pop_place:function(t){var n=e(window).height(),r=e(document).width(),i=t.width(),s=t.height(),o=r/2-i/2,u=n/2-s/2;t.css({left:o+"px",top:u+"px"})},isRepeat:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},renderToGuideFunnel:function(){e("#playTasksNewHandConversionRate").tabs({indicator:!0}),m.guideFunnel({data:Params,success:function(t){if(!t.length){e("#guideFunelChart").html('<font style="line-height:24px;margin-top: 115px;display:block;">'+v.Play.MissionFunnel.funelTip2+'</font><a id="clickToSet" style=" color: #5BAC54; display: block;  font-size: 16px; margin: 0 auto; width: 100px;">'+v.Play.MissionFunnel.funelTip3+"</a>");return}var n=0,r=_.pluck(t,"value"),i=_.pluck(t,"item"),s=r[0],o=[],u=0;for(var a=0;a<r.length;a++)a==0?(u=r[a],o[a]=r[a]):(u!=0&&r[a]!=0?o[a]=Math.round(r[a]/u*1e3)/10:o[a]="0.0",u=r[a]);var f=o,l=r,c=r,h=r,p=new Highcharts.Chart({chart:{renderTo:"guideFunelChart",zoomType:"xy",backgroundColor:"#fff"},title:{text:""},xAxis:{categories:i},yAxis:{title:{text:""}},legend:{enabled:!1},tooltip:{formatter:function(){return""+this.x+": "+this.y}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}},area:{marker:{enabled:!0,states:{hover:{enabled:!0}}},dataLabels:{enabled:!0,formatter:function(){if(s!=0){var e=100;return this.y<s&&(e=Math.round(this.y/s*1e3)/10),e==0?"0.0"+v.Player.LostFunnel._rateUser:e+v.Player.LostFunnel._rateUser}}}},line:{dataLabels:{enabled:!0,x:-55,y:8,formatter:function(){var e=f[n];n+=1;if(!e)return"";if(n!=1)return e+"%"}},lineWidth:0,marker:{enabled:!1}}},series:[{name:v.Player.LostFunnel.visittimes,type:"column",data:h},{name:v.Player.LostFunnel.line,color:"#6DC5FD",type:"line",data:l},{name:v.Player.LostFunnel.funnel,color:"#6DC5FD",type:"area",data:c}]})}})}});return y}),define("text!templates/play/TasksManagement.html",[],function(){return'<div class="content r">\r	<div class="boxmax" >\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="playTasksSetUpTaskTollgateDetail">\r			<div class="title" role="title">\r				<strong class="l"><%=Play.TaskManage.missionManage%></strong>\r			</div>\r		</div>\r		<div class="tablebox" id="taskDiv">\r			\r		</div>\r	</div>\r</div>'}),define("text!templates/play/TaskManagement-table.html",[],function(){return'<table border="0" id="TasksManagementTable" width="100%" cellpadding="0" cellspacing="0" class="table_style1">\r\n	<thead>\r\n		<tr>\r\n			<th width="25%"><%=Play.TaskManage.missionID%></th>\r\n			<th width="40%"><%=Play.TaskManage.missionAlias%></th>\r\n			<th width="30%" class="left"><%=Play.TaskManage.missionType%></th>\r\n			<th width="15%"><%=Play.TaskManage.missionOperate%></th>\r\n		</tr>\r\n	</thead>\r\n	<tbody id="taskTableBody">\r\n		{{#resultData}}\r\n		<tr class="{{trclass}}">\r\n			<td width="25%">{{missionId}}</td>\r\n			<td width="40%"><input data-id="{{id}}" data-name="{{name}}" id="editMissionName" class="notEditorput" type="text" value="{{name}}"/></td>\r\n			<td width="30%" class="left">\r\n				 <div class="l missionNameDiv" id="mission_{{id}}">{{missionTypeName}}</div>\r\n				<a class="Cancel tableToggleBut l" data-id="{{id}}"><b><%=Play.TasksSetUp.newHand%></b></a>\r\n			</td>\r\n			<td width="15%"><a data-id="{{id}}" class="clearMission"><%=GameCommon.clear%></a></td>\r\n		</tr>\r\n		{{/resultData}}\r\n		{{^resultData}}\r\n			<tr><td colspan="4" class="noData"><%=GameCommon.noData%></td></tr>\r\n		{{/resultData}}\r\n	</tbody>\r\n</table>'}),define("text!templates/play/TaskManagement-MissionType.html",[],function(){return'<div class="relative l tableToggleDIVrel">\r\n<div class="Pop_line  tableToggleDIV">\r\n    <div class="timetop">\r\n      <b class="l"><%=Play.TaskManage.missionTypeSetting%></b><a class="r close"></a>\r\n    </div>\r\n    <div class="Poptxt">\r\n      <ul class="itemtypeDiv" id="missiontypeDiv">\r\n        {{#resultData}}\r\n        <li>\r\n          <a class="changeMissiontype" data-id="{{id}}">\r\n            <strong class="l" >{{name}}</strong>\r\n            <{{display}} data-id="{{id}}" data-name="{{name}}" class="r deleteMissiontype">删除</{{display}}>\r\n          </a>\r\n        </li>\r\n        {{/resultData}}\r\n      </ul>\r\n      <div class="itemtypebut">\r\n        <!-- <input type="text" class="Editorput" /> -->\r\n      </div>\r\n      <div class="opeDiv after">\r\n			<a id="productDetailConfim" class="timecolse r Confirm"><%=VirtualEconomy.Management.affirm%></a>\r\n			<input id="missionTypeNameInput" type="text" class="Editorput r" value="<%=VirtualEconomy.Management.addNewCategory%>" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>'}),define("text!templates/play/clearMissionTip.html",[],function(){return'<div class="Pop_line">\r\n	<div class="timetop">\r\n    	<b class="l"><%=Play.TaskManage.tip%></b>\r\n    </div>\r\n	<div class="Poptxt">\r\n    	<p class="Prompt"><%=Play.TaskManage.clearTip%></p>\r\n        <div class="opeDiv after">\r\n            <a  class="timecolse r Confirm"><%=GameCommon.confirm%></a>\r\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/play/TasksManagementView",["backbone","mustache","utils/ModelBox","utils/excelDataUtil","text!templates/play/TasksManagement.html","text!templates/play/TaskManagement-table.html","text!templates/play/TaskManagement-MissionType.html","text!templates/play/clearMissionTip.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","models/play/TaskMission","utils/dataTableUtil"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click #editMissionName":"changeEditInputClass","blur #editMissionName":"saveMissionName","click .clearMission":"clearMission","click #taskTableBody tr a.tableToggleBut":"showMissionType","click #taskTableBody tr a.close":"hideMissionType","click #productDetailConfim":"addMissionType","click #missiontypeDiv li em.deleteMissiontype":"deleteMissionType","click #missiontypeDiv li a.changeMissiontype":"changeMissiontype","click #missionTypeNameInput":"missionTypeNameInputClick","blur #missionTypeNameInput":"missionTypeNameInputBlur"},initialize:function(){$("#container").html(_.template(i,f)),this.render()},render:function(){return this.taskList(),this},changeEditInputClass:function(e){$(e.currentTarget).attr("class","Editorput")},saveMissionName:function(e){var t=$(e.currentTarget).attr("data-id"),r=$(e.currentTarget).attr("data-name"),i=$(e.currentTarget).val();if(r==i){$(e.currentTarget).attr("class","notEditorput");return}var s={id:t,name:i,productId:Params.productID};l.updateTaskName({data:s,success:function(t){t==200?($(e.currentTarget).attr("class","notEditorput"),$(e.currentTarget).attr("data-name",i)):t==401?n.alert({message:"别名已存在"}):n.alert({message:"程序内部错误，错误码："+t})}})},clearMission:function(e){var t=this,r=$(e.currentTarget).attr("data-id");n.confirm({message:_.template(u,f),buttons:[{".Confirm":function(){n.unblock(),l.clearMission({data:{id:r,productId:Params.productID},success:function(e){e?(n.alert({message:f.Play.TaskManage.dataCleared}),t.taskList()):n.alert({message:f.VirtualEconomy.Management.programWrong})}})},".Cancel":function(){n.unblock()}}]})},showMissionType:function(e){this.id=$(e.currentTarget).attr("data-id"),l.missionTypeList({data:Params,success:function(n){var r={resultData:n,display:function(){return this.default?"i":"em"}};$(e.currentTarget).after(t.render(_.template(o,f),r));var i=$("#bottom").offset().top,s=$(e.currentTarget).offset().top+282;s>=i?$(".tableToggleDIV").css({bottom:"-8px"}):$(".tableToggleDIV").css({top:"24px"})}})},hideMissionType:function(e){$(".tableToggleDIVrel").remove()},addMissionType:function(e){var t=$.trim($("#missionTypeNameInput").val());if(t==f.VirtualEconomy.Management.addNewCategory||t==""||t==" "){n.alert({message:f.VirtualEconomy.Management.enterTypeName});return}l.addTaskType({data:{name:t,productId:Params.productID},success:function(e){if(e.code==200){var t=e.obj,r=t.name,i=t.id;$("#missiontypeDiv").append('<li><a class="changeMissiontype" data-id="'+i+'"><strong class="l" >'+r+"</strong>"+'<em data-id="'+i+'" data-name="'+r+'" class="r deleteMissiontype">删除</em></li></a>'),$("#missionTypeNameInput").val(f.VirtualEconomy.Management.addNewCategory)}else e.code==401?n.alert({message:f.VirtualEconomy.Management.thisNameExisted}):n.alert({message:f.VirtualEconomy.Management.programWrong+e})}})},deleteMissionType:function(e){var t=$(e.currentTarget).attr("data-id"),r=$(e.currentTarget).attr("data-name");$("#taskTableBody tr div.missionNameDiv").each(function(){$(this).html()==r&&$(this).html(f.GameCommon.other)}),l.deleteTaskType({data:{id:t},success:function(t){t==200?$(e.currentTarget).parent().remove():n.alert({message:f.VirtualEconomy.Management.programWrong+t})}})},changeMissiontype:function(e){$("#mission_"+this.id).html($(e.currentTarget).find("strong").html()),l.updateTaskType({data:{id:this.id,missionTypeId:$(e.currentTarget).attr("data-id"),productId:Params.productID},success:function(e){e==200?$(".tableToggleDIVrel").remove():n.alert({message:f.VirtualEconomy.Management.programWrong+e})}})},taskList:function(){$('#playTasksSetUpTaskTollgateDetail div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#playTasksSetUpTaskTollgateDetail").tabs({indicator:!0}),l.taskList({data:Params,success:function(e){var n={resultData:e};n.trclass=function(){return(e.indexOf(this)+1)%2==0?"changeColor":""},$("#taskDiv").html(t.render(_.template(s,f),n));var i=$("<table></table>"),o=$("<thead></thead>"),u=$("<tbody></tbody>");o.append($("#TasksManagementTable>thead").html()),u.append($("#TasksManagementTable>tbody").html()),i.append(o).append(u),$('#playTasksSetUpTaskTollgateDetail div[role="title"] a[role="excel"]').click(function(){var e=f.Play.TaskManage.missionManage+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",t=r.tableToJson(i[0]),n=_.template(a,{excelName:e,excelArray:t});$("body").append(n),$("#excelExportForm").submit(),$("#excelExportForm").remove()}),c.dataTable({$el:$("#TasksManagementTable")})}})},missionTypeNameInputClick:function(e){var t=$(e.currentTarget).val();t==f.VirtualEconomy.Management.addNewCategory&&$(e.currentTarget).val("")},missionTypeNameInputBlur:function(e){var t=$(e.currentTarget).val();(t==""||t==" ")&&$(e.currentTarget).val(f.VirtualEconomy.Management.addNewCategory)}});return h}),define("text!templates/revenue/incomeData.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="incomeTrendCode">\r			<div class="title" role="title">\r				<strong class="l"><%=GameCommon.incomeData%></strong>\r			</div>\r			<div class="textbox">\r				<div role="tabbar" class="box_top">\r					<a data-tab="chargeValue" class="tab hover"><%=Revenue.IncomeData.incomeMoney%></a>\r	                <a data-tab="chargeTimes" class="tab"><%=Revenue.IncomeData.rechargeableTimes%></a>\r	                <a data-tab="chargeNums" class="tab"><%=Revenue.IncomeData.rechargeablePeopleNumber%></a>\r	                <div class="info r">\r	                	SUM：<font id="chargeSum"></font>\r	                </div>\r				</div>\r				<div role="chart">\r					<div id="incomeTrendCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="incomeTrendCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r\r	</div>\r\r	<div class="boxmax">\r		<div id="chargeLevelCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Revenue.IncomeData.payLevel%></strong>\r			</div>\r			<div class="textbox">\r				<div role="tabbar" class="box_top">\r					<a data-tab="chargeLevelValue" class="tab hover"><%=Revenue.IncomeData.incomeMoney%></a>\r                	<a data-tab="chargeLevelNum" class="tab"><%=Revenue.IncomeData.rechargeablePersonTime%></a>\r				</div>\r				<div role="chart">\r					<div id="chargeLevelCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="chargeLevelCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="incomeLocationCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.IncomeData.regionIncome%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="incomeLocationCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="incomeLocationCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="incomePartnerCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.IncomeData.channelIncome%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="incomePartnerCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="incomePartnerCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="incomeSexCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.IncomeData.sexIncome%></strong>\r				</div>\r	            <div class="textbox">\r					<div role="chart">\r						<div class="minpicbox" id="incomeSexCode-chart"></div>\r		                <div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="incomeSexCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r            	</div>\r            </div>\r		</li>\r		<li class="contentbox r" >\r			<div id="incomeAgeCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.IncomeData.ageIncome%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="incomeAgeCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="incomeAgeCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/revenue/IncomeDataView",["backbone","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","text!templates/revenue/incomeData.html","text!templates/public/people.html","models/revenue/IncomeData","models/Constant","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c){var h=Backbone.View.extend({el:"#container",events:{},initialize:function(){$("#container").html(_.template(u,c)),new s({el:"#datePicker"}),new o({el:"#selectChoose"}),this.common=c.GameCommon,this.incomeData=c.Revenue.IncomeData,this.render()},render:function(){return this.renderIncomeTrend(),this.renderChargeLevel(),this.renderIncomeByLocation(),this.renderIncomeByPartner(),this.renderIncomeBySex(),this.renderIncomeByAge(),this},renderIncomeTrend:function(){var e=this,i=$("#incomeTrendCode").tabs(function(s){var o,u,a="";switch(s){case"chargeValue":o="incomeNumList",u=e.incomeData.incomeMoney,a="#"+c.GameCommon.zhMonryUnit;break;case"chargeTimes":o="chargeTimesList",u=e.incomeData.rechargeableTimes,a=c.GameCommon.times;break;case"chargeNums":o="chargePlayerNumList",u=e.incomeData.rechargeablePeopleNumber}f[o]({data:Params,success:function(e){var s=_.pluck(e,"item"),e=_.pluck(e,"value"),o=[{name:u+"^"+a,data:e}],f=null,l=[c.GameCommon.date,u];a.indexOf("#")!=-1?($("#chargeSum").html(a.substring(1)+n.formatDigit(_.sum(e))),f=_.zip(s,_.map(e,function(e){return c.GameCommon.zhMonryUnit+e}))):(f=_.zip(s,_.map(e,function(e){return e+a})),$("#chargeSum").html(n.formatDigit(_.sum(e))+a)),t.chart({id:"incomeTrendCode-chart",x:s,series:o}),r.drawTable({head:l,body:f,$el:$("#incomeTrendCode-table")}),i.head=l,i.body=f}})})},renderChargeLevel:function(){var e=_.clone(Params),n=this,i=$("#chargeLevelCode").tabs(function(s){var o,u,a="";switch(s){case"chargeLevelValue":o="levelIncomeNumDistribution",u=n.incomeData.incomeMoney,a="#"+c.GameCommon.zhMonryUnit;break;case"chargeLevelNum":o="levelChargePlayerNumDistribution",u=n.incomeData.rechargeablePersonTime,a=c.GameCommon.times}f[o]({data:e,success:function(e){var n=_.pluck(e,"item"),e=_.pluck(e,"value"),s=[{name:u+"^"+a,data:e}];t.chart({id:"chargeLevelCode-chart",x:n,type:"column",series:s});var o=null,f=[c.GameCommon.grade,u];a.indexOf("#")!=-1?o=_.zip(n,_.map(e,function(e){return c.GameCommon.zhMonryUnit+e})):o=_.zip(n,_.map(e,function(e){return e+a})),r.drawTable({head:f,body:o,$el:$("#chargeLevelCode-table")}),i.head=f,i.body=o}})})},renderIncomeByLocation:function(){this.request("locationIncomeDistribution",this.common.region,"incomeLocationCode",!0)},renderIncomeByPartner:function(){this.request("partnerIncomeDistribution",this.common.channel,"incomePartnerCode",!0)},renderIncomeBySex:function(){var e=this,t=$("#incomeSexCode").tabs(function(){f.sexIncomeDistribution({data:Params,success:function(n){$("#incomeSexCode-chart").html(a),e.drawSex(n),t.head=[c.GameCommon.sex,c.GameCommon.percentage],t.body=_.zip([c.GameCommon.male,c.GameCommon.female],_.percent(_.pluck(n,"value"),3,1))}})})},renderIncomeByAge:function(){this.request("ageGroupIncomeDistribution",this.common.age,"incomeAgeCode")},request:function(e,n,i,s){var o=this,u=$("#"+i).tabs(function(){f[e]({data:Params,success:function(e){var a=_.pluck(e,"item"),f=_.pluck(e,"value"),l=[{name:n+"^#"+c.GameCommon.zhMonryUnit,data:f}],h=null;i!="Esbox-location"&&i!="Esbox-partner"&&(h=_.percent(f,3,1)),t.chartBar({id:i+"-chart",x:{left:a,right:h},series:l,pagination:s});var p=_.zip(a,_.map(f,function(e){return c.GameCommon.zhMonryUnit+e}),h),d=[n,o.common.income,o.common.percentage];r.drawTable({head:d,body:p,$el:$("#"+i+"-table")}),u.head=d,u.body=p}})})},drawSex:function(e){var t=0,n=10,s=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),n=10-t,s=10-t,o=10-s);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(n))u.append('<img src="images/malehiddle.png">');for(i in _.range(s))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var c=_.zip([this.common.male,this.common.female],f),h=[this.common.sex,this.common.percentage];r.drawTable({head:h,body:c,$el:$("#incomeSexCode-table")})}});return h}),define("text!templates/revenue/PayPermeate.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="payRateCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Revenue.PayPermeate.payRate%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="dayPayRate" class="tab hover"><%=GameCommon.dailyPayRate%></a>\r	                <a data-tab="weekPayRate" class="tab"><%=Revenue.PayPermeate.weeklyPayRate%></a>\r	                <a data-tab="monthPayRate" class="tab"><%=Revenue.PayPermeate.monthlyPayRate%></a>\r					<div class="info r">\r	                	AVG：<font id="payRateCode-avg"></font>\r	                </div>\r				</div>\r				<div role="chart">\r					<div id="payRateCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="payRateCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r\r	</div>\r\r	<div class="boxmax">\r		<div id="ARPUCode">\r			<div class="title" role="title">\r				<strong class="l">ARPU</strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="dayARPU" class="tab hover">ARPU(<%=GameCommon.day%>)</a>\r	                <a data-tab="monthARPU" class="tab">ARPU(<%=GameCommon.month%>)</a>\r	                <a data-tab="dayARPPU" class="tab">ARPPU(<%=GameCommon.day%>)</a>\r	                <a data-tab="monthARPPU" class="tab">ARPPU(<%=GameCommon.month%>)</a>\r					<div class="info r">\r	                	AVG：<font id="ARPUCode-avg"></font>\r	                </div>\r				</div>\r				<div role="chart">\r					<div id="ARPUCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="ARPUCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r\r	</div>\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="locationCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayPermeate.regionPayPermeate%></strong>\r				</div>\r				<div class="textbox" id="Esbox-location">\r					<div class="box_top" role="tabbar">\r						<a data-tab="locationRate" class="tab hover"><%=GameCommon.avgDailyPayRate%></a>\r	                    <a data-tab="locationARPU" class="tab"><%=GameCommon.avgDaily%>ARPU</a>\r	                    <a data-tab="locationARPPU" class="tab"><%=GameCommon.avgDaily%>ARPPU</a>\r						<div class="info r">\r	                		AVG：<font id="locationCode-avg"></font>\r	                	</div>\r					</div>\r					<div role="chart">\r						<div id="locationCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="locationCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="partnerCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayPermeate.channelPayPermeate%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a data-tab="partnerRate" class="tab hover"><%=GameCommon.avgDailyPayRate%></a>\r	                    <a data-tab="partnerARPU" class="tab"><%=GameCommon.avgDaily%>ARPU</a>\r	                    <a data-tab="partnerARPPU" class="tab"><%=GameCommon.avgDaily%>ARPPU</a>\r						<div class="info r">\r	                		AVG：<font id="partnerCode-avg"></font>\r	                	</div>\r					</div>\r					<div role="chart">\r						<div id="partnerCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="partnerCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="sexGroupCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayPermeate.sexPayPermeate%></strong>\r				</div>\r	            <div class="textbox">\r					<div class="box_top" role="tabbar" id="sexTab">\r						<a data-tab="fetchDailyRateOfPay" class="tab hover"><%=GameCommon.avgDailyPayRate%></a>\r	                    <a data-tab="fetchDailyARPU" class="tab"><%=GameCommon.avgDaily%>ARPU</a>\r	                    <a data-tab="fetchDailyARPPU" class="tab"><%=GameCommon.avgDaily%>ARPPU</a>\r						<div class="info r">\r		                	AVG：<font id="sexGroupCode-avg"></font>\r		                </div>\r					</div>\r					<div role="chart">\r						<div id="sexGroupCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="sexGroupCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r\r            </div>\r		</li>\r		<li class="contentbox r" >\r			<div id="ageGroupCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayPermeate.agePayPermeate%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a data-tab="ageGroupRate" class="tab hover"><%=GameCommon.avgDailyPayRate%></a>\r	                    <a data-tab="ageGroupARPU" class="tab"><%=GameCommon.avgDaily%>ARPU</a>\r	                    <a data-tab="ageGroupARPPU" class="tab"><%=GameCommon.avgDaily%>ARPPU</a>\r						<div class="info r">\r		                	AVG：<font id="ageGroupCode-avg"></font>\r		                </div>\r					</div>\r					<div role="chart">\r						<div id="ageGroupCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="ageGroupCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/revenue/PayPermeateView",["backbone","utils/HighchartUtil","utils/dataTableUtil","utils/RegexUtil","views/public/DatePicker","views/public/SelectView","text!templates/revenue/PayPermeate.html","models/revenue/PayPermeate","text!templates/public/loading.html","text!templates/public/people.html","models/Constant","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c,h){var p=Backbone.View.extend({el:"#container",events:{"click #sexTab > a":"changeSexTab"},initialize:function(){$("#container").html(_.template(u,h)),new s({el:"#datePicker"}),new o({el:"#selectChoose"}),this.render()},render:function(){return this.payRateRender(),this.ARPURender(),this.locationPayPermeate(),this.partnerPayPermeate(),this.sexPayPermeate("fetchDailyRateOfPay"),this.ageGroupPayPermeate(),this},payRateRender:function(){var e=_.clone(Params),i=$("#payRateCode").tabs(function(s){var o,u;switch(s){case"dayPayRate":o="日付费率",u="dayPayRateList";break;case"weekPayRate":o="周付费率",u="weekPayRateList";break;case"monthPayRate":o="月付费率",u="monthPayRateList"}e.item=s,a[u]({$entity:e,$callback:function(e,s,u){var a=_.pluck(u,"item"),u=_.pluck(u,"value"),f=[{name:o+"^%",data:u}];$("#payRateCode-avg").html(r.formatDigit(_.avg(u))+"%"),t.chart({id:"payRateCode-chart",x:a,series:f,yPercent:!0});var l=_.zip(a,_.map(u,function(e){return e+"%"})),c=[h.GameCommon.date,o];n.drawTable({head:c,body:l,$el:$("#payRateCode-table")}),i.head=c,i.body=l}})})},ARPURender:function(){var e=_.clone(Params),i=$("#ARPUCode").tabs(function(s){var o,u;switch(s){case"dayARPU":o="ARPU("+h.GameCommon.day+")",u="dayARPUList";break;case"monthARPU":o="ARPU("+h.GameCommon.month+")",u="monthARPUList";break;case"dayARPPU":o="ARPPU("+h.GameCommon.day+")",u="dayARPPUList";break;case"monthARPPU":o="ARPPU("+h.GameCommon.month+")",u="monthARPPUList"}e.item=s,a[u]({$entity:e,$callback:function(e,s,u){var a=_.pluck(u,"item"),u=_.pluck(u,"value"),f=[{name:o+"^#"+h.GameCommon.zhMonryUnit,data:u}];$("#ARPUCode-avg").html(h.GameCommon.zhMonryUnit+r.formatDigit(_.avg(u))),t.chart({id:"ARPUCode-chart",x:a,series:f});var l=_.zip(a,_.map(u,function(e){return h.GameCommon.zhMonryUnit+e})),c=[h.GameCommon.date,o];n.drawTable({head:c,body:l,$el:$("#ARPUCode-table")}),i.head=c,i.body=l}})})},locationPayPermeate:function(){var e=_.clone(Params);e.groupBy=c.LOCATION;var i=$("#locationCode").tabs(function(s){var o,u,f=!1,l="";switch(s){case"locationRate":o=h.GameCommon.avgDailyPayRate,u="fetchDailyRateOfPay",f=!0,l="%";break;case"locationARPU":o=h.GameCommon.avgDaily+"ARPU",u="fetchDailyARPU",f=!1,l="#"+h.GameCommon.zhMonryUnit;break;case"locationARPPU":o=h.GameCommon.avgDaily+"ARPPU",u="fetchDailyARPPU",f=!1,l="#"+h.GameCommon.zhMonryUnit}a[u]({$entity:e,$callback:function(e,s,u){var a=_.pluck(u,"item"),u=_.pluck(u,"value"),c=[{name:o+"^"+l,data:u}];l.indexOf("#")!=-1?$("#locationCode-avg").html(l.substring(1)+r.formatDigit(_.avg(u))):$("#locationCode-avg").html(r.formatDigit(_.avg(u))+l),t.chartBar({id:"locationCode-chart",x:{left:a},series:c,yPercent:f,pagination:!0});var p=null,d=[h.GameCommon.region,o];l.indexOf("#")!=-1?p=_.zip(a,_.map(u,function(e){return h.GameCommon.zhMonryUnit+e})):p=_.zip(a,_.map(u,function(e){return e+"%"})),n.drawTable({head:d,body:p,$el:$("#locationCode-table")}),i.head=d,i.body=p}})})},partnerPayPermeate:function(){var e=_.clone(Params);e.groupBy=c.PARTNER;var i=$("#partnerCode").tabs(function(s){var o,u,f=!1,l="";switch(s){case"partnerRate":o=h.GameCommon.avgDailyPayRate,u="fetchDailyRateOfPay",l="%",f=!0;break;case"partnerARPU":o=h.GameCommon.avgDaily+"ARPU",u="fetchDailyARPU",l="#"+h.GameCommon.zhMonryUnit,f=!1;break;case"partnerARPPU":o=h.GameCommon.avgDaily+"ARPPU",u="fetchDailyARPPU",l="#"+h.GameCommon.zhMonryUnit,f=!1}a[u]({$entity:e,$callback:function(e,s,u){var a=_.pluck(u,"item"),u=_.pluck(u,"value");l.indexOf("#")!=-1?$("#partnerCode-avg").html(l.substring(1)+r.formatDigit(_.avg(u))):$("#partnerCode-avg").html(r.formatDigit(_.avg(u))+l);var c=[{name:o+"^"+l,data:u}];t.chartBar({id:"partnerCode-chart",x:{left:a},series:c,yPercent:f,pagination:!0});var p=null,d=[h.GameCommon.channel,o];l.indexOf("#")!=-1?p=_.zip(a,_.map(u,function(e){return h.GameCommon.zhMonryUnit+e})):p=_.zip(a,_.map(u,function(e){return e+"%"})),n.drawTable({head:d,body:p,$el:$("#partnerCode-table")}),i.head=d,i.body=p}})})},sexPayPermeate:function(e){var t=_.clone(Params);t.groupBy=c.SEX;var n=this,i=$("#sexGroupCode").tabs(function(s){a[e]({$entity:t,$callback:function(e,t,o){$("#sexGroupCode-chart").html(l),s=="fetchDailyRateOfPay"?$("#sexGroupCode-avg").html(r.formatDigit(_.avg(o))+"%"):$("#sexGroupCode-avg").html(h.GameCommon.zhMonryUnit+r.formatDigit(_.avg(o))),n.drawSex(o),i.head=[h.GameCommon.sex,h.GameCommon.percentage],i.body=_.zip([h.GameCommon.male,h.GameCommon.female],_.percent(_.pluck(o,"value"),3,1))}})})},ageGroupPayPermeate:function(){var e=_.clone(Params);e.groupBy=c.AGE;var i=$("#ageGroupCode").tabs(function(s){var o,u,f=!1,l="";switch(s){case"ageGroupRate":o=h.GameCommon.avgDailyPayRate,u="fetchDailyRateOfPay",f=!0,l="%";break;case"ageGroupARPU":o=h.GameCommon.avgDaily+"ARPU",u="fetchDailyARPU",l="#"+h.GameCommon.zhMonryUnit,f=!1;break;case"ageGroupARPPU":o=h.GameCommon.avgDaily+"ARPPU",u="fetchDailyARPPU",l="#"+h.GameCommon.zhMonryUnit,f=!1}a[u]({$entity:e,$callback:function(e,s,u){var a=_.pluck(u,"item"),u=_.pluck(u,"value"),c=[{name:o+"^"+l,data:u}];l.indexOf("#")!=-1?$("#ageGroupCode-avg").html(l.substring(1)+r.formatDigit(_.avg(u))):$("#ageGroupCode-avg").html(r.formatDigit(_.avg(u))+l),t.chartBar({id:"ageGroupCode-chart",x:{left:a},series:c,yPercent:f});var p=null,d=[h.GameCommon.age,o];l.indexOf("#")!=-1?p=_.zip(a,_.map(u,function(e){return h.GameCommon.zhMonryUnit+e})):p=_.zip(a,_.map(u,function(e){return e+"%"})),n.drawTable({head:d,body:p,$el:$("#ageGroupCode-table")}),i.head=d,i.body=p}})})},drawSex:function(e){var t=0,r=10,s=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),r=10-t,s=10-t,o=10-s);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(r))u.append('<img src="images/malehiddle.png">');for(i in _.range(s))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var c=_.zip([h.GameCommon.male,h.GameCommon.female],f),p=[h.GameCommon.sex,h.GameCommon.percentage];n.drawTable({head:p,body:c,$el:$("#sexGroupCode-table")})},changeSexTab:function(e){$("#sexTab > a").removeClass("hover"),$(e.currentTarget).addClass("tab hover");var t=$(e.currentTarget).attr("data-tab");this.sexPayPermeate(t)}});return p}),define("models/revenue/NewPlayerValue",["models/BaseModel"],function(e){var t=[{name:"fetchXdaysAvgContributionList",url:"/v1/newPlayerValue/fetchXdaysAvgContributionList"}];return e.init(t)}),define("text!templates/revenue/newPlayerValue.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="revenueNewPlayerValueCode">\r			<div class="title"  role="title">\r				<strong class="l"><%=Revenue.NewPlayerValue.newPlayerRevenueContribution%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a class="tab hover" data-tab="day07"><%=Revenue.NewPlayerValue.days7AvgContribution%></a>\r					<a class="tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14AvgContribution%></a>\r					<a class="tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30AvgContribution%></a>\r					<div class="info r">\r	                	AVG | MD：<font id="chargeAvg"></font> | <font id="chargeMd"></font>\r	                </div>\r				</div>\r				<div role="chart">\r					<div id="revenueNewPlayerValueCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="revenueNewPlayerValueCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="revenueNewPlayerValueLocationCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=Revenue.NewPlayerValue.locationNewPlayerValue%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a class="tab hover" data-tab="day07"><%=Revenue.NewPlayerValue.days7Contribution%></a>\r						<a class="tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14Contribution%></a>\r						<a class="tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30Contribution%></a>\r					</div>\r					<div role="chart">\r						<div id="revenueNewPlayerValueLocationCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="revenueNewPlayerValueLocationCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="revenueNewPlayerValuePartnerCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=Revenue.NewPlayerValue.partnerNewPlayerValue%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a class="tab hover" data-tab="day07"><%=Revenue.NewPlayerValue.days7Contribution%></a>\r						<a class="tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14Contribution%></a>\r						<a class="tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30Contribution%></a>\r					</div>\r					<div role="chart">\r						<div id="revenueNewPlayerValuePartnerCode-chart" class="minpicbox">\r						</div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        		<div id="pagination"></div>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="revenueNewPlayerValuePartnerCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox l" >\r			<div id="revenueNewPlayerValueSexCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=Revenue.NewPlayerValue.sexNewPlayerValue%></strong>\r				</div>\r	            <div class="textbox">\r	            	<div class="box_top" role="tabbar">\r						<a class="tab hover" data-tab="day07"><%=Revenue.NewPlayerValue.days7Contribution%></a>\r						<a class="tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14Contribution%></a>\r						<a class="tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30Contribution%></a>\r					</div>\r            		<div role="chart">\r            			<div class="minpicbox" id="revenueNewPlayerValueSexCode-chart">\r		            	</div>\r		            	<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r            		</div>\r	            	<div role="table">\r						<div id="revenueNewPlayerValueSexCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r            	</div>\r            </div>\r		</li>\r		<li class="contentbox r" >\r			<div id="revenueNewPlayerValueAgeCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=Revenue.NewPlayerValue.ageNewPlayerValue%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a class="tab hover" data-tab="day07"><%=Revenue.NewPlayerValue.days7Contribution%></a>\r						<a class="tab" data-tab="day14"><%=Revenue.NewPlayerValue.days14Contribution%></a>\r						<a class="tab" data-tab="day30"><%=Revenue.NewPlayerValue.days30Contribution%></a>\r					</div>\r					<div role="chart">\r						<div id="revenueNewPlayerValueAgeCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="revenueNewPlayerValueAgeCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/revenue/NewPlayerValueView",["backbone","models/revenue/NewPlayerValue","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","models/Constant","text!templates/revenue/newPlayerValue.html","text!templates/public/people.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{},initialize:function(){$("#container").html(_.template(f,c)),new o({el:"#datePicker"}),new u({el:"#selectChoose"}),this.player={userType:a.NEW_PLAYER},this.render()},render:function(){return this.renderPlayerContribution(),this.renderLocation(),this.renderChannel(),this.renderGender(),this.renderAge(),this},renderPlayerContribution:function(){this.request("revenueNewPlayerValueCode",null)},renderLocation:function(){this.request("revenueNewPlayerValueLocationCode","location",!0)},renderChannel:function(){this.request("revenueNewPlayerValuePartnerCode","partner",!0)},renderGender:function(){this.request("revenueNewPlayerValueSexCode","sex")},renderAge:function(){this.request("revenueNewPlayerValueAgeCode","age",!0)},request:function(e,i,o){var u=this,f=_.clone(Params);f.player=this.player,f.groupBy=i;var h=$("#"+e).tabs(function(p){var d=null,v=null;p==="day07"?(f.daysNum=a.DAYS_07,d=c.Revenue.NewPlayerValue.days7AvgContribution):p==="day14"?(f.daysNum=a.DAYS_14,d=c.Revenue.NewPlayerValue.days14AvgContribution):p==="day30"&&(f.daysNum=a.DAYS_30,d=c.Revenue.NewPlayerValue.days30AvgContribution),i==="location"?v=c.GameCommon.region:i==="partner"?v=c.GameCommon.channel:i==="sex"?v=c.GameCommon.sex:i==="age"&&(v=c.GameCommon.age),t.fetchXdaysAvgContributionList({data:f,success:function(t){if(i==="sex")$("#revenueNewPlayerValueSexCode-chart").html(l),u.drawSex(t.xdaysValue),h.head=[c.GameCommon.sex,c.GameCommon.percentage],h.body=_.zip([c.GameCommon.male,c.GameCommon.female],_.percent(_.pluck(t.xdaysValue,"value"),3,1));else{var a=_.pluck(t.xdaysValue,"item"),f=_.pluck(t.xdaysValue,"value"),p=[{name:d+"^#"+c.GameCommon.zhMonryUnit,data:f}],m=_.percent(f,3,1),g=null,y=null;i!=null?(g=_.zip(a,_.map(f,function(e){return c.GameCommon.zhMonryUnit+e}),m),y=[v,d,c.GameCommon.percentage],n.chartBar({id:e+"-chart",x:{left:a,right:m},series:p,pagination:o})):($("#chargeAvg").html(c.GameCommon.zhMonryUnit+t.avgValue),$("#chargeMd").html(c.GameCommon.zhMonryUnit+r.formatDigit(_.median(f))),g=_.zip(a,_.map(f,function(e){return c.GameCommon.zhMonryUnit+e})),y=[c.GameCommon.date,d],n.chart({id:e+"-chart",x:a,series:p,pagination:o})),s.drawTable({head:y,body:g,$el:$("#"+e+"-table")}),h.head=y,h.body=g}}})})},drawSex:function(e){var t=0,n=10,r=0,o=10,u=$("#malePicture"),a=$("#femalePicture"),f=_.percent(_.pluck(e,"value"),3,1);$("#maleScale").html(f[0]),$("#femaleScale").html(f[1]);var l=_.sum(_.pluck(e,"value"));l>0&&(t=Math.round(parseInt(f[0])/10),n=10-t,r=10-t,o=10-r);for(i in _.range(t))u.append('<img src="images/male.png">');for(i in _.range(n))u.append('<img src="images/malehiddle.png">');for(i in _.range(r))a.append('<img src="images/female.png">');for(i in _.range(o))a.append('<img src="images/femalehiddle.png">');var h=_.zip([c.GameCommon.male,c.GameCommon.female],f),p=[c.GameCommon.sex,c.GameCommon.percentage];s.drawTable({head:p,body:h,$el:$("#revenueNewPlayerValueSexCode-table")})}});return h}),define("text!templates/revenue/PayHabit.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop" style="margin-bottom:0px;">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r	</div>\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="chargeWayCode">\r				<div class="title"  role="title">\r					<strong class="l"><%=Revenue.PayHabit.rechargeableType%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a class="hover tab" data-tab="incomeNum_charge" ><%=Revenue.IncomeData.incomeMoney%></a>\r						<a class="tab" data-tab="chargePlayerNum_charge" ><%=Revenue.IncomeData.rechargeablePersonTime%></a>\r					</div>\r					<div role="chart">\r						<div id="chargeWayCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="chargeWayCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		\r		<li class="contentbox r" >\r			<div id="consumePackageCode">\r				<div class="title" role="title">\r					<strong class="l"><%=Revenue.PayHabit.consumerPackingTypes%></strong>\r				</div>\r				<div class="textbox">\r					<div class="box_top" role="tabbar">\r						<a class="hover tab" data-tab="incomeNum_package" ><%=Revenue.IncomeData.incomeMoney%></a>\r						<a class="tab" data-tab="chargePlayerNum_package" ><%=Revenue.IncomeData.rechargeablePersonTime%></a>\r					</div>\r					<div role="chart">\r						<div id="consumePackageCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="consumePackageCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<div class="clear"></div>\r	</ul>\r\r	<div class="boxmax">\r		<div id="revenuePlayFrequencyCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Revenue.PayHabit.rechargeableFrequencyLimit%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a class="hover tab" data-tab="weekChargeTimes" ><%=Revenue.PayHabit.weeklyRechargeableTimes%></a>\r					<a class="tab" data-tab="monthChargeTimes" ><%=Revenue.PayHabit.monthlyRechargeableTimes%></a>\r					<a class="tab" data-tab="weekChargeNum" ><%=Revenue.PayHabit.weeklyRechargeableLimit%></a>\r					<a class="tab" data-tab="monthChargeNum" ><%=Revenue.PayHabit.monthlyRechargeableLimit%></a>\r				</div>\r				<div role="chart">\r					<div id="revenuePlayFrequencyCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="revenuePlayFrequencyCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r	\r	<div class="boxmax">\r		<div id="chargeIntervalCode">\r			<div class="title" role="title">\r				<strong class="l"><%=Revenue.PayHabit.rechargeableInterval%></strong>\r			</div>\r			<div class="textbox">\r				<div role="chart">\r					<div id="chargeIntervalCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="chargeIntervalCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r</div>\r'}),define("models/revenue/PayHabit",["models/BaseModel"],function(e){var t=[{name:"chargeIntervalDistribution",url:"/v1/payHabit/chargeIntervalDistribution"},{name:"chargeWayDistribution",url:"/v1/payHabit/chargeWayDistribution"},{name:"consumePackgeTypeDistribution",url:"/v1/payHabit/consumePackgeTypeDistribution"},{name:"chargeFrequencyAndNumDistribution",url:"/v1/payHabit/chargeFrequencyAndNumDistribution"}];return e.init(t)}),define("views/revenue/PayHabitView",["backbone","utils/HighchartUtil","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","text!templates/revenue/PayHabit.html","models/revenue/PayHabit","models/Constant","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a){var f=Backbone.View.extend({el:"#container",events:{},initialize:function(){$("#container").html(_.template(s,a)),new r({el:"#datePicker"}),new i({el:"#selectChoose"}),this.render()},render:function(){return this.chargeWayRender(),this.consumePackageTypeRender(),this.chargeFrequencyAndNumRender(),this.chargeIntervalRender(),this},chargeWayRender:function(){var e=_.clone(Params),r=$("#chargeWayCode").tabs(function(i){var s,u;switch(i){case"incomeNum_charge":s=a.Revenue.IncomeData.incomeMoney,u="#"+a.GameCommon.zhMonryUnit;break;case"chargePlayerNum_charge":s=a.Revenue.IncomeData.rechargeablePersonTime,u=a.GameCommon.times}e.item=i,o.chargeWayDistribution({$entity:e,$callback:function(e,i,o){var f=_.pluck(o,"item"),o=_.pluck(o,"value"),l=_.percent(o,3,1),c=[{name:s+"^"+u,data:o}];t.chartBar({id:"chargeWayCode-chart",x:{left:f,right:l},series:c,pagination:!0});var h=null,p=[a.Revenue.PayHabit.rechargeableType,s,a.GameCommon.percentage];u.indexOf("#")!=-1?h=_.zip(f,_.map(o,function(e){return a.GameCommon.zhMonryUnit+e}),l):h=_.zip(f,_.map(o,function(e){return e+a.GameCommon.times}),l),n.drawTable({head:p,body:h,$el:$("#chargeWayCode-table")}),r.head=p,r.body=h}})})},consumePackageTypeRender:function(){var e=$("#consumePackageCode").tabs(function(r){var i,s;switch(r){case"incomeNum_package":i=a.Revenue.IncomeData.incomeMoney,s="#"+a.GameCommon.zhMonryUnit;break;case"chargePlayerNum_package":i=a.Revenue.IncomeData.rechargeablePersonTime,s=a.GameCommon.times}var u=_.clone(Params);u.item=r,o.consumePackgeTypeDistribution({$entity:u,$callback:function(r,o,u){var f=_.pluck(u,"item"),u=_.pluck(u,"value"),l=_.percent(u,3,1),c=[{name:i+"^"+s,data:u}];t.chartBar({id:"consumePackageCode-chart",x:{left:f,right:l},series:c,pagination:!0});var h=null,p=[a.Revenue.PayHabit.consumerPackingTypes,i,a.GameCommon.percentage];s.indexOf("#")!=-1?h=_.zip(f,_.map(u,function(e){return a.GameCommon.zhMonryUnit+e}),l):h=_.zip(f,_.map(u,function(e){return e+a.GameCommon.times}),l),n.drawTable({head:p,body:h,$el:$("#consumePackageCode-table")}),e.head=p,e.body=h}})})},chargeFrequencyAndNumRender:function(){var e=_.clone(Params),r=$("#revenuePlayFrequencyCode").tabs(function(i){var s;switch(i){case"weekChargeTimes":s=a.Revenue.PayHabit.weekRechargeableTimes;break;case"monthChargeTimes":s=a.Revenue.PayHabit.monthRechargeableTimes;break;case"weekChargeNum":s=a.Revenue.PayHabit.weekRechargeableLimit;break;case"monthChargeNum":s=a.Revenue.PayHabit.monthRechargeableLimit}e.item=i,o.chargeFrequencyAndNumDistribution({$entity:e,$callback:function(e,i,o){var u=_.pluck(o,"item"),o=_.pluck(o,"value"),f=_.percent(o,3,1),l=[{name:s,data:o}],c=_.zip(u,o,f),h=[s,a.Revenue.IncomeData.payPeopleCount,a.GameCommon.percentage];n.drawTable({head:h,body:c,$el:$("#revenuePlayFrequencyCode-table")}),t.chartBar({id:"revenuePlayFrequencyCode-chart",x:{left:u,right:f},series:l}),r.head=h,r.body=c}})})},chargeIntervalRender:function(){var e=_.clone(Params),r=$("#chargeIntervalCode").tabs(function(){o.chargeIntervalDistribution({$entity:e,$callback:function(e,i,s){var o=_.pluck(s,"item"),s=_.pluck(s,"value"),u=_.percent(s,3,1),f=[{name:a.Revenue.PayHabit.rechargeableInterval,data:s}],l=_.zip(o,s,u),c=[a.Revenue.PayHabit.rechargeableInterval,a.Revenue.IncomeData.payPeopleCount,a.GameCommon.percentage];n.drawTable({head:c,body:l,$el:$("#chargeIntervalCode-table")}),t.chartBar({id:"chargeIntervalCode-chart",x:{left:o,right:u},series:f}),r.head=c,r.body=l}})})}});return f}),define("models/partner/Partner",["models/BaseModel"],function(e){var t=[{name:"fetchPartners",url:"/v1/partner/fetchPartners"},{name:"fetchPartnerAmount",url:"/v1/partner/partnerAmount"},{name:"fetchPartnerQuality",url:"/v1/partner/partnerQuality"},{name:"fetchPartnerIncome",url:"/v1/partner/partnerIncome"},{name:"fetchInstallList",url:"/v1/newPlayer/installList"},{name:"fetchNewPlayerList",url:"/v1/newPlayer/newPlayerList"},{name:"fetchDauList",url:"/v1/activity/dauList"},{name:"incomeNumList",url:"/v1/incomeData/incomeNumList"},{name:"chargePlayerNumList",url:"/v1/incomeData/chargePlayerNumList"},{name:"fetchDailyARPU",url:"/v1/payPermeate/fetchDailyARPU"},{name:"fetchAllAndAutoPlayers",url:"/v1/partner/allAndAuto"},{name:"fetchPartnerRate",url:"/v1/partner/partnerRate"}];return e.init(t)}),define("text!templates/partnerExtention/partnerData.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		\r		<div id="partnerExtentionChannelDataamount" role="_dynamicId">\r			<div class="titlemax" role="title">\r				<strong class="l"><%=GameCommon.channelData%></strong>\r	            <div id="indexTab" class="buttonDiv l">\r	            	<a data="amount" class="but l butL hover"><%=PartnerExtention.PartnerData.quantityIndicator%></a>\r	            	<a data="quality" class="but l"><%=PartnerExtention.PartnerData.qualityIndicator%></a>\r	            	<a data="income" class="but l butR"><%=PartnerExtention.PartnerData.incomeIndicator%></a>\r	            </div>\r			</div>\r		</div>\r		<div class="tablebox">\r			<table cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style_ope">\r                <thead id="partnerTableHead">\r                	<tr data="amount">\r                    	<th class="left aroww" width="15%"><span><%=PartnerExtention.PartnerData.channelName%></span></th>\r                        <th width="15%"><%=PartnerExtention.PartnerData.trackWay%></th>\r                        <th width="15%"><%=GameCommon.equipmentActive%></th>\r                        <th width="15%"><%=PartnerExtention.PartnerManagement.newIncreasedPlayerRegister%></th>\r                        <th width="15%"><%=PartnerExtention.PartnerData.registerConversionRate%></th>\r                        <th width="15%"><%=PartnerExtention.PartnerData.channelProportion%></th>\r                        <th width="10%"><%=GameCommon.detail%></th>\r                    </tr>\r                    <tr data="quality" class="hide">\r                        <th class="left aroww" width="15%"><span><%=PartnerExtention.PartnerData.channelName%></span></th>\r                        <th width="15%"><%=PartnerExtention.PartnerData.trackWay%></th>\r                        <th width="15%"><%=PartnerExtention.PartnerData.avgDayActive%></th>\r                        <th width="15%"><%=PartnerExtention.PartnerData.oneDayPlayersProportion%></th>\r                        <th width="15%"><%=PartnerExtention.PartnerData.avgMorrowRetention%></th>\r                        <th width="15%"><%=PartnerExtention.PartnerData.firstWeekPayRatio%></th>\r                        <th width="10%"><%=GameCommon.detail%></th>\r                    </tr>\r                    <tr data="income" class="hide">\r                        <th width="12.5%" class="left aroww"><span><%=PartnerExtention.PartnerData.channelName%></span></th>\r                        <th width="12.5%"><%=PartnerExtention.PartnerData.trackWay%></th>\r                        <th width="12.5%"><%= GameCommon.income%></th>\r                        <th width="12.5%"><%=PartnerExtention.PartnerData.avgDailyPayPeopleCount%></th>\r                        <th width="12.5%"><%=GameCommon.avgDailyPayRate%></th>\r                        <th width="12.5%"><%=GameCommon.avgDaily%>ARPU</th>\r                        <th width="12.5%"><%=GameCommon.avgDaily%>ARPPU</th>\r                        <th width="12.5%"><%=GameCommon.detail%></th>\r                    </tr>\r                </thead>\r                <tbody data="amount" ><tr><td colspan="7" style="background:none"><div class="login"><img height="25px" src="images/loading.gif"> <br><%=GameCommon.loadingData%></div></td></tr></tbody>\r                <tbody data="quality"><tr><td colspan="7" style="background:none"><div class="login"><img height="25px" src="images/loading.gif"> <br><%=GameCommon.loadingData%></div></td></tr></tbody>\r                <tbody data="income"><tr><td colspan="8" style="background:none"><div class="login"><img height="25px" src="images/loading.gif"> <br><%=GameCommon.loadingData%></div></td></tr></tbody>\r            </table>\r		</div>\r\r	</div>\r\r<!-- 	<div class="boxmax"> -->\r<!-- 		<div class="title"> -->\r<!-- 			<strong class="l">推广用户占比</strong> -->\r<!-- 		</div> -->\r<!-- 		<div class="textbox"> -->\r<!--         	<div class="box_top" id="partnerAndAutoTab"> -->\r<!-- 				<a class="tab hover" data-tab="partnerAndAuto">推广和自增长用户</a> -->\r<!--                 <a class="tab" data-tab="partnerRate">推广用户占比</a> -->\r<!--                 <div class="info r"> -->\r<!--                 	<font id="partnerRate">--</font>%的用户户来自推广渠道 -->\r<!--                 </div> -->\r<!--             </div> -->\r<!-- 			<div id="partnerAndAutoTabContent"> -->\r<!-- 				<div data-tab="partnerAndAuto" id="partnerAndAuto" class="picbox"> -->\r<!-- 				</div> -->\r<!-- 				<div data-tab="partnerRate" id="partnerRate" class="picbox"> -->\r<!-- 				</div> -->\r<!-- 			</div> -->\r<!-- 		</div> -->\r<!-- 	</div> -->\r\r</div>\r'}),define("views/partnerExtention/PartnerDataView",["backbone","jquery","mustache","models/partner/Partner","utils/HighchartUtil","utils/dataTableUtil","utils/excelDataUtil","views/public/DatePicker","text!templates/partnerExtention/partnerData.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l){var c=e.View.extend({el:"#container",events:{"click #indexTab>a":"changeTab","click tbody>tr>td>a":"showInfo"},initialize:function(){t("#container").html(_.template(a,l)),new u({el:"#datePicker"}),this.indexTabName="amount",this.currTitleId="partnerExtentionChannelDataamount",this.preTitleId="partnerExtentionChannelDataamount",this.render()},render:function(){return this.renderDataTable("fetchPartnerAmount","row-amount","amount"),this},renderPartnerAndAuto:function(){t("#partnerAndAutoTab").tabs("#partnerAndAutoTabContent",function(e){switch(e){case"partnerAndAuto":r.fetchAllAndAutoPlayers({data:Params,success:function(n){var r=n.all,s=n.partner,o=_.pluck(r,"item"),u=_.pluck(r,"value"),a=_.pluck(s,"value"),f=[{name:"",data:u},{name:l.GameCommon.expand,data:a}];i.chart({id:e,x:o,series:f,type:"area"}),t("#partnerRate").html(n.rate)}});break;case"partnerRate":r.fetchPartnerRate({data:Params,success:function(t){var n=_.pluck(r,"item"),r=_.pluck(r,"value"),s=[{name:name,data:r}];i.chart({id:e,x:n,series:s})}})}})},renderDataTable:function(e,n,i){t("#"+this.currTitleId+' div[role="title"] a[role="excel"]').remove(),t("#"+this.currTitleId+' div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),t("#"+this.currTitleId).tabs({indicator:!0});var s=t('tbody[data="'+i+'"]');t(".tablebox tbody").hide(),s.show(),r[e]({data:Params,success:function(e){require(["text!templates/partnerExtention/"+n+".html"],function(n){var r="";if(e&&e.length){var u={data:e};u.GameCommon=l.GameCommon,u.PartnerExtention=l.PartnerExtention,r=_.template(n,u),s.html(r)}else{var a=s.attr("data"),c=7;a=="income"&&(c=8),s.html('<tr><td colspan="'+c+'">'+l.GameCommon.noData)+"</td></tr>"}var h=t("<table></table>"),p=t("<thead></thead>"),d=t("<tbody></tbody>"),v=t("<tr></tr>");v.append(t('#partnerTableHead tr[data="'+i+'"]').html()),p.append(v),d.append(s.html()),d.find("tr[style='display:none;']").remove(),h.append(p).append(d),t("#partnerExtentionChannelData"+i+' div[role="title"] a[role="excel"]').click(function(){var e=l.GameCommon.channelData+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=o.tableToJson(h[0]),r=_.template(f,{excelName:e,excelArray:n});t("body").append(r),t("#excelExportForm").submit(),t("#excelExportForm").remove()})})}})},showInfo:function(e){var n=t(e.currentTarget),o=n.attr("data"),u=n.parent().parent(),a,f,c=this;n.text(n.text()==l.PartnerExtention.PartnerManagement.trend?l.PartnerExtention.PartnerManagement.packUp:l.PartnerExtention.PartnerManagement.trend),u.toggleClass("hover"),$destination=u.next("tr"),$tab=$destination.find("div.tdbox"),$destination.slideToggle({duration:0,complete:function(){if(!u.hasClass("hover"))return;var e=$tab.attr("id"),n=_.clone(Params);n.partnerID=o,$tab.tabs(function(o){var u="";switch(o){case"install":a="fetchInstallList",f=l.GameCommon.equipmentActive;break;case"new":a="fetchNewPlayerList",f=l.GameCommon.newIncreasedPlayer;break;case"active":a="fetchDauList",f=l.GameCommon.dailyActive;break;case"income":a="incomeNumList",f=l.GameCommon.income,u="#"+l.GameCommon.zhMonryUnit;break;case"charge":a="chargePlayerNumList",f=l.PartnerExtention.PartnerManagement.dailyPayPeopleCount;break;case"arpu":a="fetchDailyARPU",f="ARPU("+l.GameCommon.day+")",u="#"+l.GameCommon.zhMonryUnit}r[a]({data:n,success:function(n){var r=_.pluck(n,"item"),n=_.pluck(n,"value"),a=[{name:f+"^"+u,data:n}];i.chart({id:e+"-chart",x:r,series:a});var c=null,h=[l.GameCommon.date,f];o==="arpu"||o==="income"?c=_.zip(r,_.map(n,function(e){return l.GameCommon.zhMonryUnit+e})):c=_.zip(r,n),s.drawTable({head:h,body:c,$el:t("#"+e+"-table")})}})})}})},changeTab:function(e){var n=t(e.currentTarget),r=n.attr("data"),i,s;this.indexTabName=r;switch(r){case"amount":this.preTitleId=this.currTitleId,this.currTitleId="partnerExtentionChannelDataamount",i="fetchPartnerAmount",s="row-amount";break;case"quality":this.preTitleId=this.currTitleId,this.currTitleId="partnerExtentionChannelDataquality",i="fetchPartnerQuality",s="row-quality";break;case"income":this.preTitleId=this.currTitleId,this.currTitleId="partnerExtentionChannelDataincome",i="fetchPartnerIncome",s="row-income"}t("#"+this.preTitleId).attr("id",this.currTitleId),t("#indexTab>a").removeClass("hover"),n.addClass("hover"),t("#partnerTableHead>tr").hide(),t('#partnerTableHead>tr[data="'+r+'"]').show(),this.renderDataTable(i,s,r)}});return c}),define("models/partner/PartnerAccountModel",["backbone"],function(e){var t=e.Model.extend({urlRoot:"/v1/partner/account",toggleForbid:function(){this.save({isforbid:!this.get("isforbid")})},sync:function(t,n,r){switch(t.toLowerCase()){case"delete":r.url="/v1/partner/account/"+this.get("partnerid")+"/"+this.get("id")}e.sync(t,n,r)}});return t}),define("collections/PartnerAccountList",["backbone","models/partner/PartnerAccountModel"],function(e,t){var n=e.Collection.extend({model:t,url:"/v1/partner/account",createAccount:function(e){return new t(e)}});return n}),define("models/partner/PartnerManageModel",["backbone"],function(e){var t=e.Model.extend({idAttribute:"partnerid",toggleHide:function(){this.save({isdisplay:!this.get("isdisplay")})},equals:function(e){return this.get("partnerid")==e.get("partnerid")},haveCombined:function(){return!!this.get("groupid")}});return t}),define("collections/PartnerManageList",["backbone","models/partner/PartnerManageModel"],function(e,t){var n=e.Collection.extend({model:t,url:"/v1/partner/manage",addPlainObject:function(e,n){n=n||{},this.add(new t(e),n)}});return n}),define("text!templates/partnerExtention/partnerItem.html",[],function(){return'<td class="left"><%= partnername %></td>\n<td><input id="edit" type="text" value="<%=displayname%>" class="notEditorput" /></td>\n<td><%=showLastModifyTime%></td>\n<td><a id="operate"><%=groupid ? PartnerExtention.PartnerItem.split : PartnerExtention.PartnerItem.merge%></a></td>\n<td><a id="hide" class="<%=isdisplay?\'on\':\'off\'%> mauto"></a></td>\n<td><a id="create"><%= iscreate ? PartnerExtention.PartnerItem.startUsing : PartnerExtention.PartnerItem.create%></a></td>'}),define("views/partnerExtention/PartnerItemView",["backbone","text!templates/partnerExtention/partnerItem.html","i18n!nls/gameI18N","blockUI"],function(e,t,n){var r=e.View.extend({tagName:"tr",template:_.template(t),events:{"click #edit":"showEdit","blur #edit":"saveNickName","keypress #edit":"saveNickNameOnEnter","click #operate":"operate","click #hide":"hide","click #create":"showCreateAccountPanel"},initialize:function(){this.model.bind("change",this.render,this)},render:function(){var e=this.model.toJSON();return e.PartnerExtention=n.PartnerExtention,e.GameCommon=n.GameCommon,this.$el.html(this.template(e)),this},showEdit:function(e){$(e.currentTarget).attr("class","Editorput")},saveNickName:function(e){var t=$(e.currentTarget);t.attr("class","notEditorput"),t.val()!=this.model.get("displayname")&&this.model.save({displayname:t.val()})},saveNickNameOnEnter:function(e){e.keyCode==13&&($("#edit").blur(),this.saveNickName(e))},operate:function(){var e=this,t=!!this.model.get("groupid");if(t)this.splitPartners(this.model.get("partnerids"));else{var n=this.collection.filter(function(t){return!t.haveCombined()&&!e.model.equals(t)});this.renderCombinedPartners(n),$('#combinePartner input[type="hidden"]').val(e.model.get("partnerid")),this.pop_dialog($("#combinePartner"))}},splitPartners:function(e){var t=this;$.ajax({url:"/v1/partner/split",type:"get",data:{partnerIds:e},success:function(e){_.each(e,function(e){t.collection.addPlainObject(e,{merge:!0})})}})},renderCombinedPartners:function(e){if(e.length){var t="";_.each(e,function(e){t+='<li><input type="checkbox" value="'+e.get("partnerid")+'"/><label>'+e.get("partnername")+"</label></li>"}),$("#combinePartner .channelPop").html(t),$("#combinePartner .timetop>.r").show(),$("#combinePartner").removeAttr("status")}else $("#combinePartner .channelPop").html(n.PartnerExtention.PartnerItem.noNeedMergeChannel),$("#combinePartner .timetop>.r").hide(),$("#combinePartner").attr("status","none")},hide:function(){this.model.toggleHide()},showCreateAccountPanel:function(){this.model.get("iscreate")||(this.renderCreateAccountPanel(this.model),this.pop_dialog($("#createPartnerAccount")))},pop_dialog:function(e,t){var n=this,r=$(window).height(),i=$(document).width(),s=e.width(),o=e.height(),u=i/2-s/2,a=r/2-o/2;$.blockUI({css:{border:"0",background:"none",width:s,left:u,top:a},message:e})},generateName:function(){return parseInt(99999999*Math.random())},generatePassword:function(){var e=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"),t="";for(var n=0;n<6;n++)t+=e[Math.floor(Math.random()*35)];return t},renderCreateAccountPanel:function(e){$("#account_partnername").html(e.get("partnername")),$("#account_partnerid").html(e.get("partnerid")),$("#account_name").html(this.generateName()),$("#account_pwd").html(this.generatePassword())}});return r}),define("text!templates/partnerExtention/partnerAccountItem.html",[],function(){return'<td class="left"><%=partnername%></td>\n<td><%=loginname%></td>\n<td><%=passwd%></td>\n<td><%=lastlogintime%></td>\n<td><a href="http://www.talkinggame.com/partner/page/partner_account_report.jsp" target="_blank"><%=PartnerExtention.PartnerAccountItem.enterBackground%></a> <a id="forbiddenBtn" class="<%=isforbid ? \'\' : \'red\'%>"><%=isforbid ? PartnerExtention.PartnerAccountItem.enabled: PartnerExtention.PartnerAccountItem.forbidden%><%=GameCommon.account%></a> <a id="deleteAccount"><%=GameCommon.delete%></a></td>'}),define("views/partnerExtention/PartnerAccountItemView",["backbone","i18n!nls/gameI18N","text!templates/partnerExtention/partnerAccountItem.html"],function(e,t,n){var r=e.View.extend({tagName:"tr",events:{"click #deleteAccount":"deleteAccount","click #forbiddenBtn":"forbidAccount"},initialize:function(){this.model.bind("change",this.render,this),this.model.bind("destroy",this.remove,this)},render:function(){var e=this.model.toJSON();return e.PartnerExtention=t.PartnerExtention,e.GameCommon=t.GameCommon,this.$el.html(_.template(n,e)),this},deleteAccount:function(){var e=this;confirm(t.PartnerExtention.PartnerAccountItem.confirmDeleteAccount)&&this.model.destroy({success:function(t,n){var r=e.options.partnerList.get(t.get("partnerid"));r&&r.set({iscreate:!1})}})},forbidAccount:function(){this.model.toggleForbid()}});return r}),define("text!templates/partnerExtention/partnerManagement.html",[],function(){return'<div class="content r">\r	<!--------------渠道列表-------------->\r    <div class="boxmax">\r    	<!-- <a class="maxbut"><font class="add">增加新渠道</font></a> -->\r    	<ul class="Editor hide">\r        	<li class="Editor_li after">\r            	<p class="Editor_li_con">\r                	<b><%=PartnerExtention.PartnerManagement.trackWay%></b>\r                    <span><input type="radio"  class="radio"/><label><%=PartnerExtention.PartnerManagement.subpackageChannel%></label><input type="radio" class="radio" /><label><%=PartnerExtention.PartnerManagement.linkChannel%></label></span>\r                </p>\r            </li>\r            <li class="Editor_li after">\r                <p class="Editor_li_con">\r                    <b>说明</b>\r                    <span style="width:80%">\r                        为每个渠道生成不同的推广链接来追踪由各个链接的点击而最终带来的激活量。尤其适合单一下载地址需要由多个推广渠道同时分发的情况（如同时采用多个广告网络转至App store、Play store完成应用下载的情况）。\r                    </span>\r                </p>\r                <p class="Editor_li_con">\r                    <b>使用方式</b>\r                    <span>\r                        使用以下生成器来生成渠道推广链接，将生成的链接发送给推广方进行推广。\r                    </span>\r                </p>\r                <p class="Editor_li_con">\r                    <b>渠道名称</b>\r                    <span>\r                        <input type="text" class="textinput" value="设定渠道名称">\r                    </span>\r                </p>\r                <p class="Editor_li_con">\r                    <b>下载地址</b>\r                    <span>\r                         <input type="text" class="textinput" value="http://localhost:8080/sdafsd/fda/sdff/sd23fda.pdf">\r                    </span>\r                    <!-- <a class="Cancel l">编辑</a> -->\r                </p>\r            </li>\r        	<li class="Editor_li after">\r            	<p class="Editor_li_con">\r                	<b><%=PartnerExtention.PartnerManagement.introduction%></b>\r                    <span><%=PartnerExtention.PartnerManagement.introductionExplain%></span>\r                </p>\r            	<p class="Editor_li_con">\r                	<b><%=PartnerExtention.PartnerManagement.integration%></b>\r                    <span class="int">\r                    	<font>◆ <%=PartnerExtention.PartnerManagement.integrationIntroduction1%></font>\r                    	<small>&lt;<%=PartnerExtention.PartnerManagement.integrationIntroduction2%>/&gt;</small>\r                    	<font>◆  <%=PartnerExtention.PartnerManagement.integrationIntroduction3%></font>\r                    	<font>◆  <%=PartnerExtention.PartnerManagement.integrationIntroduction4%></font>\r                    </span>\r                </p>\r            	<p class="Editor_li_con">\r                	<b><%=PartnerExtention.PartnerManagement.tool%></b>\r                    <span><%=PartnerExtention.PartnerManagement.toolExplain%><br /><a  class="button l"><font class="dow"><%=PartnerExtention.PartnerManagement.downChannelZipTool%></font></a></span>\r                </p>\r            </li>\r        	<li class="Editor_li after Editor_li_left_con">\r                <a class="Confirm l"><%=PartnerExtention.PartnerManagement.save%></a><a class="Cancel l"><%=GameCommon.cancel%></a>\r            </li>\r        </ul>\r    </div>\r    \r	<!--------------渠道列表-------------->\r    <div class="boxmax">\r    	<div id="partnerExtentionPartnerManagementChannelList">\r	    	<div class="title" role="title">\r				<strong class="l"><%=PartnerExtention.PartnerManagement.channelList%></strong>\r			</div>\r    	</div>\r        <div class="tablebox">\r			<table cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style1">\r            	<thead>\r                    <tr>\r                        <th width=\'20%\' class="left"><%=GameCommon.channel%>(ID)</th>\r                        <th width=\'20%\'><%=GameCommon.alias%></th>\r                        <th width=\'20%\'><%=GameCommon.recordDate%></th>\r                        <th width=\'15%\'><%=PartnerExtention.PartnerManagement.mergeChannel%></th>\r                        <th width=\'15%\'><%=PartnerExtention.PartnerManagement.hideChannel%></th>\r                        <th width=\'10%\'><%=PartnerExtention.PartnerManagement.channelQueryAccount%></th>\r                    </tr>\r                </thead>\r                <tbody id="partnerList"></tbody>\r            </table>\r		</div>\r    </div>\r    \r    \r    <!--------------Account-------------->\r    <div class="boxmax">\r    	<div class="title">\r			<strong class="l">Account</strong>\r		</div>\r        <div class="tablebox">\r			<table cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style1">\r            	<thead>\r                    <tr>\r                        <th width="20%" class="left"><%=PartnerExtention.PartnerManagement.channelName%></th>\r                        <th width="20%"><%=PartnerExtention.PartnerManagement.loginName%></th>\r                        <th width="20%"><%=PartnerExtention.PartnerManagement.loginPWD%></th>\r                        <th width="20%"><%=PartnerExtention.PartnerManagement.lastLoginTime%></th>\r                        <th width="20%"><%=GameCommon.operate%></th>\r                    </tr>\r                </thead>\r                <tbody id="partnerAccountList"></tbody>\r            </table>\r		</div>\r    </div>\r\r</div>\r\r<div id="createPartnerAccount" style="display:none;">\r    <div class="timetop">\r        <b><%=PartnerExtention.PartnerManagement.createChannelQueryAccount%></b>\r    </div>\r    <div class="Poptxt">\r        <ul class="CreateChannelPop">\r            <li class="after"><label class="l"><%=PartnerExtention.PartnerManagement.channelName%>：</label><div id="account_partnername"></div></li>\r            <li class="after"><label class="l"><%=PartnerExtention.PartnerManagement.channelId%>：</label><div id="account_partnerid"></div></li>\r            <li class="after"><label class="l"><%=GameCommon.accountName%>：</label><div id="account_name"></div></li>\r            <li class="after"><label class="l"><%=GameCommon.password%>：</label><div id="account_pwd"></div></li>\r        </ul>\r        <div class="opeDiv after">\r            <a class="timecolse r Confirm" id="accountConfirmBtn"><%=GameCommon.confirm%></a>\r            <a class="r Cancel" id="accountCancelBtn"><%=GameCommon.cancel%></a>\r        </div>\r    </div>\r</div>\r<div id="combinePartner" style="display:none;">\r    <input type="hidden"/>\r	<div class="timetop">\r    	<b class="l"><%=PartnerExtention.PartnerManagement.selectMergeChannel%></b>\r        <span class="r"><a id="selectAllBtn"><%=GameCommon.checkAll%></a><a id="deSelectAllBtn"><%=GameCommon.invertCheck%></a></span>\r    </div>\r    <div class="Poptxt">\r    	<ul class="channelPop">\r        </ul>\r        <div class="opeDiv after">\r            <a class="timecolse r Confirm" id="partnerConfirmBtn"><%=GameCommon.confirm%></a>\r            <a class="r Cancel" id="partnerCancelBtn"><%=GameCommon.cancel%></a>\r        </div>\r    </div>\r</div>\r\r\r\r\r'}),define("views/partnerExtention/PartnerManagementView",["backbone","collections/PartnerAccountList","collections/PartnerManageList","views/partnerExtention/PartnerItemView","views/partnerExtention/PartnerAccountItemView","text!templates/partnerExtention/partnerManagement.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"body",events:{"click #accountConfirmBtn":"saveAccount","click #accountCancelBtn":"cancleCreateAccount","click #selectAllBtn":"selectAllPartner","click #deSelectAllBtn":"deSelectAllPartner","click #partnerConfirmBtn":"saveCombinedPartners","click #partnerCancelBtn":"cancelCombile"},initialize:function(){$("#container").html(_.template(s,o)),$("#partnerExtentionPartnerManagementChannelList").tabs({indicator:!0}),this.$partnerList=$("#partnerList"),this.$partnerAccountList=$("#partnerAccountList"),this.Partners=new n,this.PartnerAccounts=new t,this.Partners.bind("reset",this.addAllPartner,this),this.Partners.bind("remove",this.addAllPartner,this),this.Partners.bind("add",this.addAllPartner,this),this.PartnerAccounts.bind("reset",this.addAllPartnerAccount,this),this.PartnerAccounts.bind("add",this.addAllPartnerAccount,this),this.Partners.fetch({data:{productId:Params.productID,platformId:Params.platformID}}),this.PartnerAccounts.fetch({data:{productId:Params.productID,platformId:Params.platformID}})},render:function(){return this},addAllPartner:function(){this.$partnerList.html(""),this.Partners.each(this.addOnePartner,this),this.$partnerList.find("tr:odd").addClass("changeColor")},addOnePartner:function(e){var t=new r({model:e,collection:this.Partners});this.$partnerList.append(t.render().el)},addAllPartnerAccount:function(){this.$partnerAccountList.html(""),this.PartnerAccounts.each(this.addOnePartnerAccount,this),this.$partnerAccountList.find("tr:odd").addClass("changeColor")},addOnePartnerAccount:function(e){var t=new i({model:e,partnerList:this.Partners});this.$partnerAccountList.append(t.render().el)},saveAccount:function(){var e=this;$.unblockUI();var t=this.PartnerAccounts.createAccount({partnerid:parseInt($("#account_partnerid").text()),loginname:$("#account_name").text(),passwd:$("#account_pwd").text()});t.save({},{success:function(t){t.set("partnername",$("#account_partnername").text()),e.PartnerAccounts.add(t,{at:0});var n=e.Partners.get($("#account_partnerid").text());n.set("iscreate",!0)}})},cancleCreateAccount:function(){$.unblockUI()},selectAllPartner:function(){$('#combinePartner input[type="checkbox"]').attr("checked","checked")},deSelectAllPartner:function(){$('#combinePartner input[type="checkbox"]').removeAttr("checked")},saveCombinedPartners:function(){if($("#combinePartner").attr("status")=="none")$.unblockUI();else{var e=$("#combinePartner input:checked");if(!e.length){alert(o.PartnerExtention.PartnerManagement.selectNeedMergeChannel);return}var t=[$('#combinePartner input[type="hidden"]').val()];_.each(e,function(e){t.push($(e).val())}),t=t.join(","),this.combinePartners(t)}},cancelCombile:function(){$.unblockUI()},combinePartners:function(e){var t=this;$.ajax({url:"/v1/partner/combine",type:"get",data:{partnerIds:e},success:function(e){t.Partners.addPlainObject(e,{merge:!0});var n=e.channelstr;n=n.split(","),_.each(n,function(e){t.Partners.remove(t.Partners.get(e))})},complete:function(){$.unblockUI()}})}});return u}),define("models/virtualEconomy/VirtualEconomy",["models/BaseModel"],function(e){var t=[{name:"getPurchase",url:"/v1/virtualCurrency/virtualCurrencyPurchase"},{name:"getConsume",url:"/v1/virtualCurrency/virtualCurrencyConsume"},{name:"getRetention",url:"/v1/virtualCurrency/totalRetentionVirtualCurrency"},{name:"getItemsAndIncomes",url:"/v1/consumeAnalyse/itemSellAndIncomeRate"},{name:"fetchItemsAndTypes",url:"/v1/consumeAnalyse/itemAndType"},{name:"fetchConsumeHabbit",url:"/v1/consumeAnalyse/levelItemConsumePreference"}];return e.init(t)}),define("text!templates/virtualEconomy/virtualCoin.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r\r		<div id="purchaseConsumeCode">\r			<div class="title" role="title">\r				<strong class="l"><%=VirtualEconomy.VirtualCoin.dummyCoinPurchaseConsume%></strong>\r			</div>\r			<div class="textbox">\r				<div class="box_top" role="tabbar">\r					<a data-tab="chart-staus-coin" class="tab hover"><%=GameCommon.vcStatus%></a>\r	                <a data-tab="chart-total-coin" class="tab"><%=VirtualEconomy.VirtualCoin.accumulativeRetainDummyCoin%></a>\r	                <div class="info r" id="sumDiv">\r	                </div>\r				</div>\r				<div role="chart">\r					<div id="purchaseConsumeCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="purchaseConsumeCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r\r	<div class="boxmax">\r		<div id="consumeLevelCode">\r			<div class="title" role="title">\r				<strong class="l"><%=VirtualEconomy.VirtualCoin.levelDummyCoinConsume%></strong>\r			</div>\r			<div class="textbox">\r				<div role="chart">\r					<div id="consumeLevelCode-chart" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r				<div role="table">\r					<div id="consumeLevelCode-table" class="picbox"></div>\r					<div class="after">\r		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r		        	</div>\r				</div>\r			</div>\r		</div>\r	</div>\r\r\r	<ul class="Esbox">\r		<li class="contentbox l" >\r			<div id="consumeMissionCode">\r				<div class="title" role="title">\r					<strong class="l"><%=VirtualEconomy.VirtualCoin.tollgateDummyCoinConsume%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="consumeMissionCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="consumeMissionCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r		<li class="contentbox r" >\r			<div id="consumeItemCode">\r				<div class="title" role="title">\r					<strong class="l"><%=VirtualEconomy.VirtualCoin.propsDummyConsume%></strong>\r				</div>\r				<div class="textbox">\r					<div role="chart">\r						<div id="consumeItemCode-chart" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r					<div role="table">\r						<div id="consumeItemCode-table" class="minpicbox"></div>\r						<div class="after">\r			        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r			        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r			        	</div>\r					</div>\r				</div>\r			</div>\r		</li>\r	</ul>\r</div>'}),define("views/virtualEconomy/VirtualCoinView",["backbone","models/virtualEconomy/VirtualEconomy","utils/HighchartUtil","utils/RegexUtil","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","text!templates/virtualEconomy/virtualCoin.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a){var f=e.View.extend({el:"#container",initialize:function(){$("#container").html(_.template(u,a)),new s({el:"#datePicker"}),new o({el:"#selectChoose"}),this.render()},render:function(){return this.renderPurchaseAndConsume(),this.renderConsumeByLevel(),this.renderConsumeByMission(),this.renderConsumeByItem(),this},renderPurchaseAndConsume:function(){var e,r,s=$("#purchaseConsumeCode").tabs(function(o){switch(o){case"chart-staus-coin":e="getPurchase",r=a.GameCommon.vcStatus;break;case"chart-total-coin":e="getRetention",r=a.VirtualEconomy.VirtualCoin.accumulativeRetain}$("#sumDiv").html(""),t[e]({data:Params,success:function(t){var o,u,f,l,c=null,h=!1;if(e==="getPurchase"){var p=t.purchase,d=t.consume,v=t.give,m=_.pluck(p,"value"),g=_.pluck(d,"value"),y=_.pluck(v,"value");u=_.pluck(p,"item"),o=[{name:a.GameCommon.reward,data:y,stack:0},{name:a.GameCommon.purchase,data:m,stack:0},{name:a.GameCommon.expense,data:g,stack:1}],f=[a.GameCommon.date,a.GameCommon.purchase,a.GameCommon.reward,a.GameCommon.expense],l=_.zip(u,m,y,g),c="normal",h=!0,$("#sumDiv").html(a.GameCommon.purchase+":"+_.sum(m)+" | "+a.GameCommon.reward+":"+_.sum(y)+" | "+a.GameCommon.expense+":"+_.sum(g))}else{var b=_.pluck(t,"value");u=_.pluck(t,"item"),o=[{name:r,data:b}],l=_.zip(u,b),f=[a.GameCommon.date,r]}n.chart({id:"purchaseConsumeCode-chart",x:u,series:o,stacking:c,legend:h}),i.drawTable({head:f,body:l,$el:$("#purchaseConsumeCode-table")}),s.head=f,s.body=l}})})},renderConsumeByLevel:function(){var e=_.clone(Params);e.groupBy="level";var r=$("#consumeLevelCode").tabs(function(){t.getConsume({data:e,success:function(e){n.chart({id:"consumeLevelCode-chart",type:"column",level:{data:e,name:a.VirtualEconomy.VirtualCoin.dummyCoinConsume,unitPosition:"last",unit:""}});var t=_.pluck(e,"item"),e=_.pluck(e,"value"),s=_.zip(t,e),o=[a.GameCommon.grade,a.VirtualEconomy.VirtualCoin.dummyCoinConsume];i.drawTable({head:o,body:s,$el:$("#consumeLevelCode-table")}),r.head=o,r.body=s}})})},renderConsumeByMission:function(){var e=_.clone(Params);e.groupBy="mission";var r=$("#consumeMissionCode").tabs(function(){t.getConsume({data:e,success:function(e){var t=_.pluck(e,"item"),s=_.pluck(e,"value"),o=[{name:a.VirtualEconomy.VirtualCoin.devideTollgateCosume,data:s}],u=_.percent(s,3,1),f=_.zip(t,s,u),l=[a.GameCommon.tollgate,a.VirtualEconomy.VirtualCoin.dummyCoinConsume,a.GameCommon.percentage];i.drawTable({head:l,body:f,$el:$("#consumeMissionCode-table")}),n.chartBar({id:"consumeMissionCode-chart",x:{left:t,right:u},series:o,pagination:!0}),r.head=l,r.body=f}})})},renderConsumeByItem:function(){var e=_.clone(Params);e.groupBy="itemid";var r=$("#consumeItemCode").tabs(function(){t.getConsume({data:e,success:function(e){var t=_.pluck(e,"item"),s=_.pluck(e,"value"),o=[{name:name,data:s}],u=_.percent(s,3,1),f=_.zip(t,s,u),l=["道具",a.VirtualEconomy.VirtualCoin.dummyCoinConsume,a.GameCommon.percentage];i.drawTable({head:l,body:f,$el:$("#consumeItemCode-table")}),n.chartBar({id:"consumeItemCode-chart",x:{left:t,right:u},series:o,pagination:!0}),r.head=l,r.body=f}})})}});return f}),define("text!templates/virtualEconomy/consumeAnalysis.html",[],function(){return'<div class="content r">\n	<div class="boxmax">\n		<div class="maintop">\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\n			<div class="clear"></div>\n			<div id="showSelectedPartners" class="Editor hide Filter" >\n				<div id="selectVersion"></div>\n			</div>\n		</div>\n	</div>\n\n	<div class="boxmax">\n		<div id="saleNumsAndIncomesCode">\n			<div class="titlemax"  role="title">\n				<strong class="l"><%=VirtualEconomy.ConsumeAnalysis.categorySalesQuantityFSTS%></strong>\n	            <div id="vc-indexTab" class="buttonDiv l">\n					<label class="l selectlble"><%=VirtualEconomy.ConsumeAnalysis.classifyType%>：</label>\n	            	<a data="itemtype" class="but l butL"><%=VirtualEconomy.ConsumeAnalysis.oneleveClassify%></a>\n	            	<a data="itemid" class="but l butR hover"><%=VirtualEconomy.ConsumeAnalysis.allitems%></a>\n	            </div>\n			</div>\n			<div class="textbox">\n				<div role="chart">\n					<div id="saleNumsAndIncomesCode-chart" class="picbox"></div>\n					<div class="after">\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\n		        	</div>\n				</div>\n				<div role="table">\n					<div id="saleNumsAndIncomesCode-table" class="picbox"></div>\n					<div class="after">\n		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\n		        	</div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<div class="boxmax">\n		<div id="consumeHabbitAnalasisCode">\n			<div class="titlemax" role="title">\n				<strong class="l"><%=VirtualEconomy.ConsumeAnalysis.levelConsumerPreferences%></strong>\n				<div id="habbit-indexTab" class="buttonDiv l">\n					<label class="l selectlble"><%=VirtualEconomy.ConsumeAnalysis.classifyType%>：</label>\n	            	<a data="itemtype" class="but l butL"><%=VirtualEconomy.ConsumeAnalysis.oneleveClassify%></a>\n	            	<a data="itemid" class="but l butR hover"><%=VirtualEconomy.ConsumeAnalysis.allitems%></a>\n	            </div>\n			</div>\n			<div class="textbox">\n				<div class="Condition after condition_min">\n					<div id="selectGroups"></div>\n					<a id="addSelect" class="Cancel l hide"><img src="images/add_min.png" /></a>\n				</div>\n				<div class="box_top">\n					<div class="buttonDiv l" id="puchaseOrConsume">\n						<a class="tab hover" data="itemPurchase"><%=VirtualEconomy.ConsumeAnalysis.propsPurchase%></a>\n						<a class="tab" data="itemUse"><%=GameCommon.propsConsume%></a>\n					</div>\n					<div class="buttonDiv l" id="amountOrCoin">\n						<a class="tab hover" data="number"><%=VirtualEconomy.ConsumeAnalysis.quantity%></a>\n						<a class="tab" data="vc"><%=GameCommon.dummyCoin%></a>\n					</div>\n				</div>\n				<div role="chart">\n					<div id="consumeHabbitAnalasisCode-chart" class="picbox"></div>\n					<div class="after">\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\n		        	</div>\n				</div>\n				<div role="table">\n					<div id="consumeHabbitAnalasisCode-table" class="picbox"></div>\n					<div class="after">\n		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\n		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\n		        	</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("views/virtualEconomy/ConsumeAnalysisView",["backbone","models/virtualEconomy/VirtualEconomy","models/Constant","utils/HighchartUtil","utils/dataTableUtil","utils/excelDataUtil","views/public/DatePicker","views/public/SelectView","utils/ModelBox","text!templates/virtualEconomy/consumeAnalysis.html","text!templates/public/loading.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#container",events:{"click #vc-indexTab>a":"renderSales","click #habbit-indexTab>a":"switchItemTab","click #puchaseOrConsume>a":"switchPuchaseOrConsumeTab","click #amountOrCoin>a":"switchAmountOrCoin","click #addSelect":"addSelect","change #selectGroups select":"selectItem","click #selectGroups .closeselect":"removeSelect"},initialize:function(){$("#container").html(_.template(f,h)),new o({el:"#datePicker"}),new u({el:"#selectChoose"}),this.render()},render:function(){return this.renderSaleNumsAndIncomes("itemid"),this.renderConsumeHabbit(),this},renderSaleNumsAndIncomes:function(e){var n=_.clone(Params);n.groupBy=e;var s=$("#saleNumsAndIncomesCode").tabs(function(){t.getItemsAndIncomes({data:n,success:function(e){var t=e.times,n=e.income,o=_.pluck(t,"item"),u=_.pluck(t,"value"),a=_.pluck(n,"value"),f=_.map(_.percent(u,3),function(e){return parseFloat((e*100).toFixed(1))}),l=_.map(_.percent(a,3),function(e){return parseFloat((e*100).toFixed(1))}),c=[{name:h.VirtualEconomy.ConsumeAnalysis.consumptionNumber+"^%",data:f},{name:h.VirtualEconomy.ConsumeAnalysis.Purchases+"^%",data:l}];r.chart({id:"saleNumsAndIncomesCode-chart",type:"column",series:c,x:o,legend:!0,yPercent:!0});var p=_.zip(o,u,_.map(f,function(e){return e+"%"}),a,_.map(l,function(e){return e+"%"})),d=[h.GameCommon.goodsName,h.VirtualEconomy.ConsumeAnalysis.consumptionNumber,h.VirtualEconomy.ConsumeAnalysis.consumptionNumber+"-"+h.GameCommon.percentage,h.VirtualEconomy.ConsumeAnalysis.Purchases,h.VirtualEconomy.ConsumeAnalysis.Purchases+"-"+h.GameCommon.percentage];i.drawTable({head:d,body:p,$el:$("#saleNumsAndIncomesCode-table")}),s.head=d,s.body=p}})})},renderSales:function(e){var t=$(e.currentTarget);$("#vc-indexTab>a").removeClass("hover"),t.addClass("hover"),this.renderSaleNumsAndIncomes(t.attr("data"))},switchItemTab:function(e){var t=$(e.currentTarget);$("#habbit-indexTab>a").removeClass("hover"),t.addClass("hover"),this.habbit.category=t.attr("data"),this.addDefaultSelects()},switchPuchaseOrConsumeTab:function(e){var t=$(e.currentTarget);$("#puchaseOrConsume>a").removeClass("hover"),t.addClass("hover"),this.habbit.mode=t.attr("data");var n=t.attr("data");n=="itemUse"?($('#amountOrCoin>a[data="vc"]').removeClass("hover").hide(),$('#amountOrCoin>a[data="number"]').addClass("hover"),this.habbit.dimension="number"):$('#amountOrCoin>a[data="vc"]').show(),this.requestHabbitData()},switchAmountOrCoin:function(e){var t=$(e.currentTarget);$("#amountOrCoin>a").removeClass("hover"),t.addClass("hover"),this.habbit.dimension=t.attr("data"),this.requestHabbitData()},renderConsumeHabbit:function(){this.habbit={category:"itemid",mode:"itemPurchase",dimension:"number",items:[],types:[],getDrawList:function(){return this.category=="itemid"?this.items:this.types}},$('#consumeHabbitAnalasisCode div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#consumeHabbitAnalasisCode").tabs(function(){}),this.fetchItemsAndTypes()},fetchItemsAndTypes:function(){var e=this;t.fetchItemsAndTypes({data:Params,success:function(t){e.habbit.items=t.item,e.habbit.types=t.type,e.addDefaultSelects()}})},addDefaultSelects:function(){var e=this.habbit.getDrawList();$("#selectGroups").html("");if(e.length<2){console.log(h.VirtualEconomy.ConsumeAnalysis.noDataToCompare),$("#consumeHabbitAnalasisCode-chart").html(""),$("#consumeHabbitAnalasisCode-table").html("");return}var t=this,n=_.first(e,2);_.each(n,function(e){t.addSelect(e.item)}),this.requestHabbitData(),e.length>2&&$("#addSelect").show()},addSelect:function(e){var t=this.habbit.getDrawList().length,n=$("#selectGroups select").length;if(n>=t||n>=5){a.alert({message:h.VirtualEconomy.ConsumeAnalysis.cannotAdd});return}var e=e||"-1",r='<a class="relative l"><select>						<option value="-1">--'+h.VirtualEconomy.ConsumeAnalysis.pleaseSelect+'--</option>						<%_.each(list,function(o){							var item = o.item,s = "";							if(item == value) s = "selected";						%>							<option <%= s%> value="<%=o.item%>"><%=o.value%></option>						<%})%>					</select><span class="closeselect"></span></a>';$("#selectGroups").append(_.template(r,{list:this.habbit.getDrawList(),value:e})),$("#selectGroups select").sSelect()},selectItem:function(e){var t=$(e.currentTarget),n=$("#selectGroups select"),r=t.val();if(r=="-1")return;var i=this.getAllSelectValues(),s=i.length;if(s!=_.uniq(i).length){a.alert({message:h.VirtualEconomy.ConsumeAnalysis.pleaseSelectAgain}),t.val("-1");return}this.requestHabbitData()},getAllSelectValues:function(){var e=$("#selectGroups select");return _.without(_.map(e,function(e){return $(e).val()}),"-1")},requestHabbitData:function(){var e=this.getAllSelectValues(),n=_.clone(Params);n.itemAction=this.habbit.mode,n.itemActionNumOrVC=this.habbit.dimension,n[this.habbit.category=="itemid"?"itemIdStr":"itemTypeIdStr"]=e.join(",");var o=this;$("#consumeItemCode").tabs(function(){t.fetchConsumeHabbit({data:n,success:function(e){var t=[],n=[],u=[],a=[h.GameCommon.grade],f=[];for(attr in e){t&&t.length==0&&(t=_.pluck(e[attr],"item"),f[0]=t);var l=o.findNamebyId(attr),p=_.pluck(e[attr],"value");n.push({name:l,data:p}),a.push(l),f.push(p)}r.chart({id:"consumeHabbitAnalasisCode-chart",type:"column",series:n,x:t,legend:!0});var d=f[0].length,v;for(var m=0;m<d;m++){v=[];for(var g=0;g<f.length;g++){var y=f[g][m]||0;v.push(y)}u.push(v)}i.drawTable({head:a,body:u,$el:$("#consumeHabbitAnalasisCode-table")}),$('#consumeHabbitAnalasisCode div[role="title"] a[role="excel"]').click(function(){var e=h.VirtualEconomy.ConsumeAnalysis.levelConsumerPreferences+$("#habbit-indexTab a[data='"+o.habbit.category+"']").html()+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",t=s.buildArray({head:a,body:u}),n=_.template(c,{excelName:e,excelArray:t});$("body").append(n),$("#excelExportForm").submit(),$("#excelExportForm").remove()})}})})},findNamebyId:function(e){var t=_.find(this.habbit.getDrawList(),function(t){return t.item==e});return t?t.value:e},removeSelect:function(e){var t=$(e.currentTarget),n=t.parent(),r=n.find("select");if(r.val()=="-1"){n.remove();return}var i=this.getAllSelectValues();if(i.length<3){a.alert({message:h.VirtualEconomy.ConsumeAnalysis.cannotDelete});return}n.remove(),this.requestHabbitData()}});return p}),define("models/virtualEconomy/ConsumePoint",["models/BaseModel"],function(e){var t=[{name:"fetchItemPointList",url:"/v1/consumePoint/fetchItemPointList"},{name:"fetchPurchaseItemNumberList",url:"/v1/consumePoint/fetchPurchaseItemNumberList"},{name:"fetchPurchaseVirtualCurrencyList",url:"/v1/consumePoint/fetchPurchaseVirtualCurrencyList"},{name:"fetchUseinfoItemNumberList",url:"/v1/consumePoint/fetchUseinfoItemNumberList"}];return e.init(t)}),define("text!templates/virtualEconomy/consumePoint.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		\r		<div id="virtualEconomyConsumePointtopItems">\r			<div class="titlemax" role="title">\r				<strong class="l"><%=VirtualEconomy.ConsumePoint.topItems%></strong>\r	            <div id="indexTab" class="buttonDiv l">\r	            	<a data="itemtype" class="but l butL itemtab"><%=VirtualEconomy.ConsumePoint.byCategory%></a>\r	            	<a data="itemid" class="but l butR hover itemtab"><%=VirtualEconomy.ConsumePoint.byConsumePoint%></a>\r	            </div>\r			</div>\r		</div>\r		<div class="tablebox" id="itemDiv">\r			\r		</div>\r\r	</div>\r\r</div>'}),define("text!templates/virtualEconomy/consumePoint-table.html",[],function(){return'<table id=\'itemTable\' cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style_ope">\r      <thead id="itemTableHead">\r      	<tr data="amount">\r          	<th class="left aroww" width="15%"><span><%=GameCommon.goodsName%></span></th>\r              <th width="15%"><%=VirtualEconomy.ConsumePoint.quantityPurchase%></th>\r              <th width="15%"><%=GameCommon.dummyCoinTotalValue%></th>\r              <th width="15%"><%=VirtualEconomy.ConsumePoint.quantityConsume%></th>\r              <th width="15%"><%=GameCommon.dailyTrend%></th>\r              <th width="15%"><%=VirtualEconomy.ConsumePoint.levelTollgate%></th>\r          </tr>\r      </thead>\r      <tbody data="amount" id="itemTableBody">\r      	{{#resultData}}\r      	<tr class="">\r		  <td width="15%" class="left">\r		  	{{itemName}}\r		  	{{#platformFlag}}\r		  		<img style="margin:9px 0 0 5px; height:13px" src="images/{{platformFlag}}.png">\r		  	{{/platformFlag}}\r		  </td>\r		  <td width="15%">{{showtotalItemNumber}}</td>\r		  <td width="15%">{{showtotalCurrency}}</td>\r		  <td width="15%">{{showtotalUseNumber}}</td>\r		  <td width="15%"><a class="dayDetail detail" data-id="{{itemId}}" data-name="{{itemName}}"><%=VirtualEconomy.Management.view%></a></td>\r		  <td width="10%">\r		  	<a class="levelDetail detail" data-id="{{itemId}}" data-name="{{itemName}}"><%=GameCommon.grade%></a>\r		  	<a class="missionDetail detail" data-id="{{itemId}}" data-name="{{itemName}}"><%=GameCommon.tollgate%></a>\r		  </td>\r 		</tr>\r 		{{/resultData}}\r 		\r 		{{^resultData}}\r 			<tr><td colspan="6" class="noData"><%=GameCommon.noData%></td></tr>\r 		{{/resultData}}\r      </tbody>\r  </table>\r'}),define("views/virtualEconomy/ConsumePointView",["backbone","mustache","models/virtualEconomy/ConsumePoint","models/Constant","utils/HighchartUtil","utils/dataTableUtil","utils/RegexUtil","utils/excelDataUtil","views/public/DatePicker","views/public/SelectView","text!templates/public/loading.html","text!templates/virtualEconomy/consumePoint.html","text!templates/virtualEconomy/consumePoint-table.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.tabs"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v=e.View.extend({el:"#container",events:{"click #indexTab a.itemtab":"tabSelect","click #itemTableBody a.detail":"showDetail"},initialize:function(){$("#container").html(_.template(c,d)),new a({el:"#datePicker"}),new f({el:"#selectChoose"}),this.groupBy="itemid",this.render()},render:function(){return this.renderItemList(),this},renderItemList:function(){$('#virtualEconomyConsumePointtopItems div[role="title"] a[role="excel"]').remove(),$('#virtualEconomyConsumePointtopItems div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#virtualEconomyConsumePointtopItems").tabs({indicator:!0});var e=_.clone(Params);e.groupBy=this.groupBy,$("#itemDiv").html(_.template(l,d)),n.fetchItemPointList({data:e,success:function(n){var r=null;e.groupBy==="itemid"?r={resultData:n,platformFlag:function(){return this.platformId==1?"Android":this.platformId==2?"IOS":this.platformId==4?"win7":"Android"}}:r={resultData:n,platformFlag:function(){return!1}},r.showtotalCurrency=function(){return o.formatDigit(this.totalCurrency)},r.showtotalItemNumber=function(){return o.formatDigit(this.totalItemNumber)},r.showtotalUseNumber=function(){return o.formatDigit(this.totalUseNumber)},$("#itemDiv").html(t.render(_.template(h,d),r));var i=$("<table></table>");i.append($("#itemDiv table").html()),$('#virtualEconomyConsumePointtopItems div[role="title"] a[role="excel"]').click(function(){var t=d.VirtualEconomy.ConsumePoint.topItems+"-"+$('#virtualEconomyConsumePointtopItems div[role="title"] a[data="'+e.groupBy+'"]').html()+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=u.tableToJson(i[0]),r=_.template(p,{excelName:t,excelArray:n});$("body").append(r),$("#excelExportForm").submit(),$("#excelExportForm").remove()}),n.length&&s.dataTable({$el:$("#itemTable"),sort:!1})}})},tabSelect:function(e){$("#indexTab a").removeClass("hover"),$(e.currentTarget).addClass("hover"),this.groupBy=$(e.currentTarget).attr("data"),this.render()},showDetail:function(e){var t=_.clone(Params),r=$(e.currentTarget),o=r.attr("class"),u=r.attr("data-id"),a=r.attr("data-name"),f=r.parent().parent(),l,c='<tr class="itempointdetail"><td colspan="6"><div class="mintdbox mintable"><div class="title"><strong id="chartTitle_'+u+'"></strong></div>'+'<div class="textbox">'+'<div id="itemDetailCode'+u+'">'+'<div class="box_top" role="tabbar">'+'<a data-tab="purchaseNum_'+u+'" class="tab hover">'+d.VirtualEconomy.ConsumePoint.quantityPurchase+"</a>"+'<a data-tab="vcNum_'+u+'" class="tab">'+d.GameCommon.dummyCoinTotalValue+"</a>"+'<a data-tab="useNum_'+u+'" class="tab">'+d.VirtualEconomy.ConsumePoint.quantityConsume+"</a>"+"</div>"+'<div role="chart">'+'<div id="itemDetailCode'+u+'-chart" class="picbox"></div>'+'<div class="after">'+'<a role="chartBtn" class="pic_but l hover"><font class="pic_icon">'+d.GameCommon.chart+"</font></a>"+'<a role="tableBtn" class="pic_but l"><font class="table_icon">'+d.GameCommon.grid+"</font></a>"+"</div>"+"</div>"+'<div role="table">'+'<div id="itemDetailCode'+u+'-table" class="picbox"></div>'+'<div class="after">'+'<a role="chartBtn" class="pic_but l"><font class="pic_icon">'+d.GameCommon.chart+"</font></a>"+'<a role="tableBtn" class="pic_but l hover"><font class="table_icon">'+d.GameCommon.grid+"</font></a>"+"</div>"+"</div>"+"</div>"+"   </div>"+"</div>"+"</td>"+"</tr>";f.next("tr.itempointdetail").remove();if(r.html()==d.GameCommon.packUp){f.find("a").each(function(e){e==0?$(this).html(d.VirtualEconomy.Management.view):e==1?$(this).html(d.GameCommon.grade):e==2&&$(this).html(d.GameCommon.tollgate)}),f.removeClass("hover");return}f.find("a").each(function(e){e==0?$(this).html(d.VirtualEconomy.Management.view):e==1?$(this).html(d.GameCommon.grade):e==2&&$(this).html(d.GameCommon.tollgate)}),r.html(d.GameCommon.packUp),f.addClass("hover"),f.after(c),t.itemId=null,t.itemtypeId=null,this.groupBy=="itemid"?t.itemId=u:this.groupBy=="itemtype"&&(t.itemtypeId=u);var h;o=="levelDetail detail"?(t.groupBy="level",t.pageSize=10,h="-"+d.VirtualEconomy.ConsumePoint.groupbyLevel):o=="missionDetail detail"?(t.groupBy="mission",t.pageSize=10,h="-"+d.VirtualEconomy.ConsumePoint.groupbyTollgate):(t.groupBy="",t.pageSize=null,h="-"+d.GameCommon.dailyTrend),$("#chartTitle_"+u).html(a+h),f.next("tr.hide").removeClass("hide"),$("#itemDetailCode"+u).tabs(function(e){var r="",o;switch(e){case"purchaseNum_"+u:r="fetchPurchaseItemNumberList",o=d.VirtualEconomy.ConsumePoint.quantityPurchase;break;case"vcNum_"+u:r="fetchPurchaseVirtualCurrencyList",o=d.GameCommon.dummyCoinTotalValue;break;case"useNum_"+u:r="fetchUseinfoItemNumberList",o=d.VirtualEconomy.ConsumePoint.quantityConsume}n[r]({data:t,success:function(e){if(t.groupBy==""){var n=_.pluck(e,"item"),e=_.pluck(e,"value"),r=[{name:o,data:e}],a=_.zip(n,e),f=[d.GameCommon.date,o];s.drawTable({head:f,body:a,$el:$("#itemDetailCode"+u+"-table")}),i.chart({id:"itemDetailCode"+u+"-chart",x:n,series:r})}else{var n=_.pluck(e,"item"),l=_.pluck(e,"value"),r=[{name:o,data:l}],c=_.percent(l,3,1),h="";t.groupBy=="level"?h=d.GameCommon.grade:t.groupBy=="mission"&&(h=d.GameCommon.tollgate);var a=_.zip(n,l,c),f=[h,o,d.GameCommon.percentage];s.drawTable({head:f,body:a,$el:$("#itemDetailCode"+u+"-table")}),i.chartBar({id:"itemDetailCode"+u+"-chart",x:{left:n,right:c},series:r})}}})})}});return v}),define("models/virtualEconomy/ConsumePointManage",["models/BaseModel"],function(e){var t=[{name:"fetchItemList",url:"/v1/consumePointManage/fetchItemList"},{name:"fetchItemTypeList",url:"/v1/consumePointManage/fetchItemTypeList"},{name:"updateItemName",url:"/v1/consumePointManage/updateItemName"},{name:"hideOrShowItem",url:"/v1/consumePointManage/hideOrShowItem"},{name:"updateItemType",url:"/v1/consumePointManage/updateItemType"},{name:"addItemType",url:"/v1/consumePointManage/addItemType"},{name:"deleteItemType",url:"/v1/consumePointManage/deleteItemType"}];return e.init(t)}),define("text!templates/virtualEconomy/management.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div id="virtualEconomyConsumePointManage">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=GameCommon.consumePointManage%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox" id="itemManage_div">\r\n			\r\n		</div>\r\n\r\n	</div>\r\n\r\n</div>'}),define("text!templates/virtualEconomy/management_table.html",[],function(){return'<table id="itemManage_table" cellpadding="0" cellspacing="0" border="0" width="100%" class="table_style1">\r      <thead id="partnerTableHead">\r      	<tr data="amount">\r          	<th width="25%"><%=GameCommon.designation%></th>\r              <th width="40%"><%=GameCommon.setAlias%></th>\r              <th width="30%" class="left"><%=VirtualEconomy.Management.consumePointCategory%></th>\r              <th width="15%"><%=GameCommon.operate%></th>\r          </tr>\r      </thead>\r      <tbody data="amount" id="itemManageData">\r      	{{#resultData}}\r   		<tr class="{{trclass}}">\r   	     <td width="25%" >{{itemId}}<img style="margin:9px 0 0 5px; height:13px" src="images/{{platformFlag}}.png"></td> \r		 <td width="40%"><input data-id="{{id}}" data-name="{{name}}" id="editItemName" class="notEditorput" type="text" value="{{name}}"/></td>\r		  <td width="30%" class="left">\r          <div class="l itemnameDiv" id="item_{{id}}">{{itemtypeName}}</div>\r          <a class="Cancel tableToggleBut l" data-id="{{id}}"><b><%=VirtualEconomy.Management.category%></b></a>\r      </td>\r		  <td width="15%"><a class="ishidden" data="{{id}}" ishidden="{{ishidden}}">{{ishidden_format}}</a></td>\r		</tr>\r		{{/resultData}}\r		{{^resultData}}\r			<tr><td colspan="4" class="noData"><%=GameCommon.noData%></td></tr>\r		{{/resultData}}\r	 </tbody>\r</table>\r'}),define("text!templates/virtualEconomy/management_itemtype.html",[],function(){return'<div class="relative l tableToggleDIVrel">\n  <div class="Pop_line  tableToggleDIV">\n    <div class="timetop">\n      <b class="l"><%=VirtualEconomy.Management.setConsumePointCategory%></b><a class="r close"></a>\n    </div>\n    <div class="Poptxt">\n      <ul class="itemtypeDiv" id="itemtypeDiv">\n        {{#resultData}}\n        <li>\n          <a class="changeItemtype" data-id="{{id}}">\n            <strong class="l">{{name}}</strong>\n            <{{display}} data-id="{{id}}" data-name="{{name}}" class="r deleteItemtype"><%=GameCommon.delete%></{{display}}>\n          </a>\n        </li>\n        {{/resultData}}\n      </ul>\n      <div class="itemtypebut">\n        <!-- <input type="text" class="Editorput" /> -->\n      </div>\n      <div class="opeDiv after">\n          <a id="productDetailConfim" class="timecolse r Confirm"><%=VirtualEconomy.Management.affirm%></a>\n          <input id="itemNameInput" type="text" class="Editorput r" value="<%=VirtualEconomy.Management.addNewCategory%>" />\n      </div>\n    </div>\n  </div>\n</div>'}),define("views/virtualEconomy/ManagementView",["backbone","mustache","models/virtualEconomy/ConsumePointManage","utils/ModelBox","utils/excelDataUtil","utils/dataTableUtil","text!templates/public/loading.html","text!templates/virtualEconomy/management.html","text!templates/virtualEconomy/management_table.html","text!templates/virtualEconomy/management_itemtype.html","text!templates/public/excelExport.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click #itemManageData tr a.ishidden":"showOrHiddenItem","click #itemManageData tr a.tableToggleBut":"showItemType","click #itemManageData tr a.close":"hideItemType","click #editItemName":"changeEditInputClass","blur #editItemName":"saveItemName","click #itemtypeDiv li a.changeItemtype":"changeItemType","click #itemtypeDiv li em.deleteItemtype":"deleteItemType","click #productDetailConfim":"addItemType","click #itemNameInput":"itemNameInputClick","blur #itemNameInput":"itemNameInputBlur"},initialize:function(){$("#container").html(_.template(u,c)),this.itemid=0,this.render()},changeEditInputClass:function(e){$(e.currentTarget).attr("class","Editorput")},saveItemName:function(e){var t=$(e.currentTarget).attr("data-id"),i=$(e.currentTarget).attr("data-name"),s=$(e.currentTarget).val();if(i==s){$(e.currentTarget).attr("class","notEditorput");return}var o={id:t,name:s,productId:Params.productID};n.updateItemName({data:o,success:function(t){t==200?($(e.currentTarget).attr("class","notEditorput"),$(e.currentTarget).attr("data-name",s)):t==401?r.alert({message:c.VirtualEconomy.Management.thisNameExisted}):r.alert({message:c.VirtualEconomy.Management.programWrong+t})}})},render:function(){return this.renderTOItemManageList(),this},renderTOItemManageList:function(){$('#virtualEconomyConsumePointManage div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#virtualEconomyConsumePointManage").tabs({indicator:!0}),n.fetchItemList({data:Params,success:function(e){var n={resultData:e,platformFlag:function(){return this.platformId==1?"Android":this.platformId==2?"IOS":this.platformId==4?"win7":"Android"}};n.trclass=function(){return(e.indexOf(this)+1)%2==0?"changeColor":""},n.ishidden_format=function(){return this.ishidden?c.GameCommon.display:c.GameCommon.hide},$("#itemManage_div").html(t.render(_.template(a,c),n));var r=$("<table></table>"),o=$("<thead></thead>"),u=$("<tbody></tbody>");o.append($("#itemManage_table>thead").html()),u.append($("#itemManage_table>tbody").html()),r.append(o).append(u),$('#virtualEconomyConsumePointManage div[role="title"] a[role="excel"]').click(function(){if(e.length){var t=c.GameCommon.consumePointManage+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",n=i.tableToJson(r[0]),s=_.template(l,{excelName:t,excelArray:n});$("body").append(s),$("#excelExportForm").submit(),$("#excelExportForm").remove()}}),s.dataTable({$el:$("#itemManage_table")})}})},showOrHiddenItem:function(e){var t=$(e.currentTarget),i=t.attr("data"),s=t.attr("ishidden"),o=!1;s=="false"?(t.attr("ishidden","true"),t.html(c.GameCommon.display),o=!0):s=="true"&&(t.attr("ishidden","false"),t.html(c.GameCommon.hide),o=!1);var u={id:i,ishidden:o};n.hideOrShowItem({data:u,success:function(e){e!=200&&r.alert({message:c.VirtualEconomy.Management.programWrong+e})}})},showItemType:function(e){this.itemid=$(e.currentTarget).attr("data-id"),n.fetchItemTypeList({data:Params,success:function(n){var r={resultData:n};r.display=function(){return this.default?"i":"em"},$(e.currentTarget).after(t.render(_.template(f,c),r));var i=$("#bottom").offset().top,s=$(e.currentTarget).offset().top+282;s>=i?$(".tableToggleDIV").css({bottom:"-8px"}):$(".tableToggleDIV").css({top:"24px"})}})},hideItemType:function(e){$(".tableToggleDIVrel").remove()},changeItemType:function(e){$("#item_"+this.itemid).html($(e.currentTarget).find("strong").html()),n.updateItemType({data:{id:this.itemid,itemtypeId:$(e.currentTarget).attr("data-id")},success:function(e){e==200?$(".tableToggleDIVrel").remove():r.alert({message:c.VirtualEconomy.Management.programWrong+e})}})},deleteItemType:function(e){var t=$(e.currentTarget).attr("data-id"),i=$(e.currentTarget).attr("data-name");$("#itemManageData tr div.itemnameDiv").each(function(){$(this).html()==i&&$(this).html(c.GameCommon.other)}),n.deleteItemType({data:{id:t},success:function(t){t==200?$(e.currentTarget).parent().remove():r.alert({message:c.VirtualEconomy.Management.programWrong+t})}})},addItemType:function(e){var t=$.trim($("#itemNameInput").val());if(t==c.VirtualEconomy.Management.addNewCategory||t==""||t==" "){r.alert({message:c.VirtualEconomy.Management.enterTypeName});return}n.addItemType({data:{name:t,productId:Params.productID},success:function(e){if(e.code==200){var t=e.obj,n=t.name,i=t.id;$("#itemtypeDiv").append('<li><a class="changeItemtype" data-id="'+i+'"><strong class="l">'+n+"</strong>"+'<em data-id="'+i+'" data-name="'+n+'" class="r deleteItemtype">'+c.GameCommon.delte+"</em></li></a>"),$("#itemNameInput").val(c.VirtualEconomy.Management.addNewCategory)}else e.code==401?r.alert({message:c.VirtualEconomy.Management.thisNameExisted}):r.alert({message:c.VirtualEconomy.Management.programWrong+e})}})},itemNameInputClick:function(e){var t=$(e.currentTarget).val();t==c.VirtualEconomy.Management.addNewCategory&&$(e.currentTarget).val("")},itemNameInputBlur:function(e){var t=$(e.currentTarget).val();(t==""||t==" ")&&$(e.currentTarget).val(c.VirtualEconomy.Management.addNewCategory)}});return h}),define("text!templates/whale/whaleUser.html",[],function(){return'<div class="content r">\r	<div class="boxmax">\r		<div class="maintop">\r			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r			<div class="clear"></div>\r			<div id="showSelectedPartners" class="Editor hide Filter" >\r				<div id="selectVersion"></div>\r			</div>\r		</div>\r		<div id="whaleWhaleUserRechargeableUser">\r			<div class="titlemax" role="title">\r				<strong class="l">Top 500 <%=Whale.WhaleUser.rechargeableUser%></strong>\r			</div>\r		</div>\r		<div class="tablebox">\r			<table id="whaleUser_table" border="0" width="100%" cellpadding="0" cellspacing="0" class="table_style1">\r				\r			</table>\r		</div>\r	</div>\r</div>\r'}),define("text!templates/whale/whaleUser-table.html",[],function(){return'<thead>\r	<tr>\r		<th>{{Whale.WhaleUser.ranking}}</th>\r		<th>{{Whale.WhaleUser.accountNumber}}</th>\r		<th>{{Whale.WhaleUser.rechargeableLimit}}</th>\r		<th>{{Whale.WhaleDetail.rechargeDummyCoin}}</th>\r		<th>{{Whale.WhaleUser.cosumeSum}}</th>\r		<th>{{Whale.WhaleUser.newIncreasedDate}}</th>\r		<th>{{Whale.WhaleUser.currentLevel}}</th>\r<!-- 		<th>最高任务/关卡</th> -->\r	</tr>\r</thead>\r<tbody>\r{{#resultData}}\r	<tr class="{{trclass}}">\r		<td>{{index}}</td>\r		<td><a data="{{userId}}">{{accountName}}</a></td>\r		<td>{{chargeValue}}</td>\r		<td>{{totalVirtualCurrency}}</td>\r		<td>{{totalpurchasecurrency}}</td>\r		<td>{{registerTimeStr}}</td>\r		<td>{{level}}</td>\r<!-- 		<td>{{mission}}</td> -->\r	</tr>\r{{/resultData}}\r\r{{^resultData}}\r	<tr><td colspan="7" class="noData">{{GameCommon.noData}}</td></tr>\r{{/resultData}}\r</tbody>'}),define("models/whaleuser/WhaleUser",["models/BaseModel"],function(e){var t=[{name:"top500ChargeUser",url:"/v1/whaleUser/topXChargeUser"},{name:"userProfileInfo",url:"/v1/whaleUser/userProfileInfo"},{name:"chargeInfo",url:"/v1/whaleUser/chargeInfo"},{name:"purchaseInfo",url:"/v1/whaleUser/purchaseInfo"},{name:"itemUseInfo",url:"/v1/whaleUser/itemUseInfo"},{name:"userBehaviorRecord",url:"/v1/whaleUser/userBehaviorRecord"},{name:"userBehaviorDetail",url:"/v1/whaleUser/userBehaviorDetail"}];return e.init(t)}),define("views/whale/WhaleUserView",["backbone","mustache","utils/dataTableUtil","utils/urlUtil","utils/excelDataUtil","views/public/DatePicker","views/public/SelectView","text!templates/whale/whaleUser.html","text!templates/whale/whaleUser-table.html","text!templates/public/loading.html","models/whaleuser/WhaleUser","text!templates/public/excelExport.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p=e.View.extend({el:"#container",events:{"click #whaleUser_table a":"toDetail"},initialize:function(){$("#container").html(_.template(u,h)),new s({el:"#datePicker"}),new o({el:"#selectChoose"}),$("#whaleUser_table").html(_.template(f,h)),this.render()},render:function(){return this.renderTop500ChargeUser(),this},renderTop500ChargeUser:function(){$('#whaleWhaleUserRechargeableUser div[role="title"]').append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#whaleWhaleUserRechargeableUser").tabs({indicator:!0}),delete Params.userId,l.top500ChargeUser({data:Params,success:function(e){var r={resultData:e};r.trclass=function(){return(e.indexOf(this)+1)%2==0?"changeColor":""},r.index=function(){return e.indexOf(this)+1},r.Whale=h.Whale,r.GameCommon=h.GameCommon,$("#whaleUser_table").html(t.render(a,r));var s=$("<table></table>");s.html($("#whaleUser_table").html()),$('#whaleWhaleUserRechargeableUser div[role="title"] a[role="excel"]').click(function(){var e="Top 500 "+h.Whale.WhaleUser.rechargeableUser+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",t=i.tableToJson(s[0]),n=_.template(c,{excelName:e,excelArray:t});$("body").append(n),$("#excelExportForm").submit(),$("#excelExportForm").remove()}),n.dataTable({$el:$("#whaleUser_table")})}})},toDetail:function(e){$target=$(e.currentTarget),Params.userId=$target.attr("data"),location.hash="#page/whale-whaleUserDetail_whaleUser/"+r.parse2Str(Params)}});return p}),define("text!templates/whale/whaleDetail.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax after">\r\n	<div id="accountChangeDiv" class="maintop after">\r\n			<div  class="relative l selectlist">\r\n				<div class="dropselect l">\r\n				<h4 title="<%=Whale.WhaleDetail.accountName%>" class="over"><%=Whale.WhaleDetail.accountName%></h4>\r\n				</div>\r\n			</div>\r\n		</div>\r\n		<div class="contentbox l">\r\n			<div id="whaleWhaleDetailAccountNumberInfo">\r\n				<div class="title" role="title">\r\n					<strong><%=Whale.WhaleDetail.accountNumberInfo%></strong>\r\n				</div>\r\n			</div>\r\n			<table id="whale_account" class="table_style2" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n			</table>\r\n		</div>\r\n		<div class="contentbox r">\r\n			<div id="whaleWhaleDetailRechargeableInfo">\r\n				<div class="title" role="title">\r\n					<strong><%=Whale.WhaleDetail.rechargeableInfo%></strong>\r\n				</div>\r\n			</div>\r\n			<table id="whale_charge" class="table_style2" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n			</table>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n		</div>\r\n		<div id="whaleWhaleDetailConsumeOverview">\r\n			<div class="title" role="title">\r\n				<strong><%=Whale.WhaleDetail.consumeOverview%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="textbox">\r\n			<div id="spendSummaryCode">\r\n				<div class="box_top" role="tabbar">\r\n					<a data-tab="chargeInfo" class="tab hover"><%=Whale.WhaleDetail.rechargeable%></a>\r\n	               <a data-tab="purchaseInfo" class="tab"><%=Whale.WhaleDetail.dummyCoinExpense%></a>\r\n	               <a data-tab="itemUseInfo" class="tab"><%=GameCommon.propsConsume%></a>\r\n	               <div class="info r">\r\n	               	SUM：<font id="actionSum"></font>\r\n	               </div>\r\n				</div>\r\n				<div id="chargeInfo" class="mintablebox mintablebox_box"></div>\r\n			</div>\r\n		</div>\r\n\r\n\r\n	<div class="boxmax">\r\n		<div id="whaleWhaleDetailActionRecord">\r\n			<div class="title" role="title">\r\n				<strong><%=Whale.WhaleDetail.actionRecord%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox">\r\n			<table  class="table_style_ope" width="100%" cellspacing="0" cellpadding="0" border="0">\r\n				<tbody id="whale_behavior">\r\n					\r\n				</tbody>\r\n			</table>\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("text!templates/whale/whale_account.html",[],function(){return'<tr>\n	<td class="left borno">{{Whale.WhaleDetail.accountNumber}}ID</td>\n	<td class="borno" width="50%" title="{{userID}}"><b>{{userID}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{Whale.WhaleDetail.accountNumberName}}</td>\n	<td width="50%" title="{{account}}"><b>{{account}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{Whale.WhaleDetail.sourceChannel}}</td>\n	<td width="50%" title="{{partner}}"><b>{{partner}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{GameCommon.region}}</td>\n	<td width="50%" title="{{province}}"><b>{{province}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{GameCommon.equipments}}</td>\n	<td width="50%" title="{{mobilemodel}}"><b>{{mobilemodel}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{Whale.WhaleDetail.language}}</td>\n	<td width="50%" title=">{{lang}}"><b>{{lang}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{GameCommon.sex}}|{{GameCommon.age}}</td>\n	<td width="50%" title="{{sex}}|{{age}}岁"><b><font>{{sex}}</font>|{{age}}<font class="font15">岁</font></b></td>\n</tr>\n'}),define("text!templates/whale/whale_charge.html",[],function(){return'<tr>\n	<td class="left borno">{{Whale.WhaleUser.newIncreasedDate}}</td>\n	<td class="borno" width="50%" title="{{registerTime}}"><b>{{registerTime}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{Whale.WhaleDetail.lastLogin}}</td>\n	<td width="50%" title="{{lastLoginTime}}"><b>{{lastLoginTime}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{Whale.WhaleDetail.firstRechargeable}}</td>\n	<td width="50%" title="{{firstChargeTime}}"><b>{{firstChargeTime}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{Revenue.IncomeData.rechargeableTimes}}</td>\n	<td width="50%" title="{{chargeTimes}}"><b>{{chargeTimes}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{Whale.WhaleUser.rechargeableLimit}}</td>\n	<td width="50%" title="{{chargeValue}}"><b>{{chargeValue}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{GameCommon.dummyCoinTotalValue}}</td>\n	<td width="50%" title="{{totalVC}}"><b>{{totalVC}}</b></td>\n</tr>\n<tr>\n	<td class="left">{{Whale.WhaleDetail.retainDummyCoin}}</td>\n	<td width="50%" title="{{virtualValue}}"><b>{{virtualValue}}</b></td>\n</tr>\n'}),define("text!templates/whale/whale_behavior.html",[],function(){return'{{#resultData}}\r<tr data="{{sessionId}}" data-time="{{timeflag}}" class="behaviorList" style="cursor: pointer;">\r	<td class="left aroww"><span>{{time_format}}</span></td>\r	<td>{{GameCommon.login}}<font>{{times}}</font>{{GameCommon.times}}</td>\r</tr>\r{{/resultData}}\r{{^resultData}}\r	<tr><td colspan="2" class="noData">{{GameCommon.noData}}</td></tr>\r{{/resultData}}\r'}),define("text!templates/whale/whale_behavior_detail.html",[],function(){return'<tr class="detailTr">\r	<td colspan="2">\r		<div class="mintdbox mintable">\r			<div class="mintablebox">\r				<table id="valueinfogrid" class="table_style1" width="100%" height="100%" cellspacing="0px" cellpadding="0px" border="0">\r					<thead>\r						<tr>\r							<th>{{WhaleDetail.loginInTime}}</th>\r							<th>{{WhaleDetail.loginOutTime}}</th>\r							<th>{{WhaleDetail.action}}</th>\r							<th>{{WhaleDetail.stay}}</th>\r						</tr>\r					</thead>\r\r					<tbody id="behaviorDetail">\r					{{#resultData}}\r						<tr class="{{trclass}}" style="cursor: pointer;">\r							<td width="25%">{{logintime}}</td>\r							<td width="25%">{{logouttime}}</td>\r							<td width="25%"><p style="display: block;" class="actionOpen"><font color="blue">{{GameCommon.detail}}</font></p><p style="display: none;" class="actionDesc">{{{actionDesc}}}</p></td>\r							<td width="25%"><p style="display: block;" class="durationRate">{{durationRate}}</p><p style="display: none;" class="durationDesc">{{{durationDesc}}}</p></td>\r						</tr>\r					{{/resultData}}\r					{{^resultData}}\r						<tr><td colspan="4" class="noData">{{GameCommon.noData}}</td></tr>\r					{{/resultData}}\r					</tbody>\r				</table>\r			</div>\r		</div>\r	</td>\r</tr>'}),define("text!templates/whale/whale_charge_list.html",[],function(){return'<div class="mintablebox">\r	<table id="chargeInfo_table" class="table_style1" width="100%" cellspacing="0" cellpadding="0" border="0">\r		<thead>\r			<tr>\r				<th>{{GameCommon.time}}</th>\r				<th>{{GameCommon.rechargeableType}}</th>\r				<th>{{WhaleDetail.rechargeableLimit}}</th>\r				<th>{{GameCommon.purchaseDummyCoin}}</th>\r				<th>{{WhaleDetail.thatTimeLevel}}</th>\r			</tr>\r		</thead>\r		<tbody>\r		{{#resultData}}\r			<tr class="{{trclass}}">\r				<td>{{time_format}}</td>\r				<td>{{chargeTypeName}}</td>\r				<td>{{standardCash}}</td>\r				<td>{{virtualCurrency}}</td>\r				<td>{{leveltype}}</td>\r			</tr>\r		{{/resultData}}\r		{{^resultData}}\r			<tr><td colspan="5" class="noData">{{GameCommon.noData}}</td></tr>\r		{{/resultData}}\r		</tbody>\r	</table>\r</div>\r'}),define("text!templates/whale/whale_purchase_list.html",[],function(){return'<div class="mintablebox">\r	<table id="purchaseInfo_table" class="table_style1" width="100%" cellspacing="0" cellpadding="0" border="0">\r		<thead>\r			<tr>\r				<th>{{GameCommon.time}}</th>\r				<th>{{GameCommon.consumePoint}}ID</th>\r				<th>{{WhaleDetail.consumePointAlias}}</th>\r				<th>{{WhaleDetail.quantityExpense}}</th>\r				<th>{{GameCommon.consumeDummyCoin}}</th>\r				<th>{{WhaleDetail.thatTimeLevel}}</th>\r			</tr>\r		</thead>\r		<tbody>\r		{{#resultData}}\r			<tr class="{{trclass}}">\r				<td>{{time_format}}</td>\r				<td>{{itemId}}</td>\r				<td>{{itemName}}</td>\r				<td>{{itemNumber}}</td>\r				<td>{{virtualCurrency}}</td>\r				<td>{{leveltype}}</td>\r			</tr>\r		{{/resultData}}\r		{{^resultData}}\r			<tr><td colspan="6" class="noData">{{GameCommon.noData}}</td></tr>\r		{{/resultData}}\r		</tbody>\r	</table>\r</div>'}),define("text!templates/whale/whale_itemuse_list.html",[],function(){return'<div class="mintablebox">\r	<table id="itemUseInfo_table" class="table_style1" width="100%" cellspacing="0" cellpadding="0" border="0">\r		<thead>\r			<tr>\r				<th>{{GameCommon.time}}</th>\r				<th>{{GameCommon.consumePoint}}ID</th>\r				<th>{{WhaleDetail.consumePointAlias}}</th>\r				<th>{{GameCommon.consumeCount}}</th>\r				<th>{{WhaleDetail.thatTimeLevel}}</th>\r			</tr>\r		</thead>\r		<tbody>\r		{{#resultData}}\r			<tr class="{{trclass}}">\r				<td>{{time_format}}</td>\r				<td>{{itemId}}</td>\r				<td>{{itemName}}</td>\r				<td>{{itemNumber}}</td>\r				<td>{{leveltype}}</td>\r			</tr>\r		{{/resultData}}\r		{{^resultData}}\r			<tr><td colspan="5" class="noData">{{GameCommon.noData}}</td></tr>\r		{{/resultData}}\r		</tbody>\r	</table>\r</div>\r'}),define("text!templates/whale/whale_behavior_detail_loading.html",[],function(){return'<tr class="detailTr">\r\n	<td colspan="2">\r\n		<div class="mintdbox mintable">\r\n			<div class="mintablebox">\r\n				<table id="valueinfogrid" class="table_style1" width="100%" height="100%" cellspacing="0px" cellpadding="0px" border="0">\r\n					<thead>\r\n						<tr>\r\n							<th><%=Whale.WhaleDetail.loginInTime%></th>\r\n							<th><%=Whale.WhaleDetail.loginOutTime%></th>\r\n							<th><%=Whale.WhaleDetail.action%></th>\r\n							<th><%=Whale.WhaleDetail.stay%></th>\r\n						</tr>\r\n					</thead>\r\n						<tr><td colspan="4"><div class="login"><img src="images/loading.gif" height="25px"></img> <br><%=GameCommon.loadingData%></div></td></tr>\r\n					</tbody>\r\n				</table>\r\n			</div>\r\n		</div>\r\n	</td>\r\n</tr>'}),define("views/whale/WhaleDetailView",["backbone","mustache","views/public/DatePicker","models/whaleuser/WhaleUser","utils/dataTableUtil","text!templates/public/loading.html","text!templates/whale/whaleDetail.html","text!templates/whale/whale_account.html","text!templates/whale/whale_charge.html","text!templates/whale/whale_behavior.html","text!templates/whale/whale_behavior_detail.html","text!templates/whale/whale_charge_list.html","text!templates/whale/whale_purchase_list.html","text!templates/whale/whale_itemuse_list.html","text!templates/whale/whale_behavior_detail_loading.html","i18n!nls/gameI18N","jquery.tabs","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=e.View.extend({el:"#container",events:{"click #whale_behavior tr.behaviorList":"showBehaviorDetail","click #behaviorDetail tr":"showSessionDetail","change #accountChange":"accountChange"},initialize:function(){$("#container").html(_.template(o,v)),new n({el:"#datePicker"}),$("#whale_account").html(_.template(s,v)),$("#whale_charge").html(_.template(s,v)),$("#whale_behavior").html(_.template(s,v)),this.render()},render:function(){return this.renderAccountAndCharge(),this.renderSpendSummary(),this.renderBehaviorRecord(),this.renderAccountChange(),this},renderAccountChange:function(){this.userId=Params.userId,Params.userId=null,r.top500ChargeUser({data:Params,success:function(e){var t='<select id="accountChange" style="height:38px;"><option value="-1">'+v.GameCommon.accountName+"</option>";for(var n=0;n<e.length;n++)Params.userId==e[n].userId?t+='<option value="'+e[n].userId+'" selected="selected">'+e[n].accountName+"</option>":t+='<option value="'+e[n].userId+'">'+e[n].accountName+"</option>";t+="</select>",$("#accountChangeDiv").html(t),$("#accountChange").sSelect()}}),Params.userId=this.userId},renderAccountAndCharge:function(){$("#whaleWhaleDetailAccountNumberInfo").tabs({indicator:!0}),$("#whaleWhaleDetailRechargeableInfo").tabs({indicator:!0}),r.userProfileInfo({data:Params,success:function(e){e.sex?e.sex=e.sex==1?v.GameCommon.male:v.GameCommon.female:e.sex=v.GameCommon.unknown,e.age=e.age==-1?0:e.age,e.registerTime=(new Date(e.registerTime)).toFormat("YYYY-MM-DD"),e.lastLoginTime=(new Date(e.lastLoginTime)).toFormat("YYYY-MM-DD"),e.firstChargeTime=(new Date(e.firstChargeTime)).toFormat("YYYY-MM-DD"),e.totalVC=e.virtualValue+e.totalPurchase,e.Whale=v.Whale,e.Revenue=v.Revenue,e.GameCommon=v.GameCommon,$("#whale_account").html(t.render(u,e)),$("#whale_charge").html(t.render(a,e))}})},renderSpendSummary:function(){$("#whaleWhaleDetailConsumeOverview").tabs({indicator:!0}),$("#spendSummaryCode").tabs(function(e){r[e]({data:Params,success:function(n){var r="";if(e=="chargeInfo")r=c;else if(e=="purchaseInfo")r=h;else if(e="itemUseInfo")r=p;var s={resultData:n};s.time_format=function(){return(new Date(this.time)).toFormat("YYYY-MM-DD HH:MI:SS")},s.trclass=function(){return(n.indexOf(this)+1)%2==0?"changeColor":""},s.WhaleDetail=v.Whale.WhaleDetail,s.GameCommon=v.GameCommon,$("#actionSum").html(n.length),$("#chargeInfo").html(t.render(r,s)),i.dataTable({$el:$("#"+e+"_table"),sort:!1})}})})},renderBehaviorRecord:function(){$("#whaleWhaleDetailActionRecord").tabs({indicator:!0}),r.userBehaviorRecord({data:Params,success:function(e){var n={resultData:e};n.WhaleDetail=v.Whale.WhaleDetail,n.GameCommon=v.GameCommon,n.time_format=function(){return this.timeflag.replace(/(\d{2})(\d{2})(\d{2})(\d{2})/,"20$1-$2-$3")},$("#whale_behavior").html(t.render(f,n))}})},showBehaviorDetail:function(e){var n=$(e.currentTarget).next("tr.detailTr"),i=$(n).attr("class");$(e.currentTarget).toggleClass("hover");if(!i){var s=$(e.currentTarget).attr("data"),o=$(e.currentTarget).attr("data-time"),u=_.clone(Params);u.sessionId=s,u.startTime=o/100,$(e.currentTarget).after(d),r.userBehaviorDetail({data:u,success:function(n){$(e.currentTarget).next("tr.detailTr").remove();var r={resultData:n};r.trclass=function(){return(n.indexOf(this)+1)%2==0?"changeColor":""},r.actionDesc=function(){var e=[];this.actionDescribe&&(e=this.actionDescribe.split(","));var t="";for(var n=0;n<e.length;n++)t+=n+1+"."+v.Whale.WhaleDetail.userDoing+e[n]+"<br/>";return t},r.durationDesc=function(){var e=[];this.actionDescribe&&(e=this.duration.split(","));var t="";for(var n=0;n<e.length;n++)t+=e[n]+" S<br/>";return t},r.durationRate=function(){var e=_.sum(_.pluck(n,"sumDuration"));return e==0?"0.0%":_.toPercent(this.sumDuration/e,1)},r.WhaleDetail=v.Whale.WhaleDetail,r.GameCommon=v.GameCommon,$(e.currentTarget).after(t.render(l,r))}})}else $(n).toggle()},showSessionDetail:function(e){$(e.currentTarget).find("p.actionDesc").toggle(),$(e.currentTarget).find("p.durationRate").toggle(),$(e.currentTarget).find("p.durationDesc").toggle(),$(e.currentTarget).find("p.actionOpen").toggle()},accountChange:function(e){$(e.currentTarget).val()!="-1"&&(Params.userId=$(e.currentTarget).val(),this.renderAccountAndCharge(),this.renderSpendSummary(),this.renderBehaviorRecord())}});return m}),define("utils/FunnelUtil",["highcharts","underscore"],function(e,t){return{chart:function(n){var r=n.id,i=t.pluck(n.data,"tag"),s=t.pluck(n.data,"longCount"),o=0,u=s[0],a=[],f=function(e,t){return t==0?"0.0":Math.round(e/t*1e3)/10};for(var l=0;l<s.length;l++)if(l===0)a.push("");else{var c=s[l],h=s[l-1];a.push(f(c,h))}new e.Chart({chart:{renderTo:r,zoomType:"xy",backgroundColor:"#fff"},title:{text:""},xAxis:{categories:i},yAxis:{title:{text:""}},legend:{enabled:!1},tooltip:{formatter:function(){return""+this.x+": "+this.y}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:"white"}},area:{marker:{enabled:!0,states:{hover:{enabled:!0}}},dataLabels:{enabled:!0,formatter:function(){return f(this.y,u)+"%"}}},line:{dataLabels:{enabled:!0,x:-56,y:20,formatter:function(){var e=a[o];return o+=1,e?o==1?"":e+"%":""}},lineWidth:0,marker:{enabled:!1}}},series:[{name:"",type:"column",data:s},{name:"",color:"#6DC5FD",type:"line",data:s},{name:"",color:"#6DC5FD",type:"area",data:s}]})}}}),define("models/customEvent/CustomEvent",["models/BaseModel"],function(e){var t=[{name:"fetchCustomeventDescList",url:"/v1/customevent/list"},{name:"eventNumList",url:"/v1/customevent/eventNumList"},{name:"perActiveUserEventNumList",url:"/v1/customevent/perActiveUserEventNumList"},{name:"perStartupEventNumList",url:"/v1/customevent/perStartupEventNumList"},{name:"getCustomEventParamList",url:"/v1/customevent/paramList"},{name:"getCustomEventParamValueList",url:"/v1/customevent/paramValue"},{name:"fetchCustomeventList",url:"/v1/customevent/customEventList"}];return e.init(t)}),define("models/customEvent/Funnel",["models/BaseModel"],function(e){var t=[{name:"fetchFunnelList",url:"/v1/customeventfunnel/list",type:"get"},{name:"fetchFunnelData",url:"/v1/customeventfunnel/funnelData"},{name:"saveOrUpdateFunnel",url:"/v1/customeventfunnel/saveOrUpdate"},{name:"deleteFunnel",url:"/v1/customeventfunnel/delete"},{name:"fetchCustomEventFunnel",url:"/v1/customeventfunnel/funnel",type:"get"},{name:"canCreate",url:"/v1/customeventfunnel/check",type:"get"}];return e.init(t)}),define("text!templates/customEvent/eventData.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n			<div id="showSelectedPartners" class="Editor hide Filter" >\r\n				<div id="selectVersion"></div>\r\n			</div>\r\n		</div>\r\n		<div id="customEventEventDataEventOverview">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=CustomEvent.EventData.eventOverview%></strong>\r\n				<!-- <div class="buttonDiv l">\r\n					<label class="selectlble l">检索：</label>\r\n					<input type="text" class="textinput l"/>\r\n				</div> -->\r\n				<div id="excelbtn"></div>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox">\r\n			<table id="customEventList" width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1">\r\n                <thead>\r\n                	<tr>\r\n                    	<th width="15%" class="left"><%=CustomEvent.EventData.eventDisplayName%></th>\r\n                        <th width="15%"><%=CustomEvent.EventData.eventCounts%></th>\r\n                        <th width="15%"><%=CustomEvent.EventData.eventUsers%></th>\r\n                        <th width="15%"><%=CustomEvent.EventData.initiateHappenCounts%></th>\r\n                        <th width="15%"><%=GameCommon.operate%></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                	<tr class="login_tr">\r\n						<td colspan="5">\r\n							<div class="login">\r\n								<img src="images/loading.gif" height="25px"></img> <br>\r\n							<%=GameCommon.loadingData%>\r\n							</div>\r\n						</td>\r\n					</tr>\r\n                </tbody>\r\n            </table>\r\n		</div>\r\n\r\n	</div>\r\n	\r\n	<div id="funnels"></div>\r\n	\r\n	<div class="boxmax">\r\n		<a class="maxbut" id="addFunnelBtn"><font class="add"><%=CustomEvent.EventData.addFunnel%></font></a>\r\n	</div>\r\n</div>\r\n\r\n\r\n\r\n\r\n'}),define("text!templates/customEvent/eventList.html",[],function(){return'{{#events}}\n<tr>\n    <td width="30%" class="aroww left"><span><a data="{{id}}">{{displayName}}<a></span></td>\n    <td width="25%">{{num}}</td>\n    <td width="15%">{{usernum}}</td>\n    <td width="30%">{{loginTimes}}</td>\n    <td width="15%"><a data="{{id}}"><%=GameCommon.detail%></a></td>\n</tr>\n{{/events}}\n{{^events}}\n<tr><td colspan="5" class="noData"><%=GameCommon.noData%></td></tr>\n{{/events}}\n'}),define("text!templates/customEvent/addFunnel.html",[],function(){return'<div class="Pop_line">\n    <div class="EditPop_top timetop">\n        <b class="l"><%=i18n.CustomEvent.EventData.setting%></b>\n    </div>\n    <div class="Poptxt">\n    	<p class="setupPop_P"><%=i18n.CustomEvent.EventData.tip%></p>\n        <ul class="setupPop" id="stepContainer">\n        	<li>\n				<b style="letter-spacing: 2px;"><%=i18n.CustomEvent.EventData.name%>：</b>\n				<input value="<%=funnel.name%>" id="customEventNameInput" class="textinput" style="width:200px; margin-left:10px;" type="text">\n			</li>\n			<%if(funnel.flowList){%>\n				<input type="hidden" value="<%=funnel.id%>" id="funnelIdInput"/>\n				<%_.each(funnel.flowList,function(flow){%>\n					<li class="step">\n						<b>step<%=flow.step%>：</b>\n						<label><%=i18n.CustomEvent.EventData.criteria%></label>\n						<select style="left: 100px;" class="selectEl" id="step<%=flow.step%>">\n							<option value="-1"><%=i18n.Level.LevelDetailed.choose%></option>\n							<%\n								_.each(eventList,function(event){\n									var selected = \'\';\n									if(flow.eventId == event.id) selected = \'selected\';\n							%>\n									<option value="<%=event.id%>" <%=selected%> ><%=event.eventdisplayname%></option>\n							<% });%>\n						</select>\n						<label><%=i18n.CustomEvent.EventData.stepName%></label>\n						<input class="textinput" type="text" value="<%=flow.stepName%>" role="nickname">\n						<em class="r deleteItemtype">删除</em>\n					</li> \n			<%	});\n			}else{%>\n				<li class="step">\n					<b>step1：</b>\n					<label><%=i18n.CustomEvent.EventData.criteria%></label>\n					<select style="left: 100px;" class="selectEl" id="step">\n						<option value="-1"><%=i18n.Level.LevelDetailed.choose%></option>\n						<%_.each(eventList,function(event){%>\n							<option value="<%=event.id%>"><%=event.eventdisplayname%></option>\n						<%});%>\n					</select>\n					<label><%=i18n.CustomEvent.EventData.stepName%></label>\n					<input class="textinput" type="text" role="nickname">\n					<em class="r deleteItemtype">删除</em>\n				</li> \n			<%}%>\n			\n		</ul>\n        <div class="opeDiv after product_opeDiv">\n            <a class="l CancelonCL" id="addStepBtn">+<%=i18n.Level.LevelDetailed.addStep%></a>\n            <a class="timecolse r Confirm" id="saveBtn"><%=i18n.Level.LevelDetailed.saveAndClose%></a>\n            <a class="r Cancel" id="canelBtn"><%=i18n.Level.LevelDetailed.canel%></a>\n        </div>\n    </div>\n</div>'}),define("text!templates/customEvent/funnel.html",[],function(){return'<%\n	_.each(list,function(o){\n%>\n		<div class="boxmax">\n			<div class="title">\n				<strong class="l"><%=i18n.CustomEvent.EventData.conversionFunnel%>-<span data="funnelName-<%=o.id%>"><%=o.name%></span></strong>\n				<a class="Cancel r minCancel delete" data="<%=o.id%>">\n					<font class="indicator">×</font>\n				</a>\n				<a class="Cancel r minCancel edit" data="<%=o.id%>">\n					<font class="SetUp"></font>\n				</a>\n			</div>\n			<div class="textbox">\n				<div class="picbox" id="funnel-<%=o.id%>">\n					<div class="login"><img src="images/loading.gif" height="25px"></img> <br><%=i18n.GameCommon.loadingData%></div>\n				</div>\n			</div>\n		</div>\n<%	\n	});\n%>\n'}),define("text!templates/customEvent/customEventStep.html",[],function(){return'<li class="step">\n	<b>step<%=num%>：</b>\n	<label>追踪依据</label>\n	<select style="left: 100px;" class="selectEl" id="step<%=num%>">\n		<option value="-1">-请选择-</option>\n		<%_.each(list,function(event){%>\n			<option value="<%=event.id%>"><%=event.eventdisplayname%></option>\n		<%});%>\n	</select>\n	<label>步骤别名</label>\n	<input class="textinput" type="text" role="nickname">\n	<em class="r deleteItemtype">删除</em>\n</li> '}),define("views/customEvent/EventDataView",["backbone","mustache","views/public/DatePicker","views/public/SelectView","utils/dataTableUtil","utils/urlUtil","utils/RegexUtil","utils/ModelBox","utils/excelDataUtil","utils/FunnelUtil","models/customEvent/CustomEvent","models/customEvent/Funnel","text!templates/customEvent/eventData.html","text!templates/customEvent/eventList.html","text!templates/customEvent/addFunnel.html","text!templates/customEvent/funnel.html","text!templates/customEvent/customEventStep.html","text!templates/public/excelExport.html","text!templates/public/loading.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){var w=e.View.extend({el:"#container",events:{"click #addFunnelBtn":"addOrEditFunnel","click #customEventList tbody a":"toDetail","click #funnels .title>a.delete":"deleteFunnel","click #funnels .title>a.edit":"editFunnel"},initialize:function(){$("#container").html(_.template(h,b)),new n({el:"#datePicker"}),new r({el:"#selectChoose"}),this.tipObj=b.CustomEvent.EventData,this.render()},render:function(){var e=this;return l.fetchCustomeventList({data:Params,success:function(t){e.customEventList=t}}),this.renderTable(),this.renderFunnels(),this},addOrEditFunnel:function(e){var t=this,e=e||{},n=_.template(d,{funnel:e,eventList:this.customEventList,i18n:b});e.flowList?this.showFunnelSettingBox(n,t):c.canCreate({data:{productId:Params.productID},success:function(e){e?t.showFunnelSettingBox(n,t):u.alert({message:t.tipObj.tip8})}})},showFunnelSettingBox:function(e,t){u.confirm({message:e,buttons:[{"#addStepBtn":function(){var e=$("#stepContainer").find("li.step").length;if(e===8){alert(t.tipObj.tip1);return}var n=_.template(m,{list:t.customEventList,num:e+1});$("#stepContainer").append(n),t.Pop_place($(".Pop_line").parent()),$(".selectEl").sSelect()},"#saveBtn":function(){var e=$("#stepContainer").find("li.step").length;if(e<=1){alert(t.tipObj.tip2);return}var n=$("#customEventNameInput"),r=$('input[role="nickname"]'),i=$("#stepContainer select"),s=n.val(),o=_.map(r,function(e){return $(e).val()}),a=_.map(i,function(e){return $(e).val()});if(!s||o.indexOf("")!=-1||a.indexOf("-1")!=-1){alert(t.tipObj.tip3);return}if(o.length!=_.uniq(o).length){alert(t.tipObj.tip4);return}if(a.length!=_.uniq(a).length){alert(t.tipObj.tip5);return}var l={name:s,productId:Params.productID},h=[];for(var p=0;p<e;p++){var d=p+1;h.push({stepName:o[p],step:d,eventId:a[p]})}l.flowList=h,l.id=$("#funnelIdInput").val(),c.saveOrUpdateFunnel({data:l,success:function(e){u.unblock();if(e){l.id?($('span[data="funnelName-'+l.id+'"]').html(l.name),$("funnel-"+l.id).html(_.template(y,b))):$("#funnels").append(_.template(v,{list:[e],i18n:b}));var n=_.clone(Params);n.id=e.id,c.fetchFunnelData({data:n,success:function(t){f.chart({id:"funnel-"+e.id,data:t})}})}else u.alert({message:t.tipObj.tip6})}})},".deleteItemtype":function(e){var n=$("#stepContainer").find("li.step").length;if(n<=1){alert(t.tipObj.tip7);return}$(e.currentTarget).parent().remove(),$("#stepContainer").find("li.step").each(function(e){$(this).find("b").html("step"+(e+1)+"：")}),t.Pop_place($(".Pop_line").parent())}}]}),$(".selectEl").sSelect()},Pop_place:function(e){var t=$(window).height(),n=$(document).width(),r=e.width(),i=e.height(),s=n/2-r/2,o=t/2-i/2;e.css({left:s+"px",top:o+"px"})},renderTable:function(){$("#customEventEventDataEventOverview .title").append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),$("#customEventEventDataEventOverview").tabs({indicator:!0});var e=this;l.fetchCustomeventDescList({data:Params,success:function(t){e.handle(t)}})},renderFunnels:function(){c.fetchFunnelList({data:{productId:Params.productID},success:function(e){if(e&&e.length){$("#funnels").html(_.template(v,{list:e,i18n:b}));var t=_.pluck(e,"id");_.each(t,function(e){var t=_.clone(Params);t.id=e,c.fetchFunnelData({data:t,success:function(t){f.chart({id:"funnel-"+e,data:t})}})})}}})},deleteFunnel:function(e){u.confirm({buttons:[{".Confirm":function(){u.unblock();var t=$(e.currentTarget),n=t.attr("data");c.deleteFunnel({data:{id:n,productId:Params.productID},success:function(e){e&&t.parent().parent().remove()}})}}]})},editFunnel:function(e){var t=$(e.currentTarget),n=t.attr("data"),r=this;c.fetchCustomEventFunnel({data:{funnelId:n},success:function(e){r.addOrEditFunnel(e)}})},handle:function(e){var n={events:e};n.displayName=function(){return this.eventdisplayname?this.eventdisplayname:this.id},n.num=function(){return o.formatDigit(this.eventnum)},n.loginTimes=function(){return o.formatDigit(this.occuredTimesPerLogin)};var r=t.render(_.template(p,b),n);$("#customEventList>tbody").html(r),$("#customEventList").find("tr:even").addClass("changeColor"),$('#customEventEventDataEventOverview .title>a[role="excel"]').click(function(){if(r){var e=b.CustomEvent.EventData.eventOverview+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",t=$("<table></table>"),n=$("<thead></thead>"),i=$("<tbody></tbody>");n.append($("#customEventList>thead").html()),i.append(r),t.append(n).append(i);var s=a.tableToJson(t[0]),o=_.template(g,{excelName:e,excelArray:s});$("body").append(o),$("#excelExportForm").submit(),$("#excelExportForm").remove()}});var s=i.dataTable({$el:$("#customEventList")})},toDetail:function(e){$target=$(e.currentTarget),Params.userId=$target.attr("data"),location.hash="#page/customEvent-detail_data/"+s.parse2Str(Params)}});return w}),define("text!templates/customEvent/eventDataDetail.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div class="maintop">\r\n			<div id="eventIDChangeDiv" class="l marginright">\r\n				<div  class="relative l selectlist">\r\n					<div class="dropselect l">\r\n					<h4 title="<%=CustomEvent.EventDetail.eventId%>" class="over"><%=CustomEvent.EventDetail.eventId%></h4>\r\n					</div>\r\n				</div>\r\n			</div>\r\n			<div id="datePicker" class="relative l" style=" z-index:99"></div>\r\n			<div id="selectChoose" class="relative r" style=" z-index:99"></div>\r\n			<div class="clear"></div>\r\n			<div id="showSelectedPartners" class="Editor hide Filter" >\r\n				<div id="selectVersion"></div>\r\n			</div>\r\n		</div>\r\n		<div id="eventTrendCode">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=CustomEvent.EventDetail.eventTendency%></strong>\r\n			</div>\r\n			<div class="textbox">\r\n				<div role="tabbar" class="box_top">\r\n					<a data-tab="eventNum" class="tab hover"><%=CustomEvent.EventData.eventCounts%></a>\r\n					<a data-tab="activeUserNum" class="tab"><%=CustomEvent.EventDetail.everyActiveUserHappen%></a>\r\n					<a data-tab="startUpNum" class="tab"><%=CustomEvent.EventDetail.everyInitiateHappen%></a>\r\n				</div>\r\n				<div role="chart">\r\n					<div id="eventTrendCode-chart" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l hover"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n				<div role="table">\r\n					<div id="eventTrendCode-table" class="picbox"></div>\r\n					<div class="after">\r\n		        		<a role="chartBtn" class="pic_but l"><font class="pic_icon"><%=GameCommon.chart%></font></a>\r\n		        		<a role="tableBtn" class="pic_but l hover"><font class="table_icon"><%=GameCommon.grid%></font></a>\r\n		        	</div>\r\n				</div>\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="boxmax">\r\n		<div id="customEventEventDetailParameters">\r\n			<div class="title" role="title">\r\n				<strong class="l"><%=CustomEvent.EventDetail.parameters%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox">\r\n			<div class="dataTables_wrapper">\r\n				<table id="paramsTable" height="100%" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style_ope">\r\n					\r\n				</table>\r\n			</div>\r\n		</div>\r\n		\r\n	</div>\r\n</div>\r\n'}),define("text!templates/customEvent/paramsList.html",[],function(){return'{{#list}}\n	<tr data="{{name}}&{{sum}}&{{num}}" status="parent" dataValue="{{name}}">\n		<td class="aroww left">\n			<span>{{name}}\n				{{#displaySum}}\n					<img class="sum" src="images/sum.png">\n				{{/displaySum}}\n			</span>\n		</td>\n	</tr>\n{{/list}}\n{{^list}}\n	<tr>\n		<td class="noData">\n			{{GameCommon.noData}}\n		</td>\n	</tr>\n{{/list}}'}),define("text!templates/customEvent/paramsDetail.html",[],function(){return'<tr status="sub">\r	<td class="details">\r		<div class="mintdbox mintable">\r			<div class="mintablebox">\r				<table height="100%" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style1">\r					<thead>\r						<tr>\r							<th class="center">Value</th>\r							<th class="center"><%=CustomEvent.EventDetail.messageCounts%></th>\r							<th class="center"><%=CustomEvent.EventDetail.proportion%></th>\r						</tr>\r					</thead>\r					<tbody>\r						<tr>\r							<td colspan="3">\r								<div class="login">\r									<img src="images/loading.gif" height="25px"></img> <br>\r								<%=GameCommon.loadingData%>\r								</div>\r							</td>\r						</tr>\r					</tbody>\r				</table>\r			</div>\r		</div>\r	</td>\r</tr>'}),define("text!templates/customEvent/value-sum.html",[],function(){return'<tr status="sub">\n	<td class="details">\n		<div class="mintdbox mintable">\n			<div class="mintablebox">\n				<table height="100%" width="100%" cellspacing="0px" cellpadding="0px" border="0" class="table_style1">\n					<thead>\n						<tr>\n							<th class="center borno"><%=CustomEvent.EventDetail.messageCounts%></th>\n							<th class="center borno">Total Value</th>\n						</tr>\n					</thead>\n					<tbody>\n						<tr>\n							<td colspan="2">\n								<div class="login">\n									<img src="images/loading.gif" height="25px"></img> <br>\n								<%=GameCommon.loadingData%>\n								</div>\n							</td>\n						</tr>\n					</tbody>\n				</table>\n			</div>\n		</div>\n	</td>\n</tr>'}),define("views/customEvent/EventDetailView",["jquery","backbone","mustache","utils/HighchartUtil","utils/dataTableUtil","utils/excelDataUtil","views/public/DatePicker","views/public/SelectView","models/customEvent/CustomEvent","models/Constant","text!templates/customEvent/eventDataDetail.html","text!templates/customEvent/paramsList.html","text!templates/customEvent/paramsDetail.html","text!templates/customEvent/value-sum.html","text!templates/public/excelExport.html","i18n!nls/gameI18N","jquery.tabs","jquery.select"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){var m=t.View.extend({el:"#container",events:{'click #paramsTable>tbody>tr[status="parent"]':"toggleParamTr","change #eventIDChange":"eventIDChange"},initialize:function(){e("#container").html(_.template(l,v)),new o({el:"#datePicker"}),new u({el:"#selectChoose"}),this.params=_.clone(Params),this.params.eventId=this.params.userId,this.render()},render:function(){return this.renderEvnetIDChange(),this.renderEventTrend(),this.renderEventParams(),this},eventIDChange:function(t){var n=e(t.currentTarget).val();n!="-1"&&(this.params.eventId=n,this.renderEventTrend(),this.renderEventParams())},renderEvnetIDChange:function(){var t=this.params.eventId;a.fetchCustomeventDescList({data:this.params,success:function(n){if(!n)return;var r='<select id="eventIDChange" style="height:38px;"><option value="-1">'+v.CustomEvent.EventDetail.eventId+"</option>";for(var i=0;i<n.length;i++)t==n[i].id?r+='<option value="'+n[i].id+'" selected="selected">'+n[i].eventdisplayname+"</option>":r+='<option value="'+n[i].id+'">'+n[i].eventdisplayname+"</option>";r+="</select>",e("#eventIDChangeDiv").html(r),e("#eventIDChange").sSelect()}})},renderEventTrend:function(){var t=this,n=e("#eventTrendCode").tabs(function(s){var o,u;switch(s){case"eventNum":o="eventNumList",u=v.CustomEvent.EventData.eventCounts;break;case"activeUserNum":o="perActiveUserEventNumList",u=v.CustomEvent.EventDetail.everyActiveUserHappen;break;case"startUpNum":o="perStartupEventNumList",u=v.CustomEvent.EventDetail.everyInitiateHappen}a[o]({data:t.params,success:function(t){var s=_.pluck(t,"item"),t=_.pluck(t,"value"),o=[{name:u,data:t}],a=_.zip(s,t),f=[v.GameCommon.date,u];i.drawTable({head:f,body:a,$el:e("#eventTrendCode-table")}),r.chart({id:"eventTrendCode-chart",x:s,series:o}),n.head=f,n.body=a}})})},renderEventParams:function(){e("#customEventEventDetailParameters").tabs({indicator:!0}),e("#paramsTable").html(_.template(this.loading(),{GameCommon:v.GameCommon})),a.getCustomEventParamList({data:this.params,success:function(t){var r={list:t};r.GameCommon=v.GameCommon,r.displaySum=function(){return this.sum?this.sum:null},e("#paramsTable>tbody").html(n.render(c,r))}})},toggleParamTr:function(t){var r=e(t.currentTarget),o=r.attr("data").split("&"),u=r.next('tr[status="sub"]'),f=r.find('td span a[role="excel"] ');f.length?f.toggle():r.find("td span").append('<a role="excel" class="r Cancel minCancel"><font  class="dow">Excel</font></a>'),r.toggleClass("hover");if(u.length)u.toggle();else{var l=this.params;l.keyinfo=o[0],l.sum=o[1]=="true"?!0:!1,r.after(l.sum?_.template(p,v):_.template(h,v));var c='{{#list}}							<tr>								<td>{{value}}</td>								<td>{{num}}</td>								<td><div class="ProgressBar relative"><span style="width:{{percent}}"></span><font>{{percent}}</font></div></td>							</tr>						{{/list}}',m="{{#list}}<tr><td>{{num}}</td><td>{{value}}</td></tr>{{/list}}";a.getCustomEventParamValueList({data:l,success:function(t){var u=l.useId+o[0],a=r.next("tr").find("table");a.attr("id",u);if(t&&t.length){l.sum&&(t[0].num=o[2]),a.find("tbody").html(n.render(l.sum?m:c,{list:t})),a.find("tr:even").addClass("changeColor"),l.sum||i.dataTable({$el:e("#"+u)});var f=e("<table></table>");f.append(a.html()),r.find('td span a[role="excel"]').click(function(t){var n=r.attr("dataValue")+"("+Params.startTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+"~"+Params.endTime.replace(/^(1\d)([01]\d)([0123][0-9])$/,"20$1-$2-$3")+")",i=s.tableToJson(f[0]),o=_.template(d,{excelName:n,excelArray:i});e("body").append(o),e("#excelExportForm").submit(),e("#excelExportForm").remove(),t.stopPropagation()})}else a.find("tbody").html('<tr><td class="noData">'+v.GameCommon.noData+"</td></tr>")}})}},loading:function(){return'<tbody>						<tr status="loading">							<td>								<div class="login">									<img src="images/loading.gif" height="25px"></img> <br>										<%=GameCommon.loadingData%>								</div>							</td>						</tr>					</tbody>'}});return m}),define("models/customEvent/EventManagement",["models/BaseModel"],function(e){var t=[{name:"fetchCustomeventManageList",url:"/v1/customeventManage/eventManageList"},{name:"clearEvent",url:"/v1/customeventManage/clearEvent"},{name:"suspendEvent",url:"/v1/customeventManage/suspendEvent"},{name:"fetchSuspendEventList",url:"/v1/customeventManage/fetchSuspendEventList"},{name:"updateEventDisplayName",url:"/v1/customeventManage/updateEventDisplayName"},{name:"updateVisible",url:"/v1/customeventManage/updateVisible"}];return e.init(t)}),define("text!templates/customEvent/eventManagement.html",[],function(){return'<div class="content r">\r\n	<div class="boxmax">\r\n		<div id="eventManagementTableTitle">\r\n			<div class="title"  role="title">\r\n				<strong class="l"><%=CustomEvent.EventManagement.eventManage%></strong>\r\n			</div>\r\n		</div>\r\n		<div class="tablebox" id="eventManagementTableDiv">\r\n			<div class="login">\r\n				<img src="images/loading.gif" height="25px"></img> <br>\r\n				<%=GameCommon.loadingData%>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<div class="boxmax">\r\n		<div class="title">\r\n			<strong class="l"><%=CustomEvent.EventManagement.eliminateEvent%></strong>\r\n		</div>\r\n		<div class="tablebox"  id="suspendEventTableDiv">\r\n			<div class="login">\r\n				<img src="images/loading.gif" height="25px"></img> <br>\r\n				<%=GameCommon.loadingData%>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n</div>'}),define("text!templates/customEvent/eventManageList.html",[],function(){return'<table width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1" id="eventManagementTable">\r\n	<thead id="eventManagementTableHead">\r\n		<tr>\r\n	    	<th width="25%"><%=CustomEvent.EventManagement.eventName%>(Event ID)</th>\r\n	        <th width="25%"><%=CustomEvent.EventManagement.displayName%></th>\r\n	        <th width="15%"><%=GameCommon.recordDate%></th>\r\n	        <th width="15%"><%=CustomEvent.EventManagement.hidingEvent%></th>\r\n	        <th width="20%"><%=GameCommon.operate%></th>\r\n	    </tr>\r\n	</thead>\r\n    <tbody id="eventManagementTableBody">\r\n		{{#resultData}}\r\n		<tr>\r\n			<td >{{eventid}}</td>\r\n			<td><input type="text" data-id="{{id}}" data-name="{{eventdisplayname}}"  value="{{eventdisplayname}}" class="notEditorput" id="edit"></td>\r\n			<td>{{displayDateTime}}</td>\r\n			<td>\r\n				<a id="hide" data-id="{{id}}" class="{{visibleFlag}} mauto" isvisible="{{visible}}"></a>\r\n			</td>\r\n			<td>\r\n				<a data-id="{{id}}" data-event-id="{{eventid}}" class="clearEvent"><%=CustomEvent.EventManagement.eliminate%></a>\r\n				<a data-id="{{id}}" data-event-id="{{eventid}}" class="suspendEvent"><%=CustomEvent.EventManagement.stopUsing%></a>\r\n			</td>\r\n		</tr>\r\n		{{/resultData}}\r\n		{{^resultData}}\r\n		<tr>\r\n			<td colspan="5" class="noData"><%=GameCommon.noData%></td>\r\n		</tr>\r\n		{{/resultData}}\r\n    </tbody>\r\n</table>\r\n'}),define("text!templates/customEvent/suspendEventList.html",[],function(){return'<table width="100%" cellspacing="0" cellpadding="0" border="0" class="table_style1" id="suspendEventTable">\r\n     <thead id="suspendEventThead">\r\n     	<tr>\r\n         	<th width="25%"><%=CustomEvent.EventManagement.eliminateEvent%>(Event ID)</th>\r\n             <th width="25%"><%=CustomEvent.EventManagement.displayName%></th>\r\n             <th width="25%"><%=CustomEvent.EventManagement.stopUsingDate%></th>\r\n             <th width="25%"><%=GameCommon.operate%></th>\r\n         </tr>\r\n     </thead>\r\n     <tbody id="suspendEventTbody">\r\n		{{#resultData}}\r\n		<tr>\r\n			<td >{{eventid}}</td>\r\n			<td>{{eventdisplayname}}</td>\r\n			<td>{{displayDateTime}}</td>\r\n			<td>\r\n				<a data-id="{{id}}" data-event-id="{{eventid}}" class="recoverEvent"><%=CustomEvent.EventManagement.recoverUse%></a>\r\n			</td>\r\n		</tr>\r\n		{{/resultData}}\r\n		{{^resultData}}\r\n		<tr>\r\n			<td colspan="4" class="noData"><%=GameCommon.noData%></td>\r\n		</tr>\r\n		{{/resultData}}\r\n     </tbody>\r\n </table>'}),define("text!templates/customEvent/clearEventTip.html",[],function(){return'<div class="Pop_line">\r\n	<div class="timetop">\r\n    	<b class="l"><%=CustomEvent.EventManagement.tip%></b>\r\n    </div>\r\n	<div class="Poptxt">\r\n    	<p class="Prompt"><%=CustomEvent.EventManagement.clearTip%></p>\r\n        <div class="opeDiv after">\r\n            <a  class="timecolse r Confirm"><%=GameCommon.confirm%></a>\r\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\r\n        </div>\r\n    </div>\r\n</div>'}),define("views/customEvent/EventManagementView",["backbone","mustache","utils/ModelBox","utils/dataTableUtil","views/public/DatePicker","views/public/SelectView","models/customEvent/EventManagement","text!templates/customEvent/eventManagement.html","text!templates/customEvent/eventManageList.html","text!templates/customEvent/suspendEventList.html","text!templates/customEvent/clearEventTip.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h=e.View.extend({el:"#container",events:{"click .clearEvent":"clearEvent","click .suspendEvent":"suspendEvent","click .recoverEvent":"recoverEvent","click #eventManagementTableBody>tr>td>#edit":"showEdit","blur #eventManagementTableBody>tr>td>#edit":"saveDisplayName","click #eventManagementTableBody>tr>td>#hide":"toggleHide"},initialize:function(){$("#container").html(_.template(u,c)),this.render()},render:function(){return this.renderEventManageTable(),this.renderSuspendEventTable(),this},renderSuspendEventTable:function(){o.fetchSuspendEventList({data:Params,success:function(e){var n={resultData:e};$("#suspendEventTableDiv").html(t.render(_.template(f,c),n)),e&&e.length&&r.dataTable({$el:$("#suspendEventTable"),sort:!1})}})},renderEventManageTable:function(){$("#eventManagementTableTitle").tabs({indicator:!0}),o.fetchCustomeventManageList({data:Params,success:function(e){var n={resultData:e,visibleFlag:function(){return this.visible?"off":"on"}};$("#eventManagementTableDiv").html(t.render(_.template(a,c),n)),e&&e.length&&r.dataTable({$el:$("#eventManagementTable"),sort:!1})}})},showEdit:function(e){$(e.currentTarget).attr("class","Editorput")},saveDisplayName:function(e){var t=$(e.currentTarget),r=t.attr("data-id"),i=t.attr("data-name"),s=t.val()||"";if(i===s){t.attr("class","notEditorput");return}o.updateEventDisplayName({data:{id:r,productid:Params.productID,eventdisplayname:s},success:function(e){e?e.isexsit?n.alert({message:c.CustomEvent.EventManagement.nameIsExsit}):(t.attr("class","notEditorput"),t.attr("data-name",e.eventdisplayname),t.attr("value",e.eventdisplayname),t.parent().next("td").html(e.displayDateTime)):n.alert({message:c.CustomEvent.EventManagement.clearDataWrong})}})},toggleHide:function(e){var t=$(e.currentTarget),r=t.attr("data-id"),i=t.attr("isvisible"),s=!0;"false"===i?s=!0:"true"===i&&(s=!1),o.updateVisible({data:{id:r,productid:Params.productID,visible:s},success:function(e){e?(t.parent().prev("td").html(e.displayDateTime),t.attr("isvisible",e.visible),s?t.attr("class","off mauto"):t.attr("class","on mauto")):n.alert({message:c.CustomEvent.EventManagement.clearDataWrong})}})},clearEvent:function(e){var t=this,r=$(e.currentTarget).attr("data-id"),i=$(e.currentTarget).attr("data-event-id");n.confirm({message:_.template(l,c),buttons:[{".Confirm":function(){n.unblock(),o.clearEvent({data:{id:r,productid:Params.productID},success:function(e){if(e){var r=c.CustomEvent.EventManagement;currentLocale==="en_us"?n.alert({message:r.eventId+r.clearSuccess}):n.alert({message:r.eventId+" ( "+i+" ) "+r.clearSuccess}),t.renderEventManageTable(),t.renderSuspendEventTable()}else n.alert({message:c.CustomEvent.EventManagement.clearDataWrong})}})},".Cancel":function(){n.unblock()}}]})},recoverEvent:function(e){var t=!1,n=this;n.suspend(n,e,t)},suspendEvent:function(e){var t=!0,n=this;n.suspend(n,e,t)},suspend:function(e,t,r){var i=$(t.currentTarget).attr("data-id"),s=$(t.currentTarget).attr("data-event-id");o.suspendEvent({data:{id:i,productid:Params.productID,suspend:r},success:function(t){if(t){var i=c.CustomEvent.EventManagement;r?(currentLocale==="en_us"?n.alert({message:i.eventId+i.stopUsed}):n.alert({message:i.eventId+" ( "+s+" ) "+i.stopUsed}),e.renderEventManageTable(),e.renderSuspendEventTable()):(currentLocale==="en_us"?n.alert({message:i.eventId+i.recoverUsed}):n.alert({message:i.eventId+" ( "+s+" ) "+i.recoverUsed}),e.renderSuspendEventTable(),e.renderEventManageTable())}else n.alert({message:c.CustomEvent.EventManagement.clearDataWrong})}})}});return h}),define("utils/AppUtil",["views/summary/SummaryView","views/player/NewPlayerView","views/player/ActivePlayerView","views/player/BehaviorView","views/player/DeviceView","views/player/ChurnedView","views/player/ConvertionView","views/player/RetentionView","views/player/CustomRetentionView","views/player/LostFunnelView","views/concurrent/ConcurrentUserView","views/Level/LevelDetailedView","views/Level/ScheduleView","views/Level/LevelDistributedView","views/play/tasksView","views/play/TasksManagementView","views/revenue/IncomeDataView","views/revenue/PayPermeateView","views/revenue/NewPlayerValueView","views/revenue/PayHabitView","views/partnerExtention/PartnerDataView","views/partnerExtention/PartnerManagementView","views/virtualEconomy/VirtualCoinView","views/virtualEconomy/ConsumeAnalysisView","views/virtualEconomy/ConsumePointView","views/virtualEconomy/ManagementView","views/whale/WhaleUserView","views/whale/WhaleDetailView","views/customEvent/EventDataView","views/customEvent/EventDetailView","views/customEvent/EventManagementView"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O){return{renderPage:function(M){$("body").undelegate(),$("#container").undelegate(),M=M||this.getCurrentPage();var _="";switch(M){case"summary-index":new e;break;case"player-new":new t;break;case"player-active":new n;break;case"player-behavior":new r;break;case"player-device":new i;break;case"player-churned":new s;break;case"player-convertion":new o;break;case"player-retention":new u;break;case"player-customRetention_retention":new a;break;case"player-lostFunnel_churned":new f;break;case"concurrent":new l;break;case"level-detail":new c;break;case"level-schedule":new h;break;case"level-distribute":new p;break;case"tasks":new d;break;case"dead":new DeadView;break;case"TasksManagement":new v;break;case"revenue-incomeData":new m;break;case"revenue-payPermeate":new g;break;case"revenue-newPlayerValue":new y;break;case"revenue-payHabit":new b;break;case"partnerExtention-partnerData":new w;break;case"partnerExtention-partnerManagement":new E;break;case"virtualEconomy-virtualCoin":new S;break;case"virtualEconomy-consumeAnalysis":new x;break;case"virtualEconomy-consumePoint":new T;break;case"virtualEconomy-Management":new N;break;case"whale-whaleUser":new C;break;case"whale-whaleUserDetail_whaleUser":new k;break;case"customEvent-data":new L;break;case"customEvent-detail_data":new A;break;case"customEvent-eventManagement":new O}},getCurrentPage:function(){return location.hash.replace(/#page.*\/(\w+)/,"$1")},saveParamsToServer:function(){},setHash:function(e){location.hash="#"+e}}}),define("models/product/Product",["models/BaseModel"],function(e){var t=[{name:"fetchProductAndPlatforms",url:"/v1/gamecenter/fetchProductAndPlatforms",type:"get"},{name:"checkProductCountLimit",url:"/v1/gamecenter/checkProductCountLimit",type:"get"}];return e.init(t)}),define("text!templates/public/menuItem.html",[],function(){return'<div class="menu l">\r\n	<ul>\r\n		<% _.each(list,function(o){ %>\r\n			<li>\r\n				<a class="<%= o.className %>" url-data="<%= o.urlData %>">\r\n					<span><%=o.name%></span>\r\n				</a>\r\n				<% if(o.subItems.length){%>\r\n					<ol>\r\n					<% _.each(o.subItems,function(sub){ %>\r\n						<li><a url-data="<%= sub.urlData %>"><%= sub.name %></a></li>\r\n					<% }); %>\r\n					</ol>\r\n				<% } %>\r\n			</li>\r\n		<% }); %>\r\n	</ul>\r\n</div>'}),define("models/MenuConfig",["underscore","text!templates/public/menuItem.html","i18n!nls/gameI18N"],function(e,t,n){return{menuItems:[{name:n.GameCommon.gameOverview,className:"navigate Dashboard",urlData:"summary-index",permisstion:"Summarize",subItems:[]},{name:n.GameCommon.gamePlayer,className:"more_icon Players",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.newIncreased,permisstion:"NewPlayer",urlData:"player-new"},{name:n.GameCommon.activing,permisstion:"ActivePlayer",urlData:"player-active"},{name:n.GameCommon.retain,permisstion:"KeepPlayer",urlData:"player-retention"},{name:n.GameCommon.transform,permisstion:"NewPlayConversion",urlData:"player-convertion"},{name:n.GameCommon.loss,permisstion:"Loss",urlData:"player-churned"},{name:n.GameCommon.gameHabit,permisstion:"Behavior",urlData:"player-behavior"},{name:n.GameCommon.equipments,permisstion:"Device",urlData:"player-device"}]},{name:n.GameCommon.onlineAnalysis,className:"concurrentUser",urlData:"concurrent",permisstion:"Online",subItems:[]},{name:n.GameCommon.levelAnalytics,className:"LevelAnalysis more_icon",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.levelDetail,permisstion:"LevelInfo",urlData:"level-detail"},{name:n.GameCommon.levelDistribute,permisstion:"LevelAnalysis",urlData:"level-distribute"},{name:n.GameCommon.newPlayerProgress,permisstion:"PlayerProgress",urlData:"level-schedule"}]},{name:n.GameCommon.taskAnalysis,className:"TasksCheckpoints more_icon",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.taskAndMission,permisstion:"TasksAndLevels",urlData:"tasks"},{name:n.GameCommon.taskAndMissionManage,permisstion:"TaskAndLevelsManage",urlData:"TasksManagement"}]},{name:n.GameCommon.incomeAnalysis,className:"more_icon revenue",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.incomeData,permisstion:"IncomeData",urlData:"revenue-incomeData"},{name:n.GameCommon.payPermeate,permisstion:"PayPermeate",urlData:"revenue-payPermeate"},{name:n.Revenue.NewPlayerValue.newPlayerValue,permisstion:"NewPlayerValue",urlData:"revenue-newPlayerValue"},{name:n.GameCommon.payHabit,permisstion:"PayHabit",urlData:"revenue-payHabit"}]},{name:n.GameCommon.dummyConsume,className:"more_icon virtualEconomy",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.dummyCoin,permisstion:"VirtualCoin",urlData:"virtualEconomy-virtualCoin"},{name:n.GameCommon.consumeHobby,permisstion:"ConsumeAnalysis",urlData:"virtualEconomy-consumeAnalysis"},{name:n.GameCommon.consumePoint,permisstion:"ConsumePoint",urlData:"virtualEconomy-consumePoint"},{name:n.GameCommon.consumePointManage,permisstion:"ConsumeManagement",urlData:"virtualEconomy-Management"}]},{name:n.GameCommon.whaleUser,className:"WhalesUser",urlData:"whale-whaleUser",permisstion:"WhaleUser",subItems:[]},{name:n.GameCommon.expandChannel,className:"more_icon partnerExtention",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.channelData,permisstion:"PartnerData",urlData:"partnerExtention-partnerData"},{name:n.GameCommon.channelManage,permisstion:"ManagePartner",urlData:"partnerExtention-partnerManagement"}]},{name:n.GameCommon.custionEvent,className:"more_icon CustomEvent",urlData:"",permisstion:"",subItems:[{name:n.GameCommon.eventData,permisstion:"CustomEventData",urlData:"customEvent-data"},{name:n.CustomEvent.EventManagement.eventManage,permisstion:"ManageCustomEvent",urlData:"customEvent-eventManagement"}]}],getMenusByPermisstions:function(){var t=DeveloperBean.userRole;if(t=="DevGroupManager"||t=="DevManager")return this.menuItems;var n=DeveloperBean.permisstionList;return e.filter(this.menuItems,function(t){if(!t.subItems.length)return e.indexOf(n,t.permisstion)!=-1;var r=e.filter(t.subItems,function(t){return e.indexOf(n,t.permisstion)!=-1});if(r.length)return t.subItems=r,t})},canVisit:function(){var t=this.getMenusByPermisstions(),n=e.pluck(t,"urlData"),r=e.pluck(t,"subItems");return e.each(r,function(t){t.length&&(n=e.union(n,e.pluck(t,"urlData")))}),n=e.without(n,""),n},renderMenus:function(){var n={list:this.getMenusByPermisstions()},r=e.template(t,n);return r}}}),define("text!templates/public/top.html",[],function(){return'<div class="l">\r	<strong><a href="#productList"><%=GameCommon.dataCenter%></a> </strong>\r    <span></span>\r	<select	name="../images/input_list_top.gif" id="productList"  style="z-index: 999;">\r		<%_.each(productList,function(p){%>\r			<option value="<%=p.productid%>"><%=p.productName%></option>\r		<%});%>\r	</select> \r	<span></span> \r	<select name="../images/input_list_top.gif"	id="platformList" style="z-index: 999">\r		<%_.each(platformList,function(p){%>\r			<option value="<%=p.platformId%>"><%=p.platformName%></option>\r		<%});%>\r	</select>\r</div>\r<% if(role != \'SubDeveloper\'){%>\r<div class="r user_dropselect ">\r	<a href="../document/<%=currentLocale%>/index.html#Overview" target="_blank"><h4><font class="document">文档中心</font></h4></a>\r</div>\r<div class="r user_dropselect">\r	<a href="#accountCenter"><h4><font><%=GameCommon.accountAndAuthority%></font></h4></a>\r</div>\r<%}%>'}),define("views/public/TopBannerView",["backbone","models/product/Product","utils/urlUtil","text!templates/public/top.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i){var s=e.View.extend({el:"#topBanner",initialize:function(){this.datas=null,this.render()},events:{"change #productList":"productListChange","change #platformList":"platformListChange"},render:function(){var e=this;return this.datas?this.handleData(this.datas):t.fetchProductAndPlatforms({success:function(t){e.handleData(t)}}),this},handleData:function(e){this.datas=e,this.setSelector(e),this.setSelectorStyles()},setSelector:function(e){var t={productList:e,platformList:this.getPlatformsByProductId(Params.productID),role:DeveloperBean.userRole,Public:i.Public,GameCommon:i.GameCommon,currentLocale:currentLocale},n=_.template(r,t);this.$el.find(".toptitle").html(n)},setSelectorStyles:function(){this.$el.find("#productList option[value='"+Params.productID+"']").attr("selected",!0),this.$el.find("#platformList option[value='"+Params.platformID+"']").attr("selected",!0),this.$el.find("#productList").sSelect(),this.$el.find("#platformList").sSelect()},getProductById:function(e){return _.find(this.datas,function(t){return t.productid==e})},getPlatformsByProductId:function(e){var t=this.getProductById(e),n=[];if(t&&t.platformList.length){var r="";_.each(t.platformList,function(e){e==1?r="Android":e==2?r="IOS":e==4&&(r="Win7"),n.push({platformId:e,platformName:r})});if(n.length>1){var i=_.pluck(n,"platformName").join("+");n.push({platformId:"",platformName:i})}}return n},productListChange:function(e){this.removePartner();var t=$(e.currentTarget).val(),r=this.getProductById(t);Params.productRegistTime=(new Date(r.registerTime)).toFormat("YYYY-MM-DD"),Params.productID=t,Params.platformID="",this.render(),n.changeHashByParams()},platformListChange:function(e){this.removePartner(),Params.platformID=$(e.currentTarget).val(),n.changeHashByParams()},logout:function(){var e="/servlet/UserLoginServlet",t={servertype:1,timcc:Math.random()};$.get(e,t,function(){window.location.href="/index/login.jsp"})},removePartner:function(){PartnerModel={},Params.partnerID=""}});return s}),define("models/product/ProductModel",["backbone"],function(e){var t=e.Model.extend({idAttribute:"productId",urlRoot:"/v1/gamecenter/product"});return t}),define("text!templates/product/createProduct.html",[],function(){return'<div class="addApp mauto">\n	<div class="max_title">\n		<div class="add_step l add_step1">\n			<span class="l Conduct" id="step01"><small></small></span>\n			<p class="l">\n				<strong><%=Product.CreateProduct.creatingGame%></strong>\n				<font><%=Product.CreateProduct.cteateGameIntroduction%></font>\n			</p>\n		</div>\n		<i class="add_app_arrow l" id="arrow01"></i>\n		<div class="add_step l add_step2">\n			<span class="l" id="step02"><small></small></span>\n			<p class="l">\n				<strong><%=Product.CreateProduct.toIntegrate%></strong>\n				<font><%=Product.CreateProduct.toIntegrateIntroduction1%><br /><%=Product.CreateProduct.toIntegrateIntroduction2%></font>\n			</p>\n		</div>\n		<i class="add_app_arrow l" id="arrow02"></i>\n		<div class="add_step l add_step3">\n			<span class="l" id="step03"><small></small></span>\n			<p class="l">\n				<strong><%=Product.CreateProduct.toDebug%></strong>\n				<font><%=Product.CreateProduct.toDebugIntroduction1%><br /><%=Product.CreateProduct.toDebugIntroduction2%></font>\n			</p>\n		</div>\n	</div>\n\n	<div id="stepPanels">\n		<dl id="stepPanel01" class="Edit_box after add_step_con step_con1">\n			<dt class="l">\n				<input type="text" id="productNameInput" class="txtinput" value="<%=Product.CreateProduct.writeGameName%>">\n				<!-- <div class="selectDIV maxSelectDIV">\n					<h4>游戏类型</h4>\n					<ol>\n						<li val="-1">游戏类型</li>\n						<li val="1">休闲游戏</li>\n		    	  		<li val="2">智力游戏</li>\n		    	  		<li val="3">角色扮演</li>\n		    	  		<li val="4">体育游戏</li>\n		    	  		<li val="5">桌面游戏</li>\n		    	  		<li val="6">动作游戏</li>\n		    	  		<li val="7">策略游戏</li>\n		    	  		<li val="8">模拟类</li>\n		    	  		<li val="9">探险游戏</li>\n		    	  		<li val="10">扑克牌</li>\n		    	  		<li val="11">股子游戏</li>\n		    	  		<li val="12">教育游戏</li>\n		    	  		<li val="13">家庭游戏</li>\n		    	  		<li val="14">音乐游戏</li>\n		    	  		<li val="15">赛车游戏</li>\n						<li val="16">小游戏</li>\n						<li val="17">文字游戏</li>\n					</ol>\n				</div> -->\n				<div class="add_step_con_select">\n					<select id="selectGameType">\n						<option value="-1"><%=Product.CreateProduct.gameType%></option>\n						<option value="18"><%=Product.CreateProduct.cardGame%></option>\n						<option value="1"><%=Product.CreateProduct.relaxationGame%></option>\n		    	  		<option value="2"><%=Product.CreateProduct.intelligenceGame%></option>\n		    	  		<option value="3"><%=Product.CreateProduct.rolePlayGame%></option>\n		    	  		<option value="4"><%=Product.CreateProduct.sportsGame%></option>\n		    	  		<option value="5"><%=Product.CreateProduct.desktopGame%></option>\n		    	  		<option value="6"><%=Product.CreateProduct.movementGame%></option>\n		    	  		<option value="7"><%=Product.CreateProduct.strategyGame%></option>\n		    	  		<option value="8"><%=Product.CreateProduct.simulationGame%></option>\n		    	  		<option value="9"><%=Product.CreateProduct.explorationGame%></option>\n		    	  		<option value="10"><%=Product.CreateProduct.pokerGame%></option>\n		    	  		<option value="11"><%=Product.CreateProduct.diceGame%></option>\n		    	  		<option value="12"><%=Product.CreateProduct.educationGame%></option>\n		    	  		<option value="13"><%=Product.CreateProduct.familyGame%></option>\n		    	  		<option value="14"><%=Product.CreateProduct.musicGame%></option>\n		    	  		<option value="15"><%=Product.CreateProduct.racingCarGame%></option>\n						<option value="16"><%=Product.CreateProduct.samllGame%></option>\n						<option value="17"><%=Product.CreateProduct.textGame%></option>\n						\n					</select>\n				</div>\n				<a id="createProductBtn" class="maxConfirm"><%=Product.CreateProduct.createGame%></a>\n			</dt>\n			<dd class="l">\n				<div class="tips">\n					<strong><%=Product.CreateProduct.tips%></strong>\n					<p><%=Product.CreateProduct.creatingTipsIntroduction1%></p>\n					<p><%=Product.CreateProduct.creatingTipsIntroduction2%></p>\n				</div>\n			</dd>\n		</dl>\n\n		<dl id="stepPanel02" class="Edit_box after add_step_con step_con2 hide">\n			<dt class="l">\n				<p>\n					<span data="productName"></span>\n					<font data="productType"></font>\n				</p>\n				<label data="appId" class="disabled"></label>\n				<!-- <input type="text" class="txtinput" value="请输入您的APP ID"> -->\n				<p class="dowbut">\n					<a class="txta" href="/download/Game_Analytics_SDK_Android_iOS_2.0.4.zip">-下载iOS和Android SDK</a>\n					<a class="txta" href="/download/Game_Analytics_SDK_Unity3d_2.0.4.zip">-下载Unity 3D专用SDK</a>\n					<a class="txta" href="/download/Game_Analytics_SDK_Cocos2dx_2.0.4.zip">-下载Cocos2D-x专用SDK</a>\n					<a class="txta" href="/download/Game_Analytics_SDK_Ane_2.0.4.zip">-下载Flash Air专用SDK</a>\n				</p>\n				<!-- <a class="maxCancel">下载Unity 3D专用SDK和开发指南</a> -->\n				<a class="maxConfirm" id="step2finishBtn"><%=GameCommon.finished%></a>\n			</dt>\n			<dd class="l">\n				<div class="tips">\n					<strong><%=Product.CreateProduct.tips%></strong>\n					<p><%=Product.CreateProduct.finishedTipsIntroduction1%></p>\n					<p><%=Product.CreateProduct.finishedTipsIntroduction2%></p>\n					<p><%=Product.CreateProduct.finishedTipsIntroduction3%></p>\n				</div>\n			</dd>\n		</dl>\n\n\n		<dl id="stepPanel03" class="Edit_box after add_step_con step_con3 hide">\n			<dt class="l">\n				<p>\n					<span data="productName"></span>\n					<font data="productType"></font>\n				</p>\n				<b>App ID：<label data="appId"></label></b>\n				<small>\n	<%=Product.CreateProduct.debugSDKGame%><br/>\n	<%=Product.CreateProduct.debugSDKGameIntroduction1%><br/><%=Product.CreateProduct.debugSDKGameIntroduction2%></small>\n				<ul class="Refresh">\n					<li><%=GameCommon.equipmentActive%><strong id="deviceInstallNum">--</strong></li>\n					<li class="bornone"><%=GameCommon.playerCount%><strong id="newPlayerNum">--</strong></li>\n					<li class="Refreshbut"><a id="refreshBtn"></a></li>\n				</ul>\n				<small><%=Product.CreateProduct.debugInReport%></small>\n				<a href="#productList" class="maxConfirm"><%=Product.CreateProduct.enter%><%=GameCommon.dataCenter%></a>\n			</dt>\n			<dd class="l">\n				<div class="tips">\n					<strong><%=Product.CreateProduct.noDataWhenDebug%></strong>\n					<p><%=Product.CreateProduct.noDataWhenDebugSolution1%></p>\n					<p><%=Product.CreateProduct.noDataWhenDebugSolution2%></p>\n					<p><%=Product.CreateProduct.noDataWhenDebugSolution3%></p>\n					<span><%=Product.CreateProduct.noDataWhenDebugSolution4%><br/><%=Product.CreateProduct.noDataWhenDebugSolution5%><br/><%=Product.CreateProduct.noDataWhenDebugSolution6%></span>\n				</div>\n			</dd>\n		</dl>\n	</div>\n</div>\n'}),define("views/product/CreateProductView",["backbone","models/player/NewPlayer","models/product/ProductModel","utils/ModelBox","text!templates/product/createProduct.html","i18n!nls/gameI18N","jquery.select"],function(e,t,n,r,i,s){var o=e.View.extend({el:"#talkinggameCreateProduct",events:{"focus #productNameInput":"clearInput","blur #productNameInput":"initializeInput","click #createProductBtn":"createProduct","click #step2finishBtn":"toIntegrate","click #stepPanel03 #refreshBtn":"refresh"},initialize:function(){this.$el.undelegate(),this.$el.html(_.template(i,s)),this.$el.find("#selectGameType").sSelect(),this.render()},render:function(){return this},clearInput:function(e){var t=$(e.currentTarget).val();t==s.Product.CreateProduct.writeGameName?$(e.currentTarget).val(""):t==""&&$(e.currentTarget).val(s.Product.CreateProduct.writeGameName)},initializeInput:function(e){var t=$(e.currentTarget).val();t==""&&$(e.currentTarget).val(s.Product.CreateProduct.writeGameName)},createProduct:function(){var e=this,t=this.$el.find("#productNameInput"),i=t.val(),o=this.$el.find("#selectGameType").val();if(!i||i==s.Product.CreateProduct.writeGameName){r.alert({message:s.Product.CreateProduct.writeGameName});return}if(i.length>50){r.alert({message:s.Product.CreateProduct.productNameMore50char}),t.val("").focus();return}if(o==-1){r.alert({message:s.Product.CreateProduct.pleaseSelectGameType});return}var u=new n({productName:i,developerId:DeveloperBean.developerID,productype:o});r.block({message:s.Product.CreateProduct.nowCreating}),u.save({},{success:function(t){if(!t.get("sequencenumber")){r.alert({message:s.Product.CreateProduct.createProductFail});return}e.model=t,e.$el.find('span[data="productName"]').html(t.get("productName")),e.$el.find('font[data="productType"]').html(t.get("productypeName")),e.$el.find('label[data="appId"]').html(t.get("sequencenumber")),e.finishStep(1),r.unblock(),$("#talkinggameProductList").removeAttr("state")}})},finishStep:function(e){this.$el.find("#step0"+e).removeClass("Conduct").addClass("Complete"),this.$el.find("#arrow0"+e).addClass("Complete"),this.$el.find("#step0"+(e+1)).addClass("Conduct"),this.$el.find("#stepPanels>dl").hide(),this.$el.find("#stepPanel0"+(e+1)).show()},toIntegrate:function(){this.finishStep(2)},refresh:function(){var e=this,n=(new Date).toFormat("YYMMDD"),r={productID:e.model.get("productId"),startTime:n,endTime:n,developerID:Params.developerID};t.fetchNewPlayerList({data:r,success:function(e){$("#stepPanel03 #newPlayerNum").html(_.sum(e))}}),t.fetchInstallList({data:r,success:function(e){$("#stepPanel03 #deviceInstallNum").html(_.sum(e))}})}});return o}),define("models/product/ProductType",[],function(){return[{id:"1",name:"休闲游戏"},{id:"2",name:"智力游戏"},{id:"3",name:"角色扮演"},{id:"4",name:"体育游戏"},{id:"5",name:"桌面游戏"},{id:"6",name:"动作游戏"},{id:"7",name:"策略游戏"},{id:"8",name:"模拟类"},{id:"9",name:"探险游戏"},{id:"10",name:"扑克牌"},{id:"11",name:"股子游戏"},{id:"12",name:"教育游戏"},{id:"13",name:"家庭游戏"},{id:"14",name:"音乐游戏"},{id:"15",name:"赛车游戏"},{id:"16",name:"小游戏"},{id:"17",name:"文字游戏"}]}),define("text!templates/product/edit.html",[],function(){return'<div class="Pop_line">\n    <div class="EditPop_top timetop">\n        <b class="l"><%=Product.ProductItem.editGame%></b>\n    </div>\n    <div class="Poptxt">\n        <ul class="EditPop">\n            <li>\n                <label>App ID：</label><font><%=sequencenumber%></font>\n            </li>\n            <li><label><%=Product.ProductItem.changeName%>：</label><input type="text" value="<%=productName%>" class="textinput" /></b>\n            </li>\n            <li>\n                <label><%=Product.ProductItem.gameType%>：</label>\n                <select id="productTypeSelect" style="left:290px">\n                    <% _.each(typeList,function(obj){\n                        var id = obj.id,selected=\'\';\n                        if(productype == id) selected=\'selected\';\n                    %>\n                        <option <%=selected%> value="<%=obj.id%>"><%=obj.name%></option>\n                    <%});%>\n                </select>\n            </li>\n            <li>\n                <label><%=Product.ProductItem.gamePlatform%>：</label>\n                <% for(var i=0;i<platformList.length;i++){\n                    var platform = platformList[i],platformName;\n                    if(platform == \'1\'){\n                        platformName = \'Android\';\n                    }else if(platform == \'2\'){\n                        platformName = \'IOS\';\n                    }else if(platform == \'4\'){\n                        platformName = \'win7\';\n                    }\n                %>\n                    <img src="images/<%=platformName%>.png">\n                <%}%>\n            </li>\n            <li>\n                <label><%=Product.ProductItem.gameStatus%>：</label><span>\n                <% if(platformList.length){%>\n                    <%=Product.ProductItem.nomal%>\n                <%}else{%>\n                     <%=Product.ProductItem.notFinished%>\n                <%}%>\n                </span>\n            </li>\n            <li>\n                <label><%=Product.ProductItem.createTime%>：</label><font><%=registerTimeStr%></font>\n            </li>\n        </ul>\n        <div class="opeDiv after product_opeDiv">\n            <% if(isDelDisplay){%>\n                <a class="l Cancel delete"><%=Product.ProductItem.deleteGame%></a>\n            <%}%>\n            <a class="timecolse r Confirm"><%=Product.ProductItem.saveAndClose%></a>\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\n        </div>\n    </div>\n</div>'}),define("text!templates/product/delete.html",[],function(){return'<div class="Pop_line">\n	<div class="timetop">\n    	<b class="l"><%=Product.ProductItem.editGame%></b>\n    </div>\n	<div class="Poptxt">\n    	<p class="Prompt"><%=Product.ProductItem.warningAboutDeleteGame%></p>\n        <div class="opeDiv after">\n            <a  class="timecolse r Confirm"><%=GameCommon.confirm%></a>\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\n        </div>\n    </div>\n</div>'}),define("text!templates/product/productItem.html",[],function(){return'<td class="border_r_none"><a class="toViewChart" title="<%=productName%>"><%=productName%></a><a class="edit"></a></td>\n<td class="border_l_none border_r_none">\n	<% for(var i=0;i<platformList.length;i++){\n			var platform = platformList[i],platformName;\n			if(platform == \'1\'){\n				platformName = \'Android\';\n			}else if(platform == \'2\'){\n				platformName = \'IOS\';\n			}else if(platform == \'4\'){\n				platformName = \'win7\';\n			}\n	%>\n		<a class="platform" data="<%=platform%>"><img src="images/<%=platformName%>.png"></a>\n	<%}%>\n	&nbsp;\n</td>\n<td class="border_l_none border_r_none"><b><%=showTotalInstall%></b><small><font><%=GameCommon.today%></font><%=showTodayInstall%></small></td>\n<td class="border_l_none border_r_none"><b><%=showTotalRegisterNum%></b><small><font><%=GameCommon.today%></font><%=showTodayRegisterNum%></small></td>\n<td class="border_l_none border_r_none"><b><%=showTotalStartupNum%></b><small><font><%=GameCommon.today%></font><%=showTodayStartupNum%></small></td>\n<td class="border_l_none border_r_none"><b><font><%=GameCommon.zhMonryUnit%></font><%=showTotalChargeSum%></b><small><font><%=GameCommon.today%></font><%=showTodayChargeSum%></small></td>\n<td class="border_l_none"><a class="toViewChart"><img src="images/state.png" width="34" height="34"></a></td>\n<!-- <td><a class="edit">编辑</a><a class="delete">删除</a></td> -->\n'}),function(){function f(e,t){e=String(e);while(e.length<t)e="0"+e;return e}function d(e,t){Date.prototype[e]===undefined&&(Date.prototype[e]=t)}var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i={su:0,sun:0,sunday:0,mo:1,mon:1,monday:1,tu:2,tue:2,tuesday:2,we:3,wed:3,wednesday:3,th:4,thu:4,thursday:4,fr:5,fri:5,friday:5,sa:6,sat:6,saturday:6},s=t.concat(e),o=["su","sun","sunday","mo","mon","monday","tu","tue","tuesday","we","wed","wednesday","th","thu","thursday","fr","fri","friday","sa","sat","saturday"],u={jan:0,january:0,feb:1,february:1,mar:2,march:2,apr:3,april:3,may:4,jun:5,june:5,jul:6,july:6,aug:7,august:7,sep:8,september:8,oct:9,october:9,nov:10,november:10,dec:11,december:11},a=[31,28,31,30,31,30,31,31,30,31,30,31],l=function(e){return e.match(/^(\d+)$/)?!0:!1},c=function(e,t,n,r){for(var i=r;i>=n;i--){var s=e.substring(t,t+i);if(s.length<n)return null;if(l(s))return s}return null},h=Date.parse,p=function(e,t){e+="",t+="";var n=0,r=0,i="",u="",a="",f,l,h=new Date,p=h.getYear(),d=h.getMonth()+1,v=1,m=0,g=0,y=0,b="";while(r<t.length){i=t.charAt(r),u="";while(t.charAt(r)===i&&r<t.length)u+=t.charAt(r++);if(u==="yyyy"||u==="yy"||u==="y"){u==="yyyy"&&(f=4,l=4),u==="yy"&&(f=2,l=2),u==="y"&&(f=2,l=4),p=c(e,n,f,l);if(p===null)return NaN;n+=p.length,p.length===2&&(p>70?p=1900+(p-0):p=2e3+(p-0))}else if(u==="MMM"||u==="NNN"){d=0;for(var w=0;w<s.length;w++){var E=s[w];if(e.substring(n,n+E.length).toLowerCase()===E.toLowerCase())if(u==="MMM"||u==="NNN"&&w>11){d=w+1,d>12&&(d-=12),n+=E.length;break}}if(d<1||d>12)return NaN}else if(u==="EE"||u==="E")for(var S=0;S<o.length;S++){var x=o[S];if(e.substring(n,n+x.length).toLowerCase()===x.toLowerCase()){n+=x.length;break}}else if(u==="MM"||u==="M"){d=c(e,n,u.length,2);if(d===null||d<1||d>12)return NaN;n+=d.length}else if(u==="dd"||u==="d"){v=c(e,n,u.length,2);if(v===null||v<1||v>31)return NaN;n+=v.length}else if(u==="hh"||u==="h"){m=c(e,n,u.length,2);if(m===null||m<1||m>12)return NaN;n+=m.length}else if(u==="HH"||u==="H"){m=c(e,n,u.length,2);if(m===null||m<0||m>23)return NaN;n+=m.length}else if(u==="KK"||u==="K"){m=c(e,n,u.length,2);if(m===null||m<0||m>11)return NaN;n+=m.length}else if(u==="kk"||u==="k"){m=c(e,n,u.length,2);if(m===null||m<1||m>24)return NaN;n+=m.length,m--}else if(u==="mm"||u==="m"){g=c(e,n,u.length,2);if(g===null||g<0||g>59)return NaN;n+=g.length}else if(u==="ss"||u==="s"){y=c(e,n,u.length,2);if(y===null||y<0||y>59)return NaN;n+=y.length}else if(u==="a"){if(e.substring(n,n+2).toLowerCase()==="am")b="AM";else{if(e.substring(n,n+2).toLowerCase()!=="pm")return NaN;b="PM"}n+=2}else{if(e.substring(n,n+u.length)!==u)return NaN;n+=u.length}}if(n!==e.length)return NaN;if(d===2)if(p%4===0&&p%100!==0||p%400===0){if(v>29)return NaN}else if(v>28)return NaN;if(d===4||d===6||d===9||d===11)if(v>30)return NaN;m<12&&b==="PM"?m=m-0+12:m>11&&b==="AM"&&(m-=12);var T=new Date(p,d-1,v,m,g,y);return T.getTime()};Date.parse=function(e,t){if(t)return p(e,t);var n=h(e),r=0,i;return isNaN(n)&&(i=/^(\d{4}|[+\-]\d{6})-(\d{2})-(\d{2})(?:[T ](\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?))?/.exec(e))&&(i[8]!=="Z"&&(r=+i[10]*60+ +i[11],i[9]==="+"&&(r=0-r)),i[7]=i[7]||"000",n=Date.UTC(+i[1],+i[2]-1,+i[3],+i[4],+i[5]+r,+i[6],+i[7].substr(0,3))),n},Date.today=function(){return(new Date).clearTime()},Date.UTCtoday=function(){return(new Date).clearUTCTime()},Date.tomorrow=function(){return Date.today().add({days:1})},Date.UTCtomorrow=function(){return Date.UTCtoday().add({days:1})},Date.yesterday=function(){return Date.today().add({days:-1})},Date.UTCyesterday=function(){return Date.UTCtoday().add({days:-1})},Date.validateDay=function(e,t,n){var r=new Date(t,n,e);return r.getFullYear()===t&&r.getMonth()===n&&r.getDate()===e},Date.validateYear=function(e){return e>=0&&e<=9999},Date.validateSecond=function(e){return e>=0&&e<60},Date.validateMonth=function(e){return e>=0&&e<12},Date.validateMinute=function(e){return e>=0&&e<60},Date.validateMillisecond=function(e){return e>=0&&e<1e3},Date.validateHour=function(e){return e>=0&&e<24},Date.compare=function(e,t){return e.valueOf()<t.valueOf()?-1:e.valueOf()>t.valueOf()?1:0},Date.equals=function(e,t){return e.valueOf()===t.valueOf()},Date.getDayNumberFromName=function(e){return i[e.toLowerCase()]},Date.getMonthNumberFromName=function(e){return u[e.toLowerCase()]},Date.isLeapYear=function(e){return(new Date(e,1,29)).getDate()===29},Date.getDaysInMonth=function(e,t){return t===1?Date.isLeapYear(e)?29:28:a[t]},d("getMonthAbbr",function(){return e[this.getMonth()]}),d("getMonthName",function(){return t[this.getMonth()]}),d("getUTCOffset",function(){var e=f(Math.abs(this.getTimezoneOffset()/.6),4);return this.getTimezoneOffset()>0&&(e="-"+e),e}),d("toCLFString",function(){return f(this.getDate(),2)+"/"+this.getMonthAbbr()+"/"+this.getFullYear()+":"+f(this.getHours(),2)+":"+f(this.getMinutes(),2)+":"+f(this.getSeconds(),2)+" "+this.getUTCOffset()}),d("toYMD",function(e){return e=typeof e=="undefined"?"-":e,this.getFullYear()+e+f(this.getMonth()+1,2)+e+f(this.getDate(),2)}),d("toDBString",function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1,2)+"-"+f(this.getUTCDate(),2)+" "+f(this.getUTCHours(),2)+":"+f(this.getUTCMinutes(),2)+":"+f(this.getUTCSeconds(),2)}),d("clearTime",function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this}),d("clearUTCTime",function(){return this.setUTCHours(0),this.setUTCMinutes(0),this.setUTCSeconds(0),this.setUTCMilliseconds(0),this}),d("add",function(e){return e.milliseconds!==undefined&&this.setMilliseconds(this.getMilliseconds()+e.milliseconds),e.seconds!==undefined&&this.setSeconds(this.getSeconds()+e.seconds),e.minutes!==undefined&&this.setMinutes(this.getMinutes()+e.minutes),e.hours!==undefined&&this.setHours(this.getHours()+e.hours),e.days!==undefined&&this.setDate(this.getDate()+e.days),e.weeks!==undefined&&this.setDate(this.getDate()+e.weeks*7),e.months!==undefined&&this.setMonth(this.getMonth()+e.months),e.years!==undefined&&this.setFullYear(this.getFullYear()+e.years),this}),d("addMilliseconds",function(e){return this.add({milliseconds:e})}),d("addSeconds",function(e){return this.add({seconds:e})}),d("addMinutes",function(e){return this.add({minutes:e})}),d("addHours",function(e){return this.add({hours:e})}),d("addDays",function(e){return this.add({days:e})}),d("addWeeks",function(e){return this.add({days:e*7})}),d("addMonths",function(e){return this.add({months:e})}),d("addYears",function(e){return this.add({years:e})}),d("setTimeToNow",function(){var e=new Date;this.setMilliseconds(e.getMilliseconds()),this.setSeconds(e.getSeconds()),this.setMinutes(e.getMinutes()),this.setHours(e.getHours())}),d("clone",function(){return new Date(this.valueOf())}),d("between",function(e,t){return this.valueOf()>=e.valueOf()&&this.valueOf()<=t.valueOf()}),d("compareTo",function(e){return Date.compare(this,e)}),d("equals",function(e){return Date.equals(this,e)}),d("isAfter",function(e){return e=e?e:new Date,this.compareTo(e)>0}),d("isBefore",function(e){return e=e?e:new Date,this.compareTo(e)<0}),d("getDaysBetween",function(e){return(e.clone().valueOf()-this.valueOf())/864e5|0}),d("getHoursBetween",function(e){return(e.clone().valueOf()-this.valueOf())/36e5|0}),d("getMinutesBetween",function(e){return(e.clone().valueOf()-this.valueOf())/6e4|0}),d("getSecondsBetween",function(e){return(e.clone().valueOf()-this.valueOf())/1e3|0}),d("getMillisecondsBetween",function(e){return e.clone().valueOf()-this.valueOf()|0}),d("getOrdinalNumber",function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1}),d("toFormat",function(e){return v(e,m(this))}),d("toUTCFormat",function(e){return v(e,g(this))});var v=function(e,t){var n=[e],r,i,s,o=function(e,t){var r=0,i=n.length,s,o,u,a=[];for(;r<i;r++)if(typeof n[r]=="string"){u=n[r].split(e);for(s=0,o=u.length-1;s<o;s++)a.push(u[s]),a.push([t]);a.push(u[o])}else a.push(n[r]);n=a};for(r in t)o(r,t[r]);s="";for(r=0,i=n.length;r<i;r++)s+=typeof n[r]=="string"?n[r]:n[r][0];return n.join("")},m=function(i){var s=i.getHours()%12?i.getHours()%12:12;return{YYYY:i.getFullYear(),YY:String(i.getFullYear()).slice(-2),MMMM:t[i.getMonth()],MMM:e[i.getMonth()],MM:f(i.getMonth()+1,2),MI:f(i.getMinutes(),2),M:i.getMonth()+1,DDDD:r[i.getDay()],DDD:n[i.getDay()],DD:f(i.getDate(),2),D:i.getDate(),HH24:f(i.getHours(),2),HH:f(s,2),H:s,SS:f(i.getSeconds(),2),PP:i.getHours()>=12?"PM":"AM",P:i.getHours()>=12?"pm":"am",LL:f(i.getMilliseconds(),3)}},g=function(i){var s=i.getUTCHours()%12?i.getUTCHours()%12:12;return{YYYY:i.getUTCFullYear(),YY:String(i.getUTCFullYear()).slice(-2),MMMM:t[i.getUTCMonth()],MMM:e[i.getUTCMonth()],MM:f(i.getUTCMonth()+1,2),MI:f(i.getUTCMinutes(),2),M:i.getUTCMonth()+1,DDDD:r[i.getUTCDay()],DDD:n[i.getUTCDay()],DD:f(i.getUTCDate(),2),D:i.getUTCDate(),HH24:f(i.getUTCHours(),2),HH:f(s,2),H:s,SS:f(i.getUTCSeconds(),2),PP:i.getUTCHours()>=12?"PM":"AM",P:i.getUTCHours()>=12?"pm":"am",LL:f(i.getUTCMilliseconds(),3)}}}(),define("utils/date-utils",function(){}),define("views/product/ProductItemView",["backbone","models/product/ProductType","utils/ModelBox","utils/urlUtil","utils/RegexUtil","text!templates/product/edit.html","text!templates/product/delete.html","text!templates/product/productItem.html","i18n!nls/gameI18N","jquery.select","utils/date-utils"],function(e,t,n,r,i,s,o,u,a){var f=e.View.extend({tagName:"tr",events:{"click .toViewChart":"toViewChart","click .delete":"deleteProduct","click .edit":"showProduct","click a.platform":"toViewChartFromPlatform"},initialize:function(){this.model.bind("change",this.render,this),this.model.bind("destroy",this.remove,this)},render:function(){var e=this.model.toJSON();return e.Product=a.Product,e.GameCommon=a.GameCommon,e.showTotalInstall=i.formatDigit(e.totalInstallNum),e.showTodayInstall=i.formatDigit(e.todayInstallNum),e.showTotalRegisterNum=i.formatDigit(e.totalRegisterNum),e.showTodayRegisterNum=i.formatDigit(e.todayRegisterNum),e.showTotalStartupNum=i.formatDigit(e.totalStartupNum),e.showTodayStartupNum=i.formatDigit(e.todayStartupNum),e.showTotalChargeSum=i.formatDigit(e.totalChargeSum),e.showTodayChargeSum=i.formatDigit(e.todayChargeSum),this.$el.html(_.template(u,e)),this},toViewChart:function(){$("#topBanner .toptitle").html(""),Params.productID=this.model.get("productId"),Params.productRegistTime=this.model.get("registerTimeStr"),Params.platformID="",Params.startTime=this.setStartTime(this.model.get("registerTimeStr")),Params.endTime=this.setEndTime(),this.redirect()},toViewChartFromPlatform:function(e){var t=$(e.currentTarget),n=t.attr("data");$("#topBanner .toptitle").html(""),Params.productID=this.model.get("productId"),Params.productRegistTime=parseInt(this.model.get("registerTimeStr")),Params.platformID=n,Params.startTime=this.setStartTime(this.model.get("registerTimeStr")),Params.endTime=this.setEndTime(),this.redirect()},redirect:function(){var e=$('#menu-banner a[url-data != ""]:first').attr("url-data"),t="#page/"+e+"/";e&&r.changeHashByParams(t,Params)},setStartTime:function(e){var t=(new Date).add({days:-7}).toFormat("YYYY-MM-DD");Date.compare(e,t)==1&&(t=e);var n=parseInt(t.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"));return n},setEndTime:function(){var e=(new Date).toFormat("YYYY-MM-DD"),t=parseInt(e.replace(/\d{2}(\d{2})-(\d{2})-(\d{2})/,"$1$2$3"));return t},deleteProduct:function(){var e=this;n.confirm({message:o,buttons:[{".Confirm":function(){e.model.destroy(),n.unblock()},".Cancel":function(){n.unblock()}}]})},showProduct:function(){var e=this,r=e.model.toJSON();r.typeList=t,r.GameCommon=a.GameCommon,r.Product=a.Product,r.isDelDisplay=DeveloperBean.userRole=="SubDeveloper"&&_.indexOf(DeveloperBean.permisstionList,"ManageGame")==-1?!1:!0;var i=_.template(s,r);n.confirm({message:i,buttons:[{".Confirm":function(){var t=$(this).parentsUntil(".EditPop").find('input[type="text"]').val(),r=$(this).parentsUntil(".EditPop").find("select").val();if(!t){alert("请填写产品名称");return}if(t.length>50){alert("产品名称最多50个字符");return}e.model.set({productName:t,productype:r}),e.model.save(),n.unblock()},".Cancel":function(){n.unblock()},".delete":function(){confirm(a.Product.ProductItem.deleteProductConfirm)&&e.model.destroy()}}],onBlock:function(){$("#productTypeSelect").sSelect()}}),$("#productTypeSelect").sSelect()}});return f}),define("collections/ProductList",["backbone","models/product/ProductModel"],function(e,t){var n=e.Collection.extend({model:t,url:"/v1/gamecenter/productList"});return n}),define("text!templates/product/productTable.html",[],function(){return'<div class="product_title">\r\n	<table id="producttitle-table" border="0" cellspacing="0" cellpadding="0" class="table_product_title" width="100%">\r\n		<tbody>\r\n			<tr>\r\n				<td width="16%" style="text-align:right"><strong><%=GameCommon.total%></strong></td>\r\n				<td width="10%">&nbsp;</td>\r\n				<td width="16%">\r\n					<b id="totalInstallNum">--</b>\r\n					<small>\r\n						<font><%=GameCommon.today%></font>\r\n						<span id="todayInstallNum">--</span>\r\n					</small>\r\n				</td>\r\n				<td width="16%">\r\n					<b id="totalRegisterNum">--</b>\r\n					<small>\r\n						<font><%=GameCommon.today%></font>\r\n						<span id="todayRegisterNum">--</span>\r\n					</small>\r\n				</td>\r\n				<td width="16%">\r\n					<b id="totalStartupNum">--</b>\r\n					<small>\r\n						<font><%=GameCommon.today%></font>\r\n						<span id="todayStartupNum">--</span>\r\n					</small>\r\n				</td>\r\n				<td width="16%">\r\n					<b id="totalChargeSum">--</b>\r\n					<small>\r\n						<font><%=GameCommon.today%></font>\r\n						<span id="todayChargeSum">--</span>\r\n					</small>\r\n				</td>\r\n				<td width="10%" style="overflow:visible">\r\n					<a id="productCenterIndicator" class="Cancel relative minCancel" style="z-index:9;width:13px; margin:0 auto;\'">\r\n						<font class="indicator">?</font>\r\n					</a>\r\n				</td>\r\n			</tr>\r\n		</tbody>\r\n	</table>\r\n</div>\r\n<div class="table_style_product" >\r\n	<table id="productlist-table" border="0" cellspacing="0" cellpadding="0" width="100%">\r\n		<thead>\r\n			<tr>\r\n				<th width="16%" class="border_r_none"><%= Product.ProductList.appName%></th>\r\n				<th width="10%" class="border_l_none border_r_none"></th>\r\n				<th width="16%" class="border_l_none border_r_none"><%= Product.ProductList.equipmentinstallation%></th>\r\n				<th width="16%" class="border_l_none border_r_none"><%=GameCommon.player%></th>\r\n				<th width="16%" class="border_l_none border_r_none"><%= Product.ProductList.gameTimes%></th>\r\n				<th width="16%" class="border_l_none border_r_none"><%= GameCommon.income%></th>\r\n				<th width="10%" class="border_l_none"><%= Product.ProductList.report%></th>\r\n				<!-- <th width="10%">操作</th> -->\r\n			</tr>\r\n		</thead>\r\n		<tbody>\r\n			<tr class="login_tr">\r\n				<td colspan="8" class="borno">\r\n					<div class="login">\r\n						<img src="images/loading.gif" height="25px"></img> <br>\r\n					<%= GameCommon.loadingData%>\r\n					</div>\r\n				</td>\r\n			</tr>\r\n		</tbody>\r\n	</table>\r\n</div>'}),define("views/product/ProductListView",["backbone","views/product/ProductItemView","collections/ProductList","utils/RegexUtil","text!templates/product/productTable.html","text!templates/public/indicator.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"#product-table",events:{"click #productCenterIndicator":"toggleIndicator"},initialize:function(){this.$el.html(_.template(i,o)),this.$productList=$("#productlist-table > tbody"),this.ProductList=new n,this.ProductList.bind("reset",this.addAll,this),this.ProductList.fetch(),this.render()},render:function(){return this},addAll:function(){this.renderTotalTable(this.ProductList.toJSON()),this.$productList.html(""),this.ProductList.each(this.addOne,this)},addOne:function(e){var n=new t({model:e,collection:this.ProductList});this.$productList.append(n.render().el)},toggleIndicator:function(){var e=$("#productCenterIndicator").children("div"),t=!!e.length;if(t)e.toggle();else{var n=o.Indicator.productCenterIndicator,r=_.template(s,{list:n,title:o.Indicator.DataIndicatorExplain.explain});$("#productCenterIndicator").append(r)}},renderTotalTable:function(e){var t=_.sum(_.pluck(e,"totalInstallNum")),n=_.sum(_.pluck(e,"todayInstallNum")),i=_.sum(_.pluck(e,"totalChargeSum")),s=_.sum(_.pluck(e,"todayChargeSum")),u=_.sum(_.pluck(e,"totalRegisterNum")),a=_.sum(_.pluck(e,"todayRegisterNum")),f=_.sum(_.pluck(e,"totalStartupNum")),l=_.sum(_.pluck(e,"todayStartupNum"));$("#totalInstallNum").html(r.formatDigit(t)),$("#todayInstallNum").html(r.formatDigit(n)),$("#totalChargeSum").html("<font>"+o.GameCommon.zhMonryUnit+"</font>"+r.formatDigit(i)),$("#todayChargeSum").html(r.formatDigit(s)),$("#totalRegisterNum").html(r.formatDigit(u)),$("#todayRegisterNum").html(r.formatDigit(a)),$("#totalStartupNum").html(r.formatDigit(f)),$("#todayStartupNum").html(r.formatDigit(l))}});return u}),define("models/developer/Developer",["models/BaseModel"],function(e){var t=[{name:"fetchDeveloperById",url:"/v1/gamecenter/developer",type:"get"},{name:"updateDeveloper",url:"/v1/gamecenter/developer"},{name:"updatePwdOfDeveloper",url:"/v1/gamecenter/devPwd",type:"get"},{name:"sendRecommendEmail",url:"/v1/gamecenter/sendRecommendEmail",type:"get"},{name:"checkEmail",url:"/v1/permission/checkEmail",type:"get"},{name:"createAccount",url:"/v1/permission/createAccount"},{name:"updateAccount",url:"/v1/permission/updateAccount"},{name:"fetchAccountList",url:"/v1/permission/fetchAccountList",type:"get"},{name:"fetchAccountByDeveloperId",url:"/v1/permission/getAccount",type:"get"},{name:"deleteAccount",url:"/v1/permission/deleteAccount",type:"get"}];return e.init(t)}),define("text!templates/permission/list.html",[],function(){return'<div class="product mauto">\n	<!-- <div class="titlemax">\n			<a href="javascript:void(0)" class="return">返回数据中心</a>\n            <div class="mauto product_butDIV">\n            	<a data="amount" class="product_but l butL hover">我的信息</a>\n            	<a data="quality" class="product_but l">权限和账户</a>\n            	<a data="income" class="product_but l butR">站内信</a>\n            </div>\n	</div> -->\n	<div class="textbox">\n		<div class="after table_product_top">\n			<a href="#createAccount" class="maxConfirmbut l"><font class="add"><%=Permission.AccountList.addNewAccount%></font></a>\n		</div>\n		<div class="sub-account_box">  \n			<table border="0" cellspacing="0" cellpadding="0" class="table_style_channel" width="100%">\n				<thead>\n					<tr>\n						<th width="30%" class="left"><%=GameCommon.account%></th>\n						<th width="20%"><%=Permission.AccountList.role%></th>\n						<th width="30%"><%=Permission.AccountList.createDate%></th>\n						<th width="20%"><%=GameCommon.operate%></th>\n					</tr>\n				</thead>\n				<tbody id="accountList">\n					<tr class="login_tr">\n						<td colspan="4">\n							<div class="login">\n								<img src="images/loading.gif" height="25px"></img> <br>\n							<%=GameCommon.loadingData%>\n							</div>\n						</td>\n					</tr>\n				</tbody>\n			</table>\n			<!-- <div class="page">\n				<div id="grid_length" class="buttonDiv l">\n					<b class="l">每页显示</b>\n					<div class="selectlist margins" id="dropdown_grid_page" style="height: 17px; float: left;">\n						<div tabindex="0" id="grid_page__jQSelect0" class="relative" style="z-index: auto;">\n							<select title="pages" class="d" id="grid_page" name="grid_length" size="1" style="display: none;">\n								<option value="10">10</option>\n								<option value="25">25</option>\n								<option value="50">50</option>\n								<option value="100">100</option>\n							</select>\n							<div class="dropselect">\n								<div class="selectIcon">\n									<font id="grid_page_icon" class="selectt"></font>\n									<font id="grid_page_icont" class="selectb"></font>\n								</div>\n								<h4 title="10">10</h4>\n							</div>\n							<ul id="dropselistbox" style="width: 64px; display: none;"></ul>\n						</div>\n					</div>\n					<b class="l">条记录</b>\n				</div>\n				<div class="dataTables_paginate paging_full_numbers" id="grid_paginate">\n					<span class="first paginate_button paginate_button_disabled" id="grid_first">第一页</span>\n					<span class="previous paginate_button paginate_button_disabled" id="grid_previous"> 上一页 </span>\n					<span>\n						<span class="paginate_active">1</span>\n						<span class="paginate_button">2</span>\n						<span class="paginate_button">3</span>\n						<span class="paginate_button">4</span>\n						<span class="paginate_button">5</span>\n					</span>\n					<span class="next paginate_button" id="grid_next"> 下一页 </span>\n					<span class="last paginate_button" id="grid_last"> 最后一页 </span>\n				</div>\n			</div> -->\n		</div>\n	</div>\n</div>'}),define("text!templates/permission/item.html",[],function(){return'<%\n	_.each(list,function(o){\n%>		\n		<tr>\n			<td class="left"><%=o.email%></td>\n			<td>\n				<%= o.userrole == \'DevGroupManager\' ?Permission.AccountList.creator : o.userrole == \'DevManager\' ?Permission.AccountList.admin : Permission.AccountList.user%>\n			</td>\n			<td><%= o.registerTimeStr%></td>\n			<td>\n				<% if(o.userrole == \'DevGroupManager\'){%>\n				-- --\n				<%}else{%>\n					<a class="edit" data="<%= o.developerid%>"><%=Permission.AccountList.edit%></a><a class="delete" data="<%= o.developerid%>"><%=GameCommon.delete%></a>\n				<%}%>\n			</td>\n		</tr>\n<%\n	});\n%>'}),define("views/permission/AccountListView",["backbone","models/developer/Developer","utils/ModelBox","text!templates/permission/list.html","text!templates/permission/item.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s){var o=e.View.extend({el:"#talkinggameAccountCenter",events:{"click .add":"addAccount","click .edit":"toEdit","click .delete":"deleteFn"},initialize:function(){this.$el.undelegate(),this.$el.html(_.template(r,s)),this.$table=this.$el.find("#accountList"),this.render()},render:function(){return this.fetchAccountList(),this},addAccount:function(){},fetchAccountList:function(){var e=this;t.fetchAccountList({data:"developerId="+Params.developerID,success:function(t){t&&t.length?e.$table.html(_.template(i,{list:t,Permission:s.Permission,GameCommon:s.GameCommon})):e.$table.html('<td class="noData">'+s.GameCommon.noData+"</td>")}})},deleteFn:function(e){var n=$(e.currentTarget),r=n.attr("data");confirm(s.GameCommon.confirmDelete)&&t.deleteAccount({data:{oId:Params.developerID,tId:r},success:function(e){e&&n.parent().parent("tr").remove()}})},toEdit:function(e){var t=$(e.currentTarget),n=t.attr("data");location.hash="#updateAccount/"+n}});return o}),define("text!templates/permission/edit.html",[],function(){return'<div class="product mauto">\n	<div class="textbox">\n        <div class="after table_product_top Competence_top" id="accountTitle">\n           <%=update?i18n.Permission.CreateAccount.editAccount:i18n.Permission.CreateAccount.addAccount%>\n        </div>\n		<div class="Editor Competence">\n        	<div class="Editor_li">\n            	<div class="Editor_li_con" style="display:<%=update? \'none\' : \'block\'%>">\n                	<b><%=i18n.Permission.CreateAccount.loginInfo%></b>\n                    <div class="Editor_input l">\n                    	<input type="text" id="email" placeholder="<%=update? \'\' : i18n.Permission.CreateAccount.emailAddress%>"/>\n                    	<input type="<%=update? \'hidden\' : \'password\'%>" id="password" placeholder="<%=i18n.Permission.CreateAccount.password4to16%>"/>\n                        <label id="tip"></label>\n                    </div>\n                </div>\n            	<div class="Editor_li_con">\n                	<b><%=i18n.GameCommon.accountType%></b>\n                    <div class="Editor_li_con_txt" id="userGroup">	                \n                    	<p>\n                    		<input type="radio" value="DevManager" class="radio" name="userType"/><label><%=i18n.Permission.AccountList.admin%><small>（<%=i18n.Permission.CreateAccount.adminExplain%>）</small></label>\n                    	</p>\n                    	<p>\n                    		<input type="radio" value="SubDeveloper" class="radio" name="userType" checked/><label><%=i18n.Permission.AccountList.user%></label>\n                    	</p>\n                    </div>\n                </div>\n            </div>\n            <div id="operatePanel">\n            	<div class="Editor_li after">\n                	<div class="Editor_li_con">\n                    	<b class="l"><%=i18n.Permission.CreateAccount.appAuthorization%></b>\n                    	<div class="appaut l">\n                         	 <dl>\n                            	<dt><%=i18n.Permission.CreateAccount.allGames%></dt>\n                                <dd>\n                                	<div id="leftAppList"></div>\n                                </dd>\n                            </dl>\n                            <span>\n                            	<a id="addProductBtn">&nbsp;&nbsp;&nbsp;</a>\n                                <a id="rmProductBtn">&nbsp;&nbsp;&nbsp;</a>\n                            </span>\n                            <dl>\n                            	<dt><%=i18n.Permission.CreateAccount.authorizedGame%></dt>\n                                <dd>\n                                	<div id="rightAppList">\n                                	</div>\n                                </dd>\n                            </dl>\n                        </div>\n                    </div>\n                </div>\n                <div id="permisstion">\n                	<div class="Editor_li" id="manageDiv">\n                    	<div class="Editor_li_con">\n                        	<b><%=i18n.Permission.CreateAccount.administrationAuthority%></b>\n                        	<span>\n                        		<input type="checkbox" id="manageAllBtn" value="-1"><label><%=i18n.GameCommon.checkAll%></label>\n                        	</span>\n                        </div>\n                		<ul class="Accoun after" id="manageFnDiv">\n                            <li>\n                                <input type="checkbox" class="checkbox" value="TaskAndLevelsManage">\n                                <label><%=i18n.GameCommon.taskAndMissionManage%></label>\n                            </li>\n                            <li>\n                                <input type="checkbox" class="checkbox" value="ConsumeManagement">\n                                <label><%=i18n.GameCommon.consumePointManage%></label>\n                            </li>\n                            <li>\n                                <input type="checkbox" class="checkbox" value="ManagePartner">\n                                <label><%=i18n.GameCommon.channelManage%></label>\n                            </li>\n                            <li>\n                                <input type="checkbox" class="checkbox" value="ManageCustomEvent">\n                                <label><%=i18n.CustomEvent.EventManagement.eventManage%></label>\n                            </li> \n                            <li>\n                                <input type="checkbox" class="checkbox" value="ManageGame">\n                                <label><%=i18n.Permission.CreateAccount.gameManage%><small>（<%=i18n.Permission.CreateAccount.addOrDelGame%>）</small></label>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="Editor_li" id="pageDiv">\n                    	<div class="Editor_li_con">\n                        	<b><%=i18n.Permission.CreateAccount.pagesFunction%></b>\n                        	<span>\n                        		<input type="checkbox" id="pageAllBtn" value="-1"><label><%=i18n.GameCommon.checkAll%></label>\n                        	</span>\n                        </div>\n                        <div class="Editor_left_con after" id="pageFnDiv">\n                    		<ul class="webFunction">\n                                <li>\n                                	<input type="checkbox" class="checkbox" value="Summarize">\n                                	<label><%=i18n.GameCommon.gameOverview%></label>\n                                </li>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                	<input type="checkbox" value="-1" class="checkbox" name="firstClass">\n                                	<label><%=i18n.GameCommon.gamePlayer%></label>\n                                </li>\n                                <ol>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="NewPlayer">\n                                        <label><%=i18n.GameCommon.newIncreased%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="ActivePlayer">\n                                        <label><%=i18n.GameCommon.activing%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="KeepPlayer">\n                                        <label><%=i18n.GameCommon.retain%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="NewPlayConversion">\n                                        <label><%=i18n.GameCommon.transform%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="Loss">\n                                        <label><%=i18n.GameCommon.loss%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="Behavior">\n                                        <label><%=i18n.GameCommon.gameHabit%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="Device">\n                                        <label><%=i18n.GameCommon.equipments%></label>\n                                    </li>\n                                </ol>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                    <input type="checkbox" class="checkbox" value="Online">\n                                    <label><%=i18n.GameCommon.onlineAnalysis%></label>\n                                </li>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\n                                    <label><%=i18n.GameCommon.levelAnalytics%></label>\n                                </li>\n                                <ol>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="LevelInfo">\n                                        <label><%=i18n.GameCommon.levelDetail%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="LevelAnalysis">\n                                        <label><%=i18n.GameCommon.levelDistribute%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="PlayerProgress">\n                                        <label><%=i18n.GameCommon.newPlayerProgress%></label>\n                                    </li>\n                                </ol>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\n                                    <label><%=i18n.GameCommon.taskAnalysis%></label>\n                                </li>\n                                <ol>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="TasksAndLevels">\n                                        <label><%=i18n.GameCommon.taskAndMission%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="TaskAndLevelsManage">\n                                        <label><%=i18n.GameCommon.taskAndMissionManage%></label>\n                                    </li>\n                                </ol>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\n                                    <label><%=i18n.GameCommon.incomeAnalysis%></label>\n                                </li>\n                                <ol>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="IncomeData">\n                                        <label><%=i18n.GameCommon.incomeData%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="PayPermeate">\n                                        <label><%=i18n.GameCommon.payPermeate%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="NewPlayerValue">\n                                        <label><%=i18n.Revenue.NewPlayerValue.newPlayerValue%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="PayHabit">\n                                        <label><%=i18n.GameCommon.payHabit%></label>\n                                    </li>\n                                </ol>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\n                                    <label><%=i18n.GameCommon.dummyConsume%></label>\n                                </li>\n                                <ol>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="VirtualCoin">\n                                        <label><%=i18n.GameCommon.dummyCoin%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="ConsumeAnalysis">\n                                        <label><%=i18n.GameCommon.consumeHobby%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="ConsumePoint">\n                                        <label><%=i18n.GameCommon.consumePoint%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="ConsumeManagement">\n                                        <label><%=i18n.GameCommon.consumePointManage%></label>\n                                    </li>\n                                </ol>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                    <input type="checkbox" class="checkbox" value="WhaleUser">\n                                    <label><%=i18n.GameCommon.whaleUser%></label>\n                                </li>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\n                                    <label><%=i18n.GameCommon.expandChannel%></label>\n                                </li>\n                                <ol>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="PartnerData">\n                                        <label><%=i18n.GameCommon.channelData%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="ManagePartner">\n                                        <label><%=i18n.GameCommon.channelManage%></label>\n                                    </li>\n                                </ol>\n                            </ul>\n                            <ul class="webFunction">\n                                <li>\n                                    <input type="checkbox" value="-1" class="checkbox" name="firstClass">\n                                    <label><%=i18n.GameCommon.custionEvent%></label>\n                                </li>\n                                <ol>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="CustomEventData">\n                                        <label><%=i18n.GameCommon.eventData%></label>\n                                    </li>\n                                    <li>\n                                        <input type="checkbox" class="checkbox" value="ManageCustomEvent">\n                                        <label><%=i18n.CustomEvent.EventManagement.eventManage%></label>\n                                    </li>\n                                </ol>\n                            </ul>\n                    	</div>\n                    </div>\n                </div>\n            </div>\n        	<div class="Editor_li after Editor_li_left_con">\n                <a class="Confirm l" id="commitBtn"><%=i18n.Permission.CreateAccount.commit%></a><a class="Cancel l" id="cancelBtn"><%=i18n.GameCommon.cancel%></a>\n            </div>\n        </div>\n	</div>\n</div>\n'}),function(e){var t=0;e.fn.placeholder=function(){return this.bind({focus:function(){e(this).parent().addClass("placeholder-focus")},blur:function(){e(this).parent().removeClass("placeholder-focus")},"keyup input":function(){e(this).parent().toggleClass("placeholder-changed",this.value!=="")}}).each(function(){var n=e(this);this.id||(this.id="ph_"+t++),e('<span class="placeholderWrap"><label for="'+this.id+'">'+n.attr("placeholder")+"</label></span>").insertAfter(n).append(n),n.attr("placeholder","").keyup()})},e(function(){e("input[placeholder]").placeholder()})}(jQuery),define("placeholder",function(){}),define("views/permission/CreateAccountView",["backbone","utils/RegexUtil","utils/ModelBox","models/product/Product","models/developer/Developer","text!templates/permission/edit.html","i18n!nls/gameI18N","placeholder"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"#talkinggameCreateAccount",events:{"blur #email":"checkEmail","blur #password":"checkPassword","click #commitBtn":"commit","click #cancelBtn":"cancel","click #addProductBtn":"addProduct","click #rmProductBtn":"removeProduct","click #userGroup input":"switchUserType","click #leftAppList>a":"chooseLeftApp","dblclick #leftAppList>a":"dbClickLeftApp","click #rightAppList>a":"chooseRightApp","dblclick #rightAppList>a":"dbClickRightApp","click #pageAllBtn":"toggleSelectAllPages","click #manageAllBtn":"toggleSelectAllManagePages",'click input[name="firstClass"]':"toggleSelectFirstClassPage","click ul.webFunction>ol>li>input":"selectSubPage","click #pageDiv input":"selectPageInput","click #manageDiv input":"selectManageInput"},initialize:function(){this.$el.undelegate(),this.developerId=this.options.developerId,this.$el.html(_.template(s,{update:!!this.developerId,i18n:o})),this.developerId&&this.fetchAccountByDeveloperId(this.developerId),this.requestProductList(this.handleData),$("input[placeholder]").placeholder(),this.$manageFnDiv=this.$el.find("#manageFnDiv"),this.$pageFnDiv=this.$el.find("#pageFnDiv"),this.$pageAllBtn=this.$el.find("#pageAllBtn"),this.$manageAllBtn=this.$el.find("#manageAllBtn"),this.$manageInputs=this.$el.find("#manageDiv input"),this.$pageInputs=this.$el.find("#pageDiv input"),this.$leftAppList=this.$el.find("#leftAppList"),this.$rightAppList=this.$el.find("#rightAppList"),this.$email=this.$el.find("#email"),this.$password=this.$el.find("#password"),this.$tip=this.$el.find("#tip"),this.render()},render:function(){return this},cancel:function(){location.hash="#accountCenter"},fetchAccountByDeveloperId:function(e){var t=this;i.fetchAccountByDeveloperId({data:"developerId="+e,success:function(e){t.renderPage(e)}})},requestProductList:function(e){var t=this;r.fetchProductAndPlatforms({success:function(n){n&&n.length&&(t.productList=n,e.apply(t,arguments))}})},renderPage:function(e){var t=this;if(e){this.$el.find("#accountTitle").append("-- "+e.email),this.$el.find('#userGroup input[value="'+e.userrole+'"]').trigger("click");var n=e.privilegeBean&&e.privilegeBean.productPlatformMapping;n&&this.requestProductList(function(e){var r=_.filter(e,function(e){return _.indexOf(_.keys(n),e.productid+"")!=-1});t.$rightAppList.html(t.getProductListStr(r))});var r=e.privilegeBean&&e.privilegeBean.privileList;r&&r.length&&_.each(r,function(e){var n=t.$el.find('#permisstion input[value="'+e+'"]');n.attr("checked","checked"),t.checkSelect(n),t.selectPageInput(),t.selectManageInput()})}},getProductListStr:function(e){return _.template('<%_.each(list,function(o){%>						<a data="<%=o.productid%>"><%=o.productName%></a>					<%});%>',{list:e})},handleData:function(e){var t=this.getProductListStr(e);this.$leftAppList.html(t)},checkEmail:function(e){var n=$(e.currentTarget),r=n.val();if(!r){this.tip(o.GameCommon.emailNotEmpty);return}if(!t.isEmail(r)){this.tip(o.GameCommon.emailTypeWrong);return}var s=this;i.checkEmail({data:"email="+r,success:function(e){e?(s.tip(o.GameCommon.emailAreadyUse),s.isEmailExist=!0):s.isEmailExist=!1}})},checkPassword:function(e){var t=$(e.currentTarget),n=t.val();if(!n){this.tip(o.GameCommon.PWDNotEmpty);return}if(n.length>16||n.length<4){this.tip(o.GameCommon.PWDLongth4To16);return}this.password=n},tip:function(e){this.$tip.hide().show().html(e).fadeOut(3e3)},commit:function(){var e=this._getRequestData(),t,r;if(this.developerId)t="updateAccount",r=o.GameCommon.update;else{t="createAccount",r=o.PartnerExtention.PartnerItem.create;if(!e.email){n.alert({message:o.GameCommon.emailHasWrong});return}if(this.isEmailExist){n.alert({message:o.GameCommon.emailAreadyUse});return}if(!e.password){n.alert({message:o.GameCommon.PWDHasWrong});return}}if(e.privilegeBean&&e.privilegeBean.privileList.length===0){n.alert({message:o.GameCommon.selectAuthPage});return}n.block({message:o.GameCommon.inProcessOf+r}),i[t]({data:e,success:function(e){e?n.alert({message:r+o.GameCommon.success}):n.alert({message:r+o.GameCommon.fail})}})},_getRequestData:function(){var e=$("#permisstion input:checked"),t=_.without(_.map(e,function(e){return $(e).val()}),"-1"),n={developerid:this.developerId||Params.developerID,email:this.$email.val(),password:this.$password.val(),userrole:this.$el.find("#userGroup input:checked").val(),privilegeBean:null};return n.userrole=="SubDeveloper"&&(n.privilegeBean={productPlatformMapping:this._getChoosedProduct(),privileList:t}),n},_getChoosedProduct:function(){var e=this.$rightAppList.find("a");if(e.length===0)return{};var t=_.map(e,function(e){return $(e).attr("data")}),n=_.filter(this.productList,function(e){return _.indexOf(t,e.productid+"")!=-1});return n=_.object(_.pluck(n,"productid"),_.pluck(n,"platformList")),n},addProduct:function(){var e=this.$leftAppList.find("a.choosed");if(e.length){e.removeClass("choosed");var t,n=this.$rightAppList.find("a");if(n.length===0)t=e;else{var r=_.map(n,function(e){return $(e).attr("data")});t=_.filter(e,function(e){return _.indexOf(r,$(e).attr("data"))==-1})}var i=_.map(t,function(e){return"<a data="+$(e).attr("data")+">"+$(e).text()+"</a>"});this.$rightAppList.append(i.join("\n"))}},removeProduct:function(){var e=this.$rightAppList.find("a.choosed");e.remove()},switchUserType:function(e){var t=$(e.currentTarget),n=t.val();n=="DevManager"?this.$el.find("#operatePanel").hide():this.$el.find("#operatePanel").show()},chooseLeftApp:function(e){var t=$(e.currentTarget);t.toggleClass("choosed")},dbClickLeftApp:function(e){var t=$(e.currentTarget),n=t.attr("data"),r=t.text();t.removeClass("choosed"),this.$rightAppList.find('a[data="'+n+'"]').length==0&&this.$rightAppList.append('<a data="'+n+'">'+r+"</a>")},chooseRightApp:function(e){var t=$(e.currentTarget);t.toggleClass("choosed")},dbClickRightApp:function(e){var t=$(e.currentTarget);t.remove()},toggleSelectAllPages:function(e){var t=$(e.currentTarget),n=t.attr("checked")=="checked"?!0:!1;n?this.$pageInputs.attr("checked","checked"):this.$pageInputs.removeAttr("checked")},toggleSelectAllManagePages:function(e){var t=$(e.currentTarget),n=t.attr("checked")=="checked"?!0:!1;n?this.$manageInputs.attr("checked","checked"):this.$manageInputs.removeAttr("checked")},toggleSelectFirstClassPage:function(e){var t=$(e.currentTarget),n=t.attr("checked")=="checked"?!0:!1,r=t.parent().parent("ul"),i=r.find("ol>li>input");n?i.attr("checked","checked"):i.removeAttr("checked")},selectSubPage:function(e){var t=$(e.currentTarget);this.checkSelect(t)},checkSelect:function(e){var t=e.parent().parent("ol"),n=e.parent().parent("ol").siblings("li").find('input[name="firstClass"]');this._findUnChecked(t).length?this._setUnChecked(n):this._setChecked(n)},selectPageInput:function(){this._findUnChecked(this.$pageFnDiv).length?this._setUnChecked(this.$pageAllBtn):this._setChecked(this.$pageAllBtn)},selectManageInput:function(){this._findUnChecked(this.$manageFnDiv).length?this._setUnChecked(this.$manageAllBtn):this._setChecked(this.$manageAllBtn)},_findUnChecked:function(e){return e.find("input:not(:checked)")},_setChecked:function(e){return e.attr("checked","checked")},_setUnChecked:function(e){return e.removeAttr("checked")}});return u}),define("text!templates/developer/info.html",[],function(){return'<div class="product mauto">\r	<div class="infoDIV mauto">\r		<dl class="infodl after add_step_con">\r			<dt class="l">\r				<label><%=Developer.DeveloperInfo.signUPEmail%></label>\r				<input type="text" class="disabled" disabled="disabled" value="{{email}}"/>\r				<label><%=GameCommon.password%></label>\r				<a id="updatePassword" class="maxbut"><%=Developer.DeveloperInfo.changePWD%></a>\r			</dt>\r			<dd class="l">\r            	<label><%=Developer.DeveloperInfo.name%></label>\r				<input type="text" id="name" class="txtinput" value="{{realName}}" />\r                <label><%=Developer.DeveloperInfo.company%></label>\r				<input type="text" id="company" class="txtinput" value="{{companyname}}" />\r                <label>Q Q</label>\r				<input type="text" id="qq" class="txtinput" value="{{qq}}" />\r                <label><%=Developer.DeveloperInfo.phone%></label>\r				<input type="text" id="tel" class="txtinput" value="{{telephone}}" />\r				\r			</dd>\r		</dl>\r		<div class="max_title">\r			<a id="confirmUpdate" class="maxConfirm r"><%=GameCommon.finished%></a>\r		</div>\r	</div>\r</div>'}),define("text!templates/developer/updatepwd.html",[],function(){return'<div class="Pop_line">\n	<div class="timetop">\n    	<b class="l"><%=Developer.DeveloperInfo.changePWD%></b>\n    </div>\n	<div class="Poptxt">\n		<ul class="EditPop">\n			<li><label><%=Developer.DeveloperInfo.oldPWD%>：</label><input id="oldPassword" type="password" class="textinput"></li>\n			<li><label><%=Developer.DeveloperInfo.newPWD%>：</label><input id="newPassword" type="password" class="textinput"></li>\n			<li><label><%=Developer.DeveloperInfo.confirmNewPWD%>：</label><input id="confirmPassword" type="password" class="textinput"></li>\n		</ul>\n        <div class="opeDiv after">\n            <a  class="timecolse r Confirm"><%=GameCommon.confirm%></a>\n            <a class="r Cancel"><%=GameCommon.cancel%></a>\n        </div>\n    </div>\n</div>'}),define("views/developer/DeveloperInfo",["backbone","mustache","models/developer/Developer","utils/ModelBox","text!templates/developer/info.html","text!templates/developer/updatepwd.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o){var u=e.View.extend({el:"#talkinggameDeveloperInfo",events:{"click #updatePassword":"showUpdataPwd","click #confirmUpdate":"update"},initialize:function(){this.getDeveloper(),this.render()},render:function(){return this},getDeveloper:function(){var e=this;n.fetchDeveloperById({success:function(n){e.$el.html(t.render(_.template(i,o),n))}})},showUpdataPwd:function(){var e=this;r.confirm({message:_.template(s,o),buttons:[{".Confirm":e.updatePassword}]})},updatePassword:function(){var e=$("#oldPassword").val(),t=$("#newPassword").val(),i=$("#confirmPassword").val();if(!e){alert(o.Developer.DeveloperInfo.enterOldPWD);return}if(!t){alert(o.Developer.DeveloperInfo.enterNewPWD);return}if(t.length<6||t.length>32){alert(o.Developer.DeveloperInfo.enter6To32Character);return}if(!i){alert(o.Developer.DeveloperInfo.enterPWDAgain);return}if(t!=i){alert(o.Developer.DeveloperInfo.TwoTimesPWDIsDifferent);return}n.updatePwdOfDeveloper({data:{oldPassword:e,newPassword:t},success:function(e){e?r.alert({message:o.Developer.DeveloperInfo.changeSuccess}):r.alert({message:o.Developer.DeveloperInfo.changeFail})}})},update:function(){var e=$("#name").val(),t=$("#company").val(),i=$("#qq").val(),s=$("#tel").val();if(!e||!t||!i||!s){r.alert({message:o.Developer.DeveloperInfo.InfoMustBeNoEmpty});return}if(e.length>30){r.alert({message:o.Developer.DeveloperInfo.NameMost30Character});return}if(!/^[1-9]\d{4,14}$/.test(i)){r.alert({message:o.Developer.DeveloperInfo.QQTypeIsWrong});return}if(!/(^((0[1,2]{1}\d{1}-?\d{8})|(0[3-9]{1}\d{2}-?\d{7,8}))$)|(^0?(13[0-9]|15[0-35-9]|18[0236789]|14[57])[0-9]{8}$)/.test(s)){r.alert({message:o.Developer.DeveloperInfo.PhoneTypeIsWrong});return}n.updateDeveloper({data:{name:e,realName:e,companyname:t,qq:i,telephone:s},success:function(e){e?r.alert({message:o.Developer.DeveloperInfo.updateSuccess}):r.alert({message:o.Developer.DeveloperInfo.updateFail})}})}});return u}),define("text!templates/public/basic-top.html",[],function(){return'<div class="l">\n	<strong><a href="#productList"><%=GameCommon.dataCenter%></a> </strong>\n    <span></span>\n	<strong><%= name%></strong>\n</div>\n<% if(role != \'SubDeveloper\'){%>\n<div class="r user_dropselect">\n	<a href="../document/<%=currentLocale%>/index.html#Overview" target="_blank"><h4><font class="document">文档中心</font></h4></a>\n</div>\n<div class="r user_dropselect">\n	<a href="#accountCenter"><h4><font><%=GameCommon.accountAndAuthority%></font></h4></a>\n</div>\n<%}%>'}),define("router",["backbone","utils/AppUtil","utils/urlUtil","utils/ModelBox","models/product/Product","models/MenuConfig","views/public/TopBannerView","views/product/CreateProductView","views/product/ProductListView","views/permission/AccountListView","views/permission/CreateAccountView","views/developer/DeveloperInfo","text!templates/public/basic-top.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d={"":"toProductList","page/:module/:params":"queryPage",productList:"productList",developerInfo:"showDeveloperInfo"};(DeveloperBean.userRole=="DevGroupManager"||DeveloperBean.userRole=="DevManager")&&_.extend(d,{createProduct:"createProduct",accountCenter:"toAccountCenter",createAccount:"createOrUpdateAccount","updateAccount/:id":"createOrUpdateAccount"}),DeveloperBean.userRole=="SubDeveloper"&&DeveloperBean.permisstionList.indexOf("ManageGame")!=-1&&(d.createProduct="createProduct"),d[":whatever"]="toProductList";var v=e.Router.extend({routes:d,toProductList:function(){location.hash="#productList"},queryPage:function(e,r){$("#talkinggameData>div").hide(),$("#talkinggamePages").show(),$("#topBanner").removeClass("mainMinwidth"),$("#bottom").removeClass("mainMinwidth"),this.changeStyle(e),$("#topBanner .toptitle").html()==""&&new o;var i=n.parse2Obj(r);_.extend(Params,i),PartnerModel.partnerID=Params.partnerID,t.renderPage(e),$("html").scrollTop(0)},createProduct:function(){var e=this;i.checkProductCountLimit({data:"developerId="+Params.developerID,success:function(t){t?($("#talkinggameData>div").hide(),$("#talkinggameCreateProduct").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),e.setBanner(p.GameCommon.createProduct),new u):(location.hash="#productList",r.alert({message:p.Product.CreateProduct.yourAcount10ContactService}))}})},productList:function(){$("#talkinggameData>div").hide(),$("#talkinggameProductList").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(p.GameCommon.allProducts),this._createOrShow($("#talkinggameProductList"),function(){new a})},toAccountCenter:function(){$("#talkinggameData>div").hide(),$("#talkinggameAccountCenter").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(p.GameCommon.accountAndAuthority),this._createOrShow($("#talkinggameAccountCenter"),function(){new f})},createOrUpdateAccount:function(e){$("#talkinggameData>div").hide(),$("#talkinggameCreateAccount").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(e?p.Permission.CreateAccount.editAccount:p.Permission.CreateAccount.addAccount),new l({developerId:e})},showDeveloperInfo:function(){$("#talkinggameData>div").hide(),$("#talkinggameDeveloperInfo").show(),$("#topBanner").addClass("mainMinwidth"),$("#bottom").addClass("mainMinwidth"),this.setBanner(p.GameCommon.personalInfomation),this._createOrShow($("#talkinggameDeveloperInfo"),function(){new c})},_createOrShow:function(e,t){var n=e.attr("state");n!="complete"&&(t(),e.attr("state","complete"))},setBanner:function(e){$("#topBanner .toptitle").html(_.template(h,{name:e,role:DeveloperBean.userRole,GameCommon:p.GameCommon,currentLocale:currentLocale}))},changeStyle:function(e){var t=$("#menu-banner"),n=t.find("a[url-data="+e+"]");if(!n.html()){var r=e.split("_")[1],i=e.split("-")[0];n=t.find("a[url-data="+i+"-"+r+"]")}var s=n.parent(),o=s.parent("ol");t.find("a").removeClass("hover"),t.find("li").removeClass("hover"),n.addClass("hover"),s.addClass("hover");if(o.length){o.parent().addClass("hover");var u=o.css("display");u!="block"&&o.slideDown()}}});return v}),define("views/public/MenuView",["backbone","utils/urlUtil","models/MenuConfig"],function(e,t,n){var r=e.View.extend({el:"#menu-banner",events:{"mouseover ul>li,ol>li":"addClass","mouseout ul>li,ol>li":"removeClass","click a":"navigate"},initialize:function(){$("#menu-banner").html(n.renderMenus())},changeMenu:function(e){var t=$(e.currentTarget),n=t.has("ol");n.length==0&&$("#menuItems ol").slideUp()},addClass:function(e){var t=$(e.currentTarget);t.addClass("hover")},removeClass:function(e){var t=location.hash.replace(/#page\/([^\/]*).*/,"$1"),n=$("#menu-banner"),r=$(e.currentTarget);r.removeClass("hover");var i=n.find("a[url-data="+t+"]");if(!i.html()){var s=t.split("_")[1],o=t.split("-")[0];i=n.find("a[url-data="+o+"-"+s+"]")}var u=i.parent(),a=u.parent("ol");i.addClass("hover"),u.addClass("hover"),a.length&&a.parent().addClass("hover")},navigate:function(e){var n=$(e.currentTarget);n.parent("li").addClass("hover");if(n.hasClass("more_icon")){var r=n.next("ol"),i=r.css("display");i!="block"?r.slideDown():r.slideUp()}var s=n.attr("url-data");if(s){this.filterParams(s);var o=t.parse2Str(Params);location.hash="#page/"+s+"/"+o}},filterParams:function(e){e!="whale-whaleUserDetail"&&delete Params.userId}});return r}),define("text!templates/public/inviteTip.html",[],function(){return'<div class="invite_friend">\n    <span><a id="inviteButton"></a></span><font><a id="inviteText"><%=Public.Invite.inviteFriendGetMoreTimeForFree%></a><small style="font-size:12px; margin:0 10px 0 50px">更多推荐方式：</small></font>\n		            <!-- JiaThis Button BEGIN -->\n<div class="jiathis_style_24x24" style="padding-top:6px;  float:left">\n<a class="jiathis_button_tsina"></a>\n<a class="jiathis_button_weixin"></a>\n</div>\n<script type="text/javascript" >\nvar jiathis_config={\nurl:"<%=urlInfo%>",\nsummary:"",\ntitle:"<%=Public.Invite.inviteContext%>",\npic:"http://www.talkinggame.com/index/images/fn_logo.png",\nhideMore:false\n}\n</script>\n<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" \ncharset="utf-8"></script>\n<!-- JiaThis Button END -->\n    <strong><a id="removeInviteBtn"></a></strong>\n</div>'}),define("text!templates/public/invite.html",[],function(){return'<!--邀请朋友弹出框开始-->\n<div class="invite-box">\n    <div class="box_title">\n        <span><a id="closeInviteBox"><img src="../index/img_invite/icon_close_box.png"/></a></span>\n        <h3><img src="../index/img_invite/icon_box_title.png" align="absmiddle" /><font style="font-size:20px;"><%=Public.Invite.inviteMoreFriendUseTGA%></font></h3>\n    </div>\n    <div class="content_box">\n        <div class="content_box_left">\n            <div class="write_invite">\n                <span><%=Public.Invite.emailInvite%></span><input id="inviteEmail" onclick="javascript:if($(this).val()==\'<%=Public.Invite.enterInvitedEmail%>\'){$(this).val(\'\')}" name="" type="text" class="input_invite" value="<%=Public.Invite.enterInvitedEmail%>" />\n            	<a id="sendInviteBtn"><img src="../index/img_invite/button_send_invite.png" /> </a>\n            </div>\n            <h4/>\n            <!-- JiaThis Button BEGIN -->\n<div class="jiathis_style">\n<a class="jiathis_button_tsina">推荐给微博好友</a><br/><br/>\n<a class="jiathis_button_weixin">推荐到微信圈子</a>\n</div>\n<script type="text/javascript" >\nvar jiathis_config={\nurl:"<%=urlInfo%>",\nsummary:"",\ntitle:"<%=Public.Invite.inviteContext%>",\npic:"http://www.talkinggame.com/index/images/fn_logo.png",\nhideMore:false\n}\n</script>\n<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" \ncharset="utf-8"></script>\n            </h4>\n            <div class="your_url"> \n                <span><%=Public.Invite.yourExclusiveLink%></span>\n                <div class="copy_url" style="text-align:center"><%=urlInfo%></div>\n            </div>\n        </div>\n        <div class="content_box_right">\n            <h4><%=Public.Invite.activityValidityPeriod%>：</h4>\n			<em><%=Public.Invite.endTo20130831%></em>\n            <h4><%=Public.Invite.activityContext%>：</h4>\n			<span><%=Public.Invite.activityContext1%></span>\n<!--             <h5><%=Public.Invite.activityContext2%>：</h5> -->\n<!--             <ul> -->\n<!-- 				<li><%=Public.Invite.activityContext3%></li> -->\n<!-- 				<li><%=Public.Invite.activityContext4%></li> -->\n<!--             </ul> -->\n        </div>\n    </div>\n</div>\n<!--邀请朋友弹出框结束-->\n\n'}),define("views/public/InviteView",["backbone","utils/ModelBox","models/developer/Developer","utils/RegexUtil","text!templates/public/inviteTip.html","text!templates/public/invite.html","text!templates/public/loading.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s,o,u){var a=e.View.extend({el:"#inviteTip",events:{"click #removeInviteBtn":"removeInvite","click #inviteButton":"showInviteBox","click #inviteText":"showInviteBox"},initialize:function(){var e=basePath+"invite?rid="+Params.developerID,t=_.template(i,{urlInfo:e,Public:u.Public});this.$el.html(t),this.render()},render:function(){return this},removeInvite:function(){this.$el.hide()},showInviteBox:function(){var e=basePath+"invite?rid="+Params.developerID,i=_.template(s,{urlInfo:e,Public:u.Public});t.confirm({message:i,buttons:[{"#sendInviteBtn":function(){var e=$("#inviteEmail").val();if(!r.isEmail(e)){alert(u.GameCommon.enterCorrectEmail);return}n.sendRecommendEmail({data:{developerid:Params.developerID,toaddress:e},success:function(e){t.alert({message:u.GameCommon.emailHasSend})}})},"#closeInviteBox":function(){t.unblock()}}]})}});return a}),define("text!templates/public/userAgreement.html",[],function(){return'<div class="Pop_line">\n    <div class="timetop">\n        <b class="l"><%=Public.Main.userAgreement%></b>\n    </div>\n    <div class="Poptxt">\n        <div class="userAg">\n        	<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm1%></p>\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm2%></p>\n			<p><strong>&#8226; </strong><%=Public.Main.serviceTerm3%></p>\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm4%></p>\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm5%></p>\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm6%></p>\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm7%></p>\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm8%></p>\n			<p><strong>&#8226;</strong> <%=Public.Main.serviceTerm9%></p>\n		</div>\n        <div class="opeDiv after">\n            <a class="timecolse r Confirm"><%=GameCommon.confirm%></a>\n        </div>\n    </div>\n</div>'}),window.require.config({paths:{underscore:"libs/lodash.compat",backbone:"libs/backbone",mustache:"libs/mustache",templates:"../templates",text:"libs/text",i18n:"libs/i18n",highcharts:"libs/highcharts.src","jquery.tabs":"libs/jquery.tabs","jquery.select":"libs/jquery.select-1.3.6","jquery.actual":"libs/jquery.actual",placeholder:"libs/jquery.placeholder",blockUI:"libs/jquery.blockUI",gauge:"libs/gauge.min",dataTable:"libs/jquery.dataTables","jquery.datepicker":"libs/datepicker-1.9.0.custom"},shim:{highcharts:{exports:"Highcharts"},underscore:{exports:"_"},backbone:{deps:["underscore"],exports:"Backbone"},gauge:{exports:"Gauge"}},urlArgs:"bud="+(new Date).getTime(),waitSeconds:30,locale:window.currentLocale||"en_us"}),require(["router","views/public/MenuView","views/public/InviteView","utils/ModelBox","text!templates/public/userAgreement.html","i18n!nls/gameI18N"],function(e,t,n,r,i,s){$("#logout").bind("click",function(){var e="/servlet/UserLoginServlet",t={servertype:1,timcc:Math.random()};$.get(e,t,function(){window.location.href="/index/login.jsp"})}),$("#userAgreementBtn").bind("click",function(){r.confirm({message:_.template(i,s),buttons:[{".Confirm":function(){r.unblock()}}]})}),$("#bottom .Language a").bind("click",function(e){var t=$(e.currentTarget),n=t.attr("data")||"en_us";n!=currentLocale&&$.ajax({url:"/v1/language/change?locale="+n,type:"get",success:function(e){window.location.reload()}})}),currentLocale=="zh_cn"&&new n,new t,new e,Backbone.history.start()}),define("app",function(){}),define("nls/zh_cn/gameCommon",{equipmentAcount:"设备|账户",newInstallAndPlayer:"新增激活和账户",rechargeableType:"充值方式",total:"总计",timeMinute:"时长^分",timeTimes:"次数^次",zhMonryUnit:"￥",personalInfomation:"个人信息",allProducts:"全部产品",createProduct:"创建产品",enterCorrectEmail:"请输入正确的邮箱！",emailHasSend:"邮件已发送！",number:"数",rate:"率",percentage:"百分比",expense:"消费",purchase:"购入",perPageDisplay:"每页显示",last:" 最后一页 ",next:" 下一页 ",pre:" 上一页 ",first:"第一页",seek:"搜索",loading:"正在加载中...",records:"条记录",sorryForNoData:"对不起，查询不到任何相关数据","cannotFindData	":"找不到相关数据",currentDisplay:"当前显示 ",totalNumber:"数据表中共为",barTotal:"条，共",update:"更新",other:"其他",hide:"隐藏",display:"显示",packUp:"收起",emailNotEmpty:"邮箱不能为空！",emailTypeWrong:"邮箱格式不正确！",emailAreadyUse:"邮箱已经被占用了！",PWDNotEmpty:"密码不能为空！",PWDLongth4To16:"密码长度为4～16位！",success:"成功！",fail:"失败！",inProcessOf:"正在",selectAuthPage:"请选择要授权的页面！",PWDHasWrong:"密码输入有误！",emailHasWrong:"邮箱输入有误！",point:"分",timeNum:"时长",timesNum:"次数",date:"日期",unknown:"未知",male:"男",female:"女",confirmDelete:"确定要删除吗？",expand:"推广",chart:"图表",grid:"表格",to:"到",all:"全部",today:"今日",alias:"别名",setAlias:"设置别名",designation:"名称",goodsName:"物品名称",finished:"完 成",dummyCoin:"虚拟币",consumePointManage:"消费点管理",channelManage:"渠道管理",channelData:"渠道数据",incomeData:"收入数据",gamePlayer:"游戏玩家",newIncreased:"新增",activing:"活跃",retain:"留存",transform:"转化",loss:"流失",gameHabit:"游戏习惯",equipments:"设备",onlineAnalysis:"在线分析",incomeAnalysis:"收入分析",taskAnalysis:"任务分析",taskAndMissionManage:"任务和关卡管理",taskAndMission:"任务和关卡",payHabit:"付费习惯",dummyConsume:"虚拟消费",consumeHobby:"消费喜好",whaleUser:"鲸鱼用户",expandChannel:"推广渠道",custionEvent:"自定义事件",eventData:"事件数据",gameOverview:"游戏概况",accountAndAuthority:"账户和权限",dataCenter:"数据中心",avgGamingTimeCount:"平均游戏时长与次数",dailyPayRate:"日付费率",payPermeate:"付费渗透",activePlayer:"活跃玩家",avg:"平均",payPlayer:"付费玩家",playerCount:"玩家数",equipmentActive:"设备激活",consumeDummyCoin:"消耗虚拟币",consumeCount:"损耗数量",consumePoint:"消费点",purchaseDummyCoin:"购入虚拟币",times:"次",login:"登录",time:"时间",dummyCoinTotalValue:"虚拟币总值",level:"级",dailyTrend:"按日趋势",payCount:"付费次数",paySum:"付费金额",recordDate:"登记日期",player:"玩家",newIncreasedPlayer:"新增玩家",operate:"操作",region:"地区",channel:"渠道",sex:"性别",age:"年龄",grade:"等级",loadingData:"正在加载统计数据…",noData:"未查询到数据",account:"帐户",of:"的",day:"日",_day:"天",hour:"小时",week:"周",month:"月","delete":"删除",tollgate:"关卡",confirm:"确定",cancel:"取消",password:"密码",detail:"详情",avgDailyPayRate:"日均付费率",avgDaily:"日均",income:"收入",checkAll:"全选",invertCheck:"反选",dailyActive:"日活跃",propsConsume:"道具消耗",accountName:"账户名",accountType:"帐户类型",clear:"清除",levelAnalytics:"等级分析",levelDetail:"等级详解",newPlayerProgress:"新玩家进度",levelDistribute:"等级分布",confirmTitle:"提示",reward:"赠予",vcStatus:"虚拟币产出和消耗"}),define("nls/zh_cn/concurrent",{todayAndYes:"今日 & 昨日",ConcurrentUser:{onlineUsers:"在线玩家",final5Minutes:"最后5分钟",recentlyPlayers:"最近玩家",dailyOnlineUsers:"每日在线用户"}}),define("nls/zh_cn/customEvent",{EventData:{eventOverview:"事件概况",eventDisplayName:"事件显示名",eventCounts:"事件数",eventUsers:"达成事件用户",initiateHappenCounts:"每启动发生次数",conversionFunnel:"转化漏斗",addFunnel:"增加转化漏斗",setting:"转化漏斗设置",tip:"以用户逐步执行的事件为依据，构造最多8个步骤的转化漏斗，平台将逐步过滤，计算出用户在整个过程中的转化比例。",name:"名称",criteria:"追踪依据",stepName:"步骤别名",tip1:"不能继续添加了！",tip2:"请再增加一个步骤！",tip3:"请填写完整信息！",tip4:"请填写不同的步骤别名！",tip5:"请选择不同的事件！",tip6:"创建漏斗失败！",tip7:"不能再删除啦！",tip8:"最多只能创建10个漏斗！"},EventDetail:{eventId:"事件ID",eventTendency:"事件趋势",everyActiveUserHappen:"每活跃用户发生",everyInitiateHappen:"每启动发生",parameters:"参数",messageCounts:"消息数",proportion:"比例"},EventManagement:{eventName:"事件名",eventManage:"事件管理",displayName:"显示名",hidingEvent:"隐藏事件",eliminate:"清除",stopUsing:"停用",eliminateEvent:"已停用事件",clearTip:"清除事件后，此事件目前为止的计数将被清除，无法恢复，确认清除吗？",tip:"提示",clearDataWrong:"程序出错啦！",dataCleared:"此事件数据已清零!",recoverUse:"恢复使用",recoverUsed:"已恢复使用",stopUsed:"已停用",clearSuccess:"清除成功",eventId:"事件",nameIsExsit:"名称已存在",stopUsingDate:"停用日期"}}),define("nls/zh_cn/developer",{DeveloperInfo:{InfoMustBeNoEmpty:"信息不能为空！",NameMost30Character:"姓名最多可输入30个字符！",QQTypeIsWrong:"QQ格式不正确！",PhoneTypeIsWrong:"手机或固话格式不正确！",changeSuccess:"修改成功",changeFail:"修改失败",updateSuccess:"更新成功",updateFail:"更新失败",TwoTimesPWDIsDifferent:"两次密码输入不一致",enter6To32Character:"请输入6~32位任意字符",enterOldPWD:"请输入旧密码",enterNewPWD:"请输入新密码",enterPWDAgain:"请再次输入密码",signUPEmail:"注册邮箱",changePWD:"修改密码",name:"姓名",company:"公司",phone:"电话",oldPWD:"旧密码",newPWD:"新密码",confirmNewPWD:"确认新密码"}}),define("nls/zh_cn/level",{LevelDetailed:{importantGrade:"关键等级",gradeDetail:"等级详情",averageUpgradeTime:"平均升级时长",gradeStagnateRate:"等级停滞率",upgradeTime:"升级时长",levelSettingTitle:"等级设置",levelSettingTip:"设置游戏中的一些关键等级，报表中将按照这个等级段呈现一些概况数据。关键等级通常是玩家达到时，能代表他们进入一个新的阶段的等级。",addStep:"增加阶段",saveAndClose:"保存并关闭",canel:"取消",levelUpTime:"升级时长",chooseLevel:"选择等级",stageName:"阶段名称",choose:"请选择"},LevelDistributed:{playerLevelDistribution:"玩家等级分布",gameTimesLevelDistribution:"游戏次数等级分布",lossPlayerLevel:"流失玩家停留等级",servenDaysNotLoginInPlayers:"7日未登录玩家",fourteenDaysNotLoginInPlayers:"14日未登录玩家",thirtyDaysNotLoginInPlayers:"30日未登录玩家",playTimes:"游戏次数",levelupTimeDistribution:"升级时长分布"},Schedule:{newPlayerLevel:"新玩家等级",firstDayLevel:"首日等级",firstWeekLevel:"首周等级",fourteenDayLevel:"14日等级",levelChangeOfNewPlayerServenDays:"新玩家7日内等级变迁"},Tips:{tip1:"请至少选择一个阶段。",tip2:"最多只能添加5个阶段",tip3:"请填写完整的步骤信息。",tip4:"不能选择相同的等级。",tip5:"阶段名称不能重复。",tip6:"<font style='line-height:24px;margin-top: 70px;display:block;'>您还没有设置关键等级点，</fon><a id='clickToSet' style='  color: #5BAC54; display: block;  font-size: 16px; margin: 0 auto; width: 100px;'>点击设置</a>"}}),define("nls/zh_cn/partnerExtention",{PartnerAccountItem:{confirmDeleteAccount:"确定要删除该账户吗？",enterBackground:"进入后台",enabled:"启用",forbidden:"禁用"},PartnerData:{installingActivation:"安装激活",quantityIndicator:"数量指标",qualityIndicator:"质量指标",incomeIndicator:"收入指标",channelName:"渠道名称",trackWay:"跟踪方式",registerConversionRate:"注册转化率",channelProportion:"渠道比重",avgDayActive:"平均日活跃(%)",oneDayPlayersProportion:"一日玩家比例",avgMorrowRetention:"平均次日留存率",firstWeekPayRatio:"首周付费比例",avgDailyPayPeopleCount:"日均付费人数"},PartnerItem:{noNeedMergeChannel:"没有可以要合并的渠道！",split:"拆分",merge:"合并",create:"创建",startUsing:"启用中"},PartnerManagement:{channelName:"渠道名称",selectNeedMergeChannel:"请选择要合并的渠道！",dailyPayPeopleCount:"日付费人数",trend:"趋势",downChannelZipTool:"下载渠道打包工具",subpackageChannel:"分包渠道",linkChannel:"链接渠道",introduction:"说明",introductionExplain:"为渠道制作单独的推广安装包，根据安装包中填写的channel字段的不同来跟踪特定渠道的数据。",integration:"集成",integrationIntroduction1:' 请在AndroidManifest.xml里添加meta-data段，用您定义的渠道名替换value中的"Your_channel_id"；',integrationIntroduction2:'meta-data android:name="TD_CHANNEL_ID"android:value="TalkingData"',integrationIntroduction3:"渠道名可自行定义，请使用20位以内的英文和数字；",integrationIntroduction4:"不同的渠道ID包请重新编译打包。",save:"保存",tool:"工具",toolExplain:"为了让制作大量渠道包的工作更加简单，我们提供以下打包工具来批量生成渠道包，可选择性下载使用。",channelList:"渠道列表",mergeChannel:"合并渠道",hideChannel:"隐藏渠道",channelQueryAccount:"渠道查询账户",loginName:"登录名",loginPWD:"登录密码",lastLoginTime:"最后登录时间",selectMergeChannel:"选择您要合并的渠道",newIncreasedPlayerRegister:"新增玩家（注册）",createChannelQueryAccount:"创建渠道查询帐户",channelId:"渠道ID"}}),define("nls/zh_cn/permission",{AccountList:{role:"角色",createDate:"创建日期",addNewAccount:"添加新账户",edit:"编辑",creator:"创建者",admin:"管理员",user:"用户"},CreateAccount:{addAccount:"添加账户",editAccount:"修改账户",loginInfo:"登录信息",emailAddress:"邮箱地址",password4to16:"密码(4~16位)",adminExplain:"拥有对全部应用的所有权限",appAuthorization:"应用授权",allGames:"全部游戏",authorizedGame:"授权的游戏",administrationAuthority:"管理权限",gameManage:"游戏管理",addOrDelGame:"添加/删除游戏",pagesFunction:"页面功能",commit:"提交"}}),define("nls/zh_cn/play",{TasksSetUp:{failReason:"失败原因",playerLevel:"玩家等级",taskType:"任务类型",taskTollgateDetail:"任务或关卡详情",subline:"支线",other:"其它",newHand:"新手"},Tasks:{newHandConversionRate:"新手引导转化率",filterType:"筛选类型",mainline:"主线",type:"类型",enterCount:"进入次数",avgAccomplishTime:"平均完成时间",failTime:"失败次数",successTime:"成功次数",failRate:"失败率",taskTollgateSet:"任务和关卡设置",lifeCycle:"生命周期",install:"安装",tip1:"请填写完整的步骤信息",tip2:"不能选择重复的任务",tip3:"步骤名称不能重复",tip4:"最多可添加10个步骤"},TaskManage:{missionID:"任务ID",missionAlias:"任务别名",missionType:"任务类型",missionOperate:"操作",missionTypeSetting:"设置任务类型",missionManage:"任务和关卡管理",clearTip:"谨慎操作！清除后此任务数据将从报表中消失！",tip:"提示",dataCleared:"此任务数据已清零!"},MissionFunnel:{missionFunnelSetting:"设置新手引导漏斗",chooseMission:"选择任务",stepAlias:"步骤别名",addStep:"增加阶段",canel:"取消",missionSelect:"--请选择--",saveAndClose:"保存并关闭",funelTip:"至少选择2个步骤",funelTip2:"您还没有设置任务转化步骤，",funelTip3:"点击设置",missionFunnelSettingTip:"选择新手引导阶段每一关键步骤的任务名称来设定新手引导转化漏斗。报表中将给出每一步间的转化率和新手引导总体转化率。"}}),define("nls/zh_cn/player",{ActivePlayer:{playedDays:"已玩天数"},Behavior:{avgPlayerDailyGaming:"平均每玩家每日游戏",avgPlayerWeeklyGaming:"平均每玩家每周游戏",avgPlayerMonthlyGaming:"平均每玩家每月游戏",minute:"分钟",timesTotal:"次，共",durationUnitMinute:"时长(单位:分)",everyDayGame:"每日游戏",everyWeekGame:"每周游戏",everyMonthGame:"每月游戏",gameGap:"游戏间隔",avgGamingTime:"平均游戏时长",avgGamingCount:"平均游戏次数",daily:"每日",weekly:"每周",monthly:"每月",gameFrequency:"游戏频次",monthGamingDays:"月游戏天数",weekGamingDays:"周游戏天数",weekGamingTimes:"周游戏次数",dayGamingTimes:"日游戏次数",gamingTime:"游戏时长",weekGamingTime:"周游戏时长",dayGamingTime:"单日游戏时长",singleGamingTime:"单次游戏时长",gamingTimeInterval:"游戏时段"},Churned:{payCount:"付费次数",paySum:"付费金额",dailyLoss:"每日流失",lossFunnel:"流失漏斗",lossCondition:"流失条件",servenDaysNotLoginIn:"连续7日不登陆",fourteenDaysNotLoginIn:"连续14日不登陆",thirtynDaysNotLoginIn:"连续30日不登陆",allPlayers:"全部玩家",dailyBackflow:"每日回流",lossUserAnalysis:"流失用户分析",analysisType:"分析方式",lossLevel:"流失前等级",userLifeCycle:"用户生命期"},Convertion:{payConversion:"付费转化",newIncreasedPayPlayer:"新增付费玩家",accumulativePayPlayer:"累计付费玩家",totalPayRate:"总体付费率",newPalyerPay:"新玩家付费",firstDayPayRate:"首日付费率",firstWeekPayRate:"首周付费率",firstMonthPayRate:"首月付费率",firstDayPay:"首日付费",firstWeekPay:"首周付费",firstMonthPay:"首月付费",playerFirstPayPeriod:"玩家首付周期",gamingDays:"游戏天数",accumulativeGamingTime:"累计游戏时长",playerFirstPayLevel:"玩家首付等级"},CustomRetention:{dateNotEmpty:"日期不能为空！",dateIsWrong:"日期选择有误！",userCount:"用户数",firstUseMonth:"首次使用月",nMonthReserveUser:"第N月后 保留用户%",firstUseWeek:"首次使用周",nWeekReserveUser:"第N周后 保留用户%",firstUseDay:"首次使用日",nDaysReserveUser:"第N天后 保留用户%",query:"查询",asRetainUser:"计为留存用户",atLeast:"至少",startApp:"启动应用",retainAction:"留存行为：在之后的使用中",during:"期间的",newIncreasedUser:"新增用户",activeUser:"活跃用户",customRetain:"自定义留存"},Device:{model:"机型",operateSystem:"操作系统",DPI:"分辨率",serviceProvider:"运营商",networkingModeDistribution:"联网方式分布",linkNetType:"联网方式"},LostFunnel:{line:"线",funnel:"漏斗",visittimes:"访问次数",_rateUser:"%用户",activePayUser:"活跃付费用户",lossCourse:"在之后的逐步流失过程。",updateData:"更新数据",analysisSomeDay:"分析某日",analysisSomeWeek:"分析某周",duringInspectAnalysis:"考察期间：分析",beforeWeek:"周前",one:"一",two:"二",three:"三",four:"四",five:"五",six:"六",seven:"七",during:"期间的",newIncreasedUser:"新增用户",activeUser:"活跃用户",dailyLoss:"每日流失",lossFunnel:"流失漏斗"},NewPlayer:{regionService:"区服",conversionRate:"转化率"},Retention:{newIncreasedDayLevel:"新增日等级",newIncreasedDayGameTimes:"新增日游戏次数",newIncreasedDayGamingTime:"新增日游戏时长",newIncreasedDayWhetherPay:"新增日是否付费",morrowRetain:"次日留存",dayRetain:"日留存",retainUserAnalysis:"留存用户分析",userGroup:"用户群",retainUser:"留存用户",retainRate:"留存率",customRetain:"自定义留存"}}),define("nls/zh_cn/product",{CreateProduct:{nowCreating:"正在创建...",createProductFail:"创建产品失败！",pleaseSelectGameType:"请选择游戏类型",productNameMore50char:"产品名称最多50个字符",pleaseWriteProductName:"请填写产品名称",yourAcount10ContactService:"您的账户只能创建10款产品，如需要更多，请联系TalkingGame客服",creatingGame:"建立游戏",cteateGameIntroduction:"创建需要分析的游戏",toIntegrate:"进行集成",toIntegrateIntroduction1:"下载SDK包和集成指南",toIntegrateIntroduction2:"使用获取的App ID进行集成",toDebug:"进行调试",toDebugIntroduction1:"检查调用正确性",toDebugIntroduction2:"成功向平台发送数据",writeGameName:"请填写游戏名称",relaxationGame:"休闲游戏",intelligenceGame:"智力游戏",rolePlayGame:"角色扮演",sportsGame:"体育游戏",desktopGame:"桌面游戏",movementGame:"动作游戏",strategyGame:"策略游戏",simulationGame:"模拟类",explorationGame:"探险游戏",pokerGame:"扑克牌",diceGame:"骰子游戏",educationGame:"教育游戏",familyGame:"家庭游戏",musicGame:"音乐游戏",racingCarGame:"赛车游戏",samllGame:"小游戏",textGame:"文字游戏",cardGame:"卡牌游戏",createGame:"创建游戏",tips:"贴士",creatingTipsIntroduction1:"认真选择游戏的类型，有利于后续查看数据报表时行业基准的准确性。",creatingTipsIntroduction2:"跨手机平台的游戏只需建立一次，我们同时支持查看单一平台和聚合全平台的数据。",downloadSDKAndDevGuide:"下载通用SDK和开发指南",finishedTipsIntroduction1:"妥善保管App ID，这是追踪游戏数据的唯一标识，避免多款游戏使用相同App ID。",finishedTipsIntroduction2:"同款游戏的多个平台可使用同个App ID。",finishedTipsIntroduction3:"下载需要的SDK：使用Unity 3D制作的游戏请使用专版；其他使用通用版。",debugSDKGame:"调试集成了SDK的游戏：",debugSDKGameIntroduction1:"尝试在终端中开启游戏，等待一会，观察设备安装是否已被成功计量。",debugSDKGameIntroduction2:"如调用了setUserID可验证玩家数是否已可成功记录。",debugInReport:"详尽调试可在数据报表中进行",noDataWhenDebug:"调试中无法在左侧查看到数据？",noDataWhenDebugSolution1:"确保终端可以连接网络。",noDataWhenDebugSolution2:"检查App ID是否输入正确，避免多打了空格等特殊字符",noDataWhenDebugSolution3:"Android系统需确保添加了INTERNET权限，并在每个页面中调用了onStart和onEnd方法。",noDataWhenDebugSolution4:"联络我们寻求帮助？",noDataWhenDebugSolution5:"客服QQ群：287369275",noDataWhenDebugSolution6:"Mail：support@TalkingGame.net",enter:"进入",gameType:"游戏类型"},ProductItem:{deleteProductConfirm:"确定要删除该产品吗？",warningAboutDeleteGame:"删除游戏将遗失游戏全部数据，不可恢复！",editGame:"编辑游戏",changeName:"变更名称",gameType:"游戏类型",gamePlatform:"游戏平台",gameStatus:"游戏状态",nomal:"正常",notFinished:"暂未完成调试",createTime:"创建时间",deleteGame:"删除游戏",saveAndClose:"保存并关闭",cancel:"取消"},ProductList:{equipmentinstallation:"设备激活",appName:"游戏名称",player:"玩家",gameTimes:"游戏次数",report:"报表"}}),define("nls/zh_cn/public",{DatePicker:{pleaseSelectDate:"请选择日期",dateChooser:"日期选择",yesterday:"昨日",nearly7Days:"近7日",nearly30Days:"近30日",custom:"自定"},Invite:{inviteMoreFriendUseTGA:"邀请更多朋友来使用TalkingData Game Analytics！",emailInvite:"邮件邀请",enterInvitedEmail:"键入受邀请者邮箱",inviteContext:"我正在使用超给力的跨平台游戏分析工具——TalkingGame！在线时长、等级分布、消费习惯……各种指标维度一应俱全！还有详尽的用户群细分、追踪功能！现在注册即可获得TalkingGame入门版永久免费使用特权，赶快点击链接注册吧！",yourExclusiveLink:"您的专属推荐链接",copyLink:"复制链接",activityValidityPeriod:"活动有效期",endTo20130831:"<b style='color:#333'>截止至2013年08月31日</b>",activityContext:"活动说明",activityContext1:"现在就邀请更多朋友一起免费使用TalkingData Game Analytics！受到您邀请的朋友即可获得TalkingData Game Analytics<b style='color:#F39800'>入门版的永久免费使用权！</b>好东西需要分享，还等什么？赶快让更多朋友一起来使用最棒的游戏统计分析系统吧！",inviteFriendGetMoreTimeForFree:"邀请朋友使用游戏版，获得永久免费使用权！"},Main:{tendcloudCopyright:"Copyright © 2012 TalkingData.net &nbsp;京ICP备12005794号",userAgreement:"用户协议",termsOfService:"服务条款",serviceTerm1:"使用TalkingData数据统计分析服务的个人和公司应保证提供真实的注册信息，确保正确性和完整性，并在信息变更时及时更新相关内容。TlakingData不对因信息不属实而造成的任何损失承担责任。",serviceTerm2:"请妥善保管好您的账户信息，TalkingData不对因账户信息遗失或泄露而造成的损失承担责任。",serviceTerm3:"TalkingData数据统计和分析平台保留随时变更平台所提供服务的权利，不保证提供的免费统计分析服务不会中断，对所提供服务的实时性、安全性、准确性不作绝对保证。",serviceTerm4:" TalkingData保留系统维护、硬件更新、系统升级的权利，并可能因以上原因造成服务的短时间暂停，不对因服务中断、停止而造成的任何损失承担任何责任。",serviceTerm5:"TalkingData会在服务变更和异常时尽量通知到您，但保留在未进行通知的情况下中断服务的权利。",serviceTerm6:" TalkingData与您共同所有您的账户中的全部信息。",serviceTerm7:"因您违反了有关法律、法规或本协议规定中的任何条款而对TalkingData或任何第三方造成的损失，您同意承担由此造成的一切损害赔偿责任。",serviceTerm8:"TalkingData保留随时变更以上协议的权利，您同意接受任何合法的变更条款。",serviceTerm9:" 您确认使用TalkingData服务，即表示同意以上内容，并同意对使用TalkingData服务可能存在的其他潜在风险自行承担后果。",price:"价格",contactUs:"联络我们",indexPage:"首页"},Menu:{},Select:{filter:"筛选",noFilter:"不筛选"},TopBanner:{}}),define("nls/zh_cn/revenue",{IncomeData:{incomeMoney:"收入金额",rechargeableTimes:"充值次数",incomeNumYuan:"收入金额(元)",incomeNum:"收入金额",rechargeablePeopleNumber:"充值人数",payLevel:"付费等级",payPeopleCount:"付费人数",rechargeablePersonTime:"充值人次",regionIncome:"各地区收入",channelIncome:"各渠道收入",sexIncome:"各性别收入",ageIncome:"各年龄段收入"},PayHabit:{rechargeableType:"充值方式",consumerPackingTypes:"消费包类型",rechargeableFrequencyLimit:"充值频次和额度",weeklyRechargeableTimes:"每周充值次数",monthlyRechargeableTimes:"每月充值次数",weeklyRechargeableLimit:"每周充值额度",monthlyRechargeableLimit:"每月充值额度",weekRechargeableTimes:"周充值次数",monthRechargeableTimes:"月充值次数",weekRechargeableLimit:"周充值额度",monthRechargeableLimit:"月充值额度",rechargeableInterval:"充值间隔"},NewPlayerValue:{newPlayerValue:"新玩家价值",newPlayerRevenueContribution:"新玩家收入贡献",days7AvgContribution:"7日内平均贡献",days14AvgContribution:"14日内平均贡献",days30AvgContribution:"30日内平均贡献",locationNewPlayerValue:"各地区新玩家价值",partnerNewPlayerValue:"分渠道新玩家价值",sexNewPlayerValue:"分性别付费渗透",ageNewPlayerValue:"各年龄段付费渗透",days7Contribution:"7日贡献",days14Contribution:"14日贡献",days30Contribution:"30日贡献"},PayPermeate:{payRate:"付费率",weeklyPayRate:"周付费率",monthlyPayRate:"月付费率",regionPayPermeate:"各地区付费渗透",channelPayPermeate:"各渠道付费渗透",sexPayPermeate:"各性别付费渗透",agePayPermeate:"各年龄付费渗透"}}),define("nls/zh_cn/summary",{Summary:{thiryDaysRetainTate:"30日留存率",sevenDaysRetainRate:"7日留存率",morrowRetainRate:"次日留存率",playerRetain:"玩家留存",newPlayer:"新玩家",keyIndicator:"关键指标",onlineTrend:"在线趋势",avgEveryPlayerGaming:"平均每玩家每日游戏",minute:"分钟",newChargePlayer:"新增付费玩家",oldChargePlayer:"老付费玩家"}}),define("nls/zh_cn/virtualEconomy",{ConsumeAnalysis:{noDataToCompare:"没有可比较的数据",cannotAdd:"不可以再继续添加了～",pleaseSelect:"请选择",pleaseSelectAgain:"该值已存在，请重新选择～",cannotDelete:"不能再删除了～",consumptionNumber:"消费次数",Purchases:"消费额度",categorySalesQuantityFSTS:"各品类销售数量与收入比重",classifyType:"分类方式",oneleveClassify:"消费点类别",allitems:"所有消费点",levelConsumerPreferences:"各类等级消费物喜好",propsPurchase:"购买道具",quantity:"数量"},ConsumePoint:{groupbyLevel:"按等级分组",groupbyTollgate:"按关卡分组",byCategory:"按类别",byConsumePoint:"按消费点",topItems:"热门物品",quantityPurchase:"购买数量",quantityConsume:"消耗数量",levelTollgate:"等级和关卡"},Management:{enterTypeName:"请输入类别名称！",thisNameExisted:"这个名字已被占用啦～",programWrong:"程序出错啦！错误代码：",consumePointCategory:"消费点类型",category:"类别",view:"查看",setConsumePointCategory:"设置消费点类别",addNewCategory:"增加新类别",affirm:"确认"},VirtualCoin:{devideTollgateCosume:"分关卡虚拟币消耗",dummyCoinPurchaseConsume:"虚拟币购入和消耗",dummyCoinPurchase:"虚拟币购入",dummyCoinConsume:"虚拟币消耗",accumulativeRetainDummyCoin:"累计留存虚拟币",accumulativeRetain:"累计留存",levelDummyCoinConsume:"各等级虚拟币消耗",tollgateDummyCoinConsume:"分关卡虚拟消耗",propsDummyConsume:"分道具虚拟消耗"}}),define("nls/zh_cn/whale",{WhaleDetail:{userDoing:"用户进行",rechargeableInfo:"充值信息",consumeOverview:"消耗概览",rechargeable:"充值",dummyCoinExpense:"虚拟币消费",quantityExpense:"消费数量",actionRecord:"行为记录",loginInTime:"登录时间",loginOutTime:"退出时间",action:"行为",stay:"停留",accountNumberInfo:"帐号信息",year:"岁",accountNumberName:"帐号名称",sourceChannel:"来源渠道",language:"语言",rechargeDummyCoin:"充入虚拟币",thatTimeLevel:"当时等级",consumePointAlias:"消费点别名",lastLogin:"最后登录",firstRechargeable:"首次充值",rechargeableLimit:"充值金额",retainDummyCoin:"留存虚拟币"},WhaleUser:{currentLevel:"当前等级",cosumeSum:"消耗总额",accountNumber:"帐号",ranking:"排名",rechargeableUser:"充值用户",rechargeableLimit:"充值金额",newIncreasedDate:"新增日期"}}),define("nls/zh_cn/indicator",{DataIndicatorExplain:{explain:"数据指标说明"},newPlayerCode:[{key:"设备激活",value:"当日新增加的激活设备量。"},{key:"新增玩家",value:"当日新增加的玩家帐户数。"},{key:"玩家转化",value:"当日新增加的激活设备量中，目前已经具有玩家帐户的设备比例。单设备中多个帐号只计算一次成功转化。"}],newPlayerLocationCode:[{key:"新增玩家地区",value:"新增玩家帐号的地区分布情况。"}],newPlayerPartnerCode:[{key:"新增玩家渠道",value:"新增玩家帐号的渠道分布情况，每个玩家始终归入首次设备激活时的渠道。"}],newPlayerSexCode:[{key:"新增玩家性别",value:"新增玩家帐号的玩家性别情况，根据您的游戏中传入的性别确定玩家的性别。"}],newPlayerAgeCode:[{key:"新增玩家年龄",value:"新增玩家帐号的年龄分布情况，根据您传入的年龄确定玩家的年龄段。"}],newPlayerAccountCode:[{key:"新增玩家帐户类型",value:"新增玩家帐号的帐户类型分布情况。"}],dauCode:[{key:"DAU",value:"当日有开启过游戏的玩家数，其中当日新增玩家带来的活跃以区别的颜色显示。"},{key:"WAU",value:"当日的最近一周（含当日的倒推7日）活跃玩家，将进行过游戏的玩家按照帐户进行排重。"},{key:"MAU",value:"当日的最近一月（含当日的倒退30日）活跃玩家，将进行过游戏的玩家按照帐户进行排重。"},{key:"DAU/MAU",value:"DAU/MAU可体现玩家的总体粘度，衡量这30天内每日活跃玩家的交叉重合情况。此比例越趋近于1，代表月活跃中有更多玩家多日活跃；比例越趋近0，则代表大量玩家只在一日中活跃。当比例小于0.1时，游戏的自传播性将很差。DAU/MAU×30也用于大致衡量玩家平均每月活跃天数。"}],activePlayerPlayedDaysCode:[{key:"活跃玩家已玩天数",value:"所选时期的活跃玩家的活跃日期减新增日期的日数差（即其已进行游戏的天数）的分布情况。"}],activePlayerLevelCode:[{key:"活跃玩家等级",value:"所选时期每日活跃玩家的等级分布情况，由每日数据组成的时期趋势可观测等级的总体走势。"}],activePlayerLocationCode:[{key:"活跃玩家地区",value:"所选时期排重活跃玩家的地区分布情况。"}],activePlayerPartnerCode:[{key:"活跃玩家渠道",value:"所选时期排重活跃玩家的渠道分布情况，渠道按照其最初新增时的渠道确定。"}],activePlayerSexCode:[{key:"活跃玩家性别",value:"所选时期排重活跃玩家的性别情况。"}],activePlayerAgeCode:[{key:"活跃玩家年龄",value:"所选时期排重活跃玩家的年龄分布情况。"}],playerCustomRetentionCustomRetain:[{key:"自定义留存",value:"选择好一个时期的玩家样本群，并定义好玩家使用中被计为留存的条件，将以样本群来计算之后的一段时期内的自定留存数据。留存行为可支持选择不同的游戏次数来抽取数据，这代表不同粘度玩家的留存情况，通过变换条件抽取数据来进行对比分析。"}],retainedUserAnallyticCode:[{key:"留存用户分析",value:"圈定时期内符合次日/7日/30日留存条件的新玩家，根据其新增日的使用行为（等级、游戏次数、是否付费等）来进行分布，可有效的分析新增日行为与留存的相关性。"}],chargeConvertionCode:[{key:"新增付费玩家",value:"当日新增加的充值玩家。"},{key:"累计付费玩家",value:"截至当日，累计的充过值的玩家数。"},{key:"总体付费率",value:"截至当日，累计付费玩家占累计总玩家的比例（累计付费玩家/累计玩家帐户）。"}],newPlayerChargeCode:[{key:"首日付费率",value:"所选时期的新增玩家中，在新增当日即进行充值的玩家数和其占比。"},{key:"首周付费率",value:"所选时期的新增玩家中，在新增后的7日内进行了充值的玩家数和其占比。"},{key:"首月付费率",value:"所选时期的新增玩家中，在新增后的30日内进行了充值的玩家数和其占比。"}],playerFirstBuyPeriodCode:[{key:"游戏天数",value:"所选时期内的新增付费玩家，按照其已经玩游戏的天数（首付日期-新增日期）进行分布。"},{key:"累计游戏时长",value:"所选时期内，玩家首次付费时在游戏中累计的游戏时长分布情况。"}],playerFirstBuyLevelCode:[{key:"玩家首付等级",value:"所选时期内，玩家首次付费时的等级分布情况。"}],churnedPerDayCode:[{key:"每日流失",value:"到某日为止，玩家连续7/14/30天没有再玩过游戏，将被视为一个流失。"},{key:"每日回流",value:"流失玩家在某日再次进行游戏，将视为当日的一个回流。回流玩家可用于沉默玩家唤醒活动后的效果评估。"}],churnedPlayerAnalysisCode:[{key:"流失用户分析",value:"圈定时期内符合7/14/30日流失条件的玩家，按照其流失前等级、已游戏天数、付费情况等条件来进行分布，可有效分析流失群体的特征，找出原因优化游戏。"}],playerLostFunnelLossFunnel:[{key:"流失漏斗",value:"选择某时期的新增或活跃玩家形成样本群，分析他们在之后的一段期间后是否已经流失。图表中给出的数字为每个期间还暂存的玩家数量，其余部分即为流失。本图表中计算流失的条件是自某日起至当前时间，玩家再未有过任何游戏行为。"}],playFrequencyCode:[{key:"游戏频次",value:"指玩家在一定期间中进行游戏的频繁度，将按照频度的不同将玩家分入不同的分布区间。报表中按照您所选日期自动扩充完整自然周/月来计算周和月的频次，跨多个周/月的数据查询会先计算单个周/月的分布数据，再组合各个区间的数据后集中进行展示。"},{key:"月游戏天数",value:"玩家在一个自然月中活跃日数的分布情况。"},{key:"周游戏天数",value:"玩家在一个自然周中活跃日数的分布情况。"},{key:"周游戏次数",value:"玩家在一个自然周中游戏次数的分布情况。"},{key:"日游戏次数",value:"玩家在一日中游戏次数的分布情况。"}],avgTimeAndTimeCode:[{key:"每日",value:"当日活跃玩家平均进行游戏的时长（当日总时长/日活跃）和平均每玩家的游戏次数（游戏次数/日玩家数）。"},{key:"每周",value:"某自然周内活跃玩家在该周中平均进行游戏的时长（周总时长/周排重活跃）和平均每玩家一周内的游戏次数（游戏次数/周排重玩家数）。"},{key:"每月",value:"某自然月内活跃玩家在该月中平均进行游戏的时长（约总时长/约排重活跃）和平均每玩家一月内的游戏次数（游戏次数/月排重玩家数）。"}],playTimeCode:[{key:"游戏时长",value:"指玩家在游戏内的游戏时长，按照不同时长将玩家分入不同的分布区间。对周使用时长将按照您所选日期自动扩充完整自然周来计算单用户时长，跨多周的查询会先计算单周的分布数据，再组合各个区间的数据后集中进行展示。"},{key:"周游戏时长",value:"玩家在一个自然周中玩游戏总时长的分布情况。"},{key:"单日游戏时长",value:"玩家在一日中玩游戏总时长的分布情况。"},{key:"单次游戏时长",value:"玩家在一日中每次玩游戏的时长分布情况。"}],playTimesDistributeCode:[{key:"游戏时段",value:"所选时期，各小时段中全部玩家的游戏次数分布情况。"}],deviceModelCode:[{key:"机型",value:"所选玩家的机型分布情况。"}],deviceOSCode:[{key:"操作系统",value:"所选玩家的设备操作系统分布情况。"}],deviceResolutionCode:[{key:"分辨率",value:"所选玩家的分辨率分布情况。"}],deviceCarrierCode:[{key:"运营商",value:"所选玩家所用运营商的分布情况。"}],deviceNetworkCode:[{key:"联网方式分布",value:"玩家每次进行游戏时的联网方式分布情况。其中离线代表玩家在终端打开游戏，但未能联网进行游戏的情况。"}],concurrentGameUser:[{key:"在线玩家",value:"在线玩家中会实时刷新最近5分钟在游戏中的在线玩家数据，每秒钟都会计算最实时的在线数据以保证准确性。在左侧仪表中显示的即为当前时刻在线数据，而右侧图表展示了今日和昨日的在线走势，通过曲线的对比可以明显观测到今日较之前的变化幅度。"}],recentGamePlayers:[{key:"近期游戏者",value:"近期游戏者是从最近10分钟内的玩家中随机抽取的游戏者，还原其游戏时的全貌，分析人员可以通过这种随机取样来从微观层面观察每个玩家的详细行为，来了解玩家、挖掘特征并优化游戏。"}],concurrentDailyPlayers:[{key:"ACU",value:"指平均在线玩家数。以每5分钟为一个考察时刻点抽取在线玩家，全日算数平均求得当日ACU。"},{key:"PCU",value:"指峰值在线玩家数。通过秒级别的实时抽取当时在线玩家数据，取当日最大值时刻点的数据。PCU的观测同时可用于限期限时任务时的效果评估。"},{key:"ACU/PCU",value:"通常称为在线平高比，比值越大则每日在线越平稳，玩家活跃时间更长，游戏服务器也更有效率；而极低的平高比则意味着玩家集中上线，但总体活跃性并不强。某些限时活动可能会拉低平高比，但属正常情况。"}],incomeTrendCode:[{key:"收入金额",value:"所选时期每日玩家充值的货币总额。"},{key:"充值次数",value:"所选时期每日玩家进行充值的总次数。"},{key:"充值人数",value:"当日进行充值的玩家帐户数。充值人数SUM是所选时期充值玩家的排重数目，不是简单加和。"}],chargeLevelCode:[{key:"收入金额",value:"所选时期的充值总金额根据玩家充值时的等级进行分布。"},{key:"充值人次",value:"所选时期每次充值根据玩家充值时的等级进行分布。"}],incomeLocationCode:[{key:"各地区收入",value:"所选期间，各个地区的玩家充值金额的分布情况。"}],incomePartnerCode:[{key:"各渠道收入",value:"所选期间，各个渠道来源的玩家充值金额的分布情况。"}],incomeSexCode:[{key:"各性别收入",value:"不同性别玩家的充值总金额情况。"}],incomeAgeCode:[{key:"各年龄段收入",value:"不同年龄段玩家的充值总金额情况。"}],payRateCode:[{key:"日付费率",value:"当日进行付费的玩家占当日活跃玩家的比例。"},{key:"周付费率",value:"某自然周中进行付费的玩家（排重）占该自然周活跃玩家的比例。"},{key:"月付费率",value:"某自然月中进行付费的玩家（排重）占该自然月活跃玩家的比例。"}],ARPUCode:[{key:"ARPU(日)",value:"当日每活跃玩家平均收入（收入/活跃玩家）。"},{key:"ARPU(月)",value:"某自然月每活跃玩家平均收入（收入/月排重活跃玩家）。"},{key:"ARPPU(日)",value:"当日每付费玩家平均收入（收入/付费玩家数）。"},{key:"ARPPU(月)",value:"某自然月每付费玩家平均收入（收入/月排重付费玩家数）。"}],locationCode:[{key:"日均付费率",value:"所选时期，各地区玩家的每日付费率的平均值。"},{key:"日均ARPU",value:"所选时期，各地区玩家的每日ARPU的平均值。"},{key:"日均ARPPU",value:"所选时期，各地区玩家的每日ARPPU的平均值。"}],partnerCode:[{key:"日均付费率",value:"所选时期，各渠道来源玩家的每日付费率的平均值。"},{key:"日均ARPU",value:"所选时期，各渠道来源玩家的每日ARPU的平均值。"},{key:"日均ARPPU",value:"所选时期，各渠道来源玩家的每日ARPPU的平均值。"}],sexGroupCode:[{key:"日均付费率",value:"不同性别玩家的平均日付费率情况。"},{key:"日均ARPU",value:"不同性别玩家的平均日ARPPU。"},{key:"日均ARPPU",value:"不同性别玩家的平均日ARPPPU。"}],ageGroupCode:[{key:"日均付费率",value:"不同年龄段玩家的平均日付费率情况。"},{key:"日均ARPU",value:"不同年龄段玩家的平均日ARPPU。"},{key:"日均ARPPU",value:"不同年龄段玩家的平均日ARPPPU。"}],chargeWayCode:[{key:"收入金额",value:"时期中各类付费方式（支付宝、神州付等）所带来的收入。"},{key:"充值人次",value:"采用各类付费方式的玩家充值次数。"}],consumePackageCode:[{key:"收入金额",value:"时期中各种虚拟消费包所带来的收入。消费包类型由您的客户端传入，如：6元30钻石礼包。"},{key:"充值人次",value:"玩家购买各类消费包的次数。"}],revenuePlayFrequencyCode:[{key:"充值频次和额度",value:"指玩家在一定期间中充值的频繁度或总消费额度，将按照频度或额度将玩家分入不同的分布区间，其中未付费也会作为一种频度给出。报表中按照您所选日期自动扩充完整自然周/月来计算周和月的频次，跨多个周/月的数据查询会先计算单个周/月的分布数据，再组合各个区间的数据后集中进行展示。"},{key:"每周充值次数",value:"玩家在一个自然周中充值次数的分布情况。"},{key:"每月充值次数",value:"玩家在一个自然月中充值次数的分布情况。"},{key:"每周充值额度",value:"玩家在一个自然周中总充值金额的分布情况。"},{key:"每月充值额度",value:"玩家在一个自然月中总充值金额的分布情况。"}],chargeIntervalCode:[{key:"充值间隔",value:"所选时期玩家每次的充值，距其上次充值的间隔期间分布。"}],purchaseConsumeCode:[{key:"虚拟币购入",value:"时期内每日玩家充值所购入的虚拟币数量。"},{key:"虚拟币赠予",value:"时期内每日玩家所获得赠予的虚拟币数量。"},{key:"虚拟币消耗",value:"时期内每日玩家在全部消费点中所消耗掉的虚拟币数量。"},{key:"累计留存虚拟币",value:"截至某日，游戏中全部玩家积累的未消耗掉的虚拟币数量（累计购入-累计消耗）。"}],consumeLevelCode:[{key:"各等级虚拟币消耗",value:"所选期间，玩家在各个等级时所消耗掉的虚拟币数量。"}],consumeMissionCode:[{key:"分关卡虚拟消耗",value:"所选期间，玩家在各任务或关卡中消耗的虚拟币数量。如玩家在消费时同时进行多个任务，消费会计入玩家最后开始进行的任务。"}],consumeItemCode:[{key:"分道具虚拟消耗",value:"所选期间，各个消费点所带来的虚拟币消耗量。"}],saleNumsAndIncomesCode:[{key:"各品类销售数量与收入比重",value:"图表用于对比各个消费点（或各个消费点类型）占全部消费点的销量比重和虚拟币消耗比重，可观察到哪些消费点（或道具类别）是收入的主力贡献者，而哪些则是带动销量的物品。那些销量比重大，但收入贡献少的商品可用于活动促销，刺激玩家更早的养成付费习惯；而那些收入贡献较高的物品类型则是持续挖掘更多付费点的最佳类别。"}],consumeHabbitAnalasisCode:[{key:"各等级消费物品喜好",value:"用于直观对比玩家在不同等级时对几种不同消费点（或几种不同道具类型）的消费情况，最多同时对比5种消费点。此图表可帮助快速找出哪些消费点是玩家前期主要需要的，而哪些是其成长期之后需要的，帮助分析道具需求原因，了解消费点差异。"}],virtualEconomyConsumePointtopItems:[{key:"物品名称",value:"游戏中某个消费点的ID，根据客户端传入的消费点ID来确定，可以在消费点管理中修改其显示名。"},{key:"购买数量",value:"所选时期某消费点的购买总次数。"},{key:"虚拟币总值",value:"所选时期玩家在某消费点上花费的总虚拟币数值。"},{key:"消耗数量",value:"所选时期各个消费道具被用掉（如装备损毁、药瓶被喝掉）的总次数。"},{key:"按日趋势",value:"以每日数据的形式展示所选时期对应指标的走势情况。"},{key:"等级",value:"所选时期各消费点的购买、消耗的等级分布情况。"},{key:"关卡",value:"所选时期各消费点的购买、消耗的任务关卡分布情况，如玩家同一时间进行多个任务，将以其最后接受的任务记录购买和消耗。"}],virtualEconomyConsumePointManage:[{key:"名称",value:"游戏中某个消费点的ID，根据客户端传入的消费点ID来确定。"},{key:"设置别名",value:"为每个消费点设置更易识别的显示名。"},{key:"消费点类型",value:"为每个消费点分配类型，在一些报表中可以按类型来查询数据。允许您自定义的类型。"},{key:"操作",value:"因游戏的不断改版中可能会有一些消费点被去掉，隐藏可使其不显示在数据报表中，使查询更高效。此操作不会造成数据清除，随时可以再将其显示于报表。"}],whaleWhaleUserRechargeableUser:[{key:"Top 500 充值用户",value:"调节不同的选定时期，可依照所选时期中玩家充值的货币额度来筛查充值最多的500名玩家。"},{key:"排名",value:"根据玩家充值的货币额度来确定的付费排名。"},{key:"帐号",value:"鲸鱼玩家的游戏帐户。"},{key:"充值金额",value:"所选时期中玩家充值的现金额度。"},{key:"充入虚拟币",value:"所选时期中玩家充值获得的总虚拟币数额。"},{key:"消耗总额",value:"所选时期中玩家在消费点中的全部虚拟币消耗。"},{key:"新增日期",value:"玩家首次进行游戏的日期。"},{key:"当前等级",value:"玩家现在的最终等级。"}],whaleWhaleDetailAccountNumberInfo:[{key:"ID",value:"游戏客户端中传入的玩家唯一识别ID。"},{key:"帐户名称",value:"游戏客户端中传入的玩家的显性帐户名。"},{key:"来源渠道",value:"玩家的来源渠道，由其首次游戏时的渠道而定，终生不变。"},{key:"地区",value:"玩家的所属地区。"},{key:"设备",value:"玩家所用的机型和操作系统版本。"},{key:"语言",value:"玩家设备所选择的语言。"},{key:"年龄|性别",value:"游戏客户端中传入的玩家年龄及性别。"}],whaleWhaleDetailRechargeableInfo:[{key:"新增日期",value:"玩家首次游戏的日期。"},{key:"最后登录",value:"玩家最后一次进行游戏的日期。"},{key:"首次充值",value:"玩家在游戏中首次进行充值的日期。"},{key:"充值次数",value:"目前，玩家总的充值次数。"},{key:"充值金额",value:"目前，玩家总的充值额度。"},{key:"虚拟币总值",value:"目前，玩家在游戏中充值获得的总虚拟币数量。"},{key:"留存虚拟币",value:"当前玩家帐户中充值后还没消费的虚拟币数量。"}],whaleWhaleDetailConsumeOverview:[{key:"充值",value:"所选时期中该玩家所有的充值记录。"},{key:"虚拟币消耗",value:"所选时期中该玩家所有的虚拟币花费记录。"},{key:"道具消耗",value:"所选时期中该玩家所有的物品消耗（如喝掉了力量药剂）记录。"}],whaleWhaleDetailActionRecord:[{key:"行为记录",value:"所选时期中玩家每天的游戏详细行为情况，以天的方式组织游戏行为，每次游戏行为均可展开查看全部游戏内发生事件，这将对您从微观角度来了解玩家有很大帮助。"}],partnerExtentionChannelDataamount:[{key:"渠道名称",value:"创建链接渠道时填写的渠道名称。"},{key:"安装激活",value:"所选时期新增加的激活设备量。"},{key:"新增玩家",value:"所选时期新增加的玩家帐户数。"},{key:"注册转化率",value:"所选时期新增加的激活设备量中，目前已经具有玩家帐户的设备比例。单设备中多个帐号只计算一次成功转化。"},{key:"渠道比重",value:"所选时期，某渠道新增玩家占游戏总体新增玩家的比例。"},{key:"日活跃",value:"所选时期每日活跃玩家数（率）的平均值。"},{key:"收入",value:"所选时期玩家充值的货币总额。"},{key:"日付费人数",value:"所选时期渠道每天付费玩家数的平均值。"},{key:"ARPU(日)",value:"所选时期每日的平均每玩家收入（收入/活跃人数）平均值。"}],partnerExtentionChannelDataquality:[{key:"渠道名称",value:"创建链接渠道时填写的渠道名称。"},{key:"平均日活跃(%)",value:"所选时期每日活跃玩家数（率）的平均值。"},{key:"一日玩家比例",value:"所选时期新增的玩家中，只在新增当天进行游戏，之后至今再未玩过游戏的玩家所占比例。"},{key:"平均次日留存率",value:"所选时期每日的次日留存率的平均值。"},{key:"首周付费比例",value:"所选时期的新增玩家中，在新增后7天内进行了充值的玩家所占比例。"},{key:"安装激活",value:"所选时期新增加的激活设备量。"},{key:"新增玩家",value:"所选时期新增加的玩家帐户数。"},{key:"收入",value:"所选时期玩家充值的货币总额。"},{key:"日付费人数",value:"所选时期渠道每天付费玩家数的平均值。"},{key:"ARPU(日)",value:"所选时期每日的平均每玩家收入（收入/活跃人数）平均值。"}],partnerExtentionChannelDataincome:[{key:"渠道名称",value:"创建链接渠道时填写的渠道名称。"},{key:"收入",value:"所选时期玩家充值的货币总额。"},{key:"日均付费人数",value:"所选时期渠道每天付费玩家数的平均值。"},{key:"日均付费率",value:"所选时期每日的付费率（付费人数/活跃人数）平均值。"},{key:"日均ARPU",value:"所选时期每日的平均每玩家收入（收入/活跃人数）平均值。"},{key:"日均ARPPU",value:"所选时期每日的平均每付费玩家收入（收入/付费人数）平均值。"},{key:"安装激活",value:"所选时期新增加的激活设备量。"},{key:"新增玩家",value:"所选时期新增加的玩家帐户数。"},{key:"日活跃",value:"所选时期每日活跃玩家数（率）的平均值。"}],partnerExtentionPartnerManagementChannelList:[{key:"渠道(ID)",value:"游戏客户端中渠道字段中传入的ID。"},{key:"别名",value:"为渠道ID定义一个更容易识别的显示名。"},{key:"登记日期",value:"最早发现到这个渠道ID的日期。"},{key:"合并渠道",value:"合并几个渠道的数据，报表中将直接呈现合并后的整体数据。"},{key:"隐藏渠道",value:"隐藏掉那些现在已经不再推广，新增和活跃数据很低的渠道，以使渠道数据表中更容易查阅数据。"},{key:"渠道查询账户",value:"为推广渠道开启一个登录后可查阅设备激活、新增玩家、活跃玩家数三个指标的查量后台。"}],customEventEventDataEventOverview:[{key:"事件显示名",value:"在事件管理中为EventID设置的便于识别的显示名。"},{key:"事件数",value:"所选时期该自定事件被触发的总次数。"},{key:"每启动发生次数",value:"玩家每次游戏会发生某事件的次数（事件数/游戏次数）。"}],eventManagementTableTitle:[{key:"事件名(Event ID)",value:"游戏客户端中传入的区分每个事件的ID。"},{key:"显示名",value:"为Event ID设定便于识别的显示名。"},{key:"登记日期",value:"最早发现某个Event ID的日期"},{key:"隐藏事件",value:"隐藏掉那些目前已不常用的事件，该事件将不再显示在数据表中，提升查阅数据的效率。"},{key:"清除",value:"清除掉一个EventID，此事件的历史数据都会清空，谨慎操作。以后同名EventID仍可以使用，再次发现后将重新登记并重新计数。"},{key:"停用",value:"停用掉一个EventID，平台将不再接收停用期中该事件的数据，但历史数据依然保留。您可随时再启用这个事件。"}],eventTrendCode:[{key:"事件数",value:"所选时期某事件每日的发生次数。"},{key:"每活跃用户发生",value:"每位活跃玩家会发生该事件的次数（事件数/日活跃）。"},{key:"每启动发生",value:"玩家每次游戏会发生某事件的次数（事件数/游戏次数）。"}],customEventEventDetailParameters:[{key:"参数",value:"沿着事件发生时的一些属性来展开数据。"}],playTasksNewHandConversionRate:[{key:"新手引导转化率",value:"通过设置面板设定游戏中连续的新手任务（任务需已在客户端进行集成），平台可按任务顺序层层过滤玩家数，形成玩家在连续的新手任务中的转化率。"}],playTasksTaskTollgateDetail:[{key:"任务ID",value:"游戏客户端传入的游戏ID。"},{key:"别名",value:"为便于识别，为游戏ID所定义的显示名。"},{key:"类型",value:"任务所属的类别，由您在任务和关卡管理中进行设定。"},{key:"进入次数",value:"所选时期玩家接受（进入）任务或关卡的次数。"},{key:"平均完成时间",value:"平均每次完成某项任务所消耗的游戏内时长。"},{key:"失败次数",value:"所选时期玩家进行某任务的失败总次数。"},{key:"失败率",value:"所选时期玩家进行某任务会失败的比例（失败次数/进入次数）。"},{key:"失败原因",value:"根据玩家进行某任务时的任务失败原因进行分布。"},{key:"玩家等级",value:"玩家进入某任务时的等级分布情况。"}],playTasksSetUpTaskTollgateDetail:[{key:"任务ID",value:"游戏客户端中所传入的任务ID。"},{key:"任务别名",value:"为每个任务ID添加更容易识别的显性名。"},{key:"任务类型",value:"为每个任务分配类型，在一些报表中可以按类型来查询数据。允许您自定义的类型。"},{key:"操作",value:"注销掉某个任务ID，清除掉这个任务当前的全部数据。在之后发现此任务ID仍可正常接收数据。"}],levelLevelDetailedAboutGrade:[{key:"关键等级",value:"通过设置面板设定游戏中的一些关键性的特征等级（例如20级前是新手期，可定义20是一个关键等级），平台可按这些等级来划分一些等级区段，并计算玩家完成这个区段的平均游戏内耗时和在这个区段投入的总金额。可用于有效分析游戏设计与玩家真实表现是否吻合。"}],levelLevelDetailedGradeDetail:[{key:"等级",value:"指某个具体等级"},{key:"升级时长",value:"从上个等级到这个等级玩家在游戏中所消耗的时间。"},{key:"等级停滞率",value:"当一个活跃玩家在某个等级超过3个自然日没有任何等级提升，会记为这个等级的一次停滞。而停滞数占此等级活跃玩家的比例为停滞率。"},{key:"付费次数",value:"所选时期中玩家在某个等级时进行充值的总次数。"},{key:"付费金额",value:"所选时期中玩家在某个等级时充值的总货币金额。"},{key:"升级时长",value:"升级时长中将以各个时长区间形式给出分布图，升级指从上一等级升至目标等级。"},{key:"按日趋势",value:"按日趋势中以此等级每日的数据表现呈现出数据趋势。"}],levelDistributionOfPlayerCode:[{key:"玩家等级分布",value:"所选期间中排重活跃玩家的等级分布情况，按每玩家在期间中最终等级计算等级。可切换时间来单日查询等级分布，通过连续几日的对比来观测活跃玩家等级变迁情况。"}],levelDistributionOfPlayTimesCode:[{key:"游戏次数等级分布",value:"所选期间中各等级中玩家游戏次数情况。"}],levelOfLossPlayerCode:[{key:"7日未登录玩家",value:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续7日未游戏）的最终停留等级分布。"},{key:"14日未登录玩家",value:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续14日未游戏）的最终停留等级分布。"},{key:"30日未登录玩家",value:"所选期间中每日的新增7日流失用户（到该日止玩家刚好连续30日未游戏）的最终停留等级分布。"}],levelOfNewPlayerCode:[{key:"首日等级",value:"所选期间的新增玩家，在其新增当日中最终玩到的等级分布情况。"},{key:"首周等级",value:"所选期间的新增玩家，在其新增7日后玩到的等级分布情况。"},{key:"14日等级",value:"所选期间的新增玩家，在其新增14日后玩到的等级分布情况。"}],levelChangeIn7DaysCode:[{key:"新玩家7日内等级变迁",value:"所选期间的新增玩家在新增后的7日内每日的等级进展情况，可用于分析同一批新增玩家中，浅中重度玩家的不同比例。"}],summaryGameOverview:[{key:"设备激活",value:"所选时期内激活（打开过游戏并可连接网络）的唯一设备量。"},{key:"玩家帐户",value:"所选时期内新增加的玩家帐户数量。"},{key:"付费玩家",value:"所选时期内进行过充值的玩家帐户数，占时期内活跃玩家的比例为付费率。"},{key:"收入",value:"所选时期内玩家为获取虚拟币而支付的货币总额。"}],summarySummaryOnlineTrend:[{key:"设备激活",value:"指安装了游戏客户端并开启游戏传过任意数据的设备，每台设备只计算一次。"},{key:"玩家数",value:"游戏中玩家的唯一识别ID的数量。"},{key:"ACU",value:"每日，游戏的平均在线玩家数。"},{key:"Avg ACU",value:"所选时期的ACU算数平均值。"},{key:"PCU",value:"每日，游戏的峰值在线玩家数。"},{key:"实时在线",value:"此时正在进行游戏的玩家数量。"}],keyCode:[{key:"设备激活",value:"当日新增加的激活设备量。"},{key:"新玩家",value:"当日新增加的玩家帐户数。"},{key:"活跃玩家",value:"当日有开启过游戏的玩家数，其中当日新增玩家带来的活跃以区别的颜色显示。"},{key:"付费玩家",value:"当日中进行过充值的玩家数，其中当日首次充值的新增付费玩家会以区别的颜色显示。"},{key:"收入",value:"当日玩家充值的货币总额。"}],chargeCode:[{key:"日付费率",value:"当日内付费玩家数占当日活跃玩家数的比例。"},{key:"日ARPU",value:"当日每活跃玩家平均收入（收入/活跃玩家）。"},{key:"日ARPPU",value:"当日每付费玩家平均收入（收入/付费玩家数）。"}],retentionCode:[{key:"次日留存率",value:"某日新增的玩家中，在下一日中还进行了游戏的玩家的比例。"},{key:"7日留存率",value:"某日新增的玩家中，在该日后的第7日中还进行了游戏的玩家比例。"},{key:"30日留存率",value:"某日新增的玩家中，在该日后的第30日中还进行了游戏的玩家比例。"}],playTimeNumsCode:[{key:"平均游戏时长",value:"当日，平均每玩家进行游戏的时长（当日游戏总时长/日活跃）"},{key:"平均游戏次数",value:"当日，平均每位玩家进行游戏的次数（当日游戏总次数/活跃用户）"}],revenueNewPlayerValueCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],revenueNewPlayerValueLocationCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],revenueNewPlayerValuePartnerCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],revenueNewPlayerValueSexCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],revenueNewPlayerValueAgeCode:[{key:"7日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的7日内（新增日和之后的7日）为游戏内带来的收入。"},{key:"14日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的14日内（新增日和之后的14日）为游戏内带来的收入。"},{key:"30日内平均贡献",value:"某日新增玩家（账户）中，平均每玩家在接下来的30日内（新增日和之后的30日）为游戏内带来的收入。"}],productCenterIndicator:[{key:"设备激活",value:"指安装了游戏客户端并开启游戏可连接网络的设备，每台设备只计算一次。"},{key:"玩家",value:"游戏中玩家的唯一识别ID（游戏帐户）的数量。"},{key:"游戏次数",value:"玩家进行游戏的总次数，单个玩家帐户从打开游戏至退出游戏的全过程记为一次游戏。"},{key:"收入",value:"玩家为获取虚拟币而支付的货币总额。"}]}),define("nls/zh_cn/gameI18N",["nls/zh_cn/gameCommon","nls/zh_cn/concurrent","nls/zh_cn/customEvent","nls/zh_cn/developer","nls/zh_cn/level","nls/zh_cn/partnerExtention","nls/zh_cn/permission","nls/zh_cn/play","nls/zh_cn/player","nls/zh_cn/product","nls/zh_cn/public","nls/zh_cn/revenue","nls/zh_cn/summary","nls/zh_cn/virtualEconomy","nls/zh_cn/whale","nls/zh_cn/indicator"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){return{GameCommon:e,Concurrent:t,CustomEvent:n,Developer:r,Level:i,PartnerExtention:s,Permission:o,Play:u,Player:a,Product:f,Public:l,Revenue:c,Summary:h,VirtualEconomy:p,Whale:d,Indicator:v}});